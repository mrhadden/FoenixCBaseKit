  Thu Dec  3 2020 22:25                                                Page 1


                     ***************************************
                     **      WDC 65C816 Macro Assembler   **
                     **                                   **
                     **     Version 3.49.1- Feb  6 2006    **
                     ***************************************

     1                        ;:ts=8
     2             00000001   R0	equ	1
     3             00000005   R1	equ	5
     4             00000009   R2	equ	9
     5             0000000D   R3	equ	13
     6                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxconsole.c",0
     7                        ;
     8                        ;#include "fxconsole.h"
     9                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxconsole.h",0
    10                        	.file	"G:\devtools\WDCTools\wdc\Tools\include\
                    string.h",0
    11                        	.line	134
    12                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxconsole.h",5
    13                        	.file	"G:\devtools\WDCTools\wdc\Tools\include\
                    stdlib.h",0
    14                        	.file	"G:\devtools\WDCTools\wdc\Tools\include\
                    stddef.h",0
    15                        	.line	88
    16                        	.file	"G:\devtools\WDCTools\wdc\Tools\include\
                    stdlib.h",43
    17                        	.stag	fake1_,32,1
    18                        	.member	quot,0,5,8,16
    19                        	.member	rem,16,5,8,16
    20                        	.eos
    21                        	.stag	fake2_,64,2
    22                        	.member	quot,0,7,8,32
    23                        	.member	rem,32,7,8,32
    24                        	.eos
    25                        	.stag	int_sqrt,32,3
    26                        	.member	sqrt,0,16,8,16
    27                        	.member	frac,16,16,8,16
    28                        	.eos
    29                        	.line	205
    30                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxconsole.h",6
    31                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxtypes.h",0
    32                        	.stag	_fx_bytebits,8,4
    33                        	.member	b7,0,14,17,1
    34                        	.member	b6,1,14,17,1
    35                        	.member	b5,2,14,17,1
    36                        	.member	b4,3,14,17,1
    37                        	.member	b3,4,14,17,1
    38                        	.member	b2,5,14,17,1
    39                        	.member	b1,6,14,17,1
    40                        	.member	b0,7,14,17,1
    41                        	.eos
    42                        	.stag	_fx_node,384,5
    43                        	.member	type,0,14,8,8
  Thu Dec  3 2020 22:25                                                Page 2


    44                        	.member	Reserved0,8,14,8,8
    45                        	.member	data,16,129,8,32
    46                        	.member	last,48,138,8,32,5
    47                        	.member	next,80,138,8,32,5
    48                        	.member	name,112,110,8,0,32
    49                        	.member	Reserved1,368,16,8,16
    50                        	.eos
    51                        	.stag	_fx_nodelist,96,6
    52                        	.member	listhead,0,138,8,32,5
    53                        	.member	listData,32,129,8,32
    54                        	.member	deallocator,64,641,8,32
    55                        	.eos
    56                        	.stag	_fx_queue,80,7
    57                        	.member	count,0,5,8,16
    58                        	.member	front,16,138,8,32,5
    59                        	.member	rear,48,138,8,32,5
    60                        	.eos
    61                        	.stag	fake8_,32,8
    62                        	.member	subsystem,0,14,8,8
    63                        	.member	level,8,14,8,8
    64                        	.member	error,16,16,8,16
    65                        	.eos
    66                        	.stag	_fx_process_signal,16,9
    67                        	.member	cbSize,0,16,8,16
    68                        	.eos
    69                        	.stag	_fx_semaphore,16,10
    70                        	.member	reserved,0,5,8,16
    71                        	.eos
    72                        	.stag	_fx_fileBlock,552,11
    73                        	.member	openCount,0,16,8,16
    74                        	.member	lockCount,16,16,8,16
    75                        	.member	dirty,32,14,8,8
    76                        	.member	fileBuffer,40,110,8,0,64
    77                        	.eos
    78                        	.stag	_fx_irq_data,48,12
    79                        	.member	line,0,5,8,16
    80                        	.member	keycode,16,142,8,32
    81                        	.eos
    82                        	.stag	_task,48,13
    83                        	.member	SPL,0,14,8,8
    84                        	.member	SPH,8,14,8,8
    85                        	.member	pstack,16,142,8,32
    86                        	.eos
    87                        	.stag	_task_stack,32,14
    88                        	.member	SS,0,142,8,32
    89                        	.eos
    90                        	.stag	int_regs,104,15
    91                        	.member	PB,0,14,8,8
    92                        	.member	PH,8,14,8,8
    93                        	.member	PL,16,14,8,8
    94                        	.member	PP,24,14,8,8
    95                        	.member	DB,32,14,8,8
    96                        	.member	DH,40,14,8,8
    97                        	.member	DL,48,14,8,8
    98                        	.member	AH,56,14,8,8
    99                        	.member	AL,64,14,8,8
   100                        	.member	XH,72,14,8,8
   101                        	.member	XL,80,14,8,8
  Thu Dec  3 2020 22:25                                                Page 3


   102                        	.member	YH,88,14,8,8
   103                        	.member	YL,96,14,8,8
   104                        	.eos
   105                        	.stag	_fx_eventMessage,304,16
   106                        	.member	src,0,18,8,32
   107                        	.member	dest,32,18,8,32
   108                        	.member	type,64,16,8,16
   109                        	.member	hwnd,80,129,8,32
   110                        	.member	pheap,112,129,8,32
   111                        	.member	msgTime,144,18,8,32
   112                        	.member	data,176,110,8,0,16
   113                        	.eos
   114                        	.stag	_fx_cmdMessage,304,17
   115                        	.member	src,0,18,8,32
   116                        	.member	dest,32,18,8,32
   117                        	.member	type,64,16,8,16
   118                        	.member	hwnd,80,129,8,32
   119                        	.member	pheap,112,129,8,32
   120                        	.member	msgTime,144,18,8,32
   121                        	.member	cmdCId,176,16,8,16
   122                        	.member	cmdMId,192,16,8,16
   123                        	.member	parameter1,208,18,8,32
   124                        	.member	parameter2,240,18,8,32
   125                        	.member	parameter3,272,18,8,32
   126                        	.eos
   127                        	.stag	_fx_console_ctl,448,18
   128                        	.member	maxCols,0,5,8,16
   129                        	.member	maxRows,16,5,8,16
   130                        	.member	curX,32,5,8,16
   131                        	.member	curY,48,5,8,16
   132                        	.member	fgColor,64,5,8,16
   133                        	.member	bgColor,80,5,8,16
   134                        	.member	mode,96,14,8,8
   135                        	.member	kbBuffer,104,101,8,0,16
   136                        	.member	screenBuffer,360,142,8,32
   137                        	.member	desktopMode,392,14,8,8
   138                        	.member	lastMouseButton,400,5,8,16
   139                        	.member	lastMouseX,416,5,8,16
   140                        	.member	lastMouseY,432,5,8,16
   141                        	.eos
   142                        	.stag	_fx_desktop_ctl,392,19
   143                        	.member	desktopMode,0,14,8,8
   144                        	.member	cursorCtl,8,5,8,16
   145                        	.member	cursorState,24,5,8,16
   146                        	.member	backgroundColor,40,5,8,16
   147                        	.member	foregroundColor,56,5,8,16
   148                        	.member	menuMode,72,5,8,16
   149                        	.member	lastMouseButton,88,5,8,16
   150                        	.member	lastMouseX,104,5,8,16
   151                        	.member	lastMouseY,120,5,8,16
   152                        	.member	currentDiskName,136,142,8,32
   153                        	.member	diskNodes,168,129,8,32
   154                        	.member	titleNodes,200,129,8,32
   155                        	.member	menuNodes,232,129,8,32
   156                        	.member	iconNodes,264,129,8,32
   157                        	.member	windowNodes,296,129,8,32
   158                        	.member	fontNodes,328,129,8,32
   159                        	.member	wndProc,360,138,8,32,6
  Thu Dec  3 2020 22:25                                                Page 4


   160                        	.eos
   161                        	.stag	_fx_process,800,20
   162                        	.member	cbSize,0,5,8,16
   163                        	.member	procId,16,18,8,32
   164                        	.member	parentId,48,18,8,32
   165                        	.member	ctx,80,129,8,32
   166                        	.member	userId,112,16,8,16
   167                        	.member	status,128,16,8,16
   168                        	.member	foregroundActive,144,14,8,8
   169                        	.member	tls,152,1121,8,32,8
   170                        	.member	commandLine,408,142,8,32
   171                        	.member	semaphores,440,138,8,32,6
   172                        	.member	fileHandles,472,138,8,32,6
   173                        	.member	pathList,504,138,8,32,6
   174                        	.member	resources,536,138,8,32,6
   175                        	.member	timerAware,568,14,8,8
   176                        	.member	timerTicks,576,112,8,0,2
   177                        	.member	timerTickCount,608,112,8,0,2
   178                        	.member	kernelError,640,10,8,32,8
   179                        	.member	consoleCtl,672,138,8,32,18
   180                        	.member	desktopCtl,704,138,8,32,19
   181                        	.member	execProc,736,641,8,32
   182                        	.member	startupArgs,768,129,8,32
   183                        	.eos
   184                        	.stag	_fxProcessMessage,112,21
   185                        	.member	src,0,18,8,32
   186                        	.member	dest,32,18,8,32
   187                        	.member	type,64,16,8,16
   188                        	.member	processInfo,80,138,8,32,20
   189                        	.eos
   190                        	.stag	_fx_property,384,22
   191                        	.member	name,0,110,8,0,16
   192                        	.member	value,128,110,8,0,32
   193                        	.eos
   194                        	.utag	_24bitPointer,32,23
   195                        	.member	address,0,142,11,32
   196                        	.member	bytes,0,110,11,0,4
   197                        	.eos
   198                        	.stag	_PointStruct,32,24
   199                        	.member	x,0,5,8,16
   200                        	.member	y,16,5,8,16
   201                        	.eos
   202                        	.stag	_RectStruct,64,25
   203                        	.member	x,0,5,8,16
   204                        	.member	y,16,5,8,16
   205                        	.member	width,32,5,8,16
   206                        	.member	height,48,5,8,16
   207                        	.eos
   208                        	.stag	_k_WindowClass,256,26
   209                        	.member	cbSize,0,16,8,16
   210                        	.member	style,16,16,8,16
   211                        	.member	pWndProc,32,654,8,32
   212                        	.member	hInstance,64,129,8,32
   213                        	.member	hIcon,96,129,8,32
   214                        	.member	hCursor,128,129,8,32
   215                        	.member	hbrBackground,160,129,8,32
   216                        	.member	lpszMenuName,192,142,8,32
   217                        	.member	lpszClassName,224,142,8,32
  Thu Dec  3 2020 22:25                                                Page 5


   218                        	.eos
   219                        	.stag	_ClickableRect,88,27
   220                        	.member	area,0,10,8,64,25
   221                        	.member	z,64,5,8,16
   222                        	.member	enabled,80,14,8,8
   223                        	.eos
   224                        	.stag	_NCClickableRect,88,28
   225                        	.member	area,0,10,8,64,25
   226                        	.member	msgType,64,16,8,16
   227                        	.member	enabled,80,14,8,8
   228                        	.eos
   229                        	.stag	_DragData,136,29
   230                        	.member	area,0,10,8,64,25
   231                        	.member	xoffset,64,5,8,16
   232                        	.member	yoffset,80,5,8,16
   233                        	.member	msgType,96,16,8,16
   234                        	.member	isDrag,112,14,8,8
   235                        	.member	canDrag,120,14,8,8
   236                        	.member	canDrop,128,14,8,8
   237                        	.eos
   238                        	.stag	_k_WindowStruct,2808,30
   239                        	.member	cbSize,0,16,8,16
   240                        	.member	style,16,18,8,32
   241                        	.member	win_id,48,5,8,16
   242                        	.member	win_x,64,5,8,16
   243                        	.member	win_y,80,5,8,16
   244                        	.member	win_width,96,5,8,16
   245                        	.member	win_height,112,5,8,16
   246                        	.member	wndRect,128,10,8,64,25
   247                        	.member	clientRect,192,10,8,64,25
   248                        	.member	nonclientGadgets,256,106,8,0,28,16
   249                        	.member	clickable,1664,129,8,32
   250                        	.member	win_title,1696,110,8,0,32
   251                        	.member	Reserved0,1952,16,8,16
   252                        	.member	win_class,1968,110,8,0,16
   253                        	.member	win_class_name,2096,110,8,0,32
   254                        	.member	nBitmapLayer,2352,16,8,16
   255                        	.member	procid,2368,18,8,32
   256                        	.member	pWndClass,2400,138,8,32,26
   257                        	.member	pParentWindow,2432,129,8,32
   258                        	.member	hMenu,2464,129,8,32
   259                        	.member	pChildWindows,2496,138,8,32,6
   260                        	.member	pChildHitList,2528,138,8,32,6
   261                        	.member	isVisible,2560,14,8,8
   262                        	.member	windowData,2568,129,8,32
   263                        	.member	clientData,2600,1121,8,32,6
   264                        	.member	isClosed,2792,14,8,8
   265                        	.member	isClosing,2800,14,8,8
   266                        	.eos
   267                        	.stag	_k_WindowStructEx,2704,31
   268                        	.member	cbSize,0,16,8,16
   269                        	.member	style,16,18,8,32
   270                        	.member	win_id,48,5,8,16
   271                        	.member	win_x,64,5,8,16
   272                        	.member	win_y,80,5,8,16
   273                        	.member	win_width,96,5,8,16
   274                        	.member	win_height,112,5,8,16
   275                        	.member	wndRect,128,10,8,64,25
  Thu Dec  3 2020 22:25                                                Page 6


   276                        	.member	clientRect,192,10,8,64,25
   277                        	.member	nonclientGadgets,256,106,8,0,28,16
   278                        	.member	clickable,1664,129,8,32
   279                        	.member	win_title,1696,110,8,0,32
   280                        	.member	Reserved0,1952,16,8,16
   281                        	.member	win_class,1968,110,8,0,16
   282                        	.member	nBitmapLayer,2096,16,8,16
   283                        	.member	procid,2112,18,8,32
   284                        	.member	pWndClass,2144,138,8,32,26
   285                        	.member	pParentWindow,2176,129,8,32
   286                        	.member	hMenu,2208,129,8,32
   287                        	.member	pChildWindows,2240,138,8,32,6
   288                        	.member	pChildHitList,2272,138,8,32,6
   289                        	.member	isVisible,2304,14,8,8
   290                        	.member	windowData,2312,129,8,32
   291                        	.member	clientData,2344,1121,8,32,4
   292                        	.member	isClosed,2472,14,8,8
   293                        	.member	hWnd,2480,129,8,32
   294                        	.member	localRect,2512,10,8,64,25
   295                        	.member	globalRect,2576,10,8,64,25
   296                        	.member	clientOffsetRect,2640,10,8,64,25
   297                        	.eos
   298                        	.stag	_FontMetric,32,32
   299                        	.member	width,0,5,8,16
   300                        	.member	height,16,5,8,16
   301                        	.eos
   302                        	.stag	_ctl_Textbox,112,33
   303                        	.member	win_id,0,5,8,16
   304                        	.member	win_x,16,5,8,16
   305                        	.member	win_y,32,5,8,16
   306                        	.member	win_width,48,5,8,16
   307                        	.member	win_height,64,5,8,16
   308                        	.member	content,80,1166,8,32
   309                        	.eos
   310                        	.stag	_MenuStruct,248,34
   311                        	.member	cx,0,5,8,16
   312                        	.member	cy,16,5,8,16
   313                        	.member	width,32,5,8,16
   314                        	.member	height,48,5,8,16
   315                        	.member	fcolor,64,14,8,8
   316                        	.member	bcolor,72,14,8,8
   317                        	.member	chromeLeft,80,14,8,8
   318                        	.member	chromeRight1,88,14,8,8
   319                        	.member	chromeRight2,96,14,8,8
   320                        	.member	itemId,104,16,8,16
   321                        	.member	pCaption,120,142,8,32
   322                        	.member	subMenus,152,138,8,32,6
   323                        	.member	pBackground,184,129,8,32
   324                        	.member	hWndOwner,216,129,8,32
   325                        	.eos
   326                        	.stag	fake35_,112,35
   327                        	.member	menuId,0,16,8,16
   328                        	.member	caption,16,142,8,32
   329                        	.member	rect,48,10,8,64,25
   330                        	.eos
   331                        	.stag	fake36_,3568,36
   332                        	.member	pParent,0,138,8,32,30
   333                        	.member	rect,32,10,8,64,25
  Thu Dec  3 2020 22:25                                                Page 7


   334                        	.member	captions,96,1134,8,32,24
   335                        	.member	chrome,864,110,8,0,24
   336                        	.member	ids,1056,112,8,0,24
   337                        	.member	clickable,1440,106,8,0,27,24
   338                        	.member	selected,3552,16,8,16
   339                        	.eos
   340                        	.stag	_fx_button_t,80,37
   341                        	.member	pCaption,0,142,8,32
   342                        	.member	data,32,129,8,32
   343                        	.member	captionPixelWidth,64,16,8,16
   344                        	.eos
   345                        	.stag	_fx_scrollbar_t,192,38
   346                        	.member	min,0,16,8,16
   347                        	.member	max,16,16,8,16
   348                        	.member	increment,32,16,8,16
   349                        	.member	stopsize,48,16,8,16
   350                        	.member	location,64,5,8,16
   351                        	.member	state,80,5,8,16
   352                        	.member	rectThumb,96,10,8,64,25
   353                        	.member	data,160,129,8,32
   354                        	.eos
   355                        	.stag	_fx_listbox_t,240,39
   356                        	.member	pos,0,5,8,16
   357                        	.member	selected,16,16,8,16
   358                        	.member	offsetX,32,5,8,16
   359                        	.member	offsetY,48,5,8,16
   360                        	.member	inc,64,5,8,16
   361                        	.member	direction,80,5,8,16
   362                        	.member	top,96,5,8,16
   363                        	.member	bottom,112,5,8,16
   364                        	.member	indexTop,128,5,8,16
   365                        	.member	indexBottom,144,5,8,16
   366                        	.member	maxItems,160,16,8,16
   367                        	.member	fontSet,176,142,8,32
   368                        	.member	data,208,129,8,32
   369                        	.eos
   370                        	.stag	_fx_textbox_t,144,40
   371                        	.member	pos,0,5,8,16
   372                        	.member	selected,16,16,8,16
   373                        	.member	offsetX,32,5,8,16
   374                        	.member	offsetY,48,5,8,16
   375                        	.member	isShifted,64,14,8,8
   376                        	.member	cursorState,72,14,8,8
   377                        	.member	fontSet,80,142,8,32
   378                        	.member	data,112,129,8,32
   379                        	.eos
   380                        	.stag	_fx_menuAnchor_t,144,41
   381                        	.member	pCaption,0,142,8,32
   382                        	.member	renderLayoutX,32,16,8,16
   383                        	.member	renderLayoutY,48,16,8,16
   384                        	.member	captionPixelWidth,64,16,8,16
   385                        	.member	data,80,129,8,32
   386                        	.member	droppedWindow,112,138,8,32,30
   387                        	.eos
   388                        	.stag	_SubMenuStruct,64,42
   389                        	.member	caption,0,142,8,32
   390                        	.member	action,32,641,8,32
   391                        	.eos
  Thu Dec  3 2020 22:25                                                Page 8


   392                        	.stag	_SubMenuListStruct,40,43
   393                        	.member	cMenus,0,14,8,8
   394                        	.member	psubmenus,8,9354,8,32,42
   395                        	.eos
   396                        	.stag	_fx_ComBuffer,2080,44
   397                        	.member	cbSize,0,16,8,16
   398                        	.member	cbBuffer,16,16,8,16
   399                        	.member	buffer,32,110,8,0,256
   400                        	.eos
   401                        	.line	708
   402                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxconsole.h",7
   403                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxc256fmx.h",0
   404                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxtypes.h",0
   405                        	.line	708
   406                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxc256fmx.h",5
   407                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fmx_vicky.h",0
   408                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxtypes.h",0
   409                        	.line	708
   410                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fmx_vicky.h",11
   411                        	.line	72
   412                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxc256fmx.h",6
   413                        	.line	1325
   414                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxconsole.h",10
   415                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxstring.h",0
   416                        	.file	"G:\devtools\WDCTools\wdc\Tools\include\
                    stdlib.h",0
   417                        	.line	205
   418                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxstring.h",5
   419                        	.file	"G:\devtools\WDCTools\wdc\Tools\include\
                    string.h",0
   420                        	.line	134
   421                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxstring.h",6
   422                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxtypes.h",0
   423                        	.line	708
   424                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxstring.h",7
   425                        	.stag	_fx_string,64,45
   426                        	.member	size,0,16,8,16
   427                        	.member	pos,16,5,8,16
   428                        	.member	buffer,32,142,8,32
   429                        	.eos
   430                        	.line	71
   431                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxconsole.h",15
   432                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
  Thu Dec  3 2020 22:25                                                Page 9


                    space\FXOSv1\src\fxeventmanager.h",0
   433                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxos.h",0
   434                        	.file	"G:\devtools\WDCTools\wdc\Tools\include\
                    stdlib.h",0
   435                        	.line	205
   436                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxos.h",4
   437                        	.file	"G:\devtools\WDCTools\wdc\Tools\include\
                    string.h",0
   438                        	.line	134
   439                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxos.h",5
   440                        	.file	"G:\devtools\WDCTools\wdc\Tools\include\
                    ctype.h",0
   441                        	.line	103
   442                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxos.h",6
   443                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxtypes.h",0
   444                        	.line	708
   445                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxos.h",8
   446                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxstringtable.h",0
   447                        	.line	89
   448                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxos.h",9
   449                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxc256fmx.h",0
   450                        	.line	1325
   451                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxos.h",13
   452                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxkernel.h",0
   453                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxos.h",0
   454                        	.line	25
   455                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxkernel.h",5
   456                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxnode.h",0
   457                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxtypes.h",0
   458                        	.line	708
   459                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxnode.h",5
   460                        	.line	61
   461                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxkernel.h",6
   462                        	.stag	_fx_zero_page,448,46
   463                        	.member	fxos_mouse_byte_0,0,14,8,8
   464                        	.member	fxos_mouse_byte_1,8,14,8,8
   465                        	.member	fxos_mouse_byte_2,16,14,8,8
   466                        	.member	fxos_mouse_byte_t,24,14,8,8
   467                        	.member	fxos_mouse_byte_x_l,32,14,8,8
   468                        	.member	fxos_mouse_byte_x_h,40,14,8,8
   469                        	.member	fxos_mouse_byte_y_l,48,14,8,8
  Thu Dec  3 2020 22:25                                                Page 10


   470                        	.member	fxos_mouse_byte_y_h,56,14,8,8
   471                        	.member	fxos_key_byte_0,64,14,8,8
   472                        	.member	fxos_key_byte_1,72,14,8,8
   473                        	.member	fxos_key_byte_2,80,14,8,8
   474                        	.member	fxos_mouse_ctl,88,14,8,8
   475                        	.member	fxos_mouse_index,96,14,8,8
   476                        	.member	fxos_mouse_status,104,14,8,8
   477                        	.member	VersionMajor,112,16,8,16
   478                        	.member	VersionMinor,128,16,8,16
   479                        	.member	VersionRelease,144,16,8,16
   480                        	.member	topMemory,160,18,8,32
   481                        	.member	bottomMemory,192,18,8,32
   482                        	.member	availableMemory,224,18,8,32
   483                        	.member	availableMemoryK,256,18,8,32
   484                        	.member	availableHeapMemory,288,18,8,32
   485                        	.member	availableHeapMemoryK,320,18,8,32
   486                        	.member	kernelFunctionCallId,352,16,8,16
   487                        	.member	kernelFunctionCallBank,368,14,8,8
   488                        	.member	kernelFunctionCallReserved,376,14,8,8
   489                        	.member	kernelFunctionCallParameter,384,129,8,32
   490                        	.member	kernelFunctionCallReturn,416,129,8,32
   491                        	.eos
   492                        	.stag	_fx_environment,96,47
   493                        	.member	variables,0,142,8,32
   494                        	.member	reserved1,32,5,8,16
   495                        	.member	reserved2,48,5,8,16
   496                        	.member	reserved3,64,5,8,16
   497                        	.member	reserved4,80,5,8,16
   498                        	.eos
   499                        	.stag	_debug_byte_bits,8,48
   500                        	.member	bit7,0,14,17,1
   501                        	.member	bit6,1,14,17,1
   502                        	.member	bit5,2,14,17,1
   503                        	.member	bit4,3,14,17,1
   504                        	.member	bit3,4,14,17,1
   505                        	.member	bit2,5,14,17,1
   506                        	.member	bit1,6,14,17,1
   507                        	.member	bit0,7,14,17,1
   508                        	.eos
   509                        	.stag	_fx_device_driver,1416,49
   510                        	.member	name,0,110,8,0,64
   511                        	.member	version,512,110,8,0,64
   512                        	.member	hmajor,1024,110,8,0,16
   513                        	.member	hminor,1152,110,8,0,16
   514                        	.member	type,1280,14,8,8
   515                        	.member	f_driver_load,1288,129,8,32
   516                        	.member	f_driver_read,1320,129,8,32
   517                        	.member	f_driver_write,1352,129,8,32
   518                        	.member	f_driver_unload,1384,129,8,32
   519                        	.eos
   520                        	.stag	_fx_block_device_driver,1448,50
   521                        	.member	name,0,110,8,0,64
   522                        	.member	version,512,110,8,0,64
   523                        	.member	hmajor,1024,110,8,0,16
   524                        	.member	hminor,1152,110,8,0,16
   525                        	.member	type,1280,14,8,8
   526                        	.member	f_driver_load,1288,129,8,32
   527                        	.member	f_driver_read,1320,129,8,32
  Thu Dec  3 2020 22:25                                                Page 11


   528                        	.member	f_driver_write,1352,129,8,32
   529                        	.member	f_driver_unload,1384,129,8,32
   530                        	.member	f_driver_command,1416,129,8,32
   531                        	.eos
   532                        	.line	270
   533                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxos.h",19
   534                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxconsole.h",0
   535                        	.line	171
   536                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxos.h",20
   537                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxstring.h",0
   538                        	.line	71
   539                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxos.h",21
   540                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxnode.h",0
   541                        	.line	61
   542                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxos.h",22
   543                        	.line	25
   544                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxeventmanager.h",5
   545                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxexec.h",0
   546                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxtypes.h",0
   547                        	.line	708
   548                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxexec.h",5
   549                        	.line	52
   550                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxeventmanager.h",6
   551                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxnode.h",0
   552                        	.line	61
   553                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxeventmanager.h",7
   554                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxconsole.h",0
   555                        	.line	171
   556                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxeventmanager.h",8
   557                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxwindowmanager.h",0
   558                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxtypes.h",0
   559                        	.line	708
   560                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxwindowmanager.h",5
   561                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxos.h",0
   562                        	.line	25
   563                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxwindowmanager.h",6
   564                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
  Thu Dec  3 2020 22:25                                                Page 12


                    space\FXOSv1\src\fxmemorymanager.h",0
   565                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxos.h",0
   566                        	.line	25
   567                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxmemorymanager.h",5
   568                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\umm_malloc_cfg.h",0
   569                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxos_build_parameters.h",0
   570                        	.line	32
   571                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\umm_malloc_cfg.h",8
   572                        	.stag	UMM_HEAP_INFO_t,256,51
   573                        	.member	totalEntries,0,18,8,32
   574                        	.member	usedEntries,32,18,8,32
   575                        	.member	freeEntries,64,18,8,32
   576                        	.member	totalBlocks,96,18,8,32
   577                        	.member	usedBlocks,128,18,8,32
   578                        	.member	freeBlocks,160,18,8,32
   579                        	.member	maxFreeContiguousBlocks,192,18,8,32
   580                        	.member	blockSize,224,18,8,32
   581                        	.eos
   582                        	.line	199
   583                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxmemorymanager.h",6
   584                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\umm_malloc.h",0
   585                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxtypes.h",0
   586                        	.line	708
   587                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\umm_malloc.h",11
   588                        	.line	24
   589                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxmemorymanager.h",7
   590                        	.stag	_fx_memory_map,2072,52
   591                        	.member	availableMemory,0,18,8,32
   592                        	.member	valid_segments,32,110,8,0,255
   593                        	.eos
   594                        	.line	39
   595                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxwindowmanager.h",7
   596                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxeventmanager.h",0
   597                        	.line	743
   598                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxwindowmanager.h",8
   599                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxgui.h",0
   600                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxfont.h",0
   601                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxtypes.h",0
   602                        	.line	708
   603                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxfont.h",6
   604                        	.line	64
  Thu Dec  3 2020 22:25                                                Page 13


   605                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxgui.h",4
   606                        	.stag	_click_detected,64,53
   607                        	.member	window,0,138,8,32,30
   608                        	.member	handler,32,641,8,32
   609                        	.eos
   610                        	.stag	_current_palette_map,400,54
   611                        	.member	CUR_DESKTOP,0,5,8,16
   612                        	.member	CUR_BACKGROUND,16,5,8,16
   613                        	.member	CUR_FONT,32,5,8,16
   614                        	.member	CUR_SELECTED_FONT,48,5,8,16
   615                        	.member	CUR_HIGHLIGHT_COLOR,64,5,8,16
   616                        	.member	CUR_WINDOWFRAME,80,5,8,16
   617                        	.member	CUR_WINDOWBORDER,96,5,8,16
   618                        	.member	CUR_WINDOWSHADOW,112,5,8,16
   619                        	.member	CUR_MENU,128,5,8,16
   620                        	.member	CUR_GADGET,144,5,8,16
   621                        	.member	CUR_COLOR,160,101,8,0,15
   622                        	.eos
   623                        	.line	264
   624                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxwindowmanager.h",9
   625                        	.stag	_childMessage_t,64,55
   626                        	.member	msgType,0,16,8,16
   627                        	.member	msgData,16,129,8,32
   628                        	.member	dataSize,48,16,8,16
   629                        	.eos
   630                        	.line	362
   631                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxeventmanager.h",9
   632                        	.stag	_fx_main_loopvars,16,56
   633                        	.member	dummy,0,5,8,16
   634                        	.eos
   635                        	.stag	_fxMouseMessageData,64,57
   636                        	.member	button1,0,14,8,8
   637                        	.member	button2,8,14,8,8
   638                        	.member	button3,16,14,8,8
   639                        	.member	button4,24,14,8,8
   640                        	.member	x,32,16,8,16
   641                        	.member	y,48,16,8,16
   642                        	.eos
   643                        	.stag	_fx_eventProcess,64,58
   644                        	.member	process,0,138,8,32,20
   645                        	.member	eventProc,32,641,8,32
   646                        	.eos
   647                        	.stag	_mouse_msg_state,184,59
   648                        	.member	lastEvent,0,18,8,32
   649                        	.member	buttonLeftDown,32,14,8,8
   650                        	.member	lastLeftDown,40,18,8,32
   651                        	.member	buttonRightDown,72,14,8,8
   652                        	.member	lastRightDown,80,18,8,32
   653                        	.member	buttonMiddleDown,112,14,8,8
   654                        	.member	lastMiddleDown,120,18,8,32
   655                        	.member	lastX,152,16,8,16
   656                        	.member	lastY,168,16,8,16
   657                        	.eos
   658                        	.line	743
   659                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
  Thu Dec  3 2020 22:25                                                Page 14


                    space\FXOSv1\src\fxconsole.h",16
   660                        	.stag	_fx_spinner_ctx,48,60
   661                        	.member	index,0,5,8,16
   662                        	.member	spinner,16,142,8,32
   663                        	.eos
   664                        	.stag	_fx_console_ctx,1144,61
   665                        	.member	lineBufferIndex,0,5,8,16
   666                        	.member	lineBuffer,16,110,8,0,128
   667                        	.member	isShifted,1040,14,8,8
   668                        	.member	userData,1048,129,8,32
   669                        	.member	screenBuffer,1080,129,8,32
   670                        	.member	Reserved1,1112,129,8,32
   671                        	.eos
   672                        	.stag	_token,64,62
   673                        	.member	type,0,5,8,16
   674                        	.member	depth,16,16,8,16
   675                        	.member	text,32,142,8,32
   676                        	.eos
   677                        	.stag	_command_args,64,63
   678                        	.member	proc,0,656,8,32
   679                        	.member	tokens,32,138,8,32,5
   680                        	.eos
   681                        	.line	171
   682                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxconsole.c",2
   683                        ;#include "fxdos.h"
   684                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxdos.h",0
   685                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxtypes.h",0
   686                        	.line	708
   687                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxdos.h",5
   688                        	.stag	_fx_sd_direntry,256,64
   689                        	.member	filename,0,110,8,0,11
   690                        	.member	type,88,14,8,8
   691                        	.member	attrs,96,110,8,0,20
   692                        	.eos
   693                        	.stag	_fx_info,416,65
   694                        	.member	stgName,0,110,8,0,32
   695                        	.member	Reserved1,256,14,8,8
   696                        	.member	stgType,264,16,8,16
   697                        	.member	Reserved2,280,14,8,8
   698                        	.member	stgReserved,288,110,8,0,16
   699                        	.eos
   700                        	.stag	_fx_fileinfo,136,66
   701                        	.member	type,0,14,8,8
   702                        	.member	pFilename,8,142,8,32
   703                        	.member	lSize,40,18,8,32
   704                        	.member	lcreateDate,72,18,8,32
   705                        	.member	lchangeDate,104,18,8,32
   706                        	.eos
   707                        	.stag	_FX_FAT_DIR_INFO,256,67
   708                        	.member	DIR_Name,0,110,8,0,11
   709                        	.member	DIR_Attr,88,14,8,8
   710                        	.member	DIR_NTRes,96,14,8,8
   711                        	.member	DIR_CrtTimeTenth,104,14,8,8
   712                        	.member	DIR_CrtTime,112,16,8,16
  Thu Dec  3 2020 22:25                                                Page 15


   713                        	.member	DIR_CrtDate,128,16,8,16
   714                        	.member	DIR_LstAccDate,144,16,8,16
   715                        	.member	DIR_FstClusHI,160,16,8,16
   716                        	.member	DIR_WrtTime,176,16,8,16
   717                        	.member	DIR_WrtDate,192,16,8,16
   718                        	.member	DIR_FstClusLO,208,16,8,16
   719                        	.member	DIR_FileSize,224,18,8,32
   720                        	.eos
   721                        	.stag	fat_extBS_32,416,68
   722                        	.member	table_size_32,0,18,8,32
   723                        	.member	extended_flags,32,16,8,16
   724                        	.member	fat_version,48,16,8,16
   725                        	.member	root_cluster,64,18,8,32
   726                        	.member	fat_info,96,16,8,16
   727                        	.member	backup_BS_sector,112,16,8,16
   728                        	.member	reserved_0,128,110,8,0,12
   729                        	.member	drive_number,224,14,8,8
   730                        	.member	reserved_1,232,14,8,8
   731                        	.member	boot_signature,240,14,8,8
   732                        	.member	volume_id,248,16,8,16
   733                        	.member	volume_label,264,110,8,0,11
   734                        	.member	fat_type_label,352,110,8,0,8
   735                        	.eos
   736                        	.stag	fat_extBS_16,192,69
   737                        	.member	bios_drive_num,0,14,8,8
   738                        	.member	reserved1,8,14,8,8
   739                        	.member	boot_signature,16,14,8,8
   740                        	.member	volume_id,24,16,8,16
   741                        	.member	volume_label,40,110,8,0,11
   742                        	.member	fat_type_label,128,110,8,0,8
   743                        	.eos
   744                        	.stag	fat_BS,688,70
   745                        	.member	bootjmp,0,110,8,0,3
   746                        	.member	oem_name,24,110,8,0,8
   747                        	.member	bytes_per_sector,88,16,8,16
   748                        	.member	sectors_per_cluster,104,14,8,8
   749                        	.member	reserved_sector_count,112,16,8,16
   750                        	.member	table_count,128,14,8,8
   751                        	.member	root_entry_count,136,16,8,16
   752                        	.member	total_sectors_16,152,16,8,16
   753                        	.member	media_type,168,14,8,8
   754                        	.member	table_size_16,176,16,8,16
   755                        	.member	sectors_per_track,192,16,8,16
   756                        	.member	head_side_count,208,16,8,16
   757                        	.member	hidden_sector_count,224,16,8,16
   758                        	.member	total_sectors_32,240,16,8,16
   759                        	.member	extended_section,256,110,8,0,54
   760                        	.eos
   761                        	.stag	__FATBootSector,928,71
   762                        	.member	bootjmp,0,110,8,0,3
   763                        	.member	oem_name,24,110,8,0,8
   764                        	.member	bytes_per_sector,88,16,8,16
   765                        	.member	sectors_per_cluster,104,14,8,8
   766                        	.member	reserved_sector_count,112,16,8,16
   767                        	.member	fat_table_count,128,14,8,8
   768                        	.member	root_entry_count,136,16,8,16
   769                        	.member	total_sectors_16,152,16,8,16
   770                        	.member	media_type,168,14,8,8
  Thu Dec  3 2020 22:25                                                Page 16


   771                        	.member	sectors_per_fat,176,16,8,16
   772                        	.member	sectors_per_track,192,16,8,16
   773                        	.member	head_side_count,208,16,8,16
   774                        	.member	hidden_sector_count,224,18,8,32
   775                        	.member	total_sectors_32,256,18,8,32
   776                        	.member	drive_number,288,14,8,8
   777                        	.member	reserved1,296,14,8,8
   778                        	.member	boot_sig,304,14,8,8
   779                        	.member	vol_id,312,18,8,32
   780                        	.member	vol_name,344,110,8,0,11
   781                        	.member	file_system_type,432,110,8,0,8
   782                        	.member	extended_section,496,110,8,0,54
   783                        	.eos
   784                        	.stag	__PARTITIONTABLE,128,72
   785                        	.member	first_byte,0,14,8,8
   786                        	.member	start_chs,8,110,8,0,3
   787                        	.member	partition_type,32,14,8,8
   788                        	.member	end_chs,40,110,8,0,3
   789                        	.member	start_sector,64,18,8,32
   790                        	.member	length_sectors,96,18,8,32
   791                        	.eos
   792                        	.stag	fake73_,4096,73
   793                        	.member	jmp,0,110,8,0,3
   794                        	.member	oem,24,110,8,0,8
   795                        	.member	sector_size,88,15,8,16
   796                        	.member	sectors_per_cluster,104,14,8,8
   797                        	.member	reserved_sectors,112,15,8,16
   798                        	.member	number_of_fats,128,14,8,8
   799                        	.member	root_dir_entries,136,15,8,16
   800                        	.member	total_sectors_short,152,15,8,16
   801                        	.member	media_descriptor,168,14,8,8
   802                        	.member	fat_size_sectors,176,15,8,16
   803                        	.member	sectors_per_track,192,15,8,16
   804                        	.member	number_of_heads,208,15,8,16
   805                        	.member	hidden_sectors,224,18,8,32
   806                        	.member	total_sectors_long,256,18,8,32
   807                        	.member	drive_number,288,14,8,8
   808                        	.member	current_head,296,14,8,8
   809                        	.member	boot_signature,304,14,8,8
   810                        	.member	volume_id,312,18,8,32
   811                        	.member	volume_label,344,110,8,0,11
   812                        	.member	fs_type,432,110,8,0,8
   813                        	.member	boot_code,496,110,8,0,448
   814                        	.member	boot_sector_signature,4080,15,8,16
   815                        	.eos
   816                        	.stag	__FAT16ENTRY,256,74
   817                        	.member	filename,0,110,8,0,8
   818                        	.member	ext,64,110,8,0,3
   819                        	.member	attributes,88,14,8,8
   820                        	.member	reserved,96,110,8,0,10
   821                        	.member	modify_time,176,16,8,16
   822                        	.member	modify_date,192,16,8,16
   823                        	.member	starting_cluster,208,16,8,16
   824                        	.member	file_size,224,18,8,32
   825                        	.eos
   826                        	.stag	__FAT16ENTRYLONG,288,75
   827                        	.member	filename,0,110,8,0,8
   828                        	.member	ext,64,110,8,0,3
  Thu Dec  3 2020 22:25                                                Page 17


   829                        	.member	attributes,88,14,8,8
   830                        	.member	reserved,96,110,8,0,10
   831                        	.member	modify_time,176,16,8,16
   832                        	.member	modify_date,192,16,8,16
   833                        	.member	starting_cluster,208,16,8,16
   834                        	.member	file_size,224,18,8,32
   835                        	.member	plongfileName,256,142,8,32
   836                        	.eos
   837                        	.stag	_LongFileName,256,76
   838                        	.member	sequenceNo,0,14,8,8
   839                        	.member	fileName_Part1,8,110,8,0,10
   840                        	.member	fileattribute,88,14,8,8
   841                        	.member	type,96,14,8,8
   842                        	.member	checksum,104,14,8,8
   843                        	.member	fileName_Part2,112,110,8,0,12
   844                        	.member	fstclusLO,208,5,8,16
   845                        	.member	fileName_Part3,224,110,8,0,4
   846                        	.eos
   847                        	.stag	_IDSECTOR,2048,77
   848                        	.member	wGenConfig,0,16,8,16
   849                        	.member	wNumCyls,16,16,8,16
   850                        	.member	wReserved,32,16,8,16
   851                        	.member	wNumHeads,48,16,8,16
   852                        	.member	wBytesPerTrack,64,16,8,16
   853                        	.member	wBytesPerSector,80,16,8,16
   854                        	.member	wSectorsPerTrack,96,16,8,16
   855                        	.member	wVendorUnique,112,112,8,0,3
   856                        	.member	sSerialNumber,160,110,8,0,20
   857                        	.member	wBufferType,320,16,8,16
   858                        	.member	wBufferSize,336,16,8,16
   859                        	.member	wECCSize,352,16,8,16
   860                        	.member	sFirmwareRev,368,110,8,0,8
   861                        	.member	sModelNumber,432,110,8,0,40
   862                        	.member	wMoreVendorUnique,752,16,8,16
   863                        	.member	wDoubleWordIO,768,16,8,16
   864                        	.member	wCapabilities,784,16,8,16
   865                        	.member	wReserved1,800,16,8,16
   866                        	.member	wPIOTiming,816,16,8,16
   867                        	.member	wDMATiming,832,16,8,16
   868                        	.member	wBS,848,16,8,16
   869                        	.member	wNumCurrentCyls,864,16,8,16
   870                        	.member	wNumCurrentHeads,880,16,8,16
   871                        	.member	wNumCurrentSectorsPerTrack,896,16,8,16
   872                        	.member	ulCurrentSectorCapacity,912,18,8,32
   873                        	.member	wMultSectorStuff,944,16,8,16
   874                        	.member	ulTotalAddressableSectors,960,18,8,32
   875                        	.member	wSingleWordDMA,992,16,8,16
   876                        	.member	wMultiWordDMA,1008,16,8,16
   877                        	.member	bReserved,1024,110,8,0,128
   878                        	.eos
   879                        	.stag	fake78_,16,78
   880                        	.member	Reserved1,0,16,17,1
   881                        	.member	Retired3,1,16,17,1
   882                        	.member	ResponseIncomplete,2,16,17,1
   883                        	.member	Retired2,3,16,17,3
   884                        	.member	FixedDevice,6,16,17,1
   885                        	.member	RemovableMedia,7,16,17,1
   886                        	.member	Retired1,8,16,17,7
  Thu Dec  3 2020 22:25                                                Page 18


   887                        	.member	DeviceType,15,16,17,1
   888                        	.eos
   889                        	.stag	fake79_,16,79
   890                        	.member	FeatureSupported,0,16,17,1
   891                        	.member	Reserved,1,16,17,15
   892                        	.eos
   893                        	.stag	fake80_,32,80
   894                        	.member	CurrentLongPhysicalSectorAlignment,0,14,
                    17,2
   895                        	.member	ReservedByte49,2,14,17,6
   896                        	.member	DmaSupported,8,14,17,1
   897                        	.member	LbaSupported,9,14,17,1
   898                        	.member	IordyDisable,10,14,17,1
   899                        	.member	IordySupported,11,14,17,1
   900                        	.member	Reserved1,12,14,17,1
   901                        	.member	StandybyTimerSupport,13,14,17,1
   902                        	.member	Reserved2,14,14,17,2
   903                        	.member	ReservedWord50,16,16,8,16
   904                        	.eos
   905                        	.stag	fake81_,16,81
   906                        	.member	ZonedCapabilities,0,16,17,2
   907                        	.member	NonVolatileWriteCache,2,16,17,1
   908                        	.member	ExtendedUserAddressableSectorsSupported,
                    3,16,17,1
   909                        	.member	DeviceEncryptsAllUserData,4,16,17,1
   910                        	.member	ReadZeroAfterTrimSupported,5,16,17,1
   911                        	.member	Optional28BitCommandsSupported,6,16,17,1
   912                        	.member	IEEE1667,7,16,17,1
   913                        	.member	DownloadMicrocodeDmaSupported,8,16,17,1
   914                        	.member	SetMaxSetPasswordUnlockDmaSupported,9,16
                    ,17,1
   915                        	.member	WriteBufferDmaSupported,10,16,17,1
   916                        	.member	ReadBufferDmaSupported,11,16,17,1
   917                        	.member	DeviceConfigIdentifySetDmaSupported,12,1
                    6,17,1
   918                        	.member	LPSAERCSupported,13,16,17,1
   919                        	.member	DeterministicReadAfterTrimSupported,14,1
                    6,17,1
   920                        	.member	CFastSpecSupported,15,16,17,1
   921                        	.eos
   922                        	.stag	fake82_,32,82
   923                        	.member	Reserved0,0,16,17,1
   924                        	.member	SataGen1,1,16,17,1
   925                        	.member	SataGen2,2,16,17,1
   926                        	.member	SataGen3,3,16,17,1
   927                        	.member	Reserved1,4,16,17,4
   928                        	.member	NCQ,8,16,17,1
   929                        	.member	HIPM,9,16,17,1
   930                        	.member	PhyEvents,10,16,17,1
   931                        	.member	NcqUnload,11,16,17,1
   932                        	.member	NcqPriority,12,16,17,1
   933                        	.member	HostAutoPS,13,16,17,1
   934                        	.member	DeviceAutoPS,14,16,17,1
   935                        	.member	ReadLogDMA,15,16,17,1
   936                        	.member	Reserved2,16,16,17,1
   937                        	.member	CurrentSpeed,17,16,17,3
   938                        	.member	NcqStreaming,20,16,17,1
   939                        	.member	NcqQueueMgmt,21,16,17,1
  Thu Dec  3 2020 22:25                                                Page 19


   940                        	.member	NcqReceiveSend,22,16,17,1
   941                        	.member	DEVSLPtoReducedPwrState,23,16,17,1
   942                        	.member	Reserved3,24,16,17,8
   943                        	.eos
   944                        	.stag	fake83_,16,83
   945                        	.member	Reserved0,0,16,17,1
   946                        	.member	NonZeroOffsets,1,16,17,1
   947                        	.member	DmaSetupAutoActivate,2,16,17,1
   948                        	.member	DIPM,3,16,17,1
   949                        	.member	InOrderData,4,16,17,1
   950                        	.member	HardwareFeatureControl,5,16,17,1
   951                        	.member	SoftwareSettingsPreservation,6,16,17,1
   952                        	.member	NCQAutosense,7,16,17,1
   953                        	.member	DEVSLP,8,16,17,1
   954                        	.member	HybridInformation,9,16,17,1
   955                        	.member	Reserved1,10,16,17,6
   956                        	.eos
   957                        	.stag	fake84_,16,84
   958                        	.member	Reserved0,0,16,17,1
   959                        	.member	NonZeroOffsets,1,16,17,1
   960                        	.member	DmaSetupAutoActivate,2,16,17,1
   961                        	.member	DIPM,3,16,17,1
   962                        	.member	InOrderData,4,16,17,1
   963                        	.member	HardwareFeatureControl,5,16,17,1
   964                        	.member	SoftwareSettingsPreservation,6,16,17,1
   965                        	.member	DeviceAutoPS,7,16,17,1
   966                        	.member	DEVSLP,8,16,17,1
   967                        	.member	HybridInformation,9,16,17,1
   968                        	.member	Reserved1,10,16,17,6
   969                        	.eos
   970                        	.stag	fake85_,48,85
   971                        	.member	SmartCommands,0,16,17,1
   972                        	.member	SecurityMode,1,16,17,1
   973                        	.member	RemovableMediaFeature,2,16,17,1
   974                        	.member	PowerManagement,3,16,17,1
   975                        	.member	Reserved1,4,16,17,1
   976                        	.member	WriteCache,5,16,17,1
   977                        	.member	LookAhead,6,16,17,1
   978                        	.member	ReleaseInterrupt,7,16,17,1
   979                        	.member	ServiceInterrupt,8,16,17,1
   980                        	.member	DeviceReset,9,16,17,1
   981                        	.member	HostProtectedArea,10,16,17,1
   982                        	.member	Obsolete1,11,16,17,1
   983                        	.member	WriteBuffer,12,16,17,1
   984                        	.member	ReadBuffer,13,16,17,1
   985                        	.member	Nop,14,16,17,1
   986                        	.member	Obsolete2,15,16,17,1
   987                        	.member	DownloadMicrocode,16,16,17,1
   988                        	.member	DmaQueued,17,16,17,1
   989                        	.member	Cfa,18,16,17,1
   990                        	.member	AdvancedPm,19,16,17,1
   991                        	.member	Msn,20,16,17,1
   992                        	.member	PowerUpInStandby,21,16,17,1
   993                        	.member	ManualPowerUp,22,16,17,1
   994                        	.member	Reserved2,23,16,17,1
   995                        	.member	SetMax,24,16,17,1
   996                        	.member	Acoustics,25,16,17,1
   997                        	.member	BigLba,26,16,17,1
  Thu Dec  3 2020 22:25                                                Page 20


   998                        	.member	DeviceConfigOverlay,27,16,17,1
   999                        	.member	FlushCache,28,16,17,1
  1000                        	.member	FlushCacheExt,29,16,17,1
  1001                        	.member	WordValid83,30,16,17,2
  1002                        	.member	SmartErrorLog,32,16,17,1
  1003                        	.member	SmartSelfTest,33,16,17,1
  1004                        	.member	MediaSerialNumber,34,16,17,1
  1005                        	.member	MediaCardPassThrough,35,16,17,1
  1006                        	.member	StreamingFeature,36,16,17,1
  1007                        	.member	GpLogging,37,16,17,1
  1008                        	.member	WriteFua,38,16,17,1
  1009                        	.member	WriteQueuedFua,39,16,17,1
  1010                        	.member	WWN64Bit,40,16,17,1
  1011                        	.member	URGReadStream,41,16,17,1
  1012                        	.member	URGWriteStream,42,16,17,1
  1013                        	.member	ReservedForTechReport,43,16,17,2
  1014                        	.member	IdleWithUnloadFeature,45,16,17,1
  1015                        	.member	WordValid,46,16,17,2
  1016                        	.eos
  1017                        	.stag	fake86_,48,86
  1018                        	.member	SmartCommands,0,16,17,1
  1019                        	.member	SecurityMode,1,16,17,1
  1020                        	.member	RemovableMediaFeature,2,16,17,1
  1021                        	.member	PowerManagement,3,16,17,1
  1022                        	.member	Reserved1,4,16,17,1
  1023                        	.member	WriteCache,5,16,17,1
  1024                        	.member	LookAhead,6,16,17,1
  1025                        	.member	ReleaseInterrupt,7,16,17,1
  1026                        	.member	ServiceInterrupt,8,16,17,1
  1027                        	.member	DeviceReset,9,16,17,1
  1028                        	.member	HostProtectedArea,10,16,17,1
  1029                        	.member	Obsolete1,11,16,17,1
  1030                        	.member	WriteBuffer,12,16,17,1
  1031                        	.member	ReadBuffer,13,16,17,1
  1032                        	.member	Nop,14,16,17,1
  1033                        	.member	Obsolete2,15,16,17,1
  1034                        	.member	DownloadMicrocode,16,16,17,1
  1035                        	.member	DmaQueued,17,16,17,1
  1036                        	.member	Cfa,18,16,17,1
  1037                        	.member	AdvancedPm,19,16,17,1
  1038                        	.member	Msn,20,16,17,1
  1039                        	.member	PowerUpInStandby,21,16,17,1
  1040                        	.member	ManualPowerUp,22,16,17,1
  1041                        	.member	Reserved2,23,16,17,1
  1042                        	.member	SetMax,24,16,17,1
  1043                        	.member	Acoustics,25,16,17,1
  1044                        	.member	BigLba,26,16,17,1
  1045                        	.member	DeviceConfigOverlay,27,16,17,1
  1046                        	.member	FlushCache,28,16,17,1
  1047                        	.member	FlushCacheExt,29,16,17,1
  1048                        	.member	Resrved3,30,16,17,1
  1049                        	.member	Words119_120Valid,31,16,17,1
  1050                        	.member	SmartErrorLog,32,16,17,1
  1051                        	.member	SmartSelfTest,33,16,17,1
  1052                        	.member	MediaSerialNumber,34,16,17,1
  1053                        	.member	MediaCardPassThrough,35,16,17,1
  1054                        	.member	StreamingFeature,36,16,17,1
  1055                        	.member	GpLogging,37,16,17,1
  Thu Dec  3 2020 22:25                                                Page 21


  1056                        	.member	WriteFua,38,16,17,1
  1057                        	.member	WriteQueuedFua,39,16,17,1
  1058                        	.member	WWN64Bit,40,16,17,1
  1059                        	.member	URGReadStream,41,16,17,1
  1060                        	.member	URGWriteStream,42,16,17,1
  1061                        	.member	ReservedForTechReport,43,16,17,2
  1062                        	.member	IdleWithUnloadFeature,45,16,17,1
  1063                        	.member	Reserved4,46,16,17,2
  1064                        	.eos
  1065                        	.stag	fake87_,16,87
  1066                        	.member	TimeRequired,0,16,17,15
  1067                        	.member	ExtendedTimeReported,15,16,17,1
  1068                        	.eos
  1069                        	.stag	fake88_,16,88
  1070                        	.member	TimeRequired,0,16,17,15
  1071                        	.member	ExtendedTimeReported,15,16,17,1
  1072                        	.eos
  1073                        	.stag	fake89_,16,89
  1074                        	.member	LogicalSectorsPerPhysicalSector,0,16,17,
                    4
  1075                        	.member	Reserved0,4,16,17,8
  1076                        	.member	LogicalSectorLongerThan256Words,12,16,17
                    ,1
  1077                        	.member	MultipleLogicalSectorsPerPhysicalSector,
                    13,16,17,1
  1078                        	.member	Reserved1,14,16,17,2
  1079                        	.eos
  1080                        	.stag	fake90_,16,90
  1081                        	.member	ReservedForDrqTechnicalReport,0,16,17,1
  1082                        	.member	WriteReadVerify,1,16,17,1
  1083                        	.member	WriteUncorrectableExt,2,16,17,1
  1084                        	.member	ReadWriteLogDmaExt,3,16,17,1
  1085                        	.member	DownloadMicrocodeMode3,4,16,17,1
  1086                        	.member	FreefallControl,5,16,17,1
  1087                        	.member	SenseDataReporting,6,16,17,1
  1088                        	.member	ExtendedPowerConditions,7,16,17,1
  1089                        	.member	Reserved0,8,16,17,6
  1090                        	.member	WordValid,14,16,17,2
  1091                        	.eos
  1092                        	.stag	fake91_,16,91
  1093                        	.member	ReservedForDrqTechnicalReport,0,16,17,1
  1094                        	.member	WriteReadVerify,1,16,17,1
  1095                        	.member	WriteUncorrectableExt,2,16,17,1
  1096                        	.member	ReadWriteLogDmaExt,3,16,17,1
  1097                        	.member	DownloadMicrocodeMode3,4,16,17,1
  1098                        	.member	FreefallControl,5,16,17,1
  1099                        	.member	SenseDataReporting,6,16,17,1
  1100                        	.member	ExtendedPowerConditions,7,16,17,1
  1101                        	.member	Reserved0,8,16,17,6
  1102                        	.member	Reserved1,14,16,17,2
  1103                        	.eos
  1104                        	.stag	fake92_,16,92
  1105                        	.member	SecuritySupported,0,16,17,1
  1106                        	.member	SecurityEnabled,1,16,17,1
  1107                        	.member	SecurityLocked,2,16,17,1
  1108                        	.member	SecurityFrozen,3,16,17,1
  1109                        	.member	SecurityCountExpired,4,16,17,1
  1110                        	.member	EnhancedSecurityEraseSupported,5,16,17,1
  Thu Dec  3 2020 22:25                                                Page 22


  1111                        	.member	Reserved0,6,16,17,2
  1112                        	.member	SecurityLevel,8,16,17,1
  1113                        	.member	Reserved1,9,16,17,7
  1114                        	.eos
  1115                        	.stag	fake93_,16,93
  1116                        	.member	MaximumCurrentInMA,0,16,17,12
  1117                        	.member	CfaPowerMode1Disabled,12,16,17,1
  1118                        	.member	CfaPowerMode1Required,13,16,17,1
  1119                        	.member	Reserved0,14,16,17,1
  1120                        	.member	Word160Supported,15,16,17,1
  1121                        	.eos
  1122                        	.stag	fake94_,16,94
  1123                        	.member	SupportsTrim,0,16,17,1
  1124                        	.member	Reserved0,1,16,17,15
  1125                        	.eos
  1126                        	.stag	fake95_,16,95
  1127                        	.member	Supported,0,16,17,1
  1128                        	.member	Reserved0,1,16,17,1
  1129                        	.member	WriteSameSuported,2,16,17,1
  1130                        	.member	ErrorRecoveryControlSupported,3,16,17,1
  1131                        	.member	FeatureControlSuported,4,16,17,1
  1132                        	.member	DataTablesSuported,5,16,17,1
  1133                        	.member	Reserved1,6,16,17,6
  1134                        	.member	VendorSpecific,12,16,17,4
  1135                        	.eos
  1136                        	.stag	fake96_,16,96
  1137                        	.member	AlignmentOfLogicalWithinPhysical,0,16,17
                    ,14
  1138                        	.member	Word209Supported,14,16,17,1
  1139                        	.member	Reserved0,15,16,17,1
  1140                        	.eos
  1141                        	.stag	fake97_,16,97
  1142                        	.member	NVCachePowerModeEnabled,0,16,17,1
  1143                        	.member	Reserved0,1,16,17,3
  1144                        	.member	NVCacheFeatureSetEnabled,4,16,17,1
  1145                        	.member	Reserved1,5,16,17,3
  1146                        	.member	NVCachePowerModeVersion,8,16,17,4
  1147                        	.member	NVCacheFeatureSetVersion,12,16,17,4
  1148                        	.eos
  1149                        	.stag	fake98_,16,98
  1150                        	.member	NVCacheEstimatedTimeToSpinUpInSeconds,0,
                    14,8,8
  1151                        	.member	Reserved,8,14,8,8
  1152                        	.eos
  1153                        	.stag	fake99_,16,99
  1154                        	.member	MajorVersion,0,16,17,12
  1155                        	.member	TransportType,12,16,17,4
  1156                        	.eos
  1157                        	.stag	_IDENTIFY_DEVICE_DATA,4096,100
  1158                        	.member	GeneralConfiguration,0,10,8,16,78
  1159                        	.member	NumCylinders,16,16,8,16
  1160                        	.member	SpecificConfiguration,32,16,8,16
  1161                        	.member	NumHeads,48,16,8,16
  1162                        	.member	Retired1Bytes,64,110,8,0,4
  1163                        	.member	NumSectorsPerTrack,96,16,8,16
  1164                        	.member	VendorUnique1Bytes,112,110,8,0,6
  1165                        	.member	SerialNumber,160,110,8,0,20
  1166                        	.member	Retired2,320,112,8,0,2
  Thu Dec  3 2020 22:25                                                Page 23


  1167                        	.member	Obsolete1,352,16,8,16
  1168                        	.member	FirmwareRevision,368,110,8,0,8
  1169                        	.member	ModelNumber,432,110,8,0,40
  1170                        	.member	MaximumBlockTransfer,752,14,8,8
  1171                        	.member	VendorUnique2,760,14,8,8
  1172                        	.member	TrustedComputing,768,10,8,16,79
  1173                        	.member	Capabilities,784,10,8,32,80
  1174                        	.member	ObsoleteWords51,816,112,8,0,2
  1175                        	.member	TranslationFieldsValid,848,16,17,3
  1176                        	.member	Reserved3,851,16,17,5
  1177                        	.member	FreeFallControlSensitivity,856,16,17,8
  1178                        	.member	NumberOfCurrentCylinders,864,16,8,16
  1179                        	.member	NumberOfCurrentHeads,880,16,8,16
  1180                        	.member	CurrentSectorsPerTrack,896,16,8,16
  1181                        	.member	CurrentSectorCapacity,912,18,8,32
  1182                        	.member	CurrentMultiSectorSetting,944,14,8,8
  1183                        	.member	MultiSectorSettingValid,952,14,17,1
  1184                        	.member	ReservedByte59,953,14,17,3
  1185                        	.member	SanitizeFeatureSupported,956,14,17,1
  1186                        	.member	CryptoScrambleExtCommandSupported,957,14
                    ,17,1
  1187                        	.member	OverwriteExtCommandSupported,958,14,17,1
  1188                        	.member	BlockEraseExtCommandSupported,959,14,17,
                    1
  1189                        	.member	UserAddressableSectors,960,18,8,32
  1190                        	.member	ObsoleteWord62,992,16,8,16
  1191                        	.member	MultiWordDMASupport,1008,16,17,8
  1192                        	.member	MultiWordDMAActive,1016,16,17,8
  1193                        	.member	AdvancedPIOModes,1024,16,17,8
  1194                        	.member	ReservedByte64,1032,16,17,8
  1195                        	.member	MinimumMWXferCycleTime,1040,16,8,16
  1196                        	.member	RecommendedMWXferCycleTime,1056,16,8,16
  1197                        	.member	MinimumPIOCycleTime,1072,16,8,16
  1198                        	.member	MinimumPIOCycleTimeIORDY,1088,16,8,16
  1199                        	.member	AdditionalSupported,1104,10,8,16,81
  1200                        	.member	ReservedWords70,1120,112,8,0,5
  1201                        	.member	QueueDepth,1200,16,17,5
  1202                        	.member	ReservedWord75,1205,16,17,11
  1203                        	.member	SerialAtaCapabilities,1216,10,8,32,82
  1204                        	.member	SerialAtaFeaturesSupported,1248,10,8,16,
                    83
  1205                        	.member	SerialAtaFeaturesEnabled,1264,10,8,16,84
  1206                        	.member	MajorRevision,1280,16,8,16
  1207                        	.member	MinorRevision,1296,16,8,16
  1208                        	.member	CommandSetSupport,1312,10,8,48,85
  1209                        	.member	CommandSetActive,1360,10,8,48,86
  1210                        	.member	UltraDMASupport,1408,16,17,8
  1211                        	.member	UltraDMAActive,1416,16,17,8
  1212                        	.member	NormalSecurityEraseUnit,1424,10,8,16,87
  1213                        	.member	EnhancedSecurityEraseUnit,1440,10,8,16,8
                    8
  1214                        	.member	CurrentAPMLevel,1456,16,17,8
  1215                        	.member	ReservedWord91,1464,16,17,8
  1216                        	.member	MasterPasswordID,1472,16,8,16
  1217                        	.member	HardwareResetResult,1488,16,8,16
  1218                        	.member	CurrentAcousticValue,1504,16,17,8
  1219                        	.member	RecommendedAcousticValue,1512,16,17,8
  1220                        	.member	StreamMinRequestSize,1520,16,8,16
  Thu Dec  3 2020 22:25                                                Page 24


  1221                        	.member	StreamingTransferTimeDMA,1536,16,8,16
  1222                        	.member	StreamingAccessLatencyDMAPIO,1552,16,8,1
                    6
  1223                        	.member	StreamingPerfGranularity,1568,18,8,32
  1224                        	.member	Max48BitLBA,1600,114,8,0,2
  1225                        	.member	StreamingTransferTime,1664,16,8,16
  1226                        	.member	DsmCap,1680,16,8,16
  1227                        	.member	PhysicalLogicalSectorSize,1696,10,8,16,8
                    9
  1228                        	.member	InterSeekDelay,1712,16,8,16
  1229                        	.member	WorldWideName,1728,112,8,0,4
  1230                        	.member	ReservedForWorldWideName128,1792,112,8,0
                    ,4
  1231                        	.member	ReservedForTlcTechnicalReport,1856,16,8,
                    16
  1232                        	.member	WordsPerLogicalSector,1872,112,8,0,2
  1233                        	.member	CommandSetSupportExt,1904,10,8,16,90
  1234                        	.member	CommandSetActiveExt,1920,10,8,16,91
  1235                        	.member	ReservedForExpandedSupportandActive,1936
                    ,112,8,0,6
  1236                        	.member	MsnSupport,2032,16,17,2
  1237                        	.member	ReservedWord127,2034,16,17,14
  1238                        	.member	SecurityStatus,2048,10,8,16,92
  1239                        	.member	ReservedWord129,2064,112,8,0,31
  1240                        	.member	CfaPowerMode1,2560,10,8,16,93
  1241                        	.member	ReservedForCfaWord161,2576,112,8,0,7
  1242                        	.member	NominalFormFactor,2688,16,17,4
  1243                        	.member	ReservedWord168,2692,16,17,12
  1244                        	.member	DataSetManagementFeature,2704,10,8,16,94
  1245                        	.member	AdditionalProductID,2720,112,8,0,4
  1246                        	.member	ReservedForCfaWord174,2784,112,8,0,2
  1247                        	.member	CurrentMediaSerialNumber,2816,112,8,0,30
  1248                        	.member	SCTCommandTransport,3296,10,8,16,95
  1249                        	.member	ReservedWord207,3312,112,8,0,2
  1250                        	.member	BlockAlignment,3344,10,8,16,96
  1251                        	.member	WriteReadVerifySectorCountMode3Only,3360
                    ,112,8,0,2
  1252                        	.member	WriteReadVerifySectorCountMode2Only,3392
                    ,112,8,0,2
  1253                        	.member	NVCacheCapabilities,3424,10,8,16,97
  1254                        	.member	NVCacheSizeLSW,3440,16,8,16
  1255                        	.member	NVCacheSizeMSW,3456,16,8,16
  1256                        	.member	NominalMediaRotationRate,3472,16,8,16
  1257                        	.member	ReservedWord218,3488,16,8,16
  1258                        	.member	NVCacheOptions,3504,10,8,16,98
  1259                        	.member	WriteReadVerifySectorCountMode,3520,16,1
                    7,8
  1260                        	.member	ReservedWord220,3528,16,17,8
  1261                        	.member	ReservedWord221,3536,16,8,16
  1262                        	.member	TransportMajorVersion,3552,10,8,16,99
  1263                        	.member	TransportMinorVersion,3568,16,8,16
  1264                        	.member	ReservedWord224,3584,112,8,0,6
  1265                        	.member	ExtendedNumberOfUserAddressableSectors,3
                    680,114,8,0,2
  1266                        	.member	MinBlocksPerDownloadMicrocodeMode03,3744
                    ,16,8,16
  1267                        	.member	MaxBlocksPerDownloadMicrocodeMode03,3760
                    ,16,8,16
  Thu Dec  3 2020 22:25                                                Page 25


  1268                        	.member	ReservedWord236,3776,112,8,0,19
  1269                        	.member	Signature,4080,16,17,8
  1270                        	.member	CheckSum,4088,16,17,8
  1271                        	.eos
  1272                        	.stag	_FXDosDevice,5648,101
  1273                        	.member	type,0,14,8,8
  1274                        	.member	initialized,8,14,8,8
  1275                        	.member	devdata,16,129,8,32
  1276                        	.member	devstatus,48,14,8,8
  1277                        	.member	bootSector,56,10,8,928,71
  1278                        	.member	partitionTable,984,10,8,128,72
  1279                        	.member	fileAllocationTable,1112,110,8,0,512
  1280                        	.member	bsOffset,5208,18,8,32
  1281                        	.member	rootDirSectors,5240,18,8,32
  1282                        	.member	root_entry_count,5272,5,8,16
  1283                        	.member	rootEntriesPerPage,5288,5,8,16
  1284                        	.member	sectors_per_cluster,5304,5,8,16
  1285                        	.member	fatTableOffset,5320,18,8,32
  1286                        	.member	volume_name,5352,110,8,0,12
  1287                        	.member	root_volume_name,5448,110,8,0,12
  1288                        	.member	errorCode,5544,14,8,8
  1289                        	.member	pfInit,5552,641,8,32
  1290                        	.member	pfReader,5584,654,8,32
  1291                        	.member	pfWriter,5616,654,8,32
  1292                        	.eos
  1293                        	.line	705
  1294                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxconsole.c",3
  1295                        ;#include "fxnode.h"
  1296                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxnode.h",0
  1297                        	.line	61
  1298                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxconsole.c",4
  1299                        ;#include "fxmemorymanager.h"
  1300                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxmemorymanager.h",0
  1301                        	.line	39
  1302                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxconsole.c",5
  1303                        ;#include "fxgui.h"
  1304                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxgui.h",0
  1305                        	.line	264
  1306                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxconsole.c",6
  1307                        ;
  1308                        ;static int 	_k_window_index = 0;
  1309                        	data
  1310                        ~~_k_window_index:
  1311 00:0000: 00 00        	dw	$0
  1312 00:0002:              	ends
  1313                        ;static WINDOW _k_window_list[10];
  1314                        ;
  1315                        ;static LPCHAR console_commands[] = {"cls","vol","
                    dir","tsd","desktop","fcolor","bcolor","init","newdir","task
                    s","front","back",
  1316                        	data
  Thu Dec  3 2020 22:25                                                Page 26


  1317                        ~~console_commands:
  1318 00:0002: xx xx xx xx  	dl	L1+0
  1319 00:0006: xx xx xx xx  	dl	L1+4
  1320 00:000A: xx xx xx xx  	dl	L1+8
  1321 00:000E: xx xx xx xx  	dl	L1+12
  1322 00:0012: xx xx xx xx  	dl	L1+16
  1323 00:0016: xx xx xx xx  	dl	L1+24
  1324 00:001A: xx xx xx xx  	dl	L1+31
  1325 00:001E: xx xx xx xx  	dl	L1+38
  1326 00:0022: xx xx xx xx  	dl	L1+43
  1327 00:0026: xx xx xx xx  	dl	L1+50
  1328 00:002A: xx xx xx xx  	dl	L1+56
  1329 00:002E: xx xx xx xx  	dl	L1+62
  1330                        ;							
                     	 	"chdir","display","window","send","start",
  1331 00:0032: xx xx xx xx  	dl	L1+67
  1332 00:0036: xx xx xx xx  	dl	L1+73
  1333 00:003A: xx xx xx xx  	dl	L1+81
  1334 00:003E: xx xx xx xx  	dl	L1+88
  1335 00:0042: xx xx xx xx  	dl	L1+93
  1336                        ;							
                    		"time","exit","pause","resume","lineup",
  1337 00:0046: xx xx xx xx  	dl	L1+99
  1338 00:004A: xx xx xx xx  	dl	L1+104
  1339 00:004E: xx xx xx xx  	dl	L1+109
  1340 00:0052: xx xx xx xx  	dl	L1+115
  1341 00:0056: xx xx xx xx  	dl	L1+122
  1342                        ;							
                    		NULL};
  1343 00:005A: 00 00 00 00  	dl	$0
  1344 00:005E:              	ends
  1345                        	data
  1346                        L1:
  1347 00:005E: 63 6C 73 00  	db	$63,$6C,$73,$00,$76,$6F,$6C,$00,$64,$69,
                    $72,$00,$74,$73,$64
       00:0062: 76 6F 6C 00 
       00:0066: 64 69 72 00 
       00:006A: 74 73 64 
  1348 00:006D: 00 64 65 73  	db	$00,$64,$65,$73,$6B,$74,$6F,$70,$00,$66,
                    $63,$6F,$6C,$6F,$72
       00:0071: 6B 74 6F 70 
       00:0075: 00 66 63 6F 
       00:0079: 6C 6F 72 
  1349 00:007C: 00 62 63 6F  	db	$00,$62,$63,$6F,$6C,$6F,$72,$00,$69,$6E,
                    $69,$74,$00,$6E,$65
       00:0080: 6C 6F 72 00 
       00:0084: 69 6E 69 74 
       00:0088: 00 6E 65 
  1350 00:008B: 77 64 69 72  	db	$77,$64,$69,$72,$00,$74,$61,$73,$6B,$73,
                    $00,$66,$72,$6F,$6E
       00:008F: 00 74 61 73 
       00:0093: 6B 73 00 66 
       00:0097: 72 6F 6E 
  1351 00:009A: 74 00 62 61  	db	$74,$00,$62,$61,$63,$6B,$00,$63,$68,$64,
                    $69,$72,$00,$64,$69
       00:009E: 63 6B 00 63 
       00:00A2: 68 64 69 72 
       00:00A6: 00 64 69 
  Thu Dec  3 2020 22:25                                                Page 27


  1352 00:00A9: 73 70 6C 61  	db	$73,$70,$6C,$61,$79,$00,$77,$69,$6E,$64,
                    $6F,$77,$00,$73,$65
       00:00AD: 79 00 77 69 
       00:00B1: 6E 64 6F 77 
       00:00B5: 00 73 65 
  1353 00:00B8: 6E 64 00 73  	db	$6E,$64,$00,$73,$74,$61,$72,$74,$00,$74,
                    $69,$6D,$65,$00,$65
       00:00BC: 74 61 72 74 
       00:00C0: 00 74 69 6D 
       00:00C4: 65 00 65 
  1354 00:00C7: 78 69 74 00  	db	$78,$69,$74,$00,$70,$61,$75,$73,$65,$00,
                    $72,$65,$73,$75,$6D
       00:00CB: 70 61 75 73 
       00:00CF: 65 00 72 65 
       00:00D3: 73 75 6D 
  1355 00:00D6: 65 00 6C 69  	db	$65,$00,$6C,$69,$6E,$65,$75,$70,$00
       00:00DA: 6E 65 75 70 
       00:00DE: 00 
  1356 00:00DF:              	ends
  1357                        ;static FXCommandHandler console_command_proc[] = 
                    {cmd_CLEAR,cmd_VOL,cmd_DIR,cmd_TESTSD,cmd_WORKBENCH,
  1358                        	data
  1359                        ~~console_command_proc:
  1360 00:00DF: xx xx xx xx  	dl	~~cmd_CLEAR
  1361 00:00E3: xx xx xx xx  	dl	~~cmd_VOL
  1362 00:00E7: xx xx xx xx  	dl	~~cmd_DIR
  1363 00:00EB: xx xx xx xx  	dl	~~cmd_TESTSD
  1364 00:00EF: xx xx xx xx  	dl	~~cmd_WORKBENCH
  1365                        ;		                                        
                      cmd_FCOLOR,cmd_BCOLOR,cmd_INIT,cmd_NEWDIR,cmd_TASKS,
  1366 00:00F3: xx xx xx xx  	dl	~~cmd_FCOLOR
  1367 00:00F7: xx xx xx xx  	dl	~~cmd_BCOLOR
  1368 00:00FB: xx xx xx xx  	dl	~~cmd_INIT
  1369 00:00FF: xx xx xx xx  	dl	~~cmd_NEWDIR
  1370 00:0103: xx xx xx xx  	dl	~~cmd_TASKS
  1371                        ;							
                    					  cmd_FRONT,cmd_BACK,cmd
                    _CHRDIR,cmd_DISPLAY,
  1372 00:0107: xx xx xx xx  	dl	~~cmd_FRONT
  1373 00:010B: xx xx xx xx  	dl	~~cmd_BACK
  1374 00:010F: xx xx xx xx  	dl	~~cmd_CHRDIR
  1375 00:0113: xx xx xx xx  	dl	~~cmd_DISPLAY
  1376                        ;							
                    					  cmd_Window,
  1377 00:0117: xx xx xx xx  	dl	~~cmd_Window
  1378                        ;							
                    					  cmd_SEND,
  1379 00:011B: xx xx xx xx  	dl	~~cmd_SEND
  1380                        ;							
                    					  cmd_START,
  1381 00:011F: xx xx xx xx  	dl	~~cmd_START
  1382                        ;							
                    					  cmd_TIME,
  1383 00:0123: xx xx xx xx  	dl	~~cmd_TIME
  1384                        ;							
                    					  cmd_EXIT,cmd_PAUSE,cmd
                    _RESUME,
  1385 00:0127: xx xx xx xx  	dl	~~cmd_EXIT
  Thu Dec  3 2020 22:25                                                Page 28


  1386 00:012B: xx xx xx xx  	dl	~~cmd_PAUSE
  1387 00:012F: xx xx xx xx  	dl	~~cmd_RESUME
  1388                        ;							
                    					  cmd_LINEUP,
  1389 00:0133: xx xx xx xx  	dl	~~cmd_LINEUP
  1390                        ;							
                    					  NULL};
  1391 00:0137: 00 00 00 00  	dl	$0
  1392 00:013B:              	ends
  1393                        ;
  1394                        ;static char consolespinner[] = {'|','/','-','\\'}
                    ;
  1395                        	data
  1396                        ~~consolespinner:
  1397 00:013B: 7C 2F 2D 5C  	db	$7C,$2F,$2D,$5C
  1398 00:013F:              	ends
  1399                        ;
  1400                        ;static SPINNERCTX consolespinctx;
  1401                        ;
  1402                        ;static UINT cursorFlashInterval  = 0;
  1403                        	data
  1404                        ~~cursorFlashInterval:
  1405 00:013F: 00 00        	dw	$0
  1406 00:0141:              	ends
  1407                        ;static UINT cursorCurrentColor   = 15;
  1408                        	data
  1409                        ~~cursorCurrentColor:
  1410 00:0141: 0F 00        	dw	$F
  1411 00:0143:              	ends
  1412                        ;
  1413                        ;static LPCHAR tokentypeNames[] = { "WORD",
  1414                        	data
  1415                        ~~tokentypeNames:
  1416 00:0143: xx xx xx xx  	dl	L2+0
  1417                        ;"NUMBER","STRING","LABEL","LINE","EQUALS",
  1418 00:0147: xx xx xx xx  	dl	L2+5
  1419 00:014B: xx xx xx xx  	dl	L2+12
  1420 00:014F: xx xx xx xx  	dl	L2+19
  1421 00:0153: xx xx xx xx  	dl	L2+25
  1422 00:0157: xx xx xx xx  	dl	L2+30
  1423                        ;"OPERATOR","LEFT_PAREN", "RIGHT_PAREN", "EOF", "C
                    OMMA", "LEFT_BLOCK",
  1424 00:015B: xx xx xx xx  	dl	L2+37
  1425 00:015F: xx xx xx xx  	dl	L2+46
  1426 00:0163: xx xx xx xx  	dl	L2+57
  1427 00:0167: xx xx xx xx  	dl	L2+69
  1428 00:016B: xx xx xx xx  	dl	L2+73
  1429 00:016F: xx xx xx xx  	dl	L2+79
  1430                        ;"RIGHT_BLOCK", "BANG", "NOTEQUAL", "ANNOTATION",
  1431 00:0173: xx xx xx xx  	dl	L2+90
  1432 00:0177: xx xx xx xx  	dl	L2+102
  1433 00:017B: xx xx xx xx  	dl	L2+107
  1434 00:017F: xx xx xx xx  	dl	L2+116
  1435                        ;"GTE", "LTE", "GT", "LT", "PERIOD", "POINTER", "N
                    OOP",
  1436 00:0183: xx xx xx xx  	dl	L2+127
  1437 00:0187: xx xx xx xx  	dl	L2+131
  1438 00:018B: xx xx xx xx  	dl	L2+135
  Thu Dec  3 2020 22:25                                                Page 29


  1439 00:018F: xx xx xx xx  	dl	L2+138
  1440 00:0193: xx xx xx xx  	dl	L2+141
  1441 00:0197: xx xx xx xx  	dl	L2+148
  1442 00:019B: xx xx xx xx  	dl	L2+156
  1443                        ;"START_BLOCK", "END_BLOCK","AND","OR","VARIADIC",
                     "DOLLAR"};
  1444 00:019F: xx xx xx xx  	dl	L2+161
  1445 00:01A3: xx xx xx xx  	dl	L2+173
  1446 00:01A7: xx xx xx xx  	dl	L2+183
  1447 00:01AB: xx xx xx xx  	dl	L2+187
  1448 00:01AF: xx xx xx xx  	dl	L2+190
  1449 00:01B3: xx xx xx xx  	dl	L2+199
  1450 00:01B7:              	ends
  1451                        	data
  1452                        L2:
  1453 00:01B7: 57 4F 52 44  	db	$57,$4F,$52,$44,$00,$4E,$55,$4D,$42,$45,
                    $52,$00,$53,$54,$52
       00:01BB: 00 4E 55 4D 
       00:01BF: 42 45 52 00 
       00:01C3: 53 54 52 
  1454 00:01C6: 49 4E 47 00  	db	$49,$4E,$47,$00,$4C,$41,$42,$45,$4C,$00,
                    $4C,$49,$4E,$45,$00
       00:01CA: 4C 41 42 45 
       00:01CE: 4C 00 4C 49 
       00:01D2: 4E 45 00 
  1455 00:01D5: 45 51 55 41  	db	$45,$51,$55,$41,$4C,$53,$00,$4F,$50,$45,
                    $52,$41,$54,$4F,$52
       00:01D9: 4C 53 00 4F 
       00:01DD: 50 45 52 41 
       00:01E1: 54 4F 52 
  1456 00:01E4: 00 4C 45 46  	db	$00,$4C,$45,$46,$54,$5F,$50,$41,$52,$45,
                    $4E,$00,$52,$49,$47
       00:01E8: 54 5F 50 41 
       00:01EC: 52 45 4E 00 
       00:01F0: 52 49 47 
  1457 00:01F3: 48 54 5F 50  	db	$48,$54,$5F,$50,$41,$52,$45,$4E,$00,$45,
                    $4F,$46,$00,$43,$4F
       00:01F7: 41 52 45 4E 
       00:01FB: 00 45 4F 46 
       00:01FF: 00 43 4F 
  1458 00:0202: 4D 4D 41 00  	db	$4D,$4D,$41,$00,$4C,$45,$46,$54,$5F,$42,
                    $4C,$4F,$43,$4B,$00
       00:0206: 4C 45 46 54 
       00:020A: 5F 42 4C 4F 
       00:020E: 43 4B 00 
  1459 00:0211: 52 49 47 48  	db	$52,$49,$47,$48,$54,$5F,$42,$4C,$4F,$43,
                    $4B,$00,$42,$41,$4E
       00:0215: 54 5F 42 4C 
       00:0219: 4F 43 4B 00 
       00:021D: 42 41 4E 
  1460 00:0220: 47 00 4E 4F  	db	$47,$00,$4E,$4F,$54,$45,$51,$55,$41,$4C,
                    $00,$41,$4E,$4E,$4F
       00:0224: 54 45 51 55 
       00:0228: 41 4C 00 41 
       00:022C: 4E 4E 4F 
  1461 00:022F: 54 41 54 49  	db	$54,$41,$54,$49,$4F,$4E,$00,$47,$54,$45,
                    $00,$4C,$54,$45,$00
       00:0233: 4F 4E 00 47 
  Thu Dec  3 2020 22:25                                                Page 30


       00:0237: 54 45 00 4C 
       00:023B: 54 45 00 
  1462 00:023E: 47 54 00 4C  	db	$47,$54,$00,$4C,$54,$00,$50,$45,$52,$49,
                    $4F,$44,$00,$50,$4F
       00:0242: 54 00 50 45 
       00:0246: 52 49 4F 44 
       00:024A: 00 50 4F 
  1463 00:024D: 49 4E 54 45  	db	$49,$4E,$54,$45,$52,$00,$4E,$4F,$4F,$50,
                    $00,$53,$54,$41,$52
       00:0251: 52 00 4E 4F 
       00:0255: 4F 50 00 53 
       00:0259: 54 41 52 
  1464 00:025C: 54 5F 42 4C  	db	$54,$5F,$42,$4C,$4F,$43,$4B,$00,$45,$4E,
                    $44,$5F,$42,$4C,$4F
       00:0260: 4F 43 4B 00 
       00:0264: 45 4E 44 5F 
       00:0268: 42 4C 4F 
  1465 00:026B: 43 4B 00 41  	db	$43,$4B,$00,$41,$4E,$44,$00,$4F,$52,$00,
                    $56,$41,$52,$49,$41
       00:026F: 4E 44 00 4F 
       00:0273: 52 00 56 41 
       00:0277: 52 49 41 
  1466 00:027A: 44 49 43 00  	db	$44,$49,$43,$00,$44,$4F,$4C,$4C,$41,$52,
                    $00
       00:027E: 44 4F 4C 4C 
       00:0282: 41 52 00 
  1467 00:0285:              	ends
  1468                        ;
  1469                        ;static consoleBuffer[56][72];
  1470                        ;static consoleBufferTemp[56][72];
  1471                        ;//#pragma section CODE=CONSOLE,offset $07:0000
  1472                        ;
  1473                        ;VOID k_initialize_text(VOID)
  1474                        ;{
  1475                        	.line	44
  1476                        	.line	45
  1477                        	code
  1478                        	xdef	~~k_initialize_text
  1479                        	func
  1480                        	.function	45
  1481                        ~~k_initialize_text:
  1482                        	longa	on
  1483                        	longi	on
  1484 00:0000: 3B           	tsc
  1485 00:0001: 38           	sec
  1486 00:0002: E9 00 00     	sbc	#L4
  1487 00:0005: 1B           	tcs
  1488 00:0006: 0B           	phd
  1489 00:0007: 5B           	tcd
  1490                        	.block	45
  1491                        ;	k_debug_string("k_initialize_text\r\n");
  1492                        	.line	46
  1493 00:0008: F4 xx xx     	pea	#^L3
  1494 00:000B: F4 xx xx     	pea	#<L3
  1495 00:000E: 22 xx xx xx  	jsl	~~k_debug_string
  1496                        ;	*((int FAR *)COLS_VISIBLE)  =  72;
  1497                        	.line	47
  1498 00:0012: A9 48 00     	lda	#$48
  Thu Dec  3 2020 22:25                                                Page 31


  1499 00:0015: 8F 0F 00 00  	sta	>15
  1500                        ;	*((int FAR *)LINES_VISIBLE) =  56;
  1501                        	.line	48
  1502 00:0019: A9 38 00     	lda	#$38
  1503 00:001C: 8F 13 00 00  	sta	>19
  1504                        ;	*((int FAR *)COLS_PER_LINE) = 128;
  1505                        	.line	49
  1506 00:0020: A9 80 00     	lda	#$80
  1507 00:0023: 8F 11 00 00  	sta	>17
  1508                        ;	*((int FAR *)LINES_MAX) 	=  64;
  1509                        	.line	50
  1510 00:0027: A9 40 00     	lda	#$40
  1511 00:002A: 8F 15 00 00  	sta	>21
  1512                        ;}
  1513                        	.line	51
  1514                        L7:
  1515 00:002E: 2B           	pld
  1516 00:002F: 3B           	tsc
  1517 00:0030: 18           	clc
  1518 00:0031: 69 00 00     	adc	#L4
  1519 00:0034: 1B           	tcs
  1520 00:0035: 6B           	rtl
  1521                        	.endblock	51
  1522             00000000   L4	equ	0
  1523             00000001   L5	equ	1
  1524                        	ends
  1525                        	efunc
  1526                        	.endfunc	51,1,0
  1527                        	.line	51
  1528                        	data
  1529                        L3:
  1530 00:0285: 6B 5F 69 6E  	db	$6B,$5F,$69,$6E,$69,$74,$69,$61,$6C,$69,
                    $7A,$65,$5F,$74,$65
       00:0289: 69 74 69 61 
       00:028D: 6C 69 7A 65 
       00:0291: 5F 74 65 
  1531 00:0294: 78 74 0D 0A  	db	$78,$74,$0D,$0A,$00
       00:0298: 00 
  1532 00:0299:              	ends
  1533                        ;
  1534                        ;void k_init_spinner(PSPINNERCTX ctx)
  1535                        ;{
  1536                        	.line	53
  1537                        	.line	54
  1538                        	code
  1539                        	xdef	~~k_init_spinner
  1540                        	func
  1541                        	.function	54
  1542                        ~~k_init_spinner:
  1543                        	longa	on
  1544                        	longi	on
  1545 00:0036: 3B           	tsc
  1546 00:0037: 38           	sec
  1547 00:0038: E9 04 00     	sbc	#L9
  1548 00:003B: 1B           	tcs
  1549 00:003C: 0B           	phd
  1550 00:003D: 5B           	tcd
  1551             00000004   ctx_0	set	4
  Thu Dec  3 2020 22:25                                                Page 32


  1552                        	.block	54
  1553                        ;	ctx->spinner = consolespinner;
  1554                        	.sym	ctx,4,138,6,32,60
  1555                        	.line	55
  1556 00:003E: A9 xx xx     	lda	#<~~consolespinner
  1557 00:0041: 85 01        	sta	<R0
  1558                        	xref	_BEG_DATA
  1559 00:0043: A9 xx xx     	lda	#_BEG_DATA>>16
  1560 00:0046: 85 03        	sta	<R0+2
  1561 00:0048: A5 01        	lda	<R0
  1562 00:004A: A0 02 00     	ldy	#$2
  1563 00:004D: 97 08        	sta	[<L9+ctx_0],Y
  1564 00:004F: A5 03        	lda	<R0+2
  1565 00:0051: A0 04 00     	ldy	#$4
  1566 00:0054: 97 08        	sta	[<L9+ctx_0],Y
  1567                        ;	ctx->index = 0;
  1568                        	.line	56
  1569 00:0056: A9 00 00     	lda	#$0
  1570 00:0059: 87 08        	sta	[<L9+ctx_0]
  1571                        ;}
  1572                        	.line	57
  1573                        L12:
  1574 00:005B: A5 06        	lda	<L9+2
  1575 00:005D: 85 0A        	sta	<L9+2+4
  1576 00:005F: A5 05        	lda	<L9+1
  1577 00:0061: 85 09        	sta	<L9+1+4
  1578 00:0063: 2B           	pld
  1579 00:0064: 3B           	tsc
  1580 00:0065: 18           	clc
  1581 00:0066: 69 08 00     	adc	#L9+4
  1582 00:0069: 1B           	tcs
  1583 00:006A: 6B           	rtl
  1584                        	.endblock	57
  1585             00000004   L9	equ	4
  1586             00000005   L10	equ	5
  1587                        	ends
  1588                        	efunc
  1589                        	.endfunc	57,5,4
  1590                        	.line	57
  1591                        ;
  1592                        ;void k_updatespinner(int pos,int line,PSPINNERCTX
                     ctx)
  1593                        ;{
  1594                        	.line	59
  1595                        	.line	60
  1596                        	code
  1597                        	xdef	~~k_updatespinner
  1598                        	func
  1599                        	.function	60
  1600                        ~~k_updatespinner:
  1601                        	longa	on
  1602                        	longi	on
  1603 00:006B: 3B           	tsc
  1604 00:006C: 38           	sec
  1605 00:006D: E9 04 00     	sbc	#L13
  1606 00:0070: 1B           	tcs
  1607 00:0071: 0B           	phd
  1608 00:0072: 5B           	tcd
  Thu Dec  3 2020 22:25                                                Page 33


  1609             00000004   pos_0	set	4
  1610             00000006   line_0	set	6
  1611             00000008   ctx_0	set	8
  1612                        	.block	60
  1613                        ;	k_put_char(pos,line,consolespinner[ctx->index++]
                    ,15,0);
  1614                        	.sym	pos,4,5,6,16
  1615                        	.sym	line,6,5,6,16
  1616                        	.sym	ctx,8,138,6,32,60
  1617                        	.line	61
  1618 00:0073: F4 00 00     	pea	#<$0
  1619 00:0076: F4 0F 00     	pea	#<$f
  1620 00:0079: A7 0C        	lda	[<L13+ctx_0]
  1621 00:007B: 85 01        	sta	<R0
  1622 00:007D: A7 0C        	lda	[<L13+ctx_0]
  1623 00:007F: 1A           	ina
  1624 00:0080: 87 0C        	sta	[<L13+ctx_0]
  1625 00:0082: A6 01        	ldx	<R0
  1626 00:0084: BD xx xx     	lda	|~~consolespinner,X
  1627 00:0087: 48           	pha
  1628 00:0088: D4 0A        	pei	<L13+line_0
  1629 00:008A: D4 08        	pei	<L13+pos_0
  1630 00:008C: 22 xx xx xx  	jsl	~~k_put_char
  1631                        ;	if(ctx->index>3) ctx->index = 0;
  1632                        	.line	62
  1633 00:0090: 38           	sec
  1634 00:0091: A9 03 00     	lda	#$3
  1635 00:0094: E7 0C        	sbc	[<L13+ctx_0]
  1636 00:0096: 70 03        	bvs	L16
  1637 00:0098: 49 00 80     	eor	#$8000
  1638                        L16:
  1639 00:009B: 10 03        	bpl	L17
  1640 00:009D: 82 05 00     	brl	L10001
  1641                        L17:
  1642                        	.line	62
  1643 00:00A0: A9 00 00     	lda	#$0
  1644 00:00A3: 87 0C        	sta	[<L13+ctx_0]
  1645                        ;}
  1646                        L10001:
  1647                        	.line	63
  1648                        L18:
  1649 00:00A5: A5 06        	lda	<L13+2
  1650 00:00A7: 85 0E        	sta	<L13+2+8
  1651 00:00A9: A5 05        	lda	<L13+1
  1652 00:00AB: 85 0D        	sta	<L13+1+8
  1653 00:00AD: 2B           	pld
  1654 00:00AE: 3B           	tsc
  1655 00:00AF: 18           	clc
  1656 00:00B0: 69 0C 00     	adc	#L13+8
  1657 00:00B3: 1B           	tcs
  1658 00:00B4: 6B           	rtl
  1659                        	.endblock	63
  1660             00000004   L13	equ	4
  1661             00000005   L14	equ	5
  1662                        	ends
  1663                        	efunc
  1664                        	.endfunc	63,5,4
  1665                        	.line	63
  Thu Dec  3 2020 22:25                                                Page 34


  1666                        ;
  1667                        ;int k_initialize_text_fonts(UINT flag)
  1668                        ;{
  1669                        	.line	65
  1670                        	.line	66
  1671                        	code
  1672                        	xdef	~~k_initialize_text_fonts
  1673                        	func
  1674                        	.function	66
  1675                        ~~k_initialize_text_fonts:
  1676                        	longa	on
  1677                        	longi	on
  1678 00:00B5: 3B           	tsc
  1679 00:00B6: 38           	sec
  1680 00:00B7: E9 0A 00     	sbc	#L19
  1681 00:00BA: 1B           	tcs
  1682 00:00BB: 0B           	phd
  1683 00:00BC: 5B           	tcd
  1684             00000004   flag_0	set	4
  1685                        	.block	66
  1686                        ;
  1687                        ;	int i = 0;
  1688                        ;
  1689                        ;	LPSTR font = EGAFONT;
  1690                        ;	//LPSTR font = BM437_ATI_8X8_Font_Set;
  1691                        ;
  1692                        ;	for(i=0;i<0x800;i++)
  1693             00000000   i_1	set	0
  1694             00000002   font_1	set	2
  1695                        	.sym	i,0,5,1,16
  1696                        	.sym	font,2,142,1,32
  1697                        	.sym	flag,4,16,6,16
  1698 00:00BD: 64 05        	stz	<L20+i_1
  1699 00:00BF: A9 xx xx     	lda	#<~~EGAFONT
  1700 00:00C2: 85 07        	sta	<L20+font_1
  1701 00:00C4: A9 xx xx     	lda	#^~~EGAFONT
  1702 00:00C7: 85 09        	sta	<L20+font_1+2
  1703                        	.line	73
  1704 00:00C9: 64 05        	stz	<L20+i_1
  1705                        L10004:
  1706                        ;	{
  1707                        	.line	74
  1708                        ;		//FONT_MEMORY_BANK0[i] = FONT_4_BANK0[i]
                    ;
  1709                        ;		FONT_MEMORY_BANK0[i] = font[i];
  1710                        	.line	76
  1711 00:00CB: A9 00 00     	lda	#$0
  1712 00:00CE: 85 01        	sta	<R0
  1713 00:00D0: A9 AF 00     	lda	#$af
  1714 00:00D3: 85 03        	sta	<R0+2
  1715 00:00D5: E2 20        	sep	#$20
  1716                        	longa	off
  1717 00:00D7: A4 05        	ldy	<L20+i_1
  1718 00:00D9: B7 07        	lda	[<L20+font_1],Y
  1719 00:00DB: A4 05        	ldy	<L20+i_1
  1720 00:00DD: 97 01        	sta	[<R0],Y
  1721 00:00DF: C2 20        	rep	#$20
  1722                        	longa	on
  Thu Dec  3 2020 22:25                                                Page 35


  1723                        ;		//FONT_MEMORY_BANK1[i] = BM437_ATI_8X8_F
                    ont_Set[i];
  1724                        ;		FONT_MEMORY_BANK1[i] = font[i];
  1725                        	.line	78
  1726 00:00E1: A9 00 88     	lda	#$8800
  1727 00:00E4: 85 01        	sta	<R0
  1728 00:00E6: A9 AF 00     	lda	#$af
  1729 00:00E9: 85 03        	sta	<R0+2
  1730 00:00EB: E2 20        	sep	#$20
  1731                        	longa	off
  1732 00:00ED: A4 05        	ldy	<L20+i_1
  1733 00:00EF: B7 07        	lda	[<L20+font_1],Y
  1734 00:00F1: A4 05        	ldy	<L20+i_1
  1735 00:00F3: 97 01        	sta	[<R0],Y
  1736 00:00F5: C2 20        	rep	#$20
  1737                        	longa	on
  1738                        ;	}
  1739                        	.line	79
  1740                        L10002:
  1741 00:00F7: E6 05        	inc	<L20+i_1
  1742 00:00F9: 38           	sec
  1743 00:00FA: A5 05        	lda	<L20+i_1
  1744 00:00FC: E9 00 08     	sbc	#<$800
  1745 00:00FF: 70 03        	bvs	L22
  1746 00:0101: 49 00 80     	eor	#$8000
  1747                        L22:
  1748 00:0104: 30 03        	bmi	L23
  1749 00:0106: 82 C2 FF     	brl	L10004
  1750                        L23:
  1751                        L10003:
  1752                        ;
  1753                        ;	return 0;
  1754                        	.line	81
  1755 00:0109: A9 00 00     	lda	#$0
  1756                        L24:
  1757 00:010C: A8           	tay
  1758 00:010D: A5 0C        	lda	<L19+2
  1759 00:010F: 85 0E        	sta	<L19+2+2
  1760 00:0111: A5 0B        	lda	<L19+1
  1761 00:0113: 85 0D        	sta	<L19+1+2
  1762 00:0115: 2B           	pld
  1763 00:0116: 3B           	tsc
  1764 00:0117: 18           	clc
  1765 00:0118: 69 0C 00     	adc	#L19+2
  1766 00:011B: 1B           	tcs
  1767 00:011C: 98           	tya
  1768 00:011D: 6B           	rtl
  1769                        ;}
  1770                        	.line	82
  1771                        	.endblock	82
  1772             0000000A   L19	equ	10
  1773             00000005   L20	equ	5
  1774                        	ends
  1775                        	efunc
  1776                        	.endfunc	82,5,10
  1777                        	.line	82
  1778                        ;
  1779                        ;void k_scroll_screen(PFXPROCESS p)
  Thu Dec  3 2020 22:25                                                Page 36


  1780                        ;{
  1781                        	.line	84
  1782                        	.line	85
  1783                        	code
  1784                        	xdef	~~k_scroll_screen
  1785                        	func
  1786                        	.function	85
  1787                        ~~k_scroll_screen:
  1788                        	longa	on
  1789                        	longi	on
  1790 00:011E: 3B           	tsc
  1791 00:011F: 38           	sec
  1792 00:0120: E9 14 00     	sbc	#L25
  1793 00:0123: 1B           	tcs
  1794 00:0124: 0B           	phd
  1795 00:0125: 5B           	tcd
  1796             00000004   p_0	set	4
  1797                        	.block	85
  1798                        ;	int i = 0;
  1799                        ;	int j = 0;
  1800                        ;
  1801                        ;	for(i=0;i<(p->consoleCtl->maxCols - 1);i++)
  1802             00000000   i_1	set	0
  1803             00000002   j_1	set	2
  1804                        	.sym	i,0,5,1,16
  1805                        	.sym	j,2,5,1,16
  1806                        	.sym	p,4,138,6,32,20
  1807 00:0126: 64 11        	stz	<L26+i_1
  1808 00:0128: 64 13        	stz	<L26+j_1
  1809                        	.line	89
  1810 00:012A: 64 11        	stz	<L26+i_1
  1811 00:012C: 82 61 00     	brl	L10008
  1812                        L10007:
  1813                        ;	{
  1814                        	.line	90
  1815                        ;		for(j=0;j<p->consoleCtl->maxRows;j++)
  1816                        	.line	91
  1817 00:012F: 64 13        	stz	<L26+j_1
  1818 00:0131: 82 3A 00     	brl	L10012
  1819                        L10011:
  1820                        ;		{
  1821                        	.line	92
  1822                        ;			consoleBuffer[i][j] = consoleBuf
                    fer[i+1][j];
  1823                        	.line	93
  1824 00:0134: A5 13        	lda	<L26+j_1
  1825 00:0136: 0A           	asl	A
  1826 00:0137: 85 01        	sta	<R0
  1827 00:0139: A5 11        	lda	<L26+i_1
  1828 00:013B: A2 90 00     	ldx	#<$90
  1829                        	xref	~~~mul
  1830 00:013E: 22 xx xx xx  	jsl	~~~mul
  1831 00:0142: 85 05        	sta	<R1
  1832 00:0144: 18           	clc
  1833 00:0145: A5 05        	lda	<R1
  1834 00:0147: 65 01        	adc	<R0
  1835 00:0149: 85 09        	sta	<R2
  1836 00:014B: A5 13        	lda	<L26+j_1
  Thu Dec  3 2020 22:25                                                Page 37


  1837 00:014D: 0A           	asl	A
  1838 00:014E: 85 01        	sta	<R0
  1839 00:0150: A5 11        	lda	<L26+i_1
  1840 00:0152: A2 90 00     	ldx	#<$90
  1841                        	xref	~~~mul
  1842 00:0155: 22 xx xx xx  	jsl	~~~mul
  1843 00:0159: 85 05        	sta	<R1
  1844 00:015B: 18           	clc
  1845 00:015C: A5 05        	lda	<R1
  1846 00:015E: 65 01        	adc	<R0
  1847 00:0160: 85 0D        	sta	<R3
  1848 00:0162: A6 0D        	ldx	<R3
  1849 00:0164: BD xx xx     	lda	|~~consoleBuffer+144,X
  1850 00:0167: A6 09        	ldx	<R2
  1851 00:0169: 9D xx xx     	sta	|~~consoleBuffer,X
  1852                        ;		}
  1853                        	.line	94
  1854                        L10009:
  1855 00:016C: E6 13        	inc	<L26+j_1
  1856                        L10012:
  1857 00:016E: A0 54 00     	ldy	#$54
  1858 00:0171: B7 18        	lda	[<L25+p_0],Y
  1859 00:0173: 85 01        	sta	<R0
  1860 00:0175: A0 56 00     	ldy	#$56
  1861 00:0178: B7 18        	lda	[<L25+p_0],Y
  1862 00:017A: 85 03        	sta	<R0+2
  1863 00:017C: 38           	sec
  1864 00:017D: A5 13        	lda	<L26+j_1
  1865 00:017F: A0 02 00     	ldy	#$2
  1866 00:0182: F7 01        	sbc	[<R0],Y
  1867 00:0184: 70 03        	bvs	L28
  1868 00:0186: 49 00 80     	eor	#$8000
  1869                        L28:
  1870 00:0189: 30 03        	bmi	L29
  1871 00:018B: 82 A6 FF     	brl	L10011
  1872                        L29:
  1873                        L10010:
  1874                        ;	}
  1875                        	.line	95
  1876                        L10005:
  1877 00:018E: E6 11        	inc	<L26+i_1
  1878                        L10008:
  1879 00:0190: A0 54 00     	ldy	#$54
  1880 00:0193: B7 18        	lda	[<L25+p_0],Y
  1881 00:0195: 85 01        	sta	<R0
  1882 00:0197: A0 56 00     	ldy	#$56
  1883 00:019A: B7 18        	lda	[<L25+p_0],Y
  1884 00:019C: 85 03        	sta	<R0+2
  1885 00:019E: 18           	clc
  1886 00:019F: A9 FF FF     	lda	#$ffff
  1887 00:01A2: 67 01        	adc	[<R0]
  1888 00:01A4: 85 05        	sta	<R1
  1889 00:01A6: 38           	sec
  1890 00:01A7: A5 11        	lda	<L26+i_1
  1891 00:01A9: E5 05        	sbc	<R1
  1892 00:01AB: 70 03        	bvs	L30
  1893 00:01AD: 49 00 80     	eor	#$8000
  1894                        L30:
  Thu Dec  3 2020 22:25                                                Page 38


  1895 00:01B0: 30 03        	bmi	L31
  1896 00:01B2: 82 7A FF     	brl	L10007
  1897                        L31:
  1898                        L10006:
  1899                        ;
  1900                        ;	for(i=0;i<p->consoleCtl->maxCols;i++)
  1901                        	.line	97
  1902 00:01B5: 64 11        	stz	<L26+i_1
  1903 00:01B7: 82 54 00     	brl	L10016
  1904                        L10015:
  1905                        ;	{
  1906                        	.line	98
  1907                        ;		for(j=0;j<p->consoleCtl->maxRows;j++)
  1908                        	.line	99
  1909 00:01BA: 64 13        	stz	<L26+j_1
  1910 00:01BC: 82 2D 00     	brl	L10020
  1911                        L10019:
  1912                        ;		{
  1913                        	.line	100
  1914                        ;			k_put_char(j,i,consoleBuffer[i][
                    j],15,0);
  1915                        	.line	101
  1916 00:01BF: F4 00 00     	pea	#<$0
  1917 00:01C2: F4 0F 00     	pea	#<$f
  1918 00:01C5: A5 13        	lda	<L26+j_1
  1919 00:01C7: 0A           	asl	A
  1920 00:01C8: 85 01        	sta	<R0
  1921 00:01CA: A5 11        	lda	<L26+i_1
  1922 00:01CC: A2 90 00     	ldx	#<$90
  1923                        	xref	~~~mul
  1924 00:01CF: 22 xx xx xx  	jsl	~~~mul
  1925 00:01D3: 85 05        	sta	<R1
  1926 00:01D5: 18           	clc
  1927 00:01D6: A5 05        	lda	<R1
  1928 00:01D8: 65 01        	adc	<R0
  1929 00:01DA: 85 09        	sta	<R2
  1930 00:01DC: A6 09        	ldx	<R2
  1931 00:01DE: BD xx xx     	lda	|~~consoleBuffer,X
  1932 00:01E1: 48           	pha
  1933 00:01E2: D4 11        	pei	<L26+i_1
  1934 00:01E4: D4 13        	pei	<L26+j_1
  1935 00:01E6: 22 xx xx xx  	jsl	~~k_put_char
  1936                        ;		}
  1937                        	.line	102
  1938                        L10017:
  1939 00:01EA: E6 13        	inc	<L26+j_1
  1940                        L10020:
  1941 00:01EC: A0 54 00     	ldy	#$54
  1942 00:01EF: B7 18        	lda	[<L25+p_0],Y
  1943 00:01F1: 85 01        	sta	<R0
  1944 00:01F3: A0 56 00     	ldy	#$56
  1945 00:01F6: B7 18        	lda	[<L25+p_0],Y
  1946 00:01F8: 85 03        	sta	<R0+2
  1947 00:01FA: 38           	sec
  1948 00:01FB: A5 13        	lda	<L26+j_1
  1949 00:01FD: A0 02 00     	ldy	#$2
  1950 00:0200: F7 01        	sbc	[<R0],Y
  1951 00:0202: 70 03        	bvs	L32
  Thu Dec  3 2020 22:25                                                Page 39


  1952 00:0204: 49 00 80     	eor	#$8000
  1953                        L32:
  1954 00:0207: 30 03        	bmi	L33
  1955 00:0209: 82 B3 FF     	brl	L10019
  1956                        L33:
  1957                        L10018:
  1958                        ;	}
  1959                        	.line	103
  1960                        L10013:
  1961 00:020C: E6 11        	inc	<L26+i_1
  1962                        L10016:
  1963 00:020E: A0 54 00     	ldy	#$54
  1964 00:0211: B7 18        	lda	[<L25+p_0],Y
  1965 00:0213: 85 01        	sta	<R0
  1966 00:0215: A0 56 00     	ldy	#$56
  1967 00:0218: B7 18        	lda	[<L25+p_0],Y
  1968 00:021A: 85 03        	sta	<R0+2
  1969 00:021C: 38           	sec
  1970 00:021D: A5 11        	lda	<L26+i_1
  1971 00:021F: E7 01        	sbc	[<R0]
  1972 00:0221: 70 03        	bvs	L34
  1973 00:0223: 49 00 80     	eor	#$8000
  1974                        L34:
  1975 00:0226: 30 03        	bmi	L35
  1976 00:0228: 82 8F FF     	brl	L10015
  1977                        L35:
  1978                        L10014:
  1979                        ;
  1980                        ;	p->consoleCtl->curX = 0;
  1981                        	.line	105
  1982 00:022B: A0 54 00     	ldy	#$54
  1983 00:022E: B7 18        	lda	[<L25+p_0],Y
  1984 00:0230: 85 01        	sta	<R0
  1985 00:0232: A0 56 00     	ldy	#$56
  1986 00:0235: B7 18        	lda	[<L25+p_0],Y
  1987 00:0237: 85 03        	sta	<R0+2
  1988 00:0239: A9 00 00     	lda	#$0
  1989 00:023C: A0 04 00     	ldy	#$4
  1990 00:023F: 97 01        	sta	[<R0],Y
  1991                        ;	p->consoleCtl->curY--;
  1992                        	.line	106
  1993 00:0241: A0 54 00     	ldy	#$54
  1994 00:0244: B7 18        	lda	[<L25+p_0],Y
  1995 00:0246: 85 01        	sta	<R0
  1996 00:0248: A0 56 00     	ldy	#$56
  1997 00:024B: B7 18        	lda	[<L25+p_0],Y
  1998 00:024D: 85 03        	sta	<R0+2
  1999 00:024F: 18           	clc
  2000 00:0250: A9 FF FF     	lda	#$ffff
  2001 00:0253: A0 06 00     	ldy	#$6
  2002 00:0256: 77 01        	adc	[<R0],Y
  2003 00:0258: A0 06 00     	ldy	#$6
  2004 00:025B: 97 01        	sta	[<R0],Y
  2005                        ;}
  2006                        	.line	107
  2007                        L36:
  2008 00:025D: A5 16        	lda	<L25+2
  2009 00:025F: 85 1A        	sta	<L25+2+4
  Thu Dec  3 2020 22:25                                                Page 40


  2010 00:0261: A5 15        	lda	<L25+1
  2011 00:0263: 85 19        	sta	<L25+1+4
  2012 00:0265: 2B           	pld
  2013 00:0266: 3B           	tsc
  2014 00:0267: 18           	clc
  2015 00:0268: 69 18 00     	adc	#L25+4
  2016 00:026B: 1B           	tcs
  2017 00:026C: 6B           	rtl
  2018                        	.endblock	107
  2019             00000014   L25	equ	20
  2020             00000011   L26	equ	17
  2021                        	ends
  2022                        	efunc
  2023                        	.endfunc	107,17,20
  2024                        	.line	107
  2025                        ;
  2026                        ;int k_get_cols_visible(void)
  2027                        ;{
  2028                        	.line	109
  2029                        	.line	110
  2030                        	code
  2031                        	xdef	~~k_get_cols_visible
  2032                        	func
  2033                        	.function	110
  2034                        ~~k_get_cols_visible:
  2035                        	longa	on
  2036                        	longi	on
  2037 00:026D: 3B           	tsc
  2038 00:026E: 38           	sec
  2039 00:026F: E9 00 00     	sbc	#L37
  2040 00:0272: 1B           	tcs
  2041 00:0273: 0B           	phd
  2042 00:0274: 5B           	tcd
  2043                        	.block	110
  2044                        ;	//return *((int*)(&((COLS_VISIBLE)[0]))); //2 By
                    tes Columns visible per screen line. A virtual line can be l
                    onger than displayed, up to COLS_PER_LINE long. Default  80
  2045                        ;	return *((int FAR *)COLS_VISIBLE);
  2046                        	.line	112
  2047 00:0275: AF 0F 00 00  	lda	>15
  2048                        L40:
  2049 00:0279: A8           	tay
  2050 00:027A: 2B           	pld
  2051 00:027B: 3B           	tsc
  2052 00:027C: 18           	clc
  2053 00:027D: 69 00 00     	adc	#L37
  2054 00:0280: 1B           	tcs
  2055 00:0281: 98           	tya
  2056 00:0282: 6B           	rtl
  2057                        ;}
  2058                        	.line	113
  2059                        	.endblock	113
  2060             00000000   L37	equ	0
  2061             00000001   L38	equ	1
  2062                        	ends
  2063                        	efunc
  2064                        	.endfunc	113,1,0
  2065                        	.line	113
  Thu Dec  3 2020 22:25                                                Page 41


  2066                        ;
  2067                        ;int k_get_cols_per_line(void)
  2068                        ;{
  2069                        	.line	115
  2070                        	.line	116
  2071                        	code
  2072                        	xdef	~~k_get_cols_per_line
  2073                        	func
  2074                        	.function	116
  2075                        ~~k_get_cols_per_line:
  2076                        	longa	on
  2077                        	longi	on
  2078 00:0283: 3B           	tsc
  2079 00:0284: 38           	sec
  2080 00:0285: E9 00 00     	sbc	#L41
  2081 00:0288: 1B           	tcs
  2082 00:0289: 0B           	phd
  2083 00:028A: 5B           	tcd
  2084                        	.block	116
  2085                        ;	return *((int*)COLS_PER_LINE); //2 Bytes Columns
                     visible per screen line. A virtual line can be longer than 
                    displayed, up to COLS_PER_LINE long. Default  80
  2086                        	.line	117
  2087 00:028B: AF 11 00 00  	lda	>17
  2088                        L44:
  2089 00:028F: A8           	tay
  2090 00:0290: 2B           	pld
  2091 00:0291: 3B           	tsc
  2092 00:0292: 18           	clc
  2093 00:0293: 69 00 00     	adc	#L41
  2094 00:0296: 1B           	tcs
  2095 00:0297: 98           	tya
  2096 00:0298: 6B           	rtl
  2097                        ;}
  2098                        	.line	118
  2099                        	.endblock	118
  2100             00000000   L41	equ	0
  2101             00000001   L42	equ	1
  2102                        	ends
  2103                        	efunc
  2104                        	.endfunc	118,1,0
  2105                        	.line	118
  2106                        ;
  2107                        ;int k_get_lines_visible(void)
  2108                        ;{
  2109                        	.line	120
  2110                        	.line	121
  2111                        	code
  2112                        	xdef	~~k_get_lines_visible
  2113                        	func
  2114                        	.function	121
  2115                        ~~k_get_lines_visible:
  2116                        	longa	on
  2117                        	longi	on
  2118 00:0299: 3B           	tsc
  2119 00:029A: 38           	sec
  2120 00:029B: E9 00 00     	sbc	#L45
  2121 00:029E: 1B           	tcs
  Thu Dec  3 2020 22:25                                                Page 42


  2122 00:029F: 0B           	phd
  2123 00:02A0: 5B           	tcd
  2124                        	.block	121
  2125                        ;	return *((int*)LINES_VISIBLE); //2 Bytes Columns
                     visible per screen line. A virtual line can be longer than 
                    displayed, up to COLS_PER_LINE long. Default  80
  2126                        	.line	122
  2127 00:02A1: AF 13 00 00  	lda	>19
  2128                        L48:
  2129 00:02A5: A8           	tay
  2130 00:02A6: 2B           	pld
  2131 00:02A7: 3B           	tsc
  2132 00:02A8: 18           	clc
  2133 00:02A9: 69 00 00     	adc	#L45
  2134 00:02AC: 1B           	tcs
  2135 00:02AD: 98           	tya
  2136 00:02AE: 6B           	rtl
  2137                        ;}
  2138                        	.line	123
  2139                        	.endblock	123
  2140             00000000   L45	equ	0
  2141             00000001   L46	equ	1
  2142                        	ends
  2143                        	efunc
  2144                        	.endfunc	123,1,0
  2145                        	.line	123
  2146                        ;
  2147                        ;int k_get_lines_max(void)
  2148                        ;{
  2149                        	.line	125
  2150                        	.line	126
  2151                        	code
  2152                        	xdef	~~k_get_lines_max
  2153                        	func
  2154                        	.function	126
  2155                        ~~k_get_lines_max:
  2156                        	longa	on
  2157                        	longi	on
  2158 00:02AF: 3B           	tsc
  2159 00:02B0: 38           	sec
  2160 00:02B1: E9 00 00     	sbc	#L49
  2161 00:02B4: 1B           	tcs
  2162 00:02B5: 0B           	phd
  2163 00:02B6: 5B           	tcd
  2164                        	.block	126
  2165                        ;	return *((int*)LINES_MAX); //2 Bytes Columns vis
                    ible per screen line. A virtual line can be longer than disp
                    layed, up to COLS_PER_LINE long. Default  80
  2166                        	.line	127
  2167 00:02B7: AF 15 00 00  	lda	>21
  2168                        L52:
  2169 00:02BB: A8           	tay
  2170 00:02BC: 2B           	pld
  2171 00:02BD: 3B           	tsc
  2172 00:02BE: 18           	clc
  2173 00:02BF: 69 00 00     	adc	#L49
  2174 00:02C2: 1B           	tcs
  2175 00:02C3: 98           	tya
  Thu Dec  3 2020 22:25                                                Page 43


  2176 00:02C4: 6B           	rtl
  2177                        ;}
  2178                        	.line	128
  2179                        	.endblock	128
  2180             00000000   L49	equ	0
  2181             00000001   L50	equ	1
  2182                        	ends
  2183                        	efunc
  2184                        	.endfunc	128,1,0
  2185                        	.line	128
  2186                        ;
  2187                        ;void k_enable_text_mode(void)
  2188                        ;{
  2189                        	.line	130
  2190                        	.line	131
  2191                        	code
  2192                        	xdef	~~k_enable_text_mode
  2193                        	func
  2194                        	.function	131
  2195                        ~~k_enable_text_mode:
  2196                        	longa	on
  2197                        	longi	on
  2198 00:02C5: 3B           	tsc
  2199 00:02C6: 38           	sec
  2200 00:02C7: E9 04 00     	sbc	#L53
  2201 00:02CA: 1B           	tcs
  2202 00:02CB: 0B           	phd
  2203 00:02CC: 5B           	tcd
  2204                        	.block	131
  2205                        ;	int i = 0;
  2206                        ;	int j = 0;
  2207                        ;
  2208                        ;	k_debug_string("k_enable_bitmap_mode RESET 1a...
                    \r\n");
  2209             00000000   i_1	set	0
  2210             00000002   j_1	set	2
  2211                        	.sym	i,0,5,1,16
  2212                        	.sym	j,2,5,1,16
  2213 00:02CD: 64 01        	stz	<L54+i_1
  2214 00:02CF: 64 03        	stz	<L54+j_1
  2215                        	.line	135
  2216 00:02D1: F4 xx xx     	pea	#^L8
  2217 00:02D4: F4 xx xx     	pea	#<L8
  2218 00:02D7: 22 xx xx xx  	jsl	~~k_debug_string
  2219                        ;
  2220                        ;	MASTER_CTRL_REG_H[0] = MSTR_CTRL_VIDEO_MODE0;
  2221                        	.line	137
  2222 00:02DB: E2 20        	sep	#$20
  2223                        	longa	off
  2224 00:02DD: A9 01        	lda	#$1
  2225 00:02DF: 8F 01 00 AF  	sta	>11468801
  2226 00:02E3: C2 20        	rep	#$20
  2227                        	longa	on
  2228                        ;	MASTER_CTRL_REG_L[0] = MSTR_CTRL_TEXT_MODE_EN;
  2229                        	.line	138
  2230 00:02E5: E2 20        	sep	#$20
  2231                        	longa	off
  2232 00:02E7: A9 01        	lda	#$1
  Thu Dec  3 2020 22:25                                                Page 44


  2233 00:02E9: 8F 00 00 AF  	sta	>11468800
  2234 00:02ED: C2 20        	rep	#$20
  2235                        	longa	on
  2236                        ;
  2237                        ;	for(i=3200;i>0;i--)
  2238                        	.line	140
  2239 00:02EF: A9 80 0C     	lda	#$c80
  2240 00:02F2: 85 01        	sta	<L54+i_1
  2241                        L10023:
  2242                        ;	{
  2243                        	.line	141
  2244                        ;		for(j=0;j<256;j++)
  2245                        	.line	142
  2246 00:02F4: 64 03        	stz	<L54+j_1
  2247                        L10026:
  2248                        ;		{
  2249                        	.line	143
  2250                        ;			asm NOP;
  2251                        	.line	144
  2252                        	asmstart
  2253 00:02F6: EA           	NOP
  2254                        	asmend
  2255                        ;		}
  2256                        	.line	145
  2257                        L10024:
  2258 00:02F7: E6 03        	inc	<L54+j_1
  2259 00:02F9: 38           	sec
  2260 00:02FA: A5 03        	lda	<L54+j_1
  2261 00:02FC: E9 00 01     	sbc	#<$100
  2262 00:02FF: 70 03        	bvs	L56
  2263 00:0301: 49 00 80     	eor	#$8000
  2264                        L56:
  2265 00:0304: 30 03        	bmi	L57
  2266 00:0306: 82 ED FF     	brl	L10026
  2267                        L57:
  2268                        L10025:
  2269                        ;	}
  2270                        	.line	146
  2271                        L10021:
  2272 00:0309: C6 01        	dec	<L54+i_1
  2273 00:030B: 38           	sec
  2274 00:030C: A9 00 00     	lda	#$0
  2275 00:030F: E5 01        	sbc	<L54+i_1
  2276 00:0311: 70 03        	bvs	L58
  2277 00:0313: 49 00 80     	eor	#$8000
  2278                        L58:
  2279 00:0316: 30 03        	bmi	L59
  2280 00:0318: 82 D9 FF     	brl	L10023
  2281                        L59:
  2282                        L10022:
  2283                        ;
  2284                        ;	k_debug_string("k_enable_bitmap_mode RESET 1b...
                    \r\n");
  2285                        	.line	148
  2286 00:031B: F4 xx xx     	pea	#^L8+35
  2287 00:031E: F4 xx xx     	pea	#<L8+35
  2288 00:0321: 22 xx xx xx  	jsl	~~k_debug_string
  2289                        ;
  Thu Dec  3 2020 22:25                                                Page 45


  2290                        ;	MASTER_CTRL_REG_H[0] = MSTR_CTRL_VIDEO_MODE0;
  2291                        	.line	150
  2292 00:0325: E2 20        	sep	#$20
  2293                        	longa	off
  2294 00:0327: A9 01        	lda	#$1
  2295 00:0329: 8F 01 00 AF  	sta	>11468801
  2296 00:032D: C2 20        	rep	#$20
  2297                        	longa	on
  2298                        ;	MASTER_CTRL_REG_L[0] = MSTR_CTRL_TEXT_MODE_EN;
  2299                        	.line	151
  2300 00:032F: E2 20        	sep	#$20
  2301                        	longa	off
  2302 00:0331: A9 01        	lda	#$1
  2303 00:0333: 8F 00 00 AF  	sta	>11468800
  2304 00:0337: C2 20        	rep	#$20
  2305                        	longa	on
  2306                        ;
  2307                        ;	for(i=3200;i>0;i--)
  2308                        	.line	153
  2309 00:0339: A9 80 0C     	lda	#$c80
  2310 00:033C: 85 01        	sta	<L54+i_1
  2311                        L10029:
  2312                        ;	{
  2313                        	.line	154
  2314                        ;		for(j=0;j<256;j++)
  2315                        	.line	155
  2316 00:033E: 64 03        	stz	<L54+j_1
  2317                        L10032:
  2318                        ;		{
  2319                        	.line	156
  2320                        ;			asm NOP;
  2321                        	.line	157
  2322                        	asmstart
  2323 00:0340: EA           	NOP
  2324                        	asmend
  2325                        ;		}
  2326                        	.line	158
  2327                        L10030:
  2328 00:0341: E6 03        	inc	<L54+j_1
  2329 00:0343: 38           	sec
  2330 00:0344: A5 03        	lda	<L54+j_1
  2331 00:0346: E9 00 01     	sbc	#<$100
  2332 00:0349: 70 03        	bvs	L60
  2333 00:034B: 49 00 80     	eor	#$8000
  2334                        L60:
  2335 00:034E: 30 03        	bmi	L61
  2336 00:0350: 82 ED FF     	brl	L10032
  2337                        L61:
  2338                        L10031:
  2339                        ;	}
  2340                        	.line	159
  2341                        L10027:
  2342 00:0353: C6 01        	dec	<L54+i_1
  2343 00:0355: 38           	sec
  2344 00:0356: A9 00 00     	lda	#$0
  2345 00:0359: E5 01        	sbc	<L54+i_1
  2346 00:035B: 70 03        	bvs	L62
  2347 00:035D: 49 00 80     	eor	#$8000
  Thu Dec  3 2020 22:25                                                Page 46


  2348                        L62:
  2349 00:0360: 30 03        	bmi	L63
  2350 00:0362: 82 D9 FF     	brl	L10029
  2351                        L63:
  2352                        L10028:
  2353                        ;
  2354                        ;	k_debug_string("k_enable_bitmap_mode RESET 1c...
                    \r\n");
  2355                        	.line	161
  2356 00:0365: F4 xx xx     	pea	#^L8+70
  2357 00:0368: F4 xx xx     	pea	#<L8+70
  2358 00:036B: 22 xx xx xx  	jsl	~~k_debug_string
  2359                        ;
  2360                        ;	MASTER_CTRL_REG_H[0] = MSTR_CTRL_VIDEO_MODE0;
  2361                        	.line	163
  2362 00:036F: E2 20        	sep	#$20
  2363                        	longa	off
  2364 00:0371: A9 01        	lda	#$1
  2365 00:0373: 8F 01 00 AF  	sta	>11468801
  2366 00:0377: C2 20        	rep	#$20
  2367                        	longa	on
  2368                        ;	MASTER_CTRL_REG_L[0] = MSTR_CTRL_TEXT_MODE_EN;
  2369                        	.line	164
  2370 00:0379: E2 20        	sep	#$20
  2371                        	longa	off
  2372 00:037B: A9 01        	lda	#$1
  2373 00:037D: 8F 00 00 AF  	sta	>11468800
  2374 00:0381: C2 20        	rep	#$20
  2375                        	longa	on
  2376                        ;
  2377                        ;	for(i=3200;i>0;i--)
  2378                        	.line	166
  2379 00:0383: A9 80 0C     	lda	#$c80
  2380 00:0386: 85 01        	sta	<L54+i_1
  2381                        L10035:
  2382                        ;	{
  2383                        	.line	167
  2384                        ;		for(j=0;j<256;j++)
  2385                        	.line	168
  2386 00:0388: 64 03        	stz	<L54+j_1
  2387                        L10038:
  2388                        ;		{
  2389                        	.line	169
  2390                        ;			asm NOP;
  2391                        	.line	170
  2392                        	asmstart
  2393 00:038A: EA           	NOP
  2394                        	asmend
  2395                        ;		}
  2396                        	.line	171
  2397                        L10036:
  2398 00:038B: E6 03        	inc	<L54+j_1
  2399 00:038D: 38           	sec
  2400 00:038E: A5 03        	lda	<L54+j_1
  2401 00:0390: E9 00 01     	sbc	#<$100
  2402 00:0393: 70 03        	bvs	L64
  2403 00:0395: 49 00 80     	eor	#$8000
  2404                        L64:
  Thu Dec  3 2020 22:25                                                Page 47


  2405 00:0398: 30 03        	bmi	L65
  2406 00:039A: 82 ED FF     	brl	L10038
  2407                        L65:
  2408                        L10037:
  2409                        ;	}
  2410                        	.line	172
  2411                        L10033:
  2412 00:039D: C6 01        	dec	<L54+i_1
  2413 00:039F: 38           	sec
  2414 00:03A0: A9 00 00     	lda	#$0
  2415 00:03A3: E5 01        	sbc	<L54+i_1
  2416 00:03A5: 70 03        	bvs	L66
  2417 00:03A7: 49 00 80     	eor	#$8000
  2418                        L66:
  2419 00:03AA: 30 03        	bmi	L67
  2420 00:03AC: 82 D9 FF     	brl	L10035
  2421                        L67:
  2422                        L10034:
  2423                        ;
  2424                        ;
  2425                        ;	k_debug_string("k_enable_text_mode RESET 1...\r\
                    n");
  2426                        	.line	175
  2427 00:03AF: F4 xx xx     	pea	#^L8+105
  2428 00:03B2: F4 xx xx     	pea	#<L8+105
  2429 00:03B5: 22 xx xx xx  	jsl	~~k_debug_string
  2430                        ;
  2431                        ;	MASTER_CTRL_REG_H[0] = 0x00;
  2432                        	.line	177
  2433 00:03B9: E2 20        	sep	#$20
  2434                        	longa	off
  2435 00:03BB: A9 00        	lda	#$0
  2436 00:03BD: 8F 01 00 AF  	sta	>11468801
  2437 00:03C1: C2 20        	rep	#$20
  2438                        	longa	on
  2439                        ;	MASTER_CTRL_REG_L[0] = MSTR_CTRL_TEXT_MODE_EN;
  2440                        	.line	178
  2441 00:03C3: E2 20        	sep	#$20
  2442                        	longa	off
  2443 00:03C5: A9 01        	lda	#$1
  2444 00:03C7: 8F 00 00 AF  	sta	>11468800
  2445 00:03CB: C2 20        	rep	#$20
  2446                        	longa	on
  2447                        ;
  2448                        ;	for(i=32;i>0;i--)
  2449                        	.line	180
  2450 00:03CD: A9 20 00     	lda	#$20
  2451 00:03D0: 85 01        	sta	<L54+i_1
  2452                        L10041:
  2453                        ;	{
  2454                        	.line	181
  2455                        ;		for(j=0;j<256;j++)
  2456                        	.line	182
  2457 00:03D2: 64 03        	stz	<L54+j_1
  2458                        L10044:
  2459                        ;		{
  2460                        	.line	183
  2461                        ;			asm NOP;
  Thu Dec  3 2020 22:25                                                Page 48


  2462                        	.line	184
  2463                        	asmstart
  2464 00:03D4: EA           	NOP
  2465                        	asmend
  2466                        ;		}
  2467                        	.line	185
  2468                        L10042:
  2469 00:03D5: E6 03        	inc	<L54+j_1
  2470 00:03D7: 38           	sec
  2471 00:03D8: A5 03        	lda	<L54+j_1
  2472 00:03DA: E9 00 01     	sbc	#<$100
  2473 00:03DD: 70 03        	bvs	L68
  2474 00:03DF: 49 00 80     	eor	#$8000
  2475                        L68:
  2476 00:03E2: 30 03        	bmi	L69
  2477 00:03E4: 82 ED FF     	brl	L10044
  2478                        L69:
  2479                        L10043:
  2480                        ;	}
  2481                        	.line	186
  2482                        L10039:
  2483 00:03E7: C6 01        	dec	<L54+i_1
  2484 00:03E9: 38           	sec
  2485 00:03EA: A9 00 00     	lda	#$0
  2486 00:03ED: E5 01        	sbc	<L54+i_1
  2487 00:03EF: 70 03        	bvs	L70
  2488 00:03F1: 49 00 80     	eor	#$8000
  2489                        L70:
  2490 00:03F4: 30 03        	bmi	L71
  2491 00:03F6: 82 D9 FF     	brl	L10041
  2492                        L71:
  2493                        L10040:
  2494                        ;
  2495                        ;	k_debug_string("k_enable_text_mode RESET 2...\r\
                    n");
  2496                        	.line	188
  2497 00:03F9: F4 xx xx     	pea	#^L8+137
  2498 00:03FC: F4 xx xx     	pea	#<L8+137
  2499 00:03FF: 22 xx xx xx  	jsl	~~k_debug_string
  2500                        ;	MASTER_CTRL_REG_H[0] = 0x00;
  2501                        	.line	189
  2502 00:0403: E2 20        	sep	#$20
  2503                        	longa	off
  2504 00:0405: A9 00        	lda	#$0
  2505 00:0407: 8F 01 00 AF  	sta	>11468801
  2506 00:040B: C2 20        	rep	#$20
  2507                        	longa	on
  2508                        ;	MASTER_CTRL_REG_L[0] = MSTR_CTRL_TEXT_MODE_EN;
  2509                        	.line	190
  2510 00:040D: E2 20        	sep	#$20
  2511                        	longa	off
  2512 00:040F: A9 01        	lda	#$1
  2513 00:0411: 8F 00 00 AF  	sta	>11468800
  2514 00:0415: C2 20        	rep	#$20
  2515                        	longa	on
  2516                        ;
  2517                        ;	for(i=32;i>0;i--)
  2518                        	.line	192
  Thu Dec  3 2020 22:25                                                Page 49


  2519 00:0417: A9 20 00     	lda	#$20
  2520 00:041A: 85 01        	sta	<L54+i_1
  2521                        L10047:
  2522                        ;	{
  2523                        	.line	193
  2524                        ;		for(j=0;j<256;j++)
  2525                        	.line	194
  2526 00:041C: 64 03        	stz	<L54+j_1
  2527                        L10050:
  2528                        ;		{
  2529                        	.line	195
  2530                        ;			asm NOP;
  2531                        	.line	196
  2532                        	asmstart
  2533 00:041E: EA           	NOP
  2534                        	asmend
  2535                        ;		}
  2536                        	.line	197
  2537                        L10048:
  2538 00:041F: E6 03        	inc	<L54+j_1
  2539 00:0421: 38           	sec
  2540 00:0422: A5 03        	lda	<L54+j_1
  2541 00:0424: E9 00 01     	sbc	#<$100
  2542 00:0427: 70 03        	bvs	L72
  2543 00:0429: 49 00 80     	eor	#$8000
  2544                        L72:
  2545 00:042C: 30 03        	bmi	L73
  2546 00:042E: 82 ED FF     	brl	L10050
  2547                        L73:
  2548                        L10049:
  2549                        ;	}
  2550                        	.line	198
  2551                        L10045:
  2552 00:0431: C6 01        	dec	<L54+i_1
  2553 00:0433: 38           	sec
  2554 00:0434: A9 00 00     	lda	#$0
  2555 00:0437: E5 01        	sbc	<L54+i_1
  2556 00:0439: 70 03        	bvs	L74
  2557 00:043B: 49 00 80     	eor	#$8000
  2558                        L74:
  2559 00:043E: 30 03        	bmi	L75
  2560 00:0440: 82 D9 FF     	brl	L10047
  2561                        L75:
  2562                        L10046:
  2563                        ;
  2564                        ;	k_debug_string("k_enable_text_mode RESET 3...\r\
                    n");
  2565                        	.line	200
  2566 00:0443: F4 xx xx     	pea	#^L8+169
  2567 00:0446: F4 xx xx     	pea	#<L8+169
  2568 00:0449: 22 xx xx xx  	jsl	~~k_debug_string
  2569                        ;	MASTER_CTRL_REG_H[0] = 0x00;
  2570                        	.line	201
  2571 00:044D: E2 20        	sep	#$20
  2572                        	longa	off
  2573 00:044F: A9 00        	lda	#$0
  2574 00:0451: 8F 01 00 AF  	sta	>11468801
  2575 00:0455: C2 20        	rep	#$20
  Thu Dec  3 2020 22:25                                                Page 50


  2576                        	longa	on
  2577                        ;	MASTER_CTRL_REG_L[0] = MSTR_CTRL_TEXT_MODE_EN;
  2578                        	.line	202
  2579 00:0457: E2 20        	sep	#$20
  2580                        	longa	off
  2581 00:0459: A9 01        	lda	#$1
  2582 00:045B: 8F 00 00 AF  	sta	>11468800
  2583 00:045F: C2 20        	rep	#$20
  2584                        	longa	on
  2585                        ;
  2586                        ;	for(i=32;i>0;i--)
  2587                        	.line	204
  2588 00:0461: A9 20 00     	lda	#$20
  2589 00:0464: 85 01        	sta	<L54+i_1
  2590                        L10053:
  2591                        ;	{
  2592                        	.line	205
  2593                        ;		for(j=0;j<256;j++)
  2594                        	.line	206
  2595 00:0466: 64 03        	stz	<L54+j_1
  2596                        L10056:
  2597                        ;		{
  2598                        	.line	207
  2599                        ;			asm NOP;
  2600                        	.line	208
  2601                        	asmstart
  2602 00:0468: EA           	NOP
  2603                        	asmend
  2604                        ;		}
  2605                        	.line	209
  2606                        L10054:
  2607 00:0469: E6 03        	inc	<L54+j_1
  2608 00:046B: 38           	sec
  2609 00:046C: A5 03        	lda	<L54+j_1
  2610 00:046E: E9 00 01     	sbc	#<$100
  2611 00:0471: 70 03        	bvs	L76
  2612 00:0473: 49 00 80     	eor	#$8000
  2613                        L76:
  2614 00:0476: 30 03        	bmi	L77
  2615 00:0478: 82 ED FF     	brl	L10056
  2616                        L77:
  2617                        L10055:
  2618                        ;	}
  2619                        	.line	210
  2620                        L10051:
  2621 00:047B: C6 01        	dec	<L54+i_1
  2622 00:047D: 38           	sec
  2623 00:047E: A9 00 00     	lda	#$0
  2624 00:0481: E5 01        	sbc	<L54+i_1
  2625 00:0483: 70 03        	bvs	L78
  2626 00:0485: 49 00 80     	eor	#$8000
  2627                        L78:
  2628 00:0488: 30 03        	bmi	L79
  2629 00:048A: 82 D9 FF     	brl	L10053
  2630                        L79:
  2631                        L10052:
  2632                        ;#asm
  2633                        	.line	211
  Thu Dec  3 2020 22:25                                                Page 51


  2634                        ;	NOP
  2635                        ;	NOP
  2636                        ;	NOP
  2637                        ;	NOP
  2638                        ;	NOP
  2639                        ;	NOP
  2640                        ;	NOP
  2641                        ;	NOP
  2642                        ;#endasm
  2643                        	asmstart
  2644 00:048D: EA           	NOP
  2645 00:048E: EA           	NOP
  2646 00:048F: EA           	NOP
  2647 00:0490: EA           	NOP
  2648 00:0491: EA           	NOP
  2649 00:0492: EA           	NOP
  2650 00:0493: EA           	NOP
  2651 00:0494: EA           	NOP
  2652                        	asmend
  2653                        ;
  2654                        ;	//MASTER_CTRL_REG_L[0] = MSTR_CTRL_DISABLE_VID;
  2655                        ;
  2656                        ;#asm
  2657                        	.line	224
  2658                        ;	NOP
  2659                        ;	NOP
  2660                        ;	NOP
  2661                        ;	NOP
  2662                        ;	NOP
  2663                        ;	NOP
  2664                        ;	NOP
  2665                        ;	NOP
  2666                        ;#endasm
  2667                        	asmstart
  2668 00:0495: EA           	NOP
  2669 00:0496: EA           	NOP
  2670 00:0497: EA           	NOP
  2671 00:0498: EA           	NOP
  2672 00:0499: EA           	NOP
  2673 00:049A: EA           	NOP
  2674 00:049B: EA           	NOP
  2675 00:049C: EA           	NOP
  2676                        	asmend
  2677                        ;
  2678                        ;	//MASTER_CTRL_REG_H[0] = 0;
  2679                        ;	MASTER_CTRL_REG_L[0] = MSTR_CTRL_TEXT_MODE_EN;
  2680                        	.line	236
  2681 00:049D: E2 20        	sep	#$20
  2682                        	longa	off
  2683 00:049F: A9 01        	lda	#$1
  2684 00:04A1: 8F 00 00 AF  	sta	>11468800
  2685 00:04A5: C2 20        	rep	#$20
  2686                        	longa	on
  2687                        ;
  2688                        ;}
  2689                        	.line	238
  2690                        L80:
  2691 00:04A7: 2B           	pld
  Thu Dec  3 2020 22:25                                                Page 52


  2692 00:04A8: 3B           	tsc
  2693 00:04A9: 18           	clc
  2694 00:04AA: 69 04 00     	adc	#L53
  2695 00:04AD: 1B           	tcs
  2696 00:04AE: 6B           	rtl
  2697                        	.endblock	238
  2698             00000004   L53	equ	4
  2699             00000001   L54	equ	1
  2700                        	ends
  2701                        	efunc
  2702                        	.endfunc	238,1,4
  2703                        	.line	238
  2704                        	data
  2705                        L8:
  2706 00:0299: 6B 5F 65 6E  	db	$6B,$5F,$65,$6E,$61,$62,$6C,$65,$5F,$62,
                    $69,$74,$6D,$61,$70
       00:029D: 61 62 6C 65 
       00:02A1: 5F 62 69 74 
       00:02A5: 6D 61 70 
  2707 00:02A8: 5F 6D 6F 64  	db	$5F,$6D,$6F,$64,$65,$20,$52,$45,$53,$45,
                    $54,$20,$31,$61,$2E
       00:02AC: 65 20 52 45 
       00:02B0: 53 45 54 20 
       00:02B4: 31 61 2E 
  2708 00:02B7: 2E 2E 0D 0A  	db	$2E,$2E,$0D,$0A,$00,$6B,$5F,$65,$6E,$61,
                    $62,$6C,$65,$5F,$62
       00:02BB: 00 6B 5F 65 
       00:02BF: 6E 61 62 6C 
       00:02C3: 65 5F 62 
  2709 00:02C6: 69 74 6D 61  	db	$69,$74,$6D,$61,$70,$5F,$6D,$6F,$64,$65,
                    $20,$52,$45,$53,$45
       00:02CA: 70 5F 6D 6F 
       00:02CE: 64 65 20 52 
       00:02D2: 45 53 45 
  2710 00:02D5: 54 20 31 62  	db	$54,$20,$31,$62,$2E,$2E,$2E,$0D,$0A,$00,
                    $6B,$5F,$65,$6E,$61
       00:02D9: 2E 2E 2E 0D 
       00:02DD: 0A 00 6B 5F 
       00:02E1: 65 6E 61 
  2711 00:02E4: 62 6C 65 5F  	db	$62,$6C,$65,$5F,$62,$69,$74,$6D,$61,$70,
                    $5F,$6D,$6F,$64,$65
       00:02E8: 62 69 74 6D 
       00:02EC: 61 70 5F 6D 
       00:02F0: 6F 64 65 
  2712 00:02F3: 20 52 45 53  	db	$20,$52,$45,$53,$45,$54,$20,$31,$63,$2E,
                    $2E,$2E,$0D,$0A,$00
       00:02F7: 45 54 20 31 
       00:02FB: 63 2E 2E 2E 
       00:02FF: 0D 0A 00 
  2713 00:0302: 6B 5F 65 6E  	db	$6B,$5F,$65,$6E,$61,$62,$6C,$65,$5F,$74,
                    $65,$78,$74,$5F,$6D
       00:0306: 61 62 6C 65 
       00:030A: 5F 74 65 78 
       00:030E: 74 5F 6D 
  2714 00:0311: 6F 64 65 20  	db	$6F,$64,$65,$20,$52,$45,$53,$45,$54,$20,
                    $31,$2E,$2E,$2E,$0D
       00:0315: 52 45 53 45 
       00:0319: 54 20 31 2E 
  Thu Dec  3 2020 22:25                                                Page 53


       00:031D: 2E 2E 0D 
  2715 00:0320: 0A 00 6B 5F  	db	$0A,$00,$6B,$5F,$65,$6E,$61,$62,$6C,$65,
                    $5F,$74,$65,$78,$74
       00:0324: 65 6E 61 62 
       00:0328: 6C 65 5F 74 
       00:032C: 65 78 74 
  2716 00:032F: 5F 6D 6F 64  	db	$5F,$6D,$6F,$64,$65,$20,$52,$45,$53,$45,
                    $54,$20,$32,$2E,$2E
       00:0333: 65 20 52 45 
       00:0337: 53 45 54 20 
       00:033B: 32 2E 2E 
  2717 00:033E: 2E 0D 0A 00  	db	$2E,$0D,$0A,$00,$6B,$5F,$65,$6E,$61,$62,
                    $6C,$65,$5F,$74,$65
       00:0342: 6B 5F 65 6E 
       00:0346: 61 62 6C 65 
       00:034A: 5F 74 65 
  2718 00:034D: 78 74 5F 6D  	db	$78,$74,$5F,$6D,$6F,$64,$65,$20,$52,$45,
                    $53,$45,$54,$20,$33
       00:0351: 6F 64 65 20 
       00:0355: 52 45 53 45 
       00:0359: 54 20 33 
  2719 00:035C: 2E 2E 2E 0D  	db	$2E,$2E,$2E,$0D,$0A,$00
       00:0360: 0A 00 
  2720 00:0362:              	ends
  2721                        ;
  2722                        ;void k_enable_border(void)
  2723                        ;{
  2724                        	.line	240
  2725                        	.line	241
  2726                        	code
  2727                        	xdef	~~k_enable_border
  2728                        	func
  2729                        	.function	241
  2730                        ~~k_enable_border:
  2731                        	longa	on
  2732                        	longi	on
  2733 00:04AF: 3B           	tsc
  2734 00:04B0: 38           	sec
  2735 00:04B1: E9 00 00     	sbc	#L82
  2736 00:04B4: 1B           	tcs
  2737 00:04B5: 0B           	phd
  2738 00:04B6: 5B           	tcd
  2739                        	.block	241
  2740                        ;	BORDER_CTRL_REG[0] = BORDER_CTRL_ENABLE;
  2741                        	.line	242
  2742 00:04B7: E2 20        	sep	#$20
  2743                        	longa	off
  2744 00:04B9: A9 01        	lda	#$1
  2745 00:04BB: 8F 04 00 AF  	sta	>11468804
  2746 00:04BF: C2 20        	rep	#$20
  2747                        	longa	on
  2748                        ;}
  2749                        	.line	243
  2750                        L85:
  2751 00:04C1: 2B           	pld
  2752 00:04C2: 3B           	tsc
  2753 00:04C3: 18           	clc
  2754 00:04C4: 69 00 00     	adc	#L82
  Thu Dec  3 2020 22:25                                                Page 54


  2755 00:04C7: 1B           	tcs
  2756 00:04C8: 6B           	rtl
  2757                        	.endblock	243
  2758             00000000   L82	equ	0
  2759             00000001   L83	equ	1
  2760                        	ends
  2761                        	efunc
  2762                        	.endfunc	243,1,0
  2763                        	.line	243
  2764                        ;
  2765                        ;void k_disable_border(void)
  2766                        ;{
  2767                        	.line	245
  2768                        	.line	246
  2769                        	code
  2770                        	xdef	~~k_disable_border
  2771                        	func
  2772                        	.function	246
  2773                        ~~k_disable_border:
  2774                        	longa	on
  2775                        	longi	on
  2776 00:04C9: 3B           	tsc
  2777 00:04CA: 38           	sec
  2778 00:04CB: E9 00 00     	sbc	#L86
  2779 00:04CE: 1B           	tcs
  2780 00:04CF: 0B           	phd
  2781 00:04D0: 5B           	tcd
  2782                        	.block	246
  2783                        ;	BORDER_CTRL_REG[0] = 0x00 ;
  2784                        	.line	247
  2785 00:04D1: E2 20        	sep	#$20
  2786                        	longa	off
  2787 00:04D3: A9 00        	lda	#$0
  2788 00:04D5: 8F 04 00 AF  	sta	>11468804
  2789 00:04D9: C2 20        	rep	#$20
  2790                        	longa	on
  2791                        ;}
  2792                        	.line	248
  2793                        L89:
  2794 00:04DB: 2B           	pld
  2795 00:04DC: 3B           	tsc
  2796 00:04DD: 18           	clc
  2797 00:04DE: 69 00 00     	adc	#L86
  2798 00:04E1: 1B           	tcs
  2799 00:04E2: 6B           	rtl
  2800                        	.endblock	248
  2801             00000000   L86	equ	0
  2802             00000001   L87	equ	1
  2803                        	ends
  2804                        	efunc
  2805                        	.endfunc	248,1,0
  2806                        	.line	248
  2807                        ;
  2808                        ;void k_set_border_color(char r,char g,char b)
  2809                        ;{
  2810                        	.line	250
  2811                        	.line	251
  2812                        	code
  Thu Dec  3 2020 22:25                                                Page 55


  2813                        	xdef	~~k_set_border_color
  2814                        	func
  2815                        	.function	251
  2816                        ~~k_set_border_color:
  2817                        	longa	on
  2818                        	longi	on
  2819 00:04E3: 3B           	tsc
  2820 00:04E4: 38           	sec
  2821 00:04E5: E9 00 00     	sbc	#L90
  2822 00:04E8: 1B           	tcs
  2823 00:04E9: 0B           	phd
  2824 00:04EA: 5B           	tcd
  2825             00000004   r_0	set	4
  2826             00000006   g_0	set	6
  2827             00000008   b_0	set	8
  2828                        	.block	251
  2829                        ;	BORDER_COLOR_B[0] = b;
  2830                        	.sym	r,4,14,6,8
  2831                        	.sym	g,6,14,6,8
  2832                        	.sym	b,8,14,6,8
  2833                        	.line	252
  2834 00:04EB: E2 20        	sep	#$20
  2835                        	longa	off
  2836 00:04ED: A5 08        	lda	<L90+b_0
  2837 00:04EF: 8F 05 00 AF  	sta	>11468805
  2838 00:04F3: C2 20        	rep	#$20
  2839                        	longa	on
  2840                        ;	BORDER_COLOR_G[0] = g;
  2841                        	.line	253
  2842 00:04F5: E2 20        	sep	#$20
  2843                        	longa	off
  2844 00:04F7: A5 06        	lda	<L90+g_0
  2845 00:04F9: 8F 06 00 AF  	sta	>11468806
  2846 00:04FD: C2 20        	rep	#$20
  2847                        	longa	on
  2848                        ;	BORDER_COLOR_R[0] = r;
  2849                        	.line	254
  2850 00:04FF: E2 20        	sep	#$20
  2851                        	longa	off
  2852 00:0501: A5 04        	lda	<L90+r_0
  2853 00:0503: 8F 07 00 AF  	sta	>11468807
  2854 00:0507: C2 20        	rep	#$20
  2855                        	longa	on
  2856                        ;
  2857                        ;    *BORDER_X_SIZE = 5;
  2858                        	.line	256
  2859 00:0509: E2 20        	sep	#$20
  2860                        	longa	off
  2861 00:050B: A9 05        	lda	#$5
  2862 00:050D: 8F 08 00 AF  	sta	>11468808
  2863 00:0511: C2 20        	rep	#$20
  2864                        	longa	on
  2865                        ;    *BORDER_Y_SIZE = 5;
  2866                        	.line	257
  2867 00:0513: E2 20        	sep	#$20
  2868                        	longa	off
  2869 00:0515: A9 05        	lda	#$5
  2870 00:0517: 8F 09 00 AF  	sta	>11468809
  Thu Dec  3 2020 22:25                                                Page 56


  2871 00:051B: C2 20        	rep	#$20
  2872                        	longa	on
  2873                        ;
  2874                        ;}
  2875                        	.line	259
  2876                        L93:
  2877 00:051D: A5 02        	lda	<L90+2
  2878 00:051F: 85 08        	sta	<L90+2+6
  2879 00:0521: A5 01        	lda	<L90+1
  2880 00:0523: 85 07        	sta	<L90+1+6
  2881 00:0525: 2B           	pld
  2882 00:0526: 3B           	tsc
  2883 00:0527: 18           	clc
  2884 00:0528: 69 06 00     	adc	#L90+6
  2885 00:052B: 1B           	tcs
  2886 00:052C: 6B           	rtl
  2887                        	.endblock	259
  2888             00000000   L90	equ	0
  2889             00000001   L91	equ	1
  2890                        	ends
  2891                        	efunc
  2892                        	.endfunc	259,1,0
  2893                        	.line	259
  2894                        ;
  2895                        ;void k_clear_screen(int bcolor)
  2896                        ;{
  2897                        	.line	261
  2898                        	.line	262
  2899                        	code
  2900                        	xdef	~~k_clear_screen
  2901                        	func
  2902                        	.function	262
  2903                        ~~k_clear_screen:
  2904                        	longa	on
  2905                        	longi	on
  2906 00:052D: 3B           	tsc
  2907 00:052E: 38           	sec
  2908 00:052F: E9 00 00     	sbc	#L94
  2909 00:0532: 1B           	tcs
  2910 00:0533: 0B           	phd
  2911 00:0534: 5B           	tcd
  2912             00000004   bcolor_0	set	4
  2913                        	.block	262
  2914                        ;	memset((unsigned char FAR *)0xAFA000,0,0xAFA000 
                    + 0xC000);
  2915                        	.sym	bcolor,4,5,6,16
  2916                        	.line	263
  2917 00:0535: F4 00 60     	pea	#<$b06000
  2918 00:0538: F4 00 00     	pea	#<$0
  2919 00:053B: F4 AF 00     	pea	#^$afa000
  2920 00:053E: F4 00 A0     	pea	#<$afa000
  2921 00:0541: 22 xx xx xx  	jsl	~~memset
  2922                        ;	memset((unsigned char FAR *)0xAFC000,bcolor,0xAF
                    A000 + 0xC000);
  2923                        	.line	264
  2924 00:0545: F4 00 60     	pea	#<$b06000
  2925 00:0548: D4 04        	pei	<L94+bcolor_0
  2926 00:054A: F4 AF 00     	pea	#^$afc000
  Thu Dec  3 2020 22:25                                                Page 57


  2927 00:054D: F4 00 C0     	pea	#<$afc000
  2928 00:0550: 22 xx xx xx  	jsl	~~memset
  2929                        ;}
  2930                        	.line	265
  2931                        L97:
  2932 00:0554: A5 02        	lda	<L94+2
  2933 00:0556: 85 04        	sta	<L94+2+2
  2934 00:0558: A5 01        	lda	<L94+1
  2935 00:055A: 85 03        	sta	<L94+1+2
  2936 00:055C: 2B           	pld
  2937 00:055D: 3B           	tsc
  2938 00:055E: 18           	clc
  2939 00:055F: 69 02 00     	adc	#L94+2
  2940 00:0562: 1B           	tcs
  2941 00:0563: 6B           	rtl
  2942                        	.endblock	265
  2943             00000000   L94	equ	0
  2944             00000001   L95	equ	1
  2945                        	ends
  2946                        	efunc
  2947                        	.endfunc	265,1,0
  2948                        	.line	265
  2949                        ;
  2950                        ;int k_put_string(int col,int row,char * text,int 
                    fcolor,int bcolor)
  2951                        ;{
  2952                        	.line	267
  2953                        	.line	268
  2954                        	code
  2955                        	xdef	~~k_put_string
  2956                        	func
  2957                        	.function	268
  2958                        ~~k_put_string:
  2959                        	longa	on
  2960                        	longi	on
  2961 00:0564: 3B           	tsc
  2962 00:0565: 38           	sec
  2963 00:0566: E9 04 00     	sbc	#L98
  2964 00:0569: 1B           	tcs
  2965 00:056A: 0B           	phd
  2966 00:056B: 5B           	tcd
  2967             00000004   col_0	set	4
  2968             00000006   row_0	set	6
  2969             00000008   text_0	set	8
  2970             0000000C   fcolor_0	set	12
  2971             0000000E   bcolor_0	set	14
  2972                        	.block	268
  2973                        ;	char * ptr = text;
  2974                        ;	while(*ptr)
  2975             00000000   ptr_1	set	0
  2976                        	.sym	ptr,0,142,1,32
  2977                        	.sym	col,4,5,6,16
  2978                        	.sym	row,6,5,6,16
  2979                        	.sym	text,8,142,6,32
  2980                        	.sym	fcolor,12,5,6,16
  2981                        	.sym	bcolor,14,5,6,16
  2982 00:056C: A5 0C        	lda	<L98+text_0
  2983 00:056E: 85 01        	sta	<L99+ptr_1
  Thu Dec  3 2020 22:25                                                Page 58


  2984 00:0570: A5 0E        	lda	<L98+text_0+2
  2985 00:0572: 85 03        	sta	<L99+ptr_1+2
  2986                        	.line	270
  2987                        L10057:
  2988 00:0574: A7 01        	lda	[<L99+ptr_1]
  2989 00:0576: 29 FF 00     	and	#$ff
  2990 00:0579: D0 03        	bne	L101
  2991 00:057B: 82 1A 00     	brl	L10058
  2992                        L101:
  2993                        ;	{
  2994                        	.line	271
  2995                        ;		k_put_char(col,row,*ptr,fcolor,bcolor);
  2996                        	.line	272
  2997 00:057E: D4 12        	pei	<L98+bcolor_0
  2998 00:0580: D4 10        	pei	<L98+fcolor_0
  2999 00:0582: A7 01        	lda	[<L99+ptr_1]
  3000 00:0584: 48           	pha
  3001 00:0585: D4 0A        	pei	<L98+row_0
  3002 00:0587: D4 08        	pei	<L98+col_0
  3003 00:0589: 22 xx xx xx  	jsl	~~k_put_char
  3004                        ;		col++;
  3005                        	.line	273
  3006 00:058D: E6 08        	inc	<L98+col_0
  3007                        ;		ptr++;
  3008                        	.line	274
  3009 00:058F: E6 01        	inc	<L99+ptr_1
  3010 00:0591: D0 02        	bne	L102
  3011 00:0593: E6 03        	inc	<L99+ptr_1+2
  3012                        L102:
  3013                        ;	}
  3014                        	.line	275
  3015 00:0595: 82 DC FF     	brl	L10057
  3016                        L10058:
  3017                        ;
  3018                        ;	return col;
  3019                        	.line	277
  3020 00:0598: A5 08        	lda	<L98+col_0
  3021                        L103:
  3022 00:059A: A8           	tay
  3023 00:059B: A5 06        	lda	<L98+2
  3024 00:059D: 85 12        	sta	<L98+2+12
  3025 00:059F: A5 05        	lda	<L98+1
  3026 00:05A1: 85 11        	sta	<L98+1+12
  3027 00:05A3: 2B           	pld
  3028 00:05A4: 3B           	tsc
  3029 00:05A5: 18           	clc
  3030 00:05A6: 69 10 00     	adc	#L98+12
  3031 00:05A9: 1B           	tcs
  3032 00:05AA: 98           	tya
  3033 00:05AB: 6B           	rtl
  3034                        ;}
  3035                        	.line	278
  3036                        	.endblock	278
  3037             00000004   L98	equ	4
  3038             00000001   L99	equ	1
  3039                        	ends
  3040                        	efunc
  3041                        	.endfunc	278,1,4
  Thu Dec  3 2020 22:25                                                Page 59


  3042                        	.line	278
  3043                        ;
  3044                        ;int k_put_string_buffer(int col,int row,char * te
                    xt,LPVOID buffer)
  3045                        ;{
  3046                        	.line	280
  3047                        	.line	281
  3048                        	code
  3049                        	xdef	~~k_put_string_buffer
  3050                        	func
  3051                        	.function	281
  3052                        ~~k_put_string_buffer:
  3053                        	longa	on
  3054                        	longi	on
  3055 00:05AC: 3B           	tsc
  3056 00:05AD: 38           	sec
  3057 00:05AE: E9 04 00     	sbc	#L104
  3058 00:05B1: 1B           	tcs
  3059 00:05B2: 0B           	phd
  3060 00:05B3: 5B           	tcd
  3061             00000004   col_0	set	4
  3062             00000006   row_0	set	6
  3063             00000008   text_0	set	8
  3064             0000000C   buffer_0	set	12
  3065                        	.block	281
  3066                        ;	char * ptr = text;
  3067                        ;	while(*ptr)
  3068             00000000   ptr_1	set	0
  3069                        	.sym	ptr,0,142,1,32
  3070                        	.sym	col,4,5,6,16
  3071                        	.sym	row,6,5,6,16
  3072                        	.sym	text,8,142,6,32
  3073                        	.sym	buffer,12,129,6,32
  3074 00:05B4: A5 0C        	lda	<L104+text_0
  3075 00:05B6: 85 01        	sta	<L105+ptr_1
  3076 00:05B8: A5 0E        	lda	<L104+text_0+2
  3077 00:05BA: 85 03        	sta	<L105+ptr_1+2
  3078                        	.line	283
  3079                        L10059:
  3080 00:05BC: A7 01        	lda	[<L105+ptr_1]
  3081 00:05BE: 29 FF 00     	and	#$ff
  3082 00:05C1: D0 03        	bne	L107
  3083 00:05C3: 82 0B 00     	brl	L10060
  3084                        L107:
  3085                        ;	{
  3086                        	.line	284
  3087                        ;		//((LPSTR)buffer)[col][row];
  3088                        ;		col++;
  3089                        	.line	286
  3090 00:05C6: E6 08        	inc	<L104+col_0
  3091                        ;		ptr++;
  3092                        	.line	287
  3093 00:05C8: E6 01        	inc	<L105+ptr_1
  3094 00:05CA: D0 02        	bne	L108
  3095 00:05CC: E6 03        	inc	<L105+ptr_1+2
  3096                        L108:
  3097                        ;	}
  3098                        	.line	288
  Thu Dec  3 2020 22:25                                                Page 60


  3099 00:05CE: 82 EB FF     	brl	L10059
  3100                        L10060:
  3101                        ;
  3102                        ;	return col;
  3103                        	.line	290
  3104 00:05D1: A5 08        	lda	<L104+col_0
  3105                        L109:
  3106 00:05D3: A8           	tay
  3107 00:05D4: A5 06        	lda	<L104+2
  3108 00:05D6: 85 12        	sta	<L104+2+12
  3109 00:05D8: A5 05        	lda	<L104+1
  3110 00:05DA: 85 11        	sta	<L104+1+12
  3111 00:05DC: 2B           	pld
  3112 00:05DD: 3B           	tsc
  3113 00:05DE: 18           	clc
  3114 00:05DF: 69 10 00     	adc	#L104+12
  3115 00:05E2: 1B           	tcs
  3116 00:05E3: 98           	tya
  3117 00:05E4: 6B           	rtl
  3118                        ;}
  3119                        	.line	291
  3120                        	.endblock	291
  3121             00000004   L104	equ	4
  3122             00000001   L105	equ	1
  3123                        	ends
  3124                        	efunc
  3125                        	.endfunc	291,1,4
  3126                        	.line	291
  3127                        ;
  3128                        ;int k_put_color(int col,int row,char * textColor)
  3129                        ;{
  3130                        	.line	293
  3131                        	.line	294
  3132                        	code
  3133                        	xdef	~~k_put_color
  3134                        	func
  3135                        	.function	294
  3136                        ~~k_put_color:
  3137                        	longa	on
  3138                        	longi	on
  3139 00:05E5: 3B           	tsc
  3140 00:05E6: 38           	sec
  3141 00:05E7: E9 0C 00     	sbc	#L110
  3142 00:05EA: 1B           	tcs
  3143 00:05EB: 0B           	phd
  3144 00:05EC: 5B           	tcd
  3145             00000004   col_0	set	4
  3146             00000006   row_0	set	6
  3147             00000008   textColor_0	set	8
  3148                        	.block	294
  3149                        ;	char * ptr = textColor;
  3150                        ;	col++;
  3151             00000000   ptr_1	set	0
  3152                        	.sym	ptr,0,142,1,32
  3153                        	.sym	col,4,5,6,16
  3154                        	.sym	row,6,5,6,16
  3155                        	.sym	textColor,8,142,6,32
  3156 00:05ED: A5 14        	lda	<L110+textColor_0
  Thu Dec  3 2020 22:25                                                Page 61


  3157 00:05EF: 85 09        	sta	<L111+ptr_1
  3158 00:05F1: A5 16        	lda	<L110+textColor_0+2
  3159 00:05F3: 85 0B        	sta	<L111+ptr_1+2
  3160                        	.line	296
  3161 00:05F5: E6 10        	inc	<L110+col_0
  3162                        ;	while(*ptr)
  3163                        	.line	297
  3164                        L10061:
  3165 00:05F7: A7 09        	lda	[<L111+ptr_1]
  3166 00:05F9: 29 FF 00     	and	#$ff
  3167 00:05FC: D0 03        	bne	L113
  3168 00:05FE: 82 31 00     	brl	L10062
  3169                        L113:
  3170                        ;	{
  3171                        	.line	298
  3172                        ;		//CS_COLOR_MEM_PTR[128 * row + col] = *p
                    tr;
  3173                        ;		CS_COLOR_MEM_PTR[80 * row + col] = *ptr;
  3174                        	.line	300
  3175 00:0601: A5 12        	lda	<L110+row_0
  3176 00:0603: A2 50 00     	ldx	#<$50
  3177                        	xref	~~~mul
  3178 00:0606: 22 xx xx xx  	jsl	~~~mul
  3179 00:060A: 85 01        	sta	<R0
  3180 00:060C: 18           	clc
  3181 00:060D: A5 01        	lda	<R0
  3182 00:060F: 65 10        	adc	<L110+col_0
  3183 00:0611: 85 05        	sta	<R1
  3184 00:0613: A9 00 C0     	lda	#$c000
  3185 00:0616: 85 01        	sta	<R0
  3186 00:0618: A9 AF 00     	lda	#$af
  3187 00:061B: 85 03        	sta	<R0+2
  3188 00:061D: E2 20        	sep	#$20
  3189                        	longa	off
  3190 00:061F: A7 09        	lda	[<L111+ptr_1]
  3191 00:0621: A4 05        	ldy	<R1
  3192 00:0623: 97 01        	sta	[<R0],Y
  3193 00:0625: C2 20        	rep	#$20
  3194                        	longa	on
  3195                        ;		col++;
  3196                        	.line	301
  3197 00:0627: E6 10        	inc	<L110+col_0
  3198                        ;		ptr++;
  3199                        	.line	302
  3200 00:0629: E6 09        	inc	<L111+ptr_1
  3201 00:062B: D0 02        	bne	L114
  3202 00:062D: E6 0B        	inc	<L111+ptr_1+2
  3203                        L114:
  3204                        ;	}
  3205                        	.line	303
  3206 00:062F: 82 C5 FF     	brl	L10061
  3207                        L10062:
  3208                        ;
  3209                        ;	return col;
  3210                        	.line	305
  3211 00:0632: A5 10        	lda	<L110+col_0
  3212                        L115:
  3213 00:0634: A8           	tay
  Thu Dec  3 2020 22:25                                                Page 62


  3214 00:0635: A5 0E        	lda	<L110+2
  3215 00:0637: 85 16        	sta	<L110+2+8
  3216 00:0639: A5 0D        	lda	<L110+1
  3217 00:063B: 85 15        	sta	<L110+1+8
  3218 00:063D: 2B           	pld
  3219 00:063E: 3B           	tsc
  3220 00:063F: 18           	clc
  3221 00:0640: 69 14 00     	adc	#L110+8
  3222 00:0643: 1B           	tcs
  3223 00:0644: 98           	tya
  3224 00:0645: 6B           	rtl
  3225                        ;}
  3226                        	.line	306
  3227                        	.endblock	306
  3228             0000000C   L110	equ	12
  3229             00000009   L111	equ	9
  3230                        	ends
  3231                        	efunc
  3232                        	.endfunc	306,9,12
  3233                        	.line	306
  3234                        ;
  3235                        ;/*
  3236                        ;int k_put_string(int col,int row,char * text,int 
                    fcolor,int bcolor)
  3237                        ;{
  3238                        ;	int tcolor = 0;
  3239                        ;	char * ptr = text;
  3240                        ;	while(*ptr)
  3241                        ;	{
  3242                        ;		if(*ptr == '\\')
  3243                        ;		{
  3244                        ;			ptr++;
  3245                        ;			tcolor = *ptr;
  3246                        ;			k_debug_hex("tcolor:",(UCHAR)tco
                    lor);
  3247                        ;			ptr+=2;
  3248                        ;			k_debug_char("char:",*ptr);
  3249                        ;			k_put_char(col,row,*ptr,tcolor,b
                    color);
  3250                        ;		}
  3251                        ;		else
  3252                        ;		{
  3253                        ;			k_put_char(col,row,*ptr,fcolor,b
                    color);
  3254                        ;		}
  3255                        ;		col++;
  3256                        ;		ptr++;
  3257                        ;	}
  3258                        ;
  3259                        ;	return col;
  3260                        ;}
  3261                        ;*/
  3262                        ;
  3263                        ;void k_put_char(int col,int row,char c,int fcolor
                    ,int bcolor)
  3264                        ;{
  3265                        	.line	336
  3266                        	.line	337
  Thu Dec  3 2020 22:25                                                Page 63


  3267                        	code
  3268                        	xdef	~~k_put_char
  3269                        	func
  3270                        	.function	337
  3271                        ~~k_put_char:
  3272                        	longa	on
  3273                        	longi	on
  3274 00:0646: 3B           	tsc
  3275 00:0647: 38           	sec
  3276 00:0648: E9 0C 00     	sbc	#L116
  3277 00:064B: 1B           	tcs
  3278 00:064C: 0B           	phd
  3279 00:064D: 5B           	tcd
  3280             00000004   col_0	set	4
  3281             00000006   row_0	set	6
  3282             00000008   c_0	set	8
  3283             0000000A   fcolor_0	set	10
  3284             0000000C   bcolor_0	set	12
  3285                        	.block	337
  3286                        ;#ifdef USE_FX256_FMX
  3287                        ;	col++;
  3288                        	.sym	col,4,5,6,16
  3289                        	.sym	row,6,5,6,16
  3290                        	.sym	c,8,14,6,8
  3291                        	.sym	fcolor,10,5,6,16
  3292                        	.sym	bcolor,12,5,6,16
  3293                        	.line	339
  3294 00:064E: E6 10        	inc	<L116+col_0
  3295                        ;	CS_TEXT_MEM_PTR[80 * row + col ] = c;
  3296                        	.line	340
  3297 00:0650: A5 12        	lda	<L116+row_0
  3298 00:0652: A2 50 00     	ldx	#<$50
  3299                        	xref	~~~mul
  3300 00:0655: 22 xx xx xx  	jsl	~~~mul
  3301 00:0659: 85 01        	sta	<R0
  3302 00:065B: 18           	clc
  3303 00:065C: A5 01        	lda	<R0
  3304 00:065E: 65 10        	adc	<L116+col_0
  3305 00:0660: 85 05        	sta	<R1
  3306 00:0662: A9 00 A0     	lda	#$a000
  3307 00:0665: 85 01        	sta	<R0
  3308 00:0667: A9 AF 00     	lda	#$af
  3309 00:066A: 85 03        	sta	<R0+2
  3310 00:066C: E2 20        	sep	#$20
  3311                        	longa	off
  3312 00:066E: A5 14        	lda	<L116+c_0
  3313 00:0670: A4 05        	ldy	<R1
  3314 00:0672: 97 01        	sta	[<R0],Y
  3315 00:0674: C2 20        	rep	#$20
  3316                        	longa	on
  3317                        ;	//CS_COLOR_MEM_PTR[80 * row + col] = ((fcolor & 
                    0x0F) << 4 + (bcolor & 0x0F));
  3318                        ;	//CS_COLOR_MEM_PTR[80 * row + col] = ((fcolor & 
                    0x00FF) << 8 + (bcolor & 0x00FF));
  3319                        ;	CS_COLOR_MEM_PTR[80 * row + col] = ((fcolor & 0x
                    0F) << 4 + (bcolor & 0x0F));
  3320                        	.line	343
  3321 00:0676: A5 12        	lda	<L116+row_0
  Thu Dec  3 2020 22:25                                                Page 64


  3322 00:0678: A2 50 00     	ldx	#<$50
  3323                        	xref	~~~mul
  3324 00:067B: 22 xx xx xx  	jsl	~~~mul
  3325 00:067F: 85 01        	sta	<R0
  3326 00:0681: 18           	clc
  3327 00:0682: A5 01        	lda	<R0
  3328 00:0684: 65 10        	adc	<L116+col_0
  3329 00:0686: 85 05        	sta	<R1
  3330 00:0688: A9 00 C0     	lda	#$c000
  3331 00:068B: 85 01        	sta	<R0
  3332 00:068D: A9 AF 00     	lda	#$af
  3333 00:0690: 85 03        	sta	<R0+2
  3334 00:0692: A5 18        	lda	<L116+bcolor_0
  3335 00:0694: 29 0F 00     	and	#<$f
  3336 00:0697: 85 09        	sta	<R2
  3337 00:0699: 18           	clc
  3338 00:069A: A9 04 00     	lda	#$4
  3339 00:069D: 65 09        	adc	<R2
  3340 00:069F: 48           	pha
  3341 00:06A0: A5 16        	lda	<L116+fcolor_0
  3342 00:06A2: 29 0F 00     	and	#<$f
  3343 00:06A5: FA           	plx
  3344                        	xref	~~~asl
  3345 00:06A6: 22 xx xx xx  	jsl	~~~asl
  3346 00:06AA: E2 20        	sep	#$20
  3347                        	longa	off
  3348 00:06AC: A4 05        	ldy	<R1
  3349 00:06AE: 97 01        	sta	[<R0],Y
  3350 00:06B0: C2 20        	rep	#$20
  3351                        	longa	on
  3352                        ;#else
  3353                        ;	CS_TEXT_MEM_PTR[128 * row + col] = c;
  3354                        ;	CS_COLOR_MEM_PTR[128 * row + col] = ((fcolor & 0
                    x0F) << 4 + (bcolor & 0x0F));
  3355                        ;#endif
  3356                        ;}
  3357                        	.line	348
  3358                        L119:
  3359 00:06B2: A5 0E        	lda	<L116+2
  3360 00:06B4: 85 18        	sta	<L116+2+10
  3361 00:06B6: A5 0D        	lda	<L116+1
  3362 00:06B8: 85 17        	sta	<L116+1+10
  3363 00:06BA: 2B           	pld
  3364 00:06BB: 3B           	tsc
  3365 00:06BC: 18           	clc
  3366 00:06BD: 69 16 00     	adc	#L116+10
  3367 00:06C0: 1B           	tcs
  3368 00:06C1: 6B           	rtl
  3369                        	.endblock	348
  3370             0000000C   L116	equ	12
  3371             0000000D   L117	equ	13
  3372                        	ends
  3373                        	efunc
  3374                        	.endfunc	348,13,12
  3375                        	.line	348
  3376                        ;
  3377                        ;void k_set_background(int col,int row,int bcolor)
  3378                        ;{
  Thu Dec  3 2020 22:25                                                Page 65


  3379                        	.line	350
  3380                        	.line	351
  3381                        	code
  3382                        	xdef	~~k_set_background
  3383                        	func
  3384                        	.function	351
  3385                        ~~k_set_background:
  3386                        	longa	on
  3387                        	longi	on
  3388 00:06C2: 3B           	tsc
  3389 00:06C3: 38           	sec
  3390 00:06C4: E9 0C 00     	sbc	#L120
  3391 00:06C7: 1B           	tcs
  3392 00:06C8: 0B           	phd
  3393 00:06C9: 5B           	tcd
  3394             00000004   col_0	set	4
  3395             00000006   row_0	set	6
  3396             00000008   bcolor_0	set	8
  3397                        	.block	351
  3398                        ;	((unsigned char FAR *)(0xAFC000 + (128 * row) + 
                    col))[0] =  bcolor;
  3399                        	.sym	col,4,5,6,16
  3400                        	.sym	row,6,5,6,16
  3401                        	.sym	bcolor,8,5,6,16
  3402                        	.line	352
  3403 00:06CA: A0 00 00     	ldy	#$0
  3404 00:06CD: A5 10        	lda	<L120+col_0
  3405 00:06CF: 10 01        	bpl	L123
  3406 00:06D1: 88           	dey
  3407                        L123:
  3408 00:06D2: 85 01        	sta	<R0
  3409 00:06D4: 84 03        	sty	<R0+2
  3410 00:06D6: A5 12        	lda	<L120+row_0
  3411 00:06D8: A2 07 00     	ldx	#<$7
  3412                        	xref	~~~asl
  3413 00:06DB: 22 xx xx xx  	jsl	~~~asl
  3414 00:06DF: 85 05        	sta	<R1
  3415 00:06E1: A0 00 00     	ldy	#$0
  3416 00:06E4: A5 05        	lda	<R1
  3417 00:06E6: 10 01        	bpl	L124
  3418 00:06E8: 88           	dey
  3419                        L124:
  3420 00:06E9: 85 05        	sta	<R1
  3421 00:06EB: 84 07        	sty	<R1+2
  3422 00:06ED: 18           	clc
  3423 00:06EE: A5 05        	lda	<R1
  3424 00:06F0: 65 01        	adc	<R0
  3425 00:06F2: 85 09        	sta	<R2
  3426 00:06F4: A5 07        	lda	<R1+2
  3427 00:06F6: 65 03        	adc	<R0+2
  3428 00:06F8: 85 0B        	sta	<R2+2
  3429 00:06FA: 18           	clc
  3430 00:06FB: A9 00 C0     	lda	#$c000
  3431 00:06FE: 65 09        	adc	<R2
  3432 00:0700: 85 01        	sta	<R0
  3433 00:0702: A9 AF 00     	lda	#$af
  3434 00:0705: 65 0B        	adc	<R2+2
  3435 00:0707: 85 03        	sta	<R0+2
  Thu Dec  3 2020 22:25                                                Page 66


  3436 00:0709: E2 20        	sep	#$20
  3437                        	longa	off
  3438 00:070B: A5 14        	lda	<L120+bcolor_0
  3439 00:070D: 87 01        	sta	[<R0]
  3440 00:070F: C2 20        	rep	#$20
  3441                        	longa	on
  3442                        ;}
  3443                        	.line	353
  3444                        L125:
  3445 00:0711: A5 0E        	lda	<L120+2
  3446 00:0713: 85 14        	sta	<L120+2+6
  3447 00:0715: A5 0D        	lda	<L120+1
  3448 00:0717: 85 13        	sta	<L120+1+6
  3449 00:0719: 2B           	pld
  3450 00:071A: 3B           	tsc
  3451 00:071B: 18           	clc
  3452 00:071C: 69 12 00     	adc	#L120+6
  3453 00:071F: 1B           	tcs
  3454 00:0720: 6B           	rtl
  3455                        	.endblock	353
  3456             0000000C   L120	equ	12
  3457             0000000D   L121	equ	13
  3458                        	ends
  3459                        	efunc
  3460                        	.endfunc	353,13,12
  3461                        	.line	353
  3462                        ;
  3463                        ;void k_set_text_font_page(UINT page)
  3464                        ;{
  3465                        	.line	355
  3466                        	.line	356
  3467                        	code
  3468                        	xdef	~~k_set_text_font_page
  3469                        	func
  3470                        	.function	356
  3471                        ~~k_set_text_font_page:
  3472                        	longa	on
  3473                        	longi	on
  3474 00:0721: 3B           	tsc
  3475 00:0722: 38           	sec
  3476 00:0723: E9 00 00     	sbc	#L126
  3477 00:0726: 1B           	tcs
  3478 00:0727: 0B           	phd
  3479 00:0728: 5B           	tcd
  3480             00000004   page_0	set	4
  3481                        	.block	356
  3482                        ;	/*
  3483                        ;	if(page)
  3484                        ;		VKY_TXT_CURSOR_CTRL_REG[0] = 0x13;
  3485                        ;	else
  3486                        ;		VKY_TXT_CURSOR_CTRL_REG[0] = 0x0B;
  3487                        ;	*/
  3488                        ;}
  3489                        	.sym	page,4,16,6,16
  3490                        	.line	363
  3491                        L129:
  3492 00:0729: A5 02        	lda	<L126+2
  3493 00:072B: 85 04        	sta	<L126+2+2
  Thu Dec  3 2020 22:25                                                Page 67


  3494 00:072D: A5 01        	lda	<L126+1
  3495 00:072F: 85 03        	sta	<L126+1+2
  3496 00:0731: 2B           	pld
  3497 00:0732: 3B           	tsc
  3498 00:0733: 18           	clc
  3499 00:0734: 69 02 00     	adc	#L126+2
  3500 00:0737: 1B           	tcs
  3501 00:0738: 6B           	rtl
  3502                        	.endblock	363
  3503             00000000   L126	equ	0
  3504             00000001   L127	equ	1
  3505                        	ends
  3506                        	efunc
  3507                        	.endfunc	363,1,0
  3508                        	.line	363
  3509                        ;
  3510                        ;void k_enable_text_cursor(UINT page)
  3511                        ;{
  3512                        	.line	365
  3513                        	.line	366
  3514                        	code
  3515                        	xdef	~~k_enable_text_cursor
  3516                        	func
  3517                        	.function	366
  3518                        ~~k_enable_text_cursor:
  3519                        	longa	on
  3520                        	longi	on
  3521 00:0739: 3B           	tsc
  3522 00:073A: 38           	sec
  3523 00:073B: E9 00 00     	sbc	#L130
  3524 00:073E: 1B           	tcs
  3525 00:073F: 0B           	phd
  3526 00:0740: 5B           	tcd
  3527             00000004   page_0	set	4
  3528                        	.block	366
  3529                        ;	CURCOLOR[0] = 15;
  3530                        	.sym	page,4,16,6,16
  3531                        	.line	367
  3532 00:0741: E2 20        	sep	#$20
  3533                        	longa	off
  3534 00:0743: A9 0F        	lda	#$f
  3535 00:0745: 8F 1E 00 00  	sta	>30
  3536 00:0749: C2 20        	rep	#$20
  3537                        	longa	on
  3538                        ;	VKY_TXT_CURSOR_CTRL_REG[0] = 0;
  3539                        	.line	368
  3540 00:074B: E2 20        	sep	#$20
  3541                        	longa	off
  3542 00:074D: A9 00        	lda	#$0
  3543 00:074F: 8F 10 00 AF  	sta	>11468816
  3544 00:0753: C2 20        	rep	#$20
  3545                        	longa	on
  3546                        ;	//VKY_TXT_CURSOR_CHAR_REG[0] = 0x00;  // FULL BL
                    OCK
  3547                        ;	VKY_TXT_CURSOR_CHAR_REG[0] = 0xA0;  // FULL BLOC
                    K
  3548                        	.line	370
  3549 00:0755: E2 20        	sep	#$20
  Thu Dec  3 2020 22:25                                                Page 68


  3550                        	longa	off
  3551 00:0757: A9 A0        	lda	#$a0
  3552 00:0759: 8F 12 00 AF  	sta	>11468818
  3553 00:075D: C2 20        	rep	#$20
  3554                        	longa	on
  3555                        ;	//VKY_TXT_CURSOR_CTRL_REG[0] = 0x03;  // ENABLE,
                     FLASH RATE 0
  3556                        ;	//VKY_TXT_CURSOR_CTRL_REG[0] = 0x0B;  // ENABLE,
                     FLASH RATE 0
  3557                        ;	//VKY_TXT_CURSOR_CTRL_REG[0] = 0x13;
  3558                        ;
  3559                        ;	//k_set_text_font_page(page);
  3560                        ;
  3561                        ;	//VKY_TXT_CURSOR_COLR_REG[0] = 0xF0;
  3562                        ;	VKY_TXT_CURSOR_COLR_REG[0] = 0x00;
  3563                        	.line	378
  3564 00:075F: E2 20        	sep	#$20
  3565                        	longa	off
  3566 00:0761: A9 00        	lda	#$0
  3567 00:0763: 8F 13 00 AF  	sta	>11468819
  3568 00:0767: C2 20        	rep	#$20
  3569                        	longa	on
  3570                        ;	VKY_TXT_CURSOR_Y_REG_L[0]  = (UCHAR)0;
  3571                        	.line	379
  3572 00:0769: E2 20        	sep	#$20
  3573                        	longa	off
  3574 00:076B: A9 00        	lda	#$0
  3575 00:076D: 8F 16 00 AF  	sta	>11468822
  3576 00:0771: C2 20        	rep	#$20
  3577                        	longa	on
  3578                        ;	VKY_TXT_CURSOR_X_REG_L[0]  = (UCHAR)0;
  3579                        	.line	380
  3580 00:0773: E2 20        	sep	#$20
  3581                        	longa	off
  3582 00:0775: A9 00        	lda	#$0
  3583 00:0777: 8F 14 00 AF  	sta	>11468820
  3584 00:077B: C2 20        	rep	#$20
  3585                        	longa	on
  3586                        ;	VKY_TXT_CURSOR_Y_REG_H[0]  = (UCHAR)0;
  3587                        	.line	381
  3588 00:077D: E2 20        	sep	#$20
  3589                        	longa	off
  3590 00:077F: A9 00        	lda	#$0
  3591 00:0781: 8F 17 00 AF  	sta	>11468823
  3592 00:0785: C2 20        	rep	#$20
  3593                        	longa	on
  3594                        ;	VKY_TXT_CURSOR_X_REG_H[0]  = (UCHAR)0;
  3595                        	.line	382
  3596 00:0787: E2 20        	sep	#$20
  3597                        	longa	off
  3598 00:0789: A9 00        	lda	#$0
  3599 00:078B: 8F 15 00 AF  	sta	>11468821
  3600 00:078F: C2 20        	rep	#$20
  3601                        	longa	on
  3602                        ;}
  3603                        	.line	383
  3604                        L133:
  3605 00:0791: A5 02        	lda	<L130+2
  Thu Dec  3 2020 22:25                                                Page 69


  3606 00:0793: 85 04        	sta	<L130+2+2
  3607 00:0795: A5 01        	lda	<L130+1
  3608 00:0797: 85 03        	sta	<L130+1+2
  3609 00:0799: 2B           	pld
  3610 00:079A: 3B           	tsc
  3611 00:079B: 18           	clc
  3612 00:079C: 69 02 00     	adc	#L130+2
  3613 00:079F: 1B           	tcs
  3614 00:07A0: 6B           	rtl
  3615                        	.endblock	383
  3616             00000000   L130	equ	0
  3617             00000001   L131	equ	1
  3618                        	ends
  3619                        	efunc
  3620                        	.endfunc	383,1,0
  3621                        	.line	383
  3622                        ;
  3623                        ;void k_set_cursor_position(int x,int y)
  3624                        ;{
  3625                        	.line	385
  3626                        	.line	386
  3627                        	code
  3628                        	xdef	~~k_set_cursor_position
  3629                        	func
  3630                        	.function	386
  3631                        ~~k_set_cursor_position:
  3632                        	longa	on
  3633                        	longi	on
  3634 00:07A1: 3B           	tsc
  3635 00:07A2: 38           	sec
  3636 00:07A3: E9 00 00     	sbc	#L134
  3637 00:07A6: 1B           	tcs
  3638 00:07A7: 0B           	phd
  3639 00:07A8: 5B           	tcd
  3640             00000004   x_0	set	4
  3641             00000006   y_0	set	6
  3642                        	.block	386
  3643                        ;	VKY_TXT_CURSOR_Y_REG_L[0] = (UCHAR)y;
  3644                        	.sym	x,4,5,6,16
  3645                        	.sym	y,6,5,6,16
  3646                        	.line	387
  3647 00:07A9: E2 20        	sep	#$20
  3648                        	longa	off
  3649 00:07AB: A5 06        	lda	<L134+y_0
  3650 00:07AD: 8F 16 00 AF  	sta	>11468822
  3651 00:07B1: C2 20        	rep	#$20
  3652                        	longa	on
  3653                        ;	VKY_TXT_CURSOR_X_REG_L[0] = (UCHAR)x;
  3654                        	.line	388
  3655 00:07B3: E2 20        	sep	#$20
  3656                        	longa	off
  3657 00:07B5: A5 04        	lda	<L134+x_0
  3658 00:07B7: 8F 14 00 AF  	sta	>11468820
  3659 00:07BB: C2 20        	rep	#$20
  3660                        	longa	on
  3661                        ;	VKY_TXT_CURSOR_Y_REG_H[0] = (UCHAR)0;
  3662                        	.line	389
  3663 00:07BD: E2 20        	sep	#$20
  Thu Dec  3 2020 22:25                                                Page 70


  3664                        	longa	off
  3665 00:07BF: A9 00        	lda	#$0
  3666 00:07C1: 8F 17 00 AF  	sta	>11468823
  3667 00:07C5: C2 20        	rep	#$20
  3668                        	longa	on
  3669                        ;	VKY_TXT_CURSOR_X_REG_H[0] = (UCHAR)0;
  3670                        	.line	390
  3671 00:07C7: E2 20        	sep	#$20
  3672                        	longa	off
  3673 00:07C9: A9 00        	lda	#$0
  3674 00:07CB: 8F 15 00 AF  	sta	>11468821
  3675 00:07CF: C2 20        	rep	#$20
  3676                        	longa	on
  3677                        ;}
  3678                        	.line	391
  3679                        L137:
  3680 00:07D1: A5 02        	lda	<L134+2
  3681 00:07D3: 85 06        	sta	<L134+2+4
  3682 00:07D5: A5 01        	lda	<L134+1
  3683 00:07D7: 85 05        	sta	<L134+1+4
  3684 00:07D9: 2B           	pld
  3685 00:07DA: 3B           	tsc
  3686 00:07DB: 18           	clc
  3687 00:07DC: 69 04 00     	adc	#L134+4
  3688 00:07DF: 1B           	tcs
  3689 00:07E0: 6B           	rtl
  3690                        	.endblock	391
  3691             00000000   L134	equ	0
  3692             00000001   L135	equ	1
  3693                        	ends
  3694                        	efunc
  3695                        	.endfunc	391,1,0
  3696                        	.line	391
  3697                        ;
  3698                        ;void k_create_text_window(PRECT prect,TITLE title
                    ,PHANDLE phandle)
  3699                        ;{
  3700                        	.line	393
  3701                        	.line	394
  3702                        	code
  3703                        	xdef	~~k_create_text_window
  3704                        	func
  3705                        	.function	394
  3706                        ~~k_create_text_window:
  3707                        	longa	on
  3708                        	longi	on
  3709 00:07E1: 3B           	tsc
  3710 00:07E2: 38           	sec
  3711 00:07E3: E9 0E 00     	sbc	#L138
  3712 00:07E6: 1B           	tcs
  3713 00:07E7: 0B           	phd
  3714 00:07E8: 5B           	tcd
  3715             00000004   prect_0	set	4
  3716             00000008   title_0	set	8
  3717             0000000C   phandle_0	set	12
  3718                        	.block	394
  3719                        ;	int index = -1;
  3720                        ;	PWINDOW pwin = NULL;
  Thu Dec  3 2020 22:25                                                Page 71


  3721                        ;
  3722                        ;	//k_put_char(0,1,'a',5,0);
  3723                        ;
  3724                        ;	index = _k_window_index++;
  3725             00000000   index_1	set	0
  3726             00000002   pwin_1	set	2
  3727                        	.sym	index,0,5,1,16
  3728                        	.sym	pwin,2,138,1,32,30
  3729                        	.sym	prect,4,138,6,32,25
  3730                        	.sym	title,8,142,6,32
  3731                        	.sym	phandle,12,1153,6,32
  3732 00:07E9: A9 FF FF     	lda	#$ffff
  3733 00:07EC: 85 09        	sta	<L139+index_1
  3734 00:07EE: 64 0B        	stz	<L139+pwin_1
  3735 00:07F0: 64 0D        	stz	<L139+pwin_1+2
  3736                        	.line	400
  3737 00:07F2: AD xx xx     	lda	|~~_k_window_index
  3738 00:07F5: 85 09        	sta	<L139+index_1
  3739 00:07F7: EE xx xx     	inc	|~~_k_window_index
  3740                        ;
  3741                        ;	//k_put_char(0,1,'b',5,0);
  3742                        ;
  3743                        ;	pwin = &_k_window_list[index];
  3744                        	.line	404
  3745 00:07FA: A5 09        	lda	<L139+index_1
  3746 00:07FC: A2 5F 01     	ldx	#<$15f
  3747                        	xref	~~~mul
  3748 00:07FF: 22 xx xx xx  	jsl	~~~mul
  3749 00:0803: 85 01        	sta	<R0
  3750 00:0805: 18           	clc
  3751 00:0806: A9 xx xx     	lda	#<~~_k_window_list
  3752 00:0809: 65 01        	adc	<R0
  3753 00:080B: 85 05        	sta	<R1
  3754 00:080D: A5 05        	lda	<R1
  3755 00:080F: 85 0B        	sta	<L139+pwin_1
  3756                        	xref	_BEG_DATA
  3757 00:0811: A9 xx xx     	lda	#_BEG_DATA>>16
  3758 00:0814: 85 0D        	sta	<L139+pwin_1+2
  3759                        ;
  3760                        ;	pwin->win_x = prect->x;
  3761                        	.line	406
  3762 00:0816: A7 12        	lda	[<L138+prect_0]
  3763 00:0818: A0 08 00     	ldy	#$8
  3764 00:081B: 97 0B        	sta	[<L139+pwin_1],Y
  3765                        ;	pwin->win_y = prect->y;
  3766                        	.line	407
  3767 00:081D: A0 02 00     	ldy	#$2
  3768 00:0820: B7 12        	lda	[<L138+prect_0],Y
  3769 00:0822: A0 0A 00     	ldy	#$a
  3770 00:0825: 97 0B        	sta	[<L139+pwin_1],Y
  3771                        ;	pwin->win_width = prect->width;
  3772                        	.line	408
  3773 00:0827: A0 04 00     	ldy	#$4
  3774 00:082A: B7 12        	lda	[<L138+prect_0],Y
  3775 00:082C: A0 0C 00     	ldy	#$c
  3776 00:082F: 97 0B        	sta	[<L139+pwin_1],Y
  3777                        ;	pwin->win_height = prect->height;
  3778                        	.line	409
  Thu Dec  3 2020 22:25                                                Page 72


  3779 00:0831: A0 06 00     	ldy	#$6
  3780 00:0834: B7 12        	lda	[<L138+prect_0],Y
  3781 00:0836: A0 0E 00     	ldy	#$e
  3782 00:0839: 97 0B        	sta	[<L139+pwin_1],Y
  3783                        ;
  3784                        ;	//k_put_char(0,1,'c',5,0);
  3785                        ;
  3786                        ;	strcpy(pwin->win_title,title);
  3787                        	.line	413
  3788 00:083B: D4 18        	pei	<L138+title_0+2
  3789 00:083D: D4 16        	pei	<L138+title_0
  3790 00:083F: 18           	clc
  3791 00:0840: A9 D4 00     	lda	#$d4
  3792 00:0843: 65 0B        	adc	<L139+pwin_1
  3793 00:0845: 85 01        	sta	<R0
  3794 00:0847: A9 00 00     	lda	#$0
  3795 00:084A: 65 0D        	adc	<L139+pwin_1+2
  3796 00:084C: 85 03        	sta	<R0+2
  3797 00:084E: D4 03        	pei	<R0+2
  3798 00:0850: D4 01        	pei	<R0
  3799 00:0852: 22 xx xx xx  	jsl	~~strcpy
  3800                        ;
  3801                        ;	//k_put_char(0,1,'d',5,0);
  3802                        ;
  3803                        ;	k_window_draw(pwin->win_x,pwin->win_y,pwin->win_
                    width,pwin->win_height,pwin->win_title);
  3804                        	.line	417
  3805 00:0856: 18           	clc
  3806 00:0857: A9 D4 00     	lda	#$d4
  3807 00:085A: 65 0B        	adc	<L139+pwin_1
  3808 00:085C: 85 01        	sta	<R0
  3809 00:085E: A9 00 00     	lda	#$0
  3810 00:0861: 65 0D        	adc	<L139+pwin_1+2
  3811 00:0863: 85 03        	sta	<R0+2
  3812 00:0865: D4 03        	pei	<R0+2
  3813 00:0867: D4 01        	pei	<R0
  3814 00:0869: A0 0E 00     	ldy	#$e
  3815 00:086C: B7 0B        	lda	[<L139+pwin_1],Y
  3816 00:086E: 48           	pha
  3817 00:086F: A0 0C 00     	ldy	#$c
  3818 00:0872: B7 0B        	lda	[<L139+pwin_1],Y
  3819 00:0874: 48           	pha
  3820 00:0875: A0 0A 00     	ldy	#$a
  3821 00:0878: B7 0B        	lda	[<L139+pwin_1],Y
  3822 00:087A: 48           	pha
  3823 00:087B: A0 08 00     	ldy	#$8
  3824 00:087E: B7 0B        	lda	[<L139+pwin_1],Y
  3825 00:0880: 48           	pha
  3826 00:0881: 22 xx xx xx  	jsl	~~k_window_draw
  3827                        ;
  3828                        ;	//k_put_char(0,1,'e',5,0);
  3829                        ;
  3830                        ;	*phandle = (LPVOID)index;
  3831                        	.line	421
  3832 00:0885: A0 00 00     	ldy	#$0
  3833 00:0888: A5 09        	lda	<L139+index_1
  3834 00:088A: 10 01        	bpl	L141
  3835 00:088C: 88           	dey
  Thu Dec  3 2020 22:25                                                Page 73


  3836                        L141:
  3837 00:088D: 85 01        	sta	<R0
  3838 00:088F: 84 03        	sty	<R0+2
  3839 00:0891: A5 01        	lda	<R0
  3840 00:0893: 87 1A        	sta	[<L138+phandle_0]
  3841 00:0895: A5 03        	lda	<R0+2
  3842 00:0897: A0 02 00     	ldy	#$2
  3843 00:089A: 97 1A        	sta	[<L138+phandle_0],Y
  3844                        ;
  3845                        ;	return;
  3846                        	.line	423
  3847                        L142:
  3848 00:089C: A5 10        	lda	<L138+2
  3849 00:089E: 85 1C        	sta	<L138+2+12
  3850 00:08A0: A5 0F        	lda	<L138+1
  3851 00:08A2: 85 1B        	sta	<L138+1+12
  3852 00:08A4: 2B           	pld
  3853 00:08A5: 3B           	tsc
  3854 00:08A6: 18           	clc
  3855 00:08A7: 69 1A 00     	adc	#L138+12
  3856 00:08AA: 1B           	tcs
  3857 00:08AB: 6B           	rtl
  3858                        ;}
  3859                        	.line	424
  3860                        	.endblock	424
  3861             0000000E   L138	equ	14
  3862             00000009   L139	equ	9
  3863                        	ends
  3864                        	efunc
  3865                        	.endfunc	424,9,14
  3866                        	.line	424
  3867                        ;
  3868                        ;void k_text_mode_dialog(int x,int y,int width,int
                     height,LPCSTR message)
  3869                        ;{
  3870                        	.line	426
  3871                        	.line	427
  3872                        	code
  3873                        	xdef	~~k_text_mode_dialog
  3874                        	func
  3875                        	.function	427
  3876                        ~~k_text_mode_dialog:
  3877                        	longa	on
  3878                        	longi	on
  3879 00:08AC: 3B           	tsc
  3880 00:08AD: 38           	sec
  3881 00:08AE: E9 08 00     	sbc	#L143
  3882 00:08B1: 1B           	tcs
  3883 00:08B2: 0B           	phd
  3884 00:08B3: 5B           	tcd
  3885             00000004   x_0	set	4
  3886             00000006   y_0	set	6
  3887             00000008   width_0	set	8
  3888             0000000A   height_0	set	10
  3889             0000000C   message_0	set	12
  3890                        	.block	427
  3891                        ;	int pos  = x;
  3892                        ;	int line = y;
  Thu Dec  3 2020 22:25                                                Page 74


  3893                        ;
  3894                        ;	pos = k_put_string(pos,line,CONST_TBOX_TL_STR,15
                    ,0);
  3895             00000000   pos_1	set	0
  3896             00000002   line_1	set	2
  3897                        	.sym	pos,0,5,1,16
  3898                        	.sym	line,2,5,1,16
  3899                        	.sym	x,4,5,6,16
  3900                        	.sym	y,6,5,6,16
  3901                        	.sym	width,8,5,6,16
  3902                        	.sym	height,10,5,6,16
  3903                        	.sym	message,12,142,6,32
  3904 00:08B4: A5 0C        	lda	<L143+x_0
  3905 00:08B6: 85 05        	sta	<L144+pos_1
  3906 00:08B8: A5 0E        	lda	<L143+y_0
  3907 00:08BA: 85 07        	sta	<L144+line_1
  3908                        	.line	431
  3909 00:08BC: F4 00 00     	pea	#<$0
  3910 00:08BF: F4 0F 00     	pea	#<$f
  3911 00:08C2: F4 xx xx     	pea	#^L81
  3912 00:08C5: F4 xx xx     	pea	#<L81
  3913 00:08C8: D4 07        	pei	<L144+line_1
  3914 00:08CA: D4 05        	pei	<L144+pos_1
  3915 00:08CC: 22 xx xx xx  	jsl	~~k_put_string
  3916 00:08D0: 85 05        	sta	<L144+pos_1
  3917                        ;	while(pos < x + width)
  3918                        	.line	432
  3919                        L10063:
  3920 00:08D2: 18           	clc
  3921 00:08D3: A5 0C        	lda	<L143+x_0
  3922 00:08D5: 65 10        	adc	<L143+width_0
  3923 00:08D7: 85 01        	sta	<R0
  3924 00:08D9: 38           	sec
  3925 00:08DA: A5 05        	lda	<L144+pos_1
  3926 00:08DC: E5 01        	sbc	<R0
  3927 00:08DE: 70 03        	bvs	L146
  3928 00:08E0: 49 00 80     	eor	#$8000
  3929                        L146:
  3930 00:08E3: 10 03        	bpl	L147
  3931 00:08E5: 82 19 00     	brl	L10064
  3932                        L147:
  3933                        ;	{
  3934                        	.line	433
  3935                        ;		pos = k_put_string(pos,line,CONST_TBOX_T
                    OP_STR,15,0);
  3936                        	.line	434
  3937 00:08E8: F4 00 00     	pea	#<$0
  3938 00:08EB: F4 0F 00     	pea	#<$f
  3939 00:08EE: F4 xx xx     	pea	#^L81+2
  3940 00:08F1: F4 xx xx     	pea	#<L81+2
  3941 00:08F4: D4 07        	pei	<L144+line_1
  3942 00:08F6: D4 05        	pei	<L144+pos_1
  3943 00:08F8: 22 xx xx xx  	jsl	~~k_put_string
  3944 00:08FC: 85 05        	sta	<L144+pos_1
  3945                        ;	}
  3946                        	.line	435
  3947 00:08FE: 82 D1 FF     	brl	L10063
  3948                        L10064:
  Thu Dec  3 2020 22:25                                                Page 75


  3949                        ;	k_put_string(pos,line,CONST_TBOX_TR_STR,15,0);
  3950                        	.line	436
  3951 00:0901: F4 00 00     	pea	#<$0
  3952 00:0904: F4 0F 00     	pea	#<$f
  3953 00:0907: F4 xx xx     	pea	#^L81+4
  3954 00:090A: F4 xx xx     	pea	#<L81+4
  3955 00:090D: D4 07        	pei	<L144+line_1
  3956 00:090F: D4 05        	pei	<L144+pos_1
  3957 00:0911: 22 xx xx xx  	jsl	~~k_put_string
  3958                        ;	line++;
  3959                        	.line	437
  3960 00:0915: E6 07        	inc	<L144+line_1
  3961                        ;
  3962                        ;	while(line < y + height)
  3963                        	.line	439
  3964                        L10065:
  3965 00:0917: 18           	clc
  3966 00:0918: A5 0E        	lda	<L143+y_0
  3967 00:091A: 65 12        	adc	<L143+height_0
  3968 00:091C: 85 01        	sta	<R0
  3969 00:091E: 38           	sec
  3970 00:091F: A5 07        	lda	<L144+line_1
  3971 00:0921: E5 01        	sbc	<R0
  3972 00:0923: 70 03        	bvs	L148
  3973 00:0925: 49 00 80     	eor	#$8000
  3974                        L148:
  3975 00:0928: 10 03        	bpl	L149
  3976 00:092A: 82 2D 00     	brl	L10066
  3977                        L149:
  3978                        ;	{
  3979                        	.line	440
  3980                        ;		k_put_string(x,line,CONST_TBOX_LEFT_STR,
                    15,0);
  3981                        	.line	441
  3982 00:092D: F4 00 00     	pea	#<$0
  3983 00:0930: F4 0F 00     	pea	#<$f
  3984 00:0933: F4 xx xx     	pea	#^L81+6
  3985 00:0936: F4 xx xx     	pea	#<L81+6
  3986 00:0939: D4 07        	pei	<L144+line_1
  3987 00:093B: D4 0C        	pei	<L143+x_0
  3988 00:093D: 22 xx xx xx  	jsl	~~k_put_string
  3989                        ;		k_put_string(pos,line,CONST_TBOX_RIGHT_S
                    TR,15,0);
  3990                        	.line	442
  3991 00:0941: F4 00 00     	pea	#<$0
  3992 00:0944: F4 0F 00     	pea	#<$f
  3993 00:0947: F4 xx xx     	pea	#^L81+8
  3994 00:094A: F4 xx xx     	pea	#<L81+8
  3995 00:094D: D4 07        	pei	<L144+line_1
  3996 00:094F: D4 05        	pei	<L144+pos_1
  3997 00:0951: 22 xx xx xx  	jsl	~~k_put_string
  3998                        ;		line++;
  3999                        	.line	443
  4000 00:0955: E6 07        	inc	<L144+line_1
  4001                        ;	}
  4002                        	.line	444
  4003 00:0957: 82 BD FF     	brl	L10065
  4004                        L10066:
  Thu Dec  3 2020 22:25                                                Page 76


  4005                        ;	pos = x;
  4006                        	.line	445
  4007 00:095A: A5 0C        	lda	<L143+x_0
  4008 00:095C: 85 05        	sta	<L144+pos_1
  4009                        ;	pos = k_put_string(pos,line,CONST_TBOX_BL_STR,15
                    ,0);
  4010                        	.line	446
  4011 00:095E: F4 00 00     	pea	#<$0
  4012 00:0961: F4 0F 00     	pea	#<$f
  4013 00:0964: F4 xx xx     	pea	#^L81+10
  4014 00:0967: F4 xx xx     	pea	#<L81+10
  4015 00:096A: D4 07        	pei	<L144+line_1
  4016 00:096C: D4 05        	pei	<L144+pos_1
  4017 00:096E: 22 xx xx xx  	jsl	~~k_put_string
  4018 00:0972: 85 05        	sta	<L144+pos_1
  4019                        ;	while(pos < x + width)
  4020                        	.line	447
  4021                        L10067:
  4022 00:0974: 18           	clc
  4023 00:0975: A5 0C        	lda	<L143+x_0
  4024 00:0977: 65 10        	adc	<L143+width_0
  4025 00:0979: 85 01        	sta	<R0
  4026 00:097B: 38           	sec
  4027 00:097C: A5 05        	lda	<L144+pos_1
  4028 00:097E: E5 01        	sbc	<R0
  4029 00:0980: 70 03        	bvs	L150
  4030 00:0982: 49 00 80     	eor	#$8000
  4031                        L150:
  4032 00:0985: 10 03        	bpl	L151
  4033 00:0987: 82 19 00     	brl	L10068
  4034                        L151:
  4035                        ;	{
  4036                        	.line	448
  4037                        ;		pos = k_put_string(pos,line,CONST_TBOX_B
                    OTTOM_STR,15,0);
  4038                        	.line	449
  4039 00:098A: F4 00 00     	pea	#<$0
  4040 00:098D: F4 0F 00     	pea	#<$f
  4041 00:0990: F4 xx xx     	pea	#^L81+12
  4042 00:0993: F4 xx xx     	pea	#<L81+12
  4043 00:0996: D4 07        	pei	<L144+line_1
  4044 00:0998: D4 05        	pei	<L144+pos_1
  4045 00:099A: 22 xx xx xx  	jsl	~~k_put_string
  4046 00:099E: 85 05        	sta	<L144+pos_1
  4047                        ;	}
  4048                        	.line	450
  4049 00:09A0: 82 D1 FF     	brl	L10067
  4050                        L10068:
  4051                        ;	pos = k_put_string(pos,line,CONST_TBOX_BR_STR,15
                    ,0);
  4052                        	.line	451
  4053 00:09A3: F4 00 00     	pea	#<$0
  4054 00:09A6: F4 0F 00     	pea	#<$f
  4055 00:09A9: F4 xx xx     	pea	#^L81+14
  4056 00:09AC: F4 xx xx     	pea	#<L81+14
  4057 00:09AF: D4 07        	pei	<L144+line_1
  4058 00:09B1: D4 05        	pei	<L144+pos_1
  4059 00:09B3: 22 xx xx xx  	jsl	~~k_put_string
  Thu Dec  3 2020 22:25                                                Page 77


  4060 00:09B7: 85 05        	sta	<L144+pos_1
  4061                        ;
  4062                        ;	/*
  4063                        ;	pos = 1;
  4064                        ;	pos = k_put_string(pos,line,boxside,15,0);
  4065                        ;	pos = 70;
  4066                        ;	pos = k_put_string(pos,line,boxside,15,0);
  4067                        ;	line++;
  4068                        ;	pos = 1;
  4069                        ;	pos = k_put_string(pos,line,boxside,15,0);
  4070                        ;	pos = k_put_string(pos,line,CONST_EXCEPTION_TITL
                    E,15,0);
  4071                        ;	//pos = k_put_string(pos,line,k_longtodec(_k_exe
                    c_context,_brk_Buffer),15,0);
  4072                        ;	pos = k_put_string(pos,line,k_longtodec(_k_exec_
                    context,_brk_Buffer),15,0);
  4073                        ;	//pos = k_put_string(pos,line,k_longtodec(_k_exe
                    c_context,_brk_Buffer),15,0);
  4074                        ;	//pos++;
  4075                        ;	//pos = k_put_string(pos,line,k_longtodec(   ,_b
                    rk_Buffer),15,0);
  4076                        ;
  4077                        ;	pos = k_put_string(pos,line,":",15,0);
  4078                        ;	pos = k_put_string(pos,line,k_longtodec(_k_exec_
                    error,_brk_Buffer),15,0);
  4079                        ;	pos = 70;
  4080                        ;	pos = k_put_string(pos,line,boxside,15,0);
  4081                        ;	line++;
  4082                        ;	pos = 1;
  4083                        ;	pos = k_put_string(pos,line,boxside,15,0);
  4084                        ;	pos = k_put_string(pos,line,"",15,0);
  4085                        ;	pos = 70;
  4086                        ;	pos = k_put_string(pos,line,boxside,15,0);
  4087                        ;	line++;
  4088                        ;	pos = 1;
  4089                        ;	pos = k_put_string(pos,line,boxside,15,0);
  4090                        ;	pos = k_put_string(pos,line,_k_exec_message,15,0
                    );
  4091                        ;	pos = 70;
  4092                        ;	pos = k_put_string(pos,line,boxside,15,0);
  4093                        ;	line++;
  4094                        ;	pos = 1;
  4095                        ;	pos = k_put_string(pos,line,boxside,15,0);
  4096                        ;	pos = 70;
  4097                        ;	pos = k_put_string(pos,line,boxside,15,0);
  4098                        ;	line++;
  4099                        ;	pos = 1;
  4100                        ;	pos = k_put_string(pos,line,boxbottom,15,0);
  4101                        ;	*/
  4102                        ;
  4103                        ;}
  4104                        	.line	494
  4105                        L152:
  4106 00:09B9: A5 0A        	lda	<L143+2
  4107 00:09BB: 85 16        	sta	<L143+2+12
  4108 00:09BD: A5 09        	lda	<L143+1
  4109 00:09BF: 85 15        	sta	<L143+1+12
  4110 00:09C1: 2B           	pld
  Thu Dec  3 2020 22:25                                                Page 78


  4111 00:09C2: 3B           	tsc
  4112 00:09C3: 18           	clc
  4113 00:09C4: 69 14 00     	adc	#L143+12
  4114 00:09C7: 1B           	tcs
  4115 00:09C8: 6B           	rtl
  4116                        	.endblock	494
  4117             00000008   L143	equ	8
  4118             00000005   L144	equ	5
  4119                        	ends
  4120                        	efunc
  4121                        	.endfunc	494,5,8
  4122                        	.line	494
  4123                        	data
  4124                        L81:
  4125 00:0362: D6 00 C4 00  	db	$D6,$00,$FFFFFFC4,$00,$FFFFFFB7,$00,$FFF
                    FFFBA,$00,$FFFFFFBA,$00,$FFFFFFD3,$00,$FFFFFFC4,$00,$FFFFFFB
                    D
       00:0366: B7 00 BA 00 
       00:036A: BA 00 D3 00 
       00:036E: C4 00 BD 
  4126 00:0371: 00           	db	$00
  4127 00:0372:              	ends
  4128                        ;
  4129                        ;void k_window_draw(int bx,int by,int bw,int bh,ch
                    ar FAR* title)
  4130                        ;{
  4131                        	.line	496
  4132                        	.line	497
  4133                        	code
  4134                        	xdef	~~k_window_draw
  4135                        	func
  4136                        	.function	497
  4137                        ~~k_window_draw:
  4138                        	longa	on
  4139                        	longi	on
  4140 00:09C9: 3B           	tsc
  4141 00:09CA: 38           	sec
  4142 00:09CB: E9 0C 00     	sbc	#L154
  4143 00:09CE: 1B           	tcs
  4144 00:09CF: 0B           	phd
  4145 00:09D0: 5B           	tcd
  4146             00000004   bx_0	set	4
  4147             00000006   by_0	set	6
  4148             00000008   bw_0	set	8
  4149             0000000A   bh_0	set	10
  4150             0000000C   title_0	set	12
  4151                        	.block	497
  4152                        ;	int i = 0;
  4153                        ;	int k = 0;
  4154                        ;
  4155                        ;	k_put_char(0,1,'z',5,0);
  4156             00000000   i_1	set	0
  4157             00000002   k_1	set	2
  4158                        	.sym	i,0,5,1,16
  4159                        	.sym	k,2,5,1,16
  4160                        	.sym	bx,4,5,6,16
  4161                        	.sym	by,6,5,6,16
  4162                        	.sym	bw,8,5,6,16
  Thu Dec  3 2020 22:25                                                Page 79


  4163                        	.sym	bh,10,5,6,16
  4164                        	.sym	title,12,142,6,32
  4165 00:09D1: 64 09        	stz	<L155+i_1
  4166 00:09D3: 64 0B        	stz	<L155+k_1
  4167                        	.line	501
  4168 00:09D5: F4 00 00     	pea	#<$0
  4169 00:09D8: F4 05 00     	pea	#<$5
  4170 00:09DB: F4 7A 00     	pea	#<$7a
  4171 00:09DE: F4 01 00     	pea	#<$1
  4172 00:09E1: F4 00 00     	pea	#<$0
  4173 00:09E4: 22 xx xx xx  	jsl	~~k_put_char
  4174                        ;
  4175                        ;	k_window_draw_background(bx,by,bw,bh,(char)8);
  4176                        	.line	503
  4177 00:09E8: F4 08 00     	pea	#<$8
  4178 00:09EB: D4 16        	pei	<L154+bh_0
  4179 00:09ED: D4 14        	pei	<L154+bw_0
  4180 00:09EF: D4 12        	pei	<L154+by_0
  4181 00:09F1: D4 10        	pei	<L154+bx_0
  4182 00:09F3: 22 xx xx xx  	jsl	~~k_window_draw_background
  4183                        ;
  4184                        ;	k_put_char(0,1,'y',5,0);
  4185                        	.line	505
  4186 00:09F7: F4 00 00     	pea	#<$0
  4187 00:09FA: F4 05 00     	pea	#<$5
  4188 00:09FD: F4 79 00     	pea	#<$79
  4189 00:0A00: F4 01 00     	pea	#<$1
  4190 00:0A03: F4 00 00     	pea	#<$0
  4191 00:0A06: 22 xx xx xx  	jsl	~~k_put_char
  4192                        ;
  4193                        ;	for(k=by;k<(by+bh);k++)
  4194                        	.line	507
  4195 00:0A0A: A5 12        	lda	<L154+by_0
  4196 00:0A0C: 85 0B        	sta	<L155+k_1
  4197 00:0A0E: 82 4E 01     	brl	L10072
  4198                        L10071:
  4199                        ;	{
  4200                        	.line	508
  4201                        ;		if(k == by ||  k == (by + 2))
  4202                        	.line	509
  4203                        ;		{
  4204 00:0A11: A5 0B        	lda	<L155+k_1
  4205 00:0A13: C5 12        	cmp	<L154+by_0
  4206 00:0A15: D0 03        	bne	L158
  4207 00:0A17: 82 11 00     	brl	L157
  4208                        L158:
  4209 00:0A1A: 18           	clc
  4210 00:0A1B: A9 02 00     	lda	#$2
  4211 00:0A1E: 65 12        	adc	<L154+by_0
  4212 00:0A20: 85 01        	sta	<R0
  4213 00:0A22: A5 01        	lda	<R0
  4214 00:0A24: C5 0B        	cmp	<L155+k_1
  4215 00:0A26: F0 03        	beq	L159
  4216 00:0A28: 82 83 00     	brl	L10073
  4217                        L159:
  4218                        L157:
  4219                        	.line	510
  4220                        ;			k_put_char(bx     ,k,WIN_BORDER_
  Thu Dec  3 2020 22:25                                                Page 80


                    CHAR_CORNER_TLEFT,15,0);
  4221                        	.line	511
  4222 00:0A2B: F4 00 00     	pea	#<$0
  4223 00:0A2E: F4 0F 00     	pea	#<$f
  4224 00:0A31: F4 D6 00     	pea	#<$d6
  4225 00:0A34: D4 0B        	pei	<L155+k_1
  4226 00:0A36: D4 10        	pei	<L154+bx_0
  4227 00:0A38: 22 xx xx xx  	jsl	~~k_put_char
  4228                        ;			k_put_char(bx+bw-1,k,WIN_BORDER_
                    CHAR_CORNER_TRIGHT,15,0);
  4229                        	.line	512
  4230 00:0A3C: F4 00 00     	pea	#<$0
  4231 00:0A3F: F4 0F 00     	pea	#<$f
  4232 00:0A42: F4 B7 00     	pea	#<$b7
  4233 00:0A45: D4 0B        	pei	<L155+k_1
  4234 00:0A47: 18           	clc
  4235 00:0A48: A5 10        	lda	<L154+bx_0
  4236 00:0A4A: 65 14        	adc	<L154+bw_0
  4237 00:0A4C: 85 01        	sta	<R0
  4238 00:0A4E: 18           	clc
  4239 00:0A4F: A9 FF FF     	lda	#$ffff
  4240 00:0A52: 65 01        	adc	<R0
  4241 00:0A54: 48           	pha
  4242 00:0A55: 22 xx xx xx  	jsl	~~k_put_char
  4243                        ;			for(i=bx+1;i<(bx+bw-1);i++)
  4244                        	.line	513
  4245 00:0A59: A5 10        	lda	<L154+bx_0
  4246 00:0A5B: 1A           	ina
  4247 00:0A5C: 85 09        	sta	<L155+i_1
  4248 00:0A5E: 82 13 00     	brl	L10077
  4249                        L10076:
  4250                        ;			{
  4251                        	.line	514
  4252                        ;				k_put_char(i,k,WIN_BORDE
                    R_CHAR_TOP,15,0);
  4253                        	.line	515
  4254 00:0A61: F4 00 00     	pea	#<$0
  4255 00:0A64: F4 0F 00     	pea	#<$f
  4256 00:0A67: F4 C4 00     	pea	#<$c4
  4257 00:0A6A: D4 0B        	pei	<L155+k_1
  4258 00:0A6C: D4 09        	pei	<L155+i_1
  4259 00:0A6E: 22 xx xx xx  	jsl	~~k_put_char
  4260                        ;			}
  4261                        	.line	516
  4262                        L10074:
  4263 00:0A72: E6 09        	inc	<L155+i_1
  4264                        L10077:
  4265 00:0A74: 18           	clc
  4266 00:0A75: A5 10        	lda	<L154+bx_0
  4267 00:0A77: 65 14        	adc	<L154+bw_0
  4268 00:0A79: 85 01        	sta	<R0
  4269 00:0A7B: 18           	clc
  4270 00:0A7C: A9 FF FF     	lda	#$ffff
  4271 00:0A7F: 65 01        	adc	<R0
  4272 00:0A81: 85 05        	sta	<R1
  4273 00:0A83: 38           	sec
  4274 00:0A84: A5 09        	lda	<L155+i_1
  4275 00:0A86: E5 05        	sbc	<R1
  Thu Dec  3 2020 22:25                                                Page 81


  4276 00:0A88: 70 03        	bvs	L160
  4277 00:0A8A: 49 00 80     	eor	#$8000
  4278                        L160:
  4279 00:0A8D: 30 03        	bmi	L161
  4280 00:0A8F: 82 CF FF     	brl	L10076
  4281                        L161:
  4282                        L10075:
  4283                        ;			k_put_string(bx+2,by+1,title,15,
                    0);
  4284                        	.line	517
  4285 00:0A92: F4 00 00     	pea	#<$0
  4286 00:0A95: F4 0F 00     	pea	#<$f
  4287 00:0A98: D4 1A        	pei	<L154+title_0+2
  4288 00:0A9A: D4 18        	pei	<L154+title_0
  4289 00:0A9C: A5 12        	lda	<L154+by_0
  4290 00:0A9E: 1A           	ina
  4291 00:0A9F: 48           	pha
  4292 00:0AA0: 18           	clc
  4293 00:0AA1: A9 02 00     	lda	#$2
  4294 00:0AA4: 65 10        	adc	<L154+bx_0
  4295 00:0AA6: 48           	pha
  4296 00:0AA7: 22 xx xx xx  	jsl	~~k_put_string
  4297                        ;			//k_put_char(bx     ,k,WIN_BORDE
                    R_CHAR_CORNER_EDGE,15,0);
  4298                        ;			//k_put_char(bx+bw-1,k,WIN_BORDE
                    R_CHAR_CORNER_EDGE,15,0);
  4299                        ;
  4300                        ;		}
  4301                        	.line	521
  4302                        ;		/*
  4303                        ;		else if(k == (by + 1))
  4304                        ;		{
  4305                        ;			k_put_char(bx     ,k,WIN_BORDER_
                    CHAR_CORNER_EDGE,15,0);
  4306                        ;			k_put_char(bx+bw-1,k,WIN_BORDER_
                    CHAR_CORNER_EDGE,15,0);
  4307                        ;			for(i=bx+1;i<(bx+bw-1);i++)
  4308                        ;			{
  4309                        ;				k_put_char(i,k,'=',15,0)
                    ;
  4310                        ;			}
  4311                        ;		}
  4312                        ;		*/
  4313                        ;		else if(k == (by + bh - 1))
  4314 00:0AAB: 82 AF 00     	brl	L10078
  4315                        L10073:
  4316                        	.line	533
  4317                        ;		{
  4318 00:0AAE: 18           	clc
  4319 00:0AAF: A5 12        	lda	<L154+by_0
  4320 00:0AB1: 65 16        	adc	<L154+bh_0
  4321 00:0AB3: 85 01        	sta	<R0
  4322 00:0AB5: 18           	clc
  4323 00:0AB6: A9 FF FF     	lda	#$ffff
  4324 00:0AB9: 65 01        	adc	<R0
  4325 00:0ABB: 85 05        	sta	<R1
  4326 00:0ABD: A5 05        	lda	<R1
  4327 00:0ABF: C5 0B        	cmp	<L155+k_1
  Thu Dec  3 2020 22:25                                                Page 82


  4328 00:0AC1: F0 03        	beq	L162
  4329 00:0AC3: 82 69 00     	brl	L10079
  4330                        L162:
  4331                        	.line	534
  4332                        ;			for(i=bx;i<(bx+bw-1);i++)
  4333                        	.line	535
  4334 00:0AC6: A5 10        	lda	<L154+bx_0
  4335 00:0AC8: 85 09        	sta	<L155+i_1
  4336 00:0ACA: 82 13 00     	brl	L10083
  4337                        L10082:
  4338                        ;			{
  4339                        	.line	536
  4340                        ;				k_put_char(i,k,WIN_BORDE
                    R_CHAR_BOTTOM,15,0);
  4341                        	.line	537
  4342 00:0ACD: F4 00 00     	pea	#<$0
  4343 00:0AD0: F4 0F 00     	pea	#<$f
  4344 00:0AD3: F4 C4 00     	pea	#<$c4
  4345 00:0AD6: D4 0B        	pei	<L155+k_1
  4346 00:0AD8: D4 09        	pei	<L155+i_1
  4347 00:0ADA: 22 xx xx xx  	jsl	~~k_put_char
  4348                        ;			}
  4349                        	.line	538
  4350                        L10080:
  4351 00:0ADE: E6 09        	inc	<L155+i_1
  4352                        L10083:
  4353 00:0AE0: 18           	clc
  4354 00:0AE1: A5 10        	lda	<L154+bx_0
  4355 00:0AE3: 65 14        	adc	<L154+bw_0
  4356 00:0AE5: 85 01        	sta	<R0
  4357 00:0AE7: 18           	clc
  4358 00:0AE8: A9 FF FF     	lda	#$ffff
  4359 00:0AEB: 65 01        	adc	<R0
  4360 00:0AED: 85 05        	sta	<R1
  4361 00:0AEF: 38           	sec
  4362 00:0AF0: A5 09        	lda	<L155+i_1
  4363 00:0AF2: E5 05        	sbc	<R1
  4364 00:0AF4: 70 03        	bvs	L163
  4365 00:0AF6: 49 00 80     	eor	#$8000
  4366                        L163:
  4367 00:0AF9: 30 03        	bmi	L164
  4368 00:0AFB: 82 CF FF     	brl	L10082
  4369                        L164:
  4370                        L10081:
  4371                        ;			k_put_char(bx     ,k,WIN_BORDER_
                    CHAR_CORNER_BLEFT,15,0);
  4372                        	.line	539
  4373 00:0AFE: F4 00 00     	pea	#<$0
  4374 00:0B01: F4 0F 00     	pea	#<$f
  4375 00:0B04: F4 D3 00     	pea	#<$d3
  4376 00:0B07: D4 0B        	pei	<L155+k_1
  4377 00:0B09: D4 10        	pei	<L154+bx_0
  4378 00:0B0B: 22 xx xx xx  	jsl	~~k_put_char
  4379                        ;			k_put_char(bx+bw-1,k,WIN_BORDER_
                    CHAR_CORNER_BRIGHT,15,0);
  4380                        	.line	540
  4381 00:0B0F: F4 00 00     	pea	#<$0
  4382 00:0B12: F4 0F 00     	pea	#<$f
  Thu Dec  3 2020 22:25                                                Page 83


  4383 00:0B15: F4 D3 00     	pea	#<$d3
  4384 00:0B18: D4 0B        	pei	<L155+k_1
  4385 00:0B1A: 18           	clc
  4386 00:0B1B: A5 10        	lda	<L154+bx_0
  4387 00:0B1D: 65 14        	adc	<L154+bw_0
  4388 00:0B1F: 85 01        	sta	<R0
  4389 00:0B21: 18           	clc
  4390 00:0B22: A9 FF FF     	lda	#$ffff
  4391 00:0B25: 65 01        	adc	<R0
  4392 00:0B27: 48           	pha
  4393 00:0B28: 22 xx xx xx  	jsl	~~k_put_char
  4394                        ;		}
  4395                        	.line	541
  4396                        ;		else
  4397 00:0B2C: 82 2E 00     	brl	L10084
  4398                        L10079:
  4399                        ;		{
  4400                        	.line	543
  4401                        ;			k_put_char(bx     ,k,WIN_BORDER_
                    CHAR_EDGE,15,0);
  4402                        	.line	544
  4403 00:0B2F: F4 00 00     	pea	#<$0
  4404 00:0B32: F4 0F 00     	pea	#<$f
  4405 00:0B35: F4 BA 00     	pea	#<$ba
  4406 00:0B38: D4 0B        	pei	<L155+k_1
  4407 00:0B3A: D4 10        	pei	<L154+bx_0
  4408 00:0B3C: 22 xx xx xx  	jsl	~~k_put_char
  4409                        ;			k_put_char(bx+bw-1,k,WIN_BORDER_
                    CHAR_EDGE,15,0);
  4410                        	.line	545
  4411 00:0B40: F4 00 00     	pea	#<$0
  4412 00:0B43: F4 0F 00     	pea	#<$f
  4413 00:0B46: F4 BA 00     	pea	#<$ba
  4414 00:0B49: D4 0B        	pei	<L155+k_1
  4415 00:0B4B: 18           	clc
  4416 00:0B4C: A5 10        	lda	<L154+bx_0
  4417 00:0B4E: 65 14        	adc	<L154+bw_0
  4418 00:0B50: 85 01        	sta	<R0
  4419 00:0B52: 18           	clc
  4420 00:0B53: A9 FF FF     	lda	#$ffff
  4421 00:0B56: 65 01        	adc	<R0
  4422 00:0B58: 48           	pha
  4423 00:0B59: 22 xx xx xx  	jsl	~~k_put_char
  4424                        ;		}
  4425                        	.line	546
  4426                        L10084:
  4427                        L10078:
  4428                        ;	}
  4429                        	.line	547
  4430                        L10069:
  4431 00:0B5D: E6 0B        	inc	<L155+k_1
  4432                        L10072:
  4433 00:0B5F: 18           	clc
  4434 00:0B60: A5 12        	lda	<L154+by_0
  4435 00:0B62: 65 16        	adc	<L154+bh_0
  4436 00:0B64: 85 01        	sta	<R0
  4437 00:0B66: 38           	sec
  4438 00:0B67: A5 0B        	lda	<L155+k_1
  Thu Dec  3 2020 22:25                                                Page 84


  4439 00:0B69: E5 01        	sbc	<R0
  4440 00:0B6B: 70 03        	bvs	L165
  4441 00:0B6D: 49 00 80     	eor	#$8000
  4442                        L165:
  4443 00:0B70: 30 03        	bmi	L166
  4444 00:0B72: 82 9C FE     	brl	L10071
  4445                        L166:
  4446                        L10070:
  4447                        ;
  4448                        ;	k_put_char(0,1,'x',5,0);
  4449                        	.line	549
  4450 00:0B75: F4 00 00     	pea	#<$0
  4451 00:0B78: F4 05 00     	pea	#<$5
  4452 00:0B7B: F4 78 00     	pea	#<$78
  4453 00:0B7E: F4 01 00     	pea	#<$1
  4454 00:0B81: F4 00 00     	pea	#<$0
  4455 00:0B84: 22 xx xx xx  	jsl	~~k_put_char
  4456                        ;
  4457                        ;}
  4458                        	.line	551
  4459                        L167:
  4460 00:0B88: A5 0E        	lda	<L154+2
  4461 00:0B8A: 85 1A        	sta	<L154+2+12
  4462 00:0B8C: A5 0D        	lda	<L154+1
  4463 00:0B8E: 85 19        	sta	<L154+1+12
  4464 00:0B90: 2B           	pld
  4465 00:0B91: 3B           	tsc
  4466 00:0B92: 18           	clc
  4467 00:0B93: 69 18 00     	adc	#L154+12
  4468 00:0B96: 1B           	tcs
  4469 00:0B97: 6B           	rtl
  4470                        	.endblock	551
  4471             0000000C   L154	equ	12
  4472             00000009   L155	equ	9
  4473                        	ends
  4474                        	efunc
  4475                        	.endfunc	551,9,12
  4476                        	.line	551
  4477                        ;
  4478                        ;void k_window_draw_background(int bx,int by, int 
                    bw,int bh,char bcolor)
  4479                        ;{
  4480                        	.line	553
  4481                        	.line	554
  4482                        	code
  4483                        	xdef	~~k_window_draw_background
  4484                        	func
  4485                        	.function	554
  4486                        ~~k_window_draw_background:
  4487                        	longa	on
  4488                        	longi	on
  4489 00:0B98: 3B           	tsc
  4490 00:0B99: 38           	sec
  4491 00:0B9A: E9 08 00     	sbc	#L168
  4492 00:0B9D: 1B           	tcs
  4493 00:0B9E: 0B           	phd
  4494 00:0B9F: 5B           	tcd
  4495             00000004   bx_0	set	4
  Thu Dec  3 2020 22:25                                                Page 85


  4496             00000006   by_0	set	6
  4497             00000008   bw_0	set	8
  4498             0000000A   bh_0	set	10
  4499             0000000C   bcolor_0	set	12
  4500                        	.block	554
  4501                        ;	int i = 0;
  4502                        ;	int k = 0;
  4503                        ;
  4504                        ;	k_put_char(0,1,'w',5,0);
  4505             00000000   i_1	set	0
  4506             00000002   k_1	set	2
  4507                        	.sym	i,0,5,1,16
  4508                        	.sym	k,2,5,1,16
  4509                        	.sym	bx,4,5,6,16
  4510                        	.sym	by,6,5,6,16
  4511                        	.sym	bw,8,5,6,16
  4512                        	.sym	bh,10,5,6,16
  4513                        	.sym	bcolor,12,14,6,8
  4514 00:0BA0: 64 05        	stz	<L169+i_1
  4515 00:0BA2: 64 07        	stz	<L169+k_1
  4516                        	.line	558
  4517 00:0BA4: F4 00 00     	pea	#<$0
  4518 00:0BA7: F4 05 00     	pea	#<$5
  4519 00:0BAA: F4 77 00     	pea	#<$77
  4520 00:0BAD: F4 01 00     	pea	#<$1
  4521 00:0BB0: F4 00 00     	pea	#<$0
  4522 00:0BB3: 22 xx xx xx  	jsl	~~k_put_char
  4523                        ;
  4524                        ;	for(k=by;k<(by + bh);k++)
  4525                        	.line	560
  4526 00:0BB7: A5 0E        	lda	<L168+by_0
  4527 00:0BB9: 85 07        	sta	<L169+k_1
  4528 00:0BBB: 82 58 00     	brl	L10088
  4529                        L10087:
  4530                        ;	{
  4531                        	.line	561
  4532                        ;		k_put_char(0,1,'u',5,0);
  4533                        	.line	562
  4534 00:0BBE: F4 00 00     	pea	#<$0
  4535 00:0BC1: F4 05 00     	pea	#<$5
  4536 00:0BC4: F4 75 00     	pea	#<$75
  4537 00:0BC7: F4 01 00     	pea	#<$1
  4538 00:0BCA: F4 00 00     	pea	#<$0
  4539 00:0BCD: 22 xx xx xx  	jsl	~~k_put_char
  4540                        ;		for(i=bx;i<(bx+bw);i++)
  4541                        	.line	563
  4542 00:0BD1: A5 0C        	lda	<L168+bx_0
  4543 00:0BD3: 85 05        	sta	<L169+i_1
  4544 00:0BD5: 82 26 00     	brl	L10092
  4545                        L10091:
  4546                        ;		{
  4547                        	.line	564
  4548                        ;			//k_set_background(i,k,bcolor);
  4549                        ;			k_put_char(i,k,' ',0,15);
  4550                        	.line	566
  4551 00:0BD8: F4 0F 00     	pea	#<$f
  4552 00:0BDB: F4 00 00     	pea	#<$0
  4553 00:0BDE: F4 20 00     	pea	#<$20
  Thu Dec  3 2020 22:25                                                Page 86


  4554 00:0BE1: D4 07        	pei	<L169+k_1
  4555 00:0BE3: D4 05        	pei	<L169+i_1
  4556 00:0BE5: 22 xx xx xx  	jsl	~~k_put_char
  4557                        ;			k_put_char(0,1,'t',5,0);
  4558                        	.line	567
  4559 00:0BE9: F4 00 00     	pea	#<$0
  4560 00:0BEC: F4 05 00     	pea	#<$5
  4561 00:0BEF: F4 74 00     	pea	#<$74
  4562 00:0BF2: F4 01 00     	pea	#<$1
  4563 00:0BF5: F4 00 00     	pea	#<$0
  4564 00:0BF8: 22 xx xx xx  	jsl	~~k_put_char
  4565                        ;		}
  4566                        	.line	568
  4567                        L10089:
  4568 00:0BFC: E6 05        	inc	<L169+i_1
  4569                        L10092:
  4570 00:0BFE: 18           	clc
  4571 00:0BFF: A5 0C        	lda	<L168+bx_0
  4572 00:0C01: 65 10        	adc	<L168+bw_0
  4573 00:0C03: 85 01        	sta	<R0
  4574 00:0C05: 38           	sec
  4575 00:0C06: A5 05        	lda	<L169+i_1
  4576 00:0C08: E5 01        	sbc	<R0
  4577 00:0C0A: 70 03        	bvs	L171
  4578 00:0C0C: 49 00 80     	eor	#$8000
  4579                        L171:
  4580 00:0C0F: 30 03        	bmi	L172
  4581 00:0C11: 82 C4 FF     	brl	L10091
  4582                        L172:
  4583                        L10090:
  4584                        ;	}
  4585                        	.line	569
  4586                        L10085:
  4587 00:0C14: E6 07        	inc	<L169+k_1
  4588                        L10088:
  4589 00:0C16: 18           	clc
  4590 00:0C17: A5 0E        	lda	<L168+by_0
  4591 00:0C19: 65 12        	adc	<L168+bh_0
  4592 00:0C1B: 85 01        	sta	<R0
  4593 00:0C1D: 38           	sec
  4594 00:0C1E: A5 07        	lda	<L169+k_1
  4595 00:0C20: E5 01        	sbc	<R0
  4596 00:0C22: 70 03        	bvs	L173
  4597 00:0C24: 49 00 80     	eor	#$8000
  4598                        L173:
  4599 00:0C27: 30 03        	bmi	L174
  4600 00:0C29: 82 92 FF     	brl	L10087
  4601                        L174:
  4602                        L10086:
  4603                        ;
  4604                        ;	k_put_char(0,1,'v',5,0);
  4605                        	.line	571
  4606 00:0C2C: F4 00 00     	pea	#<$0
  4607 00:0C2F: F4 05 00     	pea	#<$5
  4608 00:0C32: F4 76 00     	pea	#<$76
  4609 00:0C35: F4 01 00     	pea	#<$1
  4610 00:0C38: F4 00 00     	pea	#<$0
  4611 00:0C3B: 22 xx xx xx  	jsl	~~k_put_char
  Thu Dec  3 2020 22:25                                                Page 87


  4612                        ;}
  4613                        	.line	572
  4614                        L175:
  4615 00:0C3F: A5 0A        	lda	<L168+2
  4616 00:0C41: 85 14        	sta	<L168+2+10
  4617 00:0C43: A5 09        	lda	<L168+1
  4618 00:0C45: 85 13        	sta	<L168+1+10
  4619 00:0C47: 2B           	pld
  4620 00:0C48: 3B           	tsc
  4621 00:0C49: 18           	clc
  4622 00:0C4A: 69 12 00     	adc	#L168+10
  4623 00:0C4D: 1B           	tcs
  4624 00:0C4E: 6B           	rtl
  4625                        	.endblock	572
  4626             00000008   L168	equ	8
  4627             00000005   L169	equ	5
  4628                        	ends
  4629                        	efunc
  4630                        	.endfunc	572,5,8
  4631                        	.line	572
  4632                        ;
  4633                        ;BOOL consoleWindowProc(PFXOSMESSAGE pMsg)
  4634                        ;{
  4635                        	.line	574
  4636                        	.line	575
  4637                        	code
  4638                        	xdef	~~consoleWindowProc
  4639                        	func
  4640                        	.function	575
  4641                        ~~consoleWindowProc:
  4642                        	longa	on
  4643                        	longi	on
  4644 00:0C4F: 3B           	tsc
  4645 00:0C50: 38           	sec
  4646 00:0C51: E9 04 00     	sbc	#L176
  4647 00:0C54: 1B           	tcs
  4648 00:0C55: 0B           	phd
  4649 00:0C56: 5B           	tcd
  4650             00000004   pMsg_0	set	4
  4651                        	.block	575
  4652                        ;	PFXPROCESS p = NULL;
  4653                        ;
  4654                        ;	if(pMsg!=NULL)
  4655             00000000   p_1	set	0
  4656                        	.sym	p,0,138,1,32,20
  4657                        	.sym	pMsg,4,138,6,32,16
  4658 00:0C57: 64 01        	stz	<L177+p_1
  4659 00:0C59: 64 03        	stz	<L177+p_1+2
  4660                        	.line	578
  4661                        ;	{
  4662 00:0C5B: A5 08        	lda	<L176+pMsg_0
  4663 00:0C5D: 05 0A        	ora	<L176+pMsg_0+2
  4664 00:0C5F: D0 03        	bne	L179
  4665 00:0C61: 82 66 00     	brl	L10093
  4666                        L179:
  4667                        	.line	579
  4668                        ;		p = k_exec_get_current_process();
  4669                        	.line	580
  Thu Dec  3 2020 22:25                                                Page 88


  4670 00:0C64: 22 xx xx xx  	jsl	~~k_exec_get_current_process
  4671 00:0C68: 85 01        	sta	<L177+p_1
  4672 00:0C6A: 86 03        	stx	<L177+p_1+2
  4673                        ;
  4674                        ;		//k_debug_long("consoleWindowProc::Proce
                    ssId:",p->procId);
  4675                        ;
  4676                        ;		switch(pMsg->type)
  4677                        	.line	584
  4678 00:0C6C: A0 08 00     	ldy	#$8
  4679 00:0C6F: B7 08        	lda	[<L176+pMsg_0],Y
  4680 00:0C71: 82 46 00     	brl	L10094
  4681                        ;		{
  4682                        	.line	585
  4683                        ;		case FX_CREATE_WINDOW:
  4684                        	.line	586
  4685                        L10096:
  4686                        ;			k_debug_long("consoleWindowProc:
                    :ProcessId:",p->procId);
  4687                        	.line	587
  4688 00:0C74: A0 04 00     	ldy	#$4
  4689 00:0C77: B7 01        	lda	[<L177+p_1],Y
  4690 00:0C79: 48           	pha
  4691 00:0C7A: A0 02 00     	ldy	#$2
  4692 00:0C7D: B7 01        	lda	[<L177+p_1],Y
  4693 00:0C7F: 48           	pha
  4694 00:0C80: F4 xx xx     	pea	#^L153
  4695 00:0C83: F4 xx xx     	pea	#<L153
  4696 00:0C86: 22 xx xx xx  	jsl	~~k_debug_long
  4697                        ;			k_debug_integer("consoleWindowPr
                    oc::MessageId:",pMsg->type);
  4698                        	.line	588
  4699 00:0C8A: A0 08 00     	ldy	#$8
  4700 00:0C8D: B7 08        	lda	[<L176+pMsg_0],Y
  4701 00:0C8F: 48           	pha
  4702 00:0C90: F4 xx xx     	pea	#^L153+30
  4703 00:0C93: F4 xx xx     	pea	#<L153+30
  4704 00:0C96: 22 xx xx xx  	jsl	~~k_debug_integer
  4705                        ;			break;
  4706                        	.line	589
  4707 00:0C9A: 82 2D 00     	brl	L10095
  4708                        ;		case FX_MBUTTON_DOWN:
  4709                        	.line	590
  4710                        L10097:
  4711                        ;			if(pMsg->type!=FX_PROCESS)
  4712                        	.line	591
  4713                        ;			{
  4714 00:0C9D: A0 08 00     	ldy	#$8
  4715 00:0CA0: B7 08        	lda	[<L176+pMsg_0],Y
  4716 00:0CA2: C9 00 FF     	cmp	#<$ff00
  4717 00:0CA5: D0 03        	bne	L180
  4718 00:0CA7: 82 0A 00     	brl	L10098
  4719                        L180:
  4720                        	.line	592
  4721                        ;				//k_debug_integer("conso
                    leWindowProc::ProcessId:",p->procId);
  4722                        ;				k_debug_string("consoleW
                    indowProc::FX_MBUTTON_DOWN\r\n");
  Thu Dec  3 2020 22:25                                                Page 89


  4723                        	.line	594
  4724 00:0CAA: F4 xx xx     	pea	#^L153+60
  4725 00:0CAD: F4 xx xx     	pea	#<L153+60
  4726 00:0CB0: 22 xx xx xx  	jsl	~~k_debug_string
  4727                        ;			}
  4728                        	.line	595
  4729                        ;
  4730                        ;			break;
  4731                        L10098:
  4732                        	.line	597
  4733 00:0CB4: 82 13 00     	brl	L10095
  4734                        ;		default:
  4735                        	.line	598
  4736                        L10099:
  4737                        ;			break;
  4738                        	.line	599
  4739 00:0CB7: 82 10 00     	brl	L10095
  4740                        ;		}
  4741                        	.line	600
  4742                        L10094:
  4743                        	xref	~~~swt
  4744 00:0CBA: 22 xx xx xx  	jsl	~~~swt
  4745 00:0CBE: 02 00        	dw	2
  4746 00:0CC0: 0C 0F        	dw	3852
  4747 00:0CC2: xx xx        	dw	L10097-1
  4748 00:0CC4: 03 FF        	dw	65283
  4749 00:0CC6: xx xx        	dw	L10096-1
  4750 00:0CC8: xx xx        	dw	L10099-1
  4751                        L10095:
  4752                        ;	}
  4753                        	.line	601
  4754                        ;
  4755                        ;	return TRUE;
  4756                        L10093:
  4757                        	.line	603
  4758 00:0CCA: A9 01 00     	lda	#$1
  4759                        L181:
  4760 00:0CCD: A8           	tay
  4761 00:0CCE: A5 06        	lda	<L176+2
  4762 00:0CD0: 85 0A        	sta	<L176+2+4
  4763 00:0CD2: A5 05        	lda	<L176+1
  4764 00:0CD4: 85 09        	sta	<L176+1+4
  4765 00:0CD6: 2B           	pld
  4766 00:0CD7: 3B           	tsc
  4767 00:0CD8: 18           	clc
  4768 00:0CD9: 69 08 00     	adc	#L176+4
  4769 00:0CDC: 1B           	tcs
  4770 00:0CDD: 98           	tya
  4771 00:0CDE: 6B           	rtl
  4772                        ;}
  4773                        	.line	604
  4774                        	.endblock	604
  4775             00000004   L176	equ	4
  4776             00000001   L177	equ	1
  4777                        	ends
  4778                        	efunc
  4779                        	.endfunc	604,1,4
  4780                        	.line	604
  Thu Dec  3 2020 22:25                                                Page 90


  4781                        	data
  4782                        L153:
  4783 00:0372: 63 6F 6E 73  	db	$63,$6F,$6E,$73,$6F,$6C,$65,$57,$69,$6E,
                    $64,$6F,$77,$50,$72
       00:0376: 6F 6C 65 57 
       00:037A: 69 6E 64 6F 
       00:037E: 77 50 72 
  4784 00:0381: 6F 63 3A 3A  	db	$6F,$63,$3A,$3A,$50,$72,$6F,$63,$65,$73,
                    $73,$49,$64,$3A,$00
       00:0385: 50 72 6F 63 
       00:0389: 65 73 73 49 
       00:038D: 64 3A 00 
  4785 00:0390: 63 6F 6E 73  	db	$63,$6F,$6E,$73,$6F,$6C,$65,$57,$69,$6E,
                    $64,$6F,$77,$50,$72
       00:0394: 6F 6C 65 57 
       00:0398: 69 6E 64 6F 
       00:039C: 77 50 72 
  4786 00:039F: 6F 63 3A 3A  	db	$6F,$63,$3A,$3A,$4D,$65,$73,$73,$61,$67,
                    $65,$49,$64,$3A,$00
       00:03A3: 4D 65 73 73 
       00:03A7: 61 67 65 49 
       00:03AB: 64 3A 00 
  4787 00:03AE: 63 6F 6E 73  	db	$63,$6F,$6E,$73,$6F,$6C,$65,$57,$69,$6E,
                    $64,$6F,$77,$50,$72
       00:03B2: 6F 6C 65 57 
       00:03B6: 69 6E 64 6F 
       00:03BA: 77 50 72 
  4788 00:03BD: 6F 63 3A 3A  	db	$6F,$63,$3A,$3A,$46,$58,$5F,$4D,$42,$55,
                    $54,$54,$4F,$4E,$5F
       00:03C1: 46 58 5F 4D 
       00:03C5: 42 55 54 54 
       00:03C9: 4F 4E 5F 
  4789 00:03CC: 44 4F 57 4E  	db	$44,$4F,$57,$4E,$0D,$0A,$00
       00:03D0: 0D 0A 00 
  4790 00:03D3:              	ends
  4791                        ;
  4792                        ;
  4793                        ;void DefConsoleProc(PFXOSMESSAGE pMsg)
  4794                        ;{
  4795                        	.line	607
  4796                        	.line	608
  4797                        	code
  4798                        	xdef	~~DefConsoleProc
  4799                        	func
  4800                        	.function	608
  4801                        ~~DefConsoleProc:
  4802                        	longa	on
  4803                        	longi	on
  4804 00:0CDF: 3B           	tsc
  4805 00:0CE0: 38           	sec
  4806 00:0CE1: E9 30 00     	sbc	#L183
  4807 00:0CE4: 1B           	tcs
  4808 00:0CE5: 0B           	phd
  4809 00:0CE6: 5B           	tcd
  4810             00000004   pMsg_0	set	4
  4811                        	.block	608
  4812                        ;	LPCHAR ptr = NULL;
  4813                        ;	PFXPROCESS p = NULL;
  Thu Dec  3 2020 22:25                                                Page 91


  4814                        ;	PCONSOLECTX pctx = NULL;
  4815                        ;	BYTE decodedKey = 0;
  4816                        ;	int i = 0;
  4817                        ;	int j = 0;
  4818                        ;	int temp1;
  4819                        ;	int temp2;
  4820                        ;	UINT temp3;
  4821                        ;	BYTE serial;
  4822                        ;	PCLICKDETECTED pcd;
  4823                        ;	LPSTR captionText = NULL;
  4824                        ;	PFXNODE  clickNode = NULL;
  4825                        ;
  4826                        ;	//k_debug_string("DefConsoleProc enter\r\n");
  4827                        ;	if(pMsg!=NULL)
  4828             00000000   ptr_1	set	0
  4829             00000004   p_1	set	4
  4830             00000008   pctx_1	set	8
  4831             0000000C   decodedKey_1	set	12
  4832             0000000D   i_1	set	13
  4833             0000000F   j_1	set	15
  4834             00000011   temp1_1	set	17
  4835             00000013   temp2_1	set	19
  4836             00000015   temp3_1	set	21
  4837             00000017   serial_1	set	23
  4838             00000018   pcd_1	set	24
  4839             0000001C   captionText_1	set	28
  4840             00000020   clickNode_1	set	32
  4841                        	.sym	ptr,0,142,1,32
  4842                        	.sym	p,4,138,1,32,20
  4843                        	.sym	pctx,8,138,1,32,61
  4844                        	.sym	decodedKey,12,14,1,8
  4845                        	.sym	i,13,5,1,16
  4846                        	.sym	j,15,5,1,16
  4847                        	.sym	temp1,17,5,1,16
  4848                        	.sym	temp2,19,5,1,16
  4849                        	.sym	temp3,21,16,1,16
  4850                        	.sym	serial,23,14,1,8
  4851                        	.sym	pcd,24,138,1,32,53
  4852                        	.sym	captionText,28,142,1,32
  4853                        	.sym	clickNode,32,138,1,32,5
  4854                        	.sym	pMsg,4,138,6,32,16
  4855 00:0CE7: 64 0D        	stz	<L184+ptr_1
  4856 00:0CE9: 64 0F        	stz	<L184+ptr_1+2
  4857 00:0CEB: 64 11        	stz	<L184+p_1
  4858 00:0CED: 64 13        	stz	<L184+p_1+2
  4859 00:0CEF: 64 15        	stz	<L184+pctx_1
  4860 00:0CF1: 64 17        	stz	<L184+pctx_1+2
  4861 00:0CF3: E2 20        	sep	#$20
  4862                        	longa	off
  4863 00:0CF5: 64 19        	stz	<L184+decodedKey_1
  4864 00:0CF7: C2 20        	rep	#$20
  4865                        	longa	on
  4866 00:0CF9: 64 1A        	stz	<L184+i_1
  4867 00:0CFB: 64 1C        	stz	<L184+j_1
  4868 00:0CFD: 64 29        	stz	<L184+captionText_1
  4869 00:0CFF: 64 2B        	stz	<L184+captionText_1+2
  4870 00:0D01: 64 2D        	stz	<L184+clickNode_1
  4871 00:0D03: 64 2F        	stz	<L184+clickNode_1+2
  Thu Dec  3 2020 22:25                                                Page 92


  4872                        	.line	624
  4873                        ;	{
  4874 00:0D05: A5 34        	lda	<L183+pMsg_0
  4875 00:0D07: 05 36        	ora	<L183+pMsg_0+2
  4876 00:0D09: D0 03        	bne	L186
  4877 00:0D0B: 82 A5 12     	brl	L10100
  4878                        L186:
  4879                        	.line	625
  4880                        ;		p = k_exec_get_current_process();
  4881                        	.line	626
  4882 00:0D0E: 22 xx xx xx  	jsl	~~k_exec_get_current_process
  4883 00:0D12: 85 11        	sta	<L184+p_1
  4884 00:0D14: 86 13        	stx	<L184+p_1+2
  4885                        ;
  4886                        ;		if(p)
  4887                        	.line	628
  4888                        ;		{
  4889 00:0D16: A5 11        	lda	<L184+p_1
  4890 00:0D18: 05 13        	ora	<L184+p_1+2
  4891 00:0D1A: D0 03        	bne	L187
  4892 00:0D1C: 82 0E 00     	brl	L10101
  4893                        L187:
  4894                        	.line	629
  4895                        ;			pctx = (PCONSOLECTX)p->ctx;
  4896                        	.line	630
  4897 00:0D1F: A0 0A 00     	ldy	#$a
  4898 00:0D22: B7 11        	lda	[<L184+p_1],Y
  4899 00:0D24: 85 15        	sta	<L184+pctx_1
  4900 00:0D26: A0 0C 00     	ldy	#$c
  4901 00:0D29: B7 11        	lda	[<L184+p_1],Y
  4902 00:0D2B: 85 17        	sta	<L184+pctx_1+2
  4903                        ;			//k_debug_pointer("DefConsolePro
                    c::pctx:",pctx);
  4904                        ;			//k_debug_pointer("DefConsolePro
                    c::pctx->userData:",pctx->userData);
  4905                        ;		}
  4906                        	.line	633
  4907                        ;
  4908                        ;		switch(pMsg->type)
  4909                        L10101:
  4910                        	.line	635
  4911 00:0D2D: A0 08 00     	ldy	#$8
  4912 00:0D30: B7 34        	lda	[<L183+pMsg_0],Y
  4913 00:0D32: 82 26 12     	brl	L10102
  4914                        ;		{
  4915                        	.line	636
  4916                        ;		case FX_INIT_MESSAGE:
  4917                        	.line	637
  4918                        L10104:
  4919                        ;			if(p!=NULL)
  4920                        	.line	638
  4921                        ;			{
  4922 00:0D35: A5 11        	lda	<L184+p_1
  4923 00:0D37: 05 13        	ora	<L184+p_1+2
  4924 00:0D39: D0 03        	bne	L188
  4925 00:0D3B: 82 D2 02     	brl	L10105
  4926                        L188:
  4927                        	.line	639
  Thu Dec  3 2020 22:25                                                Page 93


  4928                        ;				k_debug_long("DefConsole
                    Proc::ProcessId:",p->procId);
  4929                        	.line	640
  4930 00:0D3E: A0 04 00     	ldy	#$4
  4931 00:0D41: B7 11        	lda	[<L184+p_1],Y
  4932 00:0D43: 48           	pha
  4933 00:0D44: A0 02 00     	ldy	#$2
  4934 00:0D47: B7 11        	lda	[<L184+p_1],Y
  4935 00:0D49: 48           	pha
  4936 00:0D4A: F4 xx xx     	pea	#^L182
  4937 00:0D4D: F4 xx xx     	pea	#<L182
  4938 00:0D50: 22 xx xx xx  	jsl	~~k_debug_long
  4939                        ;
  4940                        ;				k_clear_screen(0);
  4941                        	.line	642
  4942 00:0D54: F4 00 00     	pea	#<$0
  4943 00:0D57: 22 xx xx xx  	jsl	~~k_clear_screen
  4944                        ;
  4945                        ;				p->consoleCtl = (PCONSOL
                    E_CONTROL)k_mem_allocate_heap(sizeof(CONSOLE_CONTROL));
  4946                        	.line	644
  4947 00:0D5B: F4 38 00     	pea	#<$38
  4948 00:0D5E: 22 xx xx xx  	jsl	~~k_mem_allocate_heap
  4949 00:0D62: 85 01        	sta	<R0
  4950 00:0D64: 86 03        	stx	<R0+2
  4951 00:0D66: A5 01        	lda	<R0
  4952 00:0D68: A0 54 00     	ldy	#$54
  4953 00:0D6B: 97 11        	sta	[<L184+p_1],Y
  4954 00:0D6D: A5 03        	lda	<R0+2
  4955 00:0D6F: A0 56 00     	ldy	#$56
  4956 00:0D72: 97 11        	sta	[<L184+p_1],Y
  4957                        ;				if(p->consoleCtl!=NULL)
  4958                        	.line	645
  4959                        ;				{
  4960 00:0D74: A0 54 00     	ldy	#$54
  4961 00:0D77: B7 11        	lda	[<L184+p_1],Y
  4962 00:0D79: A0 56 00     	ldy	#$56
  4963 00:0D7C: 17 11        	ora	[<L184+p_1],Y
  4964 00:0D7E: D0 03        	bne	L189
  4965 00:0D80: 82 8A 02     	brl	L10106
  4966                        L189:
  4967                        	.line	646
  4968                        ;					p->consoleCtl->b
                    gColor = 0;
  4969                        	.line	647
  4970 00:0D83: A0 54 00     	ldy	#$54
  4971 00:0D86: B7 11        	lda	[<L184+p_1],Y
  4972 00:0D88: 85 01        	sta	<R0
  4973 00:0D8A: A0 56 00     	ldy	#$56
  4974 00:0D8D: B7 11        	lda	[<L184+p_1],Y
  4975 00:0D8F: 85 03        	sta	<R0+2
  4976 00:0D91: A9 00 00     	lda	#$0
  4977 00:0D94: A0 0A 00     	ldy	#$a
  4978 00:0D97: 97 01        	sta	[<R0],Y
  4979                        ;					p->consoleCtl->c
                    urX    = 0;
  4980                        	.line	648
  4981 00:0D99: A0 54 00     	ldy	#$54
  Thu Dec  3 2020 22:25                                                Page 94


  4982 00:0D9C: B7 11        	lda	[<L184+p_1],Y
  4983 00:0D9E: 85 01        	sta	<R0
  4984 00:0DA0: A0 56 00     	ldy	#$56
  4985 00:0DA3: B7 11        	lda	[<L184+p_1],Y
  4986 00:0DA5: 85 03        	sta	<R0+2
  4987 00:0DA7: A9 00 00     	lda	#$0
  4988 00:0DAA: A0 04 00     	ldy	#$4
  4989 00:0DAD: 97 01        	sta	[<R0],Y
  4990                        ;					p->consoleCtl->c
                    urY    = 0;
  4991                        	.line	649
  4992 00:0DAF: A0 54 00     	ldy	#$54
  4993 00:0DB2: B7 11        	lda	[<L184+p_1],Y
  4994 00:0DB4: 85 01        	sta	<R0
  4995 00:0DB6: A0 56 00     	ldy	#$56
  4996 00:0DB9: B7 11        	lda	[<L184+p_1],Y
  4997 00:0DBB: 85 03        	sta	<R0+2
  4998 00:0DBD: A9 00 00     	lda	#$0
  4999 00:0DC0: A0 06 00     	ldy	#$6
  5000 00:0DC3: 97 01        	sta	[<R0],Y
  5001                        ;					p->consoleCtl->f
                    gColor = 15;
  5002                        	.line	650
  5003 00:0DC5: A0 54 00     	ldy	#$54
  5004 00:0DC8: B7 11        	lda	[<L184+p_1],Y
  5005 00:0DCA: 85 01        	sta	<R0
  5006 00:0DCC: A0 56 00     	ldy	#$56
  5007 00:0DCF: B7 11        	lda	[<L184+p_1],Y
  5008 00:0DD1: 85 03        	sta	<R0+2
  5009 00:0DD3: A9 0F 00     	lda	#$f
  5010 00:0DD6: A0 08 00     	ldy	#$8
  5011 00:0DD9: 97 01        	sta	[<R0],Y
  5012                        ;					p->consoleCtl->m
                    axCols = k_get_cols_visible();
  5013                        	.line	651
  5014 00:0DDB: A0 54 00     	ldy	#$54
  5015 00:0DDE: B7 11        	lda	[<L184+p_1],Y
  5016 00:0DE0: 85 01        	sta	<R0
  5017 00:0DE2: A0 56 00     	ldy	#$56
  5018 00:0DE5: B7 11        	lda	[<L184+p_1],Y
  5019 00:0DE7: 85 03        	sta	<R0+2
  5020 00:0DE9: 22 xx xx xx  	jsl	~~k_get_cols_visible
  5021 00:0DED: 87 01        	sta	[<R0]
  5022                        ;					p->consoleCtl->m
                    axRows = k_get_lines_visible();
  5023                        	.line	652
  5024 00:0DEF: A0 54 00     	ldy	#$54
  5025 00:0DF2: B7 11        	lda	[<L184+p_1],Y
  5026 00:0DF4: 85 01        	sta	<R0
  5027 00:0DF6: A0 56 00     	ldy	#$56
  5028 00:0DF9: B7 11        	lda	[<L184+p_1],Y
  5029 00:0DFB: 85 03        	sta	<R0+2
  5030 00:0DFD: 22 xx xx xx  	jsl	~~k_get_lines_visible
  5031 00:0E01: A0 02 00     	ldy	#$2
  5032 00:0E04: 97 01        	sta	[<R0],Y
  5033                        ;					p->consoleCtl->d
                    esktopMode = FALSE;
  5034                        	.line	653
  Thu Dec  3 2020 22:25                                                Page 95


  5035 00:0E06: A0 54 00     	ldy	#$54
  5036 00:0E09: B7 11        	lda	[<L184+p_1],Y
  5037 00:0E0B: 85 01        	sta	<R0
  5038 00:0E0D: A0 56 00     	ldy	#$56
  5039 00:0E10: B7 11        	lda	[<L184+p_1],Y
  5040 00:0E12: 85 03        	sta	<R0+2
  5041 00:0E14: E2 20        	sep	#$20
  5042                        	longa	off
  5043 00:0E16: A9 00        	lda	#$0
  5044 00:0E18: A0 31 00     	ldy	#$31
  5045 00:0E1B: 97 01        	sta	[<R0],Y
  5046 00:0E1D: C2 20        	rep	#$20
  5047                        	longa	on
  5048                        ;
  5049                        ;					k_set_cursor_pos
                    ition(p->consoleCtl->curX,p->consoleCtl->curY);
  5050                        	.line	655
  5051 00:0E1F: A0 54 00     	ldy	#$54
  5052 00:0E22: B7 11        	lda	[<L184+p_1],Y
  5053 00:0E24: 85 01        	sta	<R0
  5054 00:0E26: A0 56 00     	ldy	#$56
  5055 00:0E29: B7 11        	lda	[<L184+p_1],Y
  5056 00:0E2B: 85 03        	sta	<R0+2
  5057 00:0E2D: A0 06 00     	ldy	#$6
  5058 00:0E30: B7 01        	lda	[<R0],Y
  5059 00:0E32: 48           	pha
  5060 00:0E33: A0 54 00     	ldy	#$54
  5061 00:0E36: B7 11        	lda	[<L184+p_1],Y
  5062 00:0E38: 85 01        	sta	<R0
  5063 00:0E3A: A0 56 00     	ldy	#$56
  5064 00:0E3D: B7 11        	lda	[<L184+p_1],Y
  5065 00:0E3F: 85 03        	sta	<R0+2
  5066 00:0E41: A0 04 00     	ldy	#$4
  5067 00:0E44: B7 01        	lda	[<R0],Y
  5068 00:0E46: 48           	pha
  5069 00:0E47: 22 xx xx xx  	jsl	~~k_set_cursor_position
  5070                        ;
  5071                        ;					k_debug_integer(
                    "maxCols:",p->consoleCtl->maxCols);
  5072                        	.line	657
  5073 00:0E4B: A0 54 00     	ldy	#$54
  5074 00:0E4E: B7 11        	lda	[<L184+p_1],Y
  5075 00:0E50: 85 01        	sta	<R0
  5076 00:0E52: A0 56 00     	ldy	#$56
  5077 00:0E55: B7 11        	lda	[<L184+p_1],Y
  5078 00:0E57: 85 03        	sta	<R0+2
  5079 00:0E59: A7 01        	lda	[<R0]
  5080 00:0E5B: 48           	pha
  5081 00:0E5C: F4 xx xx     	pea	#^L182+27
  5082 00:0E5F: F4 xx xx     	pea	#<L182+27
  5083 00:0E62: 22 xx xx xx  	jsl	~~k_debug_integer
  5084                        ;					k_debug_integer(
                    "maxRows:",p->consoleCtl->maxRows);
  5085                        	.line	658
  5086 00:0E66: A0 54 00     	ldy	#$54
  5087 00:0E69: B7 11        	lda	[<L184+p_1],Y
  5088 00:0E6B: 85 01        	sta	<R0
  5089 00:0E6D: A0 56 00     	ldy	#$56
  Thu Dec  3 2020 22:25                                                Page 96


  5090 00:0E70: B7 11        	lda	[<L184+p_1],Y
  5091 00:0E72: 85 03        	sta	<R0+2
  5092 00:0E74: A0 02 00     	ldy	#$2
  5093 00:0E77: B7 01        	lda	[<R0],Y
  5094 00:0E79: 48           	pha
  5095 00:0E7A: F4 xx xx     	pea	#^L182+36
  5096 00:0E7D: F4 xx xx     	pea	#<L182+36
  5097 00:0E80: 22 xx xx xx  	jsl	~~k_debug_integer
  5098                        ;
  5099                        ;					for(i=0;i<56;i++
                    )
  5100                        	.line	660
  5101 00:0E84: 64 1A        	stz	<L184+i_1
  5102                        L10109:
  5103                        ;						for(j=0;
                    j<72;j++)
  5104                        	.line	661
  5105 00:0E86: 64 1C        	stz	<L184+j_1
  5106                        L10112:
  5107                        ;							
                    consoleBuffer[i][j] = 0;
  5108                        	.line	662
  5109 00:0E88: A5 1C        	lda	<L184+j_1
  5110 00:0E8A: 0A           	asl	A
  5111 00:0E8B: 85 01        	sta	<R0
  5112 00:0E8D: A5 1A        	lda	<L184+i_1
  5113 00:0E8F: A2 90 00     	ldx	#<$90
  5114                        	xref	~~~mul
  5115 00:0E92: 22 xx xx xx  	jsl	~~~mul
  5116 00:0E96: 85 05        	sta	<R1
  5117 00:0E98: 18           	clc
  5118 00:0E99: A5 05        	lda	<R1
  5119 00:0E9B: 65 01        	adc	<R0
  5120 00:0E9D: 85 09        	sta	<R2
  5121 00:0E9F: A9 00 00     	lda	#$0
  5122 00:0EA2: A6 09        	ldx	<R2
  5123 00:0EA4: 9D xx xx     	sta	|~~consoleBuffer,X
  5124                        L10110:
  5125 00:0EA7: E6 1C        	inc	<L184+j_1
  5126 00:0EA9: 38           	sec
  5127 00:0EAA: A5 1C        	lda	<L184+j_1
  5128 00:0EAC: E9 48 00     	sbc	#<$48
  5129 00:0EAF: 70 03        	bvs	L190
  5130 00:0EB1: 49 00 80     	eor	#$8000
  5131                        L190:
  5132 00:0EB4: 30 03        	bmi	L191
  5133 00:0EB6: 82 CF FF     	brl	L10112
  5134                        L191:
  5135                        L10111:
  5136                        L10107:
  5137 00:0EB9: E6 1A        	inc	<L184+i_1
  5138 00:0EBB: 38           	sec
  5139 00:0EBC: A5 1A        	lda	<L184+i_1
  5140 00:0EBE: E9 38 00     	sbc	#<$38
  5141 00:0EC1: 70 03        	bvs	L192
  5142 00:0EC3: 49 00 80     	eor	#$8000
  5143                        L192:
  5144 00:0EC6: 30 03        	bmi	L193
  Thu Dec  3 2020 22:25                                                Page 97


  5145 00:0EC8: 82 BB FF     	brl	L10109
  5146                        L193:
  5147                        L10108:
  5148                        ;
  5149                        ;					p->ctx = k_mem_a
                    llocate_heap(sizeof(CONSOLECTX));
  5150                        	.line	664
  5151 00:0ECB: F4 8F 00     	pea	#<$8f
  5152 00:0ECE: 22 xx xx xx  	jsl	~~k_mem_allocate_heap
  5153 00:0ED2: 85 01        	sta	<R0
  5154 00:0ED4: 86 03        	stx	<R0+2
  5155 00:0ED6: A5 01        	lda	<R0
  5156 00:0ED8: A0 0A 00     	ldy	#$a
  5157 00:0EDB: 97 11        	sta	[<L184+p_1],Y
  5158 00:0EDD: A5 03        	lda	<R0+2
  5159 00:0EDF: A0 0C 00     	ldy	#$c
  5160 00:0EE2: 97 11        	sta	[<L184+p_1],Y
  5161                        ;					if(p->ctx!=NULL)
  5162                        	.line	665
  5163                        ;					{
  5164 00:0EE4: A0 0A 00     	ldy	#$a
  5165 00:0EE7: B7 11        	lda	[<L184+p_1],Y
  5166 00:0EE9: A0 0C 00     	ldy	#$c
  5167 00:0EEC: 17 11        	ora	[<L184+p_1],Y
  5168 00:0EEE: D0 03        	bne	L194
  5169 00:0EF0: 82 F7 00     	brl	L10113
  5170                        L194:
  5171                        	.line	666
  5172                        ;						k_debug_
                    pointer("DefConsoleProc::pctx:",p->ctx);
  5173                        	.line	667
  5174 00:0EF3: A0 0C 00     	ldy	#$c
  5175 00:0EF6: B7 11        	lda	[<L184+p_1],Y
  5176 00:0EF8: 48           	pha
  5177 00:0EF9: A0 0A 00     	ldy	#$a
  5178 00:0EFC: B7 11        	lda	[<L184+p_1],Y
  5179 00:0EFE: 48           	pha
  5180 00:0EFF: F4 xx xx     	pea	#^L182+45
  5181 00:0F02: F4 xx xx     	pea	#<L182+45
  5182 00:0F05: 22 xx xx xx  	jsl	~~k_debug_pointer
  5183                        ;
  5184                        ;						pctx = (
                    PCONSOLECTX)p->ctx;
  5185                        	.line	669
  5186 00:0F09: A0 0A 00     	ldy	#$a
  5187 00:0F0C: B7 11        	lda	[<L184+p_1],Y
  5188 00:0F0E: 85 15        	sta	<L184+pctx_1
  5189 00:0F10: A0 0C 00     	ldy	#$c
  5190 00:0F13: B7 11        	lda	[<L184+p_1],Y
  5191 00:0F15: 85 17        	sta	<L184+pctx_1+2
  5192                        ;						memset(p
                    ctx->lineBuffer,0,128);
  5193                        	.line	670
  5194 00:0F17: F4 80 00     	pea	#<$80
  5195 00:0F1A: F4 00 00     	pea	#<$0
  5196 00:0F1D: 18           	clc
  5197 00:0F1E: A9 02 00     	lda	#$2
  5198 00:0F21: 65 15        	adc	<L184+pctx_1
  Thu Dec  3 2020 22:25                                                Page 98


  5199 00:0F23: 85 01        	sta	<R0
  5200 00:0F25: A9 00 00     	lda	#$0
  5201 00:0F28: 65 17        	adc	<L184+pctx_1+2
  5202 00:0F2A: 85 03        	sta	<R0+2
  5203 00:0F2C: D4 03        	pei	<R0+2
  5204 00:0F2E: D4 01        	pei	<R0
  5205 00:0F30: 22 xx xx xx  	jsl	~~memset
  5206                        ;						pctx->li
                    neBufferIndex = 0;
  5207                        	.line	671
  5208 00:0F34: A9 00 00     	lda	#$0
  5209 00:0F37: 87 15        	sta	[<L184+pctx_1]
  5210                        ;
  5211                        ;						pctx->us
                    erData = k_mem_allocate_heap(sizeof(FXCOMBUFFER));
  5212                        	.line	673
  5213 00:0F39: F4 04 01     	pea	#<$104
  5214 00:0F3C: 22 xx xx xx  	jsl	~~k_mem_allocate_heap
  5215 00:0F40: 85 01        	sta	<R0
  5216 00:0F42: 86 03        	stx	<R0+2
  5217 00:0F44: A5 01        	lda	<R0
  5218 00:0F46: A0 83 00     	ldy	#$83
  5219 00:0F49: 97 15        	sta	[<L184+pctx_1],Y
  5220 00:0F4B: A5 03        	lda	<R0+2
  5221 00:0F4D: A0 85 00     	ldy	#$85
  5222 00:0F50: 97 15        	sta	[<L184+pctx_1],Y
  5223                        ;						k_debug_
                    pointer("DefConsoleProc::pctx->userData:",pctx->userData);
  5224                        	.line	674
  5225 00:0F52: A0 85 00     	ldy	#$85
  5226 00:0F55: B7 15        	lda	[<L184+pctx_1],Y
  5227 00:0F57: 48           	pha
  5228 00:0F58: A0 83 00     	ldy	#$83
  5229 00:0F5B: B7 15        	lda	[<L184+pctx_1],Y
  5230 00:0F5D: 48           	pha
  5231 00:0F5E: F4 xx xx     	pea	#^L182+67
  5232 00:0F61: F4 xx xx     	pea	#<L182+67
  5233 00:0F64: 22 xx xx xx  	jsl	~~k_debug_pointer
  5234                        ;
  5235                        ;						if(pctx-
                    >userData)
  5236                        	.line	676
  5237                        ;							
                    memset(pctx->userData ,0,sizeof(FXCOMBUFFER));
  5238 00:0F68: A0 83 00     	ldy	#$83
  5239 00:0F6B: B7 15        	lda	[<L184+pctx_1],Y
  5240 00:0F6D: A0 85 00     	ldy	#$85
  5241 00:0F70: 17 15        	ora	[<L184+pctx_1],Y
  5242 00:0F72: D0 03        	bne	L195
  5243 00:0F74: 82 16 00     	brl	L10114
  5244                        L195:
  5245                        	.line	677
  5246 00:0F77: F4 04 01     	pea	#<$104
  5247 00:0F7A: F4 00 00     	pea	#<$0
  5248 00:0F7D: A0 85 00     	ldy	#$85
  5249 00:0F80: B7 15        	lda	[<L184+pctx_1],Y
  5250 00:0F82: 48           	pha
  5251 00:0F83: A0 83 00     	ldy	#$83
  Thu Dec  3 2020 22:25                                                Page 99


  5252 00:0F86: B7 15        	lda	[<L184+pctx_1],Y
  5253 00:0F88: 48           	pha
  5254 00:0F89: 22 xx xx xx  	jsl	~~memset
  5255                        ;
  5256                        ;						((PFXCOM
                    BUFFER)(pctx->userData))->cbSize = sizeof(FXCOMBUFFER);
  5257                        L10114:
  5258                        	.line	679
  5259 00:0F8D: A0 83 00     	ldy	#$83
  5260 00:0F90: B7 15        	lda	[<L184+pctx_1],Y
  5261 00:0F92: 85 01        	sta	<R0
  5262 00:0F94: A0 85 00     	ldy	#$85
  5263 00:0F97: B7 15        	lda	[<L184+pctx_1],Y
  5264 00:0F99: 85 03        	sta	<R0+2
  5265 00:0F9B: A9 04 01     	lda	#$104
  5266 00:0F9E: 87 01        	sta	[<R0]
  5267                        ;						((PFXCOM
                    BUFFER)(pctx->userData))->cbBuffer = 0;
  5268                        	.line	680
  5269 00:0FA0: A0 83 00     	ldy	#$83
  5270 00:0FA3: B7 15        	lda	[<L184+pctx_1],Y
  5271 00:0FA5: 85 01        	sta	<R0
  5272 00:0FA7: A0 85 00     	ldy	#$85
  5273 00:0FAA: B7 15        	lda	[<L184+pctx_1],Y
  5274 00:0FAC: 85 03        	sta	<R0+2
  5275 00:0FAE: A9 00 00     	lda	#$0
  5276 00:0FB1: A0 02 00     	ldy	#$2
  5277 00:0FB4: 97 01        	sta	[<R0],Y
  5278                        ;						k_debug_
                    long("DefConsoleProc::ProcessId:",p->procId);
  5279                        	.line	681
  5280 00:0FB6: A0 04 00     	ldy	#$4
  5281 00:0FB9: B7 11        	lda	[<L184+p_1],Y
  5282 00:0FBB: 48           	pha
  5283 00:0FBC: A0 02 00     	ldy	#$2
  5284 00:0FBF: B7 11        	lda	[<L184+p_1],Y
  5285 00:0FC1: 48           	pha
  5286 00:0FC2: F4 xx xx     	pea	#^L182+99
  5287 00:0FC5: F4 xx xx     	pea	#<L182+99
  5288 00:0FC8: 22 xx xx xx  	jsl	~~k_debug_long
  5289                        ;						k_debug_
                    integer("DefConsoleProc::FX_PROCESS:COM1-COUNT:",((PFXCOMBUF
                    FER)(pctx->userData))->cbBuffer);
  5290                        	.line	682
  5291 00:0FCC: A0 83 00     	ldy	#$83
  5292 00:0FCF: B7 15        	lda	[<L184+pctx_1],Y
  5293 00:0FD1: 85 01        	sta	<R0
  5294 00:0FD3: A0 85 00     	ldy	#$85
  5295 00:0FD6: B7 15        	lda	[<L184+pctx_1],Y
  5296 00:0FD8: 85 03        	sta	<R0+2
  5297 00:0FDA: A0 02 00     	ldy	#$2
  5298 00:0FDD: B7 01        	lda	[<R0],Y
  5299 00:0FDF: 48           	pha
  5300 00:0FE0: F4 xx xx     	pea	#^L182+126
  5301 00:0FE3: F4 xx xx     	pea	#<L182+126
  5302 00:0FE6: 22 xx xx xx  	jsl	~~k_debug_integer
  5303                        ;
  5304                        ;					}
  Thu Dec  3 2020 22:25                                                Page 100


  5305                        	.line	684
  5306                        ;
  5307                        ;					k_initialize_tex
                    t_fonts(0);
  5308                        L10113:
  5309                        	.line	686
  5310 00:0FEA: F4 00 00     	pea	#<$0
  5311 00:0FED: 22 xx xx xx  	jsl	~~k_initialize_text_fonts
  5312                        ;
  5313                        ;					k_enable_text_mo
                    de();
  5314                        	.line	688
  5315 00:0FF1: 22 xx xx xx  	jsl	~~k_enable_text_mode
  5316                        ;					setColors();
  5317                        	.line	689
  5318 00:0FF5: 22 xx xx xx  	jsl	~~setColors
  5319                        ;
  5320                        ;					//k_enable_text_
                    cursor(1);
  5321                        ;					k_enable_text_cu
                    rsor(0);
  5322                        	.line	692
  5323 00:0FF9: F4 00 00     	pea	#<$0
  5324 00:0FFC: 22 xx xx xx  	jsl	~~k_enable_text_cursor
  5325                        ;
  5326                        ;
  5327                        ;					//k_set_cursor_p
                    osition(p->consoleCtl->curX,
  5328                        ;					//		
                                  p->consoleCtl->curY);
  5329                        ;					//k_set_cursor_p
                    osition(20,20);
  5330                        ;
  5331                        ;
  5332                        ;					k_debug_integer(
                    "DefConsoleProc::Initial-lineBufferIndex:",pctx->lineBufferI
                    ndex);
  5333                        	.line	700
  5334 00:1000: A7 15        	lda	[<L184+pctx_1]
  5335 00:1002: 48           	pha
  5336 00:1003: F4 xx xx     	pea	#^L182+165
  5337 00:1006: F4 xx xx     	pea	#<L182+165
  5338 00:1009: 22 xx xx xx  	jsl	~~k_debug_integer
  5339                        ;
  5340                        ;
  5341                        ;					//k_user_CreateW
                    indowClass("consoleWindowClass",NULL,0,NULL,NULL,NULL,consol
                    eWindowProc);
  5342                        ;
  5343                        ;					//UART1_BASE[1] 
                    = 0x01;
  5344                        ;
  5345                        ;				}
  5346                        	.line	707
  5347                        ;			}
  5348                        L10106:
  5349                        	.line	708
  5350                        ;			else
  Thu Dec  3 2020 22:25                                                Page 101


  5351 00:100D: 82 0A 00     	brl	L10115
  5352                        L10105:
  5353                        ;				k_debug_string("DefConso
                    leProc::FX_INIT_MESSAGE\r\n");
  5354                        	.line	710
  5355 00:1010: F4 xx xx     	pea	#^L182+206
  5356 00:1013: F4 xx xx     	pea	#<L182+206
  5357 00:1016: 22 xx xx xx  	jsl	~~k_debug_string
  5358                        L10115:
  5359                        ;			k_init_spinner(&consolespinctx);
  5360                        	.line	711
  5361 00:101A: A9 xx xx     	lda	#<~~consolespinctx
  5362 00:101D: 85 01        	sta	<R0
  5363                        	xref	_BEG_DATA
  5364 00:101F: A9 xx xx     	lda	#_BEG_DATA>>16
  5365 00:1022: 85 03        	sta	<R0+2
  5366 00:1024: D4 03        	pei	<R0+2
  5367 00:1026: D4 01        	pei	<R0
  5368 00:1028: 22 xx xx xx  	jsl	~~k_init_spinner
  5369                        ;			break;
  5370                        	.line	712
  5371 00:102C: 82 84 0F     	brl	L10103
  5372                        ;		case FX_UNINIT_MESSAGE:
  5373                        	.line	713
  5374                        L10116:
  5375                        ;			break;
  5376                        	.line	714
  5377 00:102F: 82 81 0F     	brl	L10103
  5378                        ;		case FX_KEY_UP:
  5379                        	.line	715
  5380                        L10117:
  5381                        ;			//k_debug_integer("DefConsolePro
                    c::FX_KEY_UP0:",pMsg->data[0]);
  5382                        ;			//k_debug_integer("DefConsolePro
                    c::FX_KEY_UP1:",pMsg->data[1]);
  5383                        ;			//k_debug_integer("DefConsolePro
                    c::FX_KEY_UP2:",pMsg->data[2]);
  5384                        ;			//k_debug_integer("DefConsolePro
                    c::isShifted:",pctx->isShifted);
  5385                        ;			if(pMsg->data[0] == 182 || pMsg-
                    >data[0] == 170)
  5386                        	.line	720
  5387                        ;			{
  5388 00:1032: E2 20        	sep	#$20
  5389                        	longa	off
  5390 00:1034: A0 16 00     	ldy	#$16
  5391 00:1037: B7 34        	lda	[<L183+pMsg_0],Y
  5392 00:1039: C9 B6        	cmp	#<$b6
  5393 00:103B: C2 20        	rep	#$20
  5394                        	longa	on
  5395 00:103D: D0 03        	bne	L197
  5396 00:103F: 82 10 00     	brl	L196
  5397                        L197:
  5398 00:1042: E2 20        	sep	#$20
  5399                        	longa	off
  5400 00:1044: A0 16 00     	ldy	#$16
  5401 00:1047: B7 34        	lda	[<L183+pMsg_0],Y
  5402 00:1049: C9 AA        	cmp	#<$aa
  Thu Dec  3 2020 22:25                                                Page 102


  5403 00:104B: C2 20        	rep	#$20
  5404                        	longa	on
  5405 00:104D: F0 03        	beq	L198
  5406 00:104F: 82 0E 00     	brl	L10118
  5407                        L198:
  5408                        L196:
  5409                        	.line	721
  5410                        ;				pctx->isShifted = FALSE;
  5411                        	.line	722
  5412 00:1052: E2 20        	sep	#$20
  5413                        	longa	off
  5414 00:1054: A9 00        	lda	#$0
  5415 00:1056: A0 82 00     	ldy	#$82
  5416 00:1059: 97 15        	sta	[<L184+pctx_1],Y
  5417 00:105B: C2 20        	rep	#$20
  5418                        	longa	on
  5419                        ;			}
  5420                        	.line	723
  5421                        ;			else
  5422 00:105D: 82 00 00     	brl	L10119
  5423                        L10118:
  5424                        ;			{
  5425                        	.line	725
  5426                        ;
  5427                        ;			}
  5428                        	.line	727
  5429                        L10119:
  5430                        ;			break;
  5431                        	.line	728
  5432 00:1060: 82 50 0F     	brl	L10103
  5433                        ;		case FX_KEY_DOWN:
  5434                        	.line	729
  5435                        L10120:
  5436                        ;			//if(p!=NULL)
  5437                        ;			//	k_debug_integer("DefCons
                    oleProc::ProcessId:",p->procId);
  5438                        ;			//k_debug_integer("DefConsolePro
                    c::FX_KEY_DOWN0:",pMsg->data[0]);
  5439                        ;			//k_debug_integer("DefConsolePro
                    c::FX_KEY_DOWN1:",pMsg->data[1]);
  5440                        ;			//k_debug_integer("DefConsolePro
                    c::FX_KEY_DOWN2:",pMsg->data[2]);
  5441                        ;			//k_debug_integer("DefConsolePro
                    c::isShifted:",pctx->isShifted);
  5442                        ;
  5443                        ;			//k_debug_integer("DefConsolePro
                    c::curX:",p->consoleCtl->curX);
  5444                        ;			//k_debug_integer("DefConsolePro
                    c::curY:",p->consoleCtl->curY);
  5445                        ;
  5446                        ;			if(pMsg->data[0] == 54 || pMsg->
                    data[0] == 42)
  5447                        	.line	740
  5448                        ;			{
  5449 00:1063: E2 20        	sep	#$20
  5450                        	longa	off
  5451 00:1065: A0 16 00     	ldy	#$16
  5452 00:1068: B7 34        	lda	[<L183+pMsg_0],Y
  Thu Dec  3 2020 22:25                                                Page 103


  5453 00:106A: C9 36        	cmp	#<$36
  5454 00:106C: C2 20        	rep	#$20
  5455                        	longa	on
  5456 00:106E: D0 03        	bne	L200
  5457 00:1070: 82 10 00     	brl	L199
  5458                        L200:
  5459 00:1073: E2 20        	sep	#$20
  5460                        	longa	off
  5461 00:1075: A0 16 00     	ldy	#$16
  5462 00:1078: B7 34        	lda	[<L183+pMsg_0],Y
  5463 00:107A: C9 2A        	cmp	#<$2a
  5464 00:107C: C2 20        	rep	#$20
  5465                        	longa	on
  5466 00:107E: F0 03        	beq	L201
  5467 00:1080: 82 0E 00     	brl	L10121
  5468                        L201:
  5469                        L199:
  5470                        	.line	741
  5471                        ;				pctx->isShifted = TRUE;
  5472                        	.line	742
  5473 00:1083: E2 20        	sep	#$20
  5474                        	longa	off
  5475 00:1085: A9 01        	lda	#$1
  5476 00:1087: A0 82 00     	ldy	#$82
  5477 00:108A: 97 15        	sta	[<L184+pctx_1],Y
  5478 00:108C: C2 20        	rep	#$20
  5479                        	longa	on
  5480                        ;			}
  5481                        	.line	743
  5482                        ;			else
  5483 00:108E: 82 56 04     	brl	L10122
  5484                        L10121:
  5485                        ;			{
  5486                        	.line	745
  5487                        ;				if(pMsg->data[2] == 13)
  5488                        	.line	746
  5489                        ;				{
  5490 00:1091: E2 20        	sep	#$20
  5491                        	longa	off
  5492 00:1093: A0 18 00     	ldy	#$18
  5493 00:1096: B7 34        	lda	[<L183+pMsg_0],Y
  5494 00:1098: C9 0D        	cmp	#<$d
  5495 00:109A: C2 20        	rep	#$20
  5496                        	longa	on
  5497 00:109C: F0 03        	beq	L202
  5498 00:109E: 82 AF 00     	brl	L10123
  5499                        L202:
  5500                        	.line	747
  5501                        ;					k_put_char(p->co
                    nsoleCtl->curX,
  5502                        	.line	748
  5503                        ;							
                    			   p->consoleCtl->curY,
  5504                        ;							
                    			   95,
  5505                        ;							
                    			   0,0);
  5506 00:10A1: F4 00 00     	pea	#<$0
  Thu Dec  3 2020 22:25                                                Page 104


  5507 00:10A4: F4 00 00     	pea	#<$0
  5508 00:10A7: F4 5F 00     	pea	#<$5f
  5509 00:10AA: A0 54 00     	ldy	#$54
  5510 00:10AD: B7 11        	lda	[<L184+p_1],Y
  5511 00:10AF: 85 01        	sta	<R0
  5512 00:10B1: A0 56 00     	ldy	#$56
  5513 00:10B4: B7 11        	lda	[<L184+p_1],Y
  5514 00:10B6: 85 03        	sta	<R0+2
  5515 00:10B8: A0 06 00     	ldy	#$6
  5516 00:10BB: B7 01        	lda	[<R0],Y
  5517 00:10BD: 48           	pha
  5518 00:10BE: A0 54 00     	ldy	#$54
  5519 00:10C1: B7 11        	lda	[<L184+p_1],Y
  5520 00:10C3: 85 01        	sta	<R0
  5521 00:10C5: A0 56 00     	ldy	#$56
  5522 00:10C8: B7 11        	lda	[<L184+p_1],Y
  5523 00:10CA: 85 03        	sta	<R0+2
  5524 00:10CC: A0 04 00     	ldy	#$4
  5525 00:10CF: B7 01        	lda	[<R0],Y
  5526 00:10D1: 48           	pha
  5527 00:10D2: 22 xx xx xx  	jsl	~~k_put_char
  5528                        ;
  5529                        ;					p->consoleCtl->c
                    urX = 0;
  5530                        	.line	753
  5531 00:10D6: A0 54 00     	ldy	#$54
  5532 00:10D9: B7 11        	lda	[<L184+p_1],Y
  5533 00:10DB: 85 01        	sta	<R0
  5534 00:10DD: A0 56 00     	ldy	#$56
  5535 00:10E0: B7 11        	lda	[<L184+p_1],Y
  5536 00:10E2: 85 03        	sta	<R0+2
  5537 00:10E4: A9 00 00     	lda	#$0
  5538 00:10E7: A0 04 00     	ldy	#$4
  5539 00:10EA: 97 01        	sta	[<R0],Y
  5540                        ;					p->consoleCtl->c
                    urY++;
  5541                        	.line	754
  5542 00:10EC: A0 54 00     	ldy	#$54
  5543 00:10EF: B7 11        	lda	[<L184+p_1],Y
  5544 00:10F1: 85 01        	sta	<R0
  5545 00:10F3: A0 56 00     	ldy	#$56
  5546 00:10F6: B7 11        	lda	[<L184+p_1],Y
  5547 00:10F8: 85 03        	sta	<R0+2
  5548 00:10FA: A0 06 00     	ldy	#$6
  5549 00:10FD: B7 01        	lda	[<R0],Y
  5550 00:10FF: 1A           	ina
  5551 00:1100: A0 06 00     	ldy	#$6
  5552 00:1103: 97 01        	sta	[<R0],Y
  5553                        ;
  5554                        ;					if(pctx->lineBuf
                    fer!=NULL && pctx->lineBufferIndex > 0)
  5555                        	.line	756
  5556                        ;					{
  5557 00:1105: 18           	clc
  5558 00:1106: A9 02 00     	lda	#$2
  5559 00:1109: 65 15        	adc	<L184+pctx_1
  5560 00:110B: 85 01        	sta	<R0
  5561 00:110D: A9 00 00     	lda	#$0
  Thu Dec  3 2020 22:25                                                Page 105


  5562 00:1110: 65 17        	adc	<L184+pctx_1+2
  5563 00:1112: 85 03        	sta	<R0+2
  5564 00:1114: A5 01        	lda	<R0
  5565 00:1116: 05 03        	ora	<R0+2
  5566 00:1118: D0 03        	bne	L203
  5567 00:111A: 82 2B 00     	brl	L10124
  5568                        L203:
  5569 00:111D: 38           	sec
  5570 00:111E: A9 00 00     	lda	#$0
  5571 00:1121: E7 15        	sbc	[<L184+pctx_1]
  5572 00:1123: 70 03        	bvs	L204
  5573 00:1125: 49 00 80     	eor	#$8000
  5574                        L204:
  5575 00:1128: 10 03        	bpl	L205
  5576 00:112A: 82 1B 00     	brl	L10124
  5577                        L205:
  5578                        	.line	757
  5579                        ;						k_consol
                    e_process_command(pctx->lineBuffer,p);
  5580                        	.line	758
  5581 00:112D: D4 13        	pei	<L184+p_1+2
  5582 00:112F: D4 11        	pei	<L184+p_1
  5583 00:1131: 18           	clc
  5584 00:1132: A9 02 00     	lda	#$2
  5585 00:1135: 65 15        	adc	<L184+pctx_1
  5586 00:1137: 85 01        	sta	<R0
  5587 00:1139: A9 00 00     	lda	#$0
  5588 00:113C: 65 17        	adc	<L184+pctx_1+2
  5589 00:113E: 85 03        	sta	<R0+2
  5590 00:1140: D4 03        	pei	<R0+2
  5591 00:1142: D4 01        	pei	<R0
  5592 00:1144: 22 xx xx xx  	jsl	~~k_console_process_command
  5593                        ;						//k_debu
                    g_string("DefConsoleProc::FX_KEY_DOWN:k_console_process_comm
                    and\r\n");
  5594                        ;					}
  5595                        	.line	760
  5596                        ;					pctx->lineBuffer
                    Index = 0;
  5597                        L10124:
  5598                        	.line	761
  5599 00:1148: A9 00 00     	lda	#$0
  5600 00:114B: 87 15        	sta	[<L184+pctx_1]
  5601                        ;
  5602                        ;				}
  5603                        	.line	763
  5604                        ;				else if(pMsg->data[2] ==
                     8)
  5605 00:114D: 82 59 03     	brl	L10125
  5606                        L10123:
  5607                        	.line	764
  5608                        ;				{
  5609 00:1150: E2 20        	sep	#$20
  5610                        	longa	off
  5611 00:1152: A0 18 00     	ldy	#$18
  5612 00:1155: B7 34        	lda	[<L183+pMsg_0],Y
  5613 00:1157: C9 08        	cmp	#<$8
  5614 00:1159: C2 20        	rep	#$20
  Thu Dec  3 2020 22:25                                                Page 106


  5615                        	longa	on
  5616 00:115B: F0 03        	beq	L206
  5617 00:115D: 82 47 01     	brl	L10126
  5618                        L206:
  5619                        	.line	765
  5620                        ;					k_put_char(p->co
                    nsoleCtl->curX,
  5621                        	.line	766
  5622                        ;							
                    			   p->consoleCtl->curY,
  5623                        ;							
                    			   95,
  5624                        ;							
                    			   0,0);
  5625 00:1160: F4 00 00     	pea	#<$0
  5626 00:1163: F4 00 00     	pea	#<$0
  5627 00:1166: F4 5F 00     	pea	#<$5f
  5628 00:1169: A0 54 00     	ldy	#$54
  5629 00:116C: B7 11        	lda	[<L184+p_1],Y
  5630 00:116E: 85 01        	sta	<R0
  5631 00:1170: A0 56 00     	ldy	#$56
  5632 00:1173: B7 11        	lda	[<L184+p_1],Y
  5633 00:1175: 85 03        	sta	<R0+2
  5634 00:1177: A0 06 00     	ldy	#$6
  5635 00:117A: B7 01        	lda	[<R0],Y
  5636 00:117C: 48           	pha
  5637 00:117D: A0 54 00     	ldy	#$54
  5638 00:1180: B7 11        	lda	[<L184+p_1],Y
  5639 00:1182: 85 01        	sta	<R0
  5640 00:1184: A0 56 00     	ldy	#$56
  5641 00:1187: B7 11        	lda	[<L184+p_1],Y
  5642 00:1189: 85 03        	sta	<R0+2
  5643 00:118B: A0 04 00     	ldy	#$4
  5644 00:118E: B7 01        	lda	[<R0],Y
  5645 00:1190: 48           	pha
  5646 00:1191: 22 xx xx xx  	jsl	~~k_put_char
  5647                        ;
  5648                        ;					p->consoleCtl->c
                    urX--;
  5649                        	.line	771
  5650 00:1195: A0 54 00     	ldy	#$54
  5651 00:1198: B7 11        	lda	[<L184+p_1],Y
  5652 00:119A: 85 01        	sta	<R0
  5653 00:119C: A0 56 00     	ldy	#$56
  5654 00:119F: B7 11        	lda	[<L184+p_1],Y
  5655 00:11A1: 85 03        	sta	<R0+2
  5656 00:11A3: 18           	clc
  5657 00:11A4: A9 FF FF     	lda	#$ffff
  5658 00:11A7: A0 04 00     	ldy	#$4
  5659 00:11AA: 77 01        	adc	[<R0],Y
  5660 00:11AC: A0 04 00     	ldy	#$4
  5661 00:11AF: 97 01        	sta	[<R0],Y
  5662                        ;					if(p->consoleCtl
                    ->curX < 0)
  5663                        	.line	772
  5664                        ;					{
  5665 00:11B1: A0 54 00     	ldy	#$54
  5666 00:11B4: B7 11        	lda	[<L184+p_1],Y
  Thu Dec  3 2020 22:25                                                Page 107


  5667 00:11B6: 85 01        	sta	<R0
  5668 00:11B8: A0 56 00     	ldy	#$56
  5669 00:11BB: B7 11        	lda	[<L184+p_1],Y
  5670 00:11BD: 85 03        	sta	<R0+2
  5671 00:11BF: A0 04 00     	ldy	#$4
  5672 00:11C2: B7 01        	lda	[<R0],Y
  5673 00:11C4: 30 03        	bmi	L207
  5674 00:11C6: 82 3F 00     	brl	L10127
  5675                        L207:
  5676                        	.line	773
  5677                        ;						p->conso
                    leCtl->curX = p->consoleCtl->maxCols;
  5678                        	.line	774
  5679 00:11C9: A0 54 00     	ldy	#$54
  5680 00:11CC: B7 11        	lda	[<L184+p_1],Y
  5681 00:11CE: 85 01        	sta	<R0
  5682 00:11D0: A0 56 00     	ldy	#$56
  5683 00:11D3: B7 11        	lda	[<L184+p_1],Y
  5684 00:11D5: 85 03        	sta	<R0+2
  5685 00:11D7: A0 54 00     	ldy	#$54
  5686 00:11DA: B7 11        	lda	[<L184+p_1],Y
  5687 00:11DC: 85 05        	sta	<R1
  5688 00:11DE: A0 56 00     	ldy	#$56
  5689 00:11E1: B7 11        	lda	[<L184+p_1],Y
  5690 00:11E3: 85 07        	sta	<R1+2
  5691 00:11E5: A7 05        	lda	[<R1]
  5692 00:11E7: A0 04 00     	ldy	#$4
  5693 00:11EA: 97 01        	sta	[<R0],Y
  5694                        ;						p->conso
                    leCtl->curY--;
  5695                        	.line	775
  5696 00:11EC: A0 54 00     	ldy	#$54
  5697 00:11EF: B7 11        	lda	[<L184+p_1],Y
  5698 00:11F1: 85 01        	sta	<R0
  5699 00:11F3: A0 56 00     	ldy	#$56
  5700 00:11F6: B7 11        	lda	[<L184+p_1],Y
  5701 00:11F8: 85 03        	sta	<R0+2
  5702 00:11FA: 18           	clc
  5703 00:11FB: A9 FF FF     	lda	#$ffff
  5704 00:11FE: A0 06 00     	ldy	#$6
  5705 00:1201: 77 01        	adc	[<R0],Y
  5706 00:1203: A0 06 00     	ldy	#$6
  5707 00:1206: 97 01        	sta	[<R0],Y
  5708                        ;					}
  5709                        	.line	776
  5710                        ;
  5711                        ;					pctx->lineBuffer
                    [pctx->lineBufferIndex] = 0;
  5712                        L10127:
  5713                        	.line	778
  5714 00:1208: A7 15        	lda	[<L184+pctx_1]
  5715 00:120A: 85 01        	sta	<R0
  5716 00:120C: 18           	clc
  5717 00:120D: A9 02 00     	lda	#$2
  5718 00:1210: 65 01        	adc	<R0
  5719 00:1212: 85 05        	sta	<R1
  5720 00:1214: E2 20        	sep	#$20
  5721                        	longa	off
  Thu Dec  3 2020 22:25                                                Page 108


  5722 00:1216: A9 00        	lda	#$0
  5723 00:1218: A4 05        	ldy	<R1
  5724 00:121A: 97 15        	sta	[<L184+pctx_1],Y
  5725 00:121C: C2 20        	rep	#$20
  5726                        	longa	on
  5727                        ;					pctx->lineBuffer
                    Index = pctx->lineBufferIndex - 1;
  5728                        	.line	779
  5729 00:121E: 18           	clc
  5730 00:121F: A9 FF FF     	lda	#$ffff
  5731 00:1222: 67 15        	adc	[<L184+pctx_1]
  5732 00:1224: 87 15        	sta	[<L184+pctx_1]
  5733                        ;					if(pctx->lineBuf
                    ferIndex < 0)
  5734                        	.line	780
  5735                        ;						pctx->li
                    neBufferIndex = 0;
  5736 00:1226: A7 15        	lda	[<L184+pctx_1]
  5737 00:1228: 30 03        	bmi	L208
  5738 00:122A: 82 05 00     	brl	L10128
  5739                        L208:
  5740                        	.line	781
  5741 00:122D: A9 00 00     	lda	#$0
  5742 00:1230: 87 15        	sta	[<L184+pctx_1]
  5743                        ;
  5744                        ;					pctx->lineBuffer
                    [pctx->lineBufferIndex] = 0;
  5745                        L10128:
  5746                        	.line	783
  5747 00:1232: A7 15        	lda	[<L184+pctx_1]
  5748 00:1234: 85 01        	sta	<R0
  5749 00:1236: 18           	clc
  5750 00:1237: A9 02 00     	lda	#$2
  5751 00:123A: 65 01        	adc	<R0
  5752 00:123C: 85 05        	sta	<R1
  5753 00:123E: E2 20        	sep	#$20
  5754                        	longa	off
  5755 00:1240: A9 00        	lda	#$0
  5756 00:1242: A4 05        	ldy	<R1
  5757 00:1244: 97 15        	sta	[<L184+pctx_1],Y
  5758 00:1246: C2 20        	rep	#$20
  5759                        	longa	on
  5760                        ;
  5761                        ;					if(p->consoleCtl
                    ->curY < 0)
  5762                        	.line	785
  5763                        ;						p->conso
                    leCtl->curY = 0;
  5764 00:1248: A0 54 00     	ldy	#$54
  5765 00:124B: B7 11        	lda	[<L184+p_1],Y
  5766 00:124D: 85 01        	sta	<R0
  5767 00:124F: A0 56 00     	ldy	#$56
  5768 00:1252: B7 11        	lda	[<L184+p_1],Y
  5769 00:1254: 85 03        	sta	<R0+2
  5770 00:1256: A0 06 00     	ldy	#$6
  5771 00:1259: B7 01        	lda	[<R0],Y
  5772 00:125B: 30 03        	bmi	L209
  5773 00:125D: 82 16 00     	brl	L10129
  Thu Dec  3 2020 22:25                                                Page 109


  5774                        L209:
  5775                        	.line	786
  5776 00:1260: A0 54 00     	ldy	#$54
  5777 00:1263: B7 11        	lda	[<L184+p_1],Y
  5778 00:1265: 85 01        	sta	<R0
  5779 00:1267: A0 56 00     	ldy	#$56
  5780 00:126A: B7 11        	lda	[<L184+p_1],Y
  5781 00:126C: 85 03        	sta	<R0+2
  5782 00:126E: A9 00 00     	lda	#$0
  5783 00:1271: A0 06 00     	ldy	#$6
  5784 00:1274: 97 01        	sta	[<R0],Y
  5785                        ;					if(p->consoleCtl
                    ->curX < 0)
  5786                        L10129:
  5787                        	.line	787
  5788                        ;						p->conso
                    leCtl->curX = 0;
  5789 00:1276: A0 54 00     	ldy	#$54
  5790 00:1279: B7 11        	lda	[<L184+p_1],Y
  5791 00:127B: 85 01        	sta	<R0
  5792 00:127D: A0 56 00     	ldy	#$56
  5793 00:1280: B7 11        	lda	[<L184+p_1],Y
  5794 00:1282: 85 03        	sta	<R0+2
  5795 00:1284: A0 04 00     	ldy	#$4
  5796 00:1287: B7 01        	lda	[<R0],Y
  5797 00:1289: 30 03        	bmi	L210
  5798 00:128B: 82 16 00     	brl	L10130
  5799                        L210:
  5800                        	.line	788
  5801 00:128E: A0 54 00     	ldy	#$54
  5802 00:1291: B7 11        	lda	[<L184+p_1],Y
  5803 00:1293: 85 01        	sta	<R0
  5804 00:1295: A0 56 00     	ldy	#$56
  5805 00:1298: B7 11        	lda	[<L184+p_1],Y
  5806 00:129A: 85 03        	sta	<R0+2
  5807 00:129C: A9 00 00     	lda	#$0
  5808 00:129F: A0 04 00     	ldy	#$4
  5809 00:12A2: 97 01        	sta	[<R0],Y
  5810                        ;				}
  5811                        L10130:
  5812                        	.line	789
  5813                        ;				else
  5814 00:12A4: 82 02 02     	brl	L10131
  5815                        L10126:
  5816                        ;				{
  5817                        	.line	791
  5818                        ;					k_debug_integer(
                    "DefConsoleProc::lineBufferIndexA:",pctx->lineBufferIndex);
  5819                        	.line	792
  5820 00:12A7: A7 15        	lda	[<L184+pctx_1]
  5821 00:12A9: 48           	pha
  5822 00:12AA: F4 xx xx     	pea	#^L182+240
  5823 00:12AD: F4 xx xx     	pea	#<L182+240
  5824 00:12B0: 22 xx xx xx  	jsl	~~k_debug_integer
  5825                        ;
  5826                        ;					if(pctx->isShift
                    ed)
  5827                        	.line	794
  Thu Dec  3 2020 22:25                                                Page 110


  5828                        ;						decodedK
                    ey = k_getKeyboardChar(pMsg->data[0],pMsg->data[1],pctx->isS
                    hifted);
  5829 00:12B4: A0 82 00     	ldy	#$82
  5830 00:12B7: B7 15        	lda	[<L184+pctx_1],Y
  5831 00:12B9: 29 FF 00     	and	#$ff
  5832 00:12BC: D0 03        	bne	L211
  5833 00:12BE: 82 25 00     	brl	L10132
  5834                        L211:
  5835                        	.line	795
  5836 00:12C1: A0 82 00     	ldy	#$82
  5837 00:12C4: B7 15        	lda	[<L184+pctx_1],Y
  5838 00:12C6: 29 FF 00     	and	#$ff
  5839 00:12C9: 48           	pha
  5840 00:12CA: A0 17 00     	ldy	#$17
  5841 00:12CD: B7 34        	lda	[<L183+pMsg_0],Y
  5842 00:12CF: 29 FF 00     	and	#$ff
  5843 00:12D2: 48           	pha
  5844 00:12D3: A0 16 00     	ldy	#$16
  5845 00:12D6: B7 34        	lda	[<L183+pMsg_0],Y
  5846 00:12D8: 48           	pha
  5847 00:12D9: 22 xx xx xx  	jsl	~~k_getKeyboardChar
  5848 00:12DD: E2 20        	sep	#$20
  5849                        	longa	off
  5850 00:12DF: 85 19        	sta	<L184+decodedKey_1
  5851 00:12E1: C2 20        	rep	#$20
  5852                        	longa	on
  5853                        ;					else
  5854 00:12E3: 82 0B 00     	brl	L10133
  5855                        L10132:
  5856                        ;						decodedK
                    ey = pMsg->data[2];
  5857                        	.line	797
  5858 00:12E6: E2 20        	sep	#$20
  5859                        	longa	off
  5860 00:12E8: A0 18 00     	ldy	#$18
  5861 00:12EB: B7 34        	lda	[<L183+pMsg_0],Y
  5862 00:12ED: 85 19        	sta	<L184+decodedKey_1
  5863 00:12EF: C2 20        	rep	#$20
  5864                        	longa	on
  5865                        L10133:
  5866                        ;
  5867                        ;					pctx->lineBuffer
                    [pctx->lineBufferIndex] = decodedKey;
  5868                        	.line	799
  5869 00:12F1: A7 15        	lda	[<L184+pctx_1]
  5870 00:12F3: 85 01        	sta	<R0
  5871 00:12F5: 18           	clc
  5872 00:12F6: A9 02 00     	lda	#$2
  5873 00:12F9: 65 01        	adc	<R0
  5874 00:12FB: 85 05        	sta	<R1
  5875 00:12FD: E2 20        	sep	#$20
  5876                        	longa	off
  5877 00:12FF: A5 19        	lda	<L184+decodedKey_1
  5878 00:1301: A4 05        	ldy	<R1
  5879 00:1303: 97 15        	sta	[<L184+pctx_1],Y
  5880 00:1305: C2 20        	rep	#$20
  5881                        	longa	on
  Thu Dec  3 2020 22:25                                                Page 111


  5882                        ;
  5883                        ;					//k_debug_char("
                    KEY:",decodedKey);
  5884                        ;
  5885                        ;
  5886                        ;					if(p->consoleCtl
                    ->desktopMode)
  5887                        	.line	804
  5888                        ;					{
  5889 00:1307: A0 54 00     	ldy	#$54
  5890 00:130A: B7 11        	lda	[<L184+p_1],Y
  5891 00:130C: 85 01        	sta	<R0
  5892 00:130E: A0 56 00     	ldy	#$56
  5893 00:1311: B7 11        	lda	[<L184+p_1],Y
  5894 00:1313: 85 03        	sta	<R0+2
  5895 00:1315: A0 31 00     	ldy	#$31
  5896 00:1318: B7 01        	lda	[<R0],Y
  5897 00:131A: 29 FF 00     	and	#$ff
  5898 00:131D: D0 03        	bne	L212
  5899 00:131F: 82 45 00     	brl	L10134
  5900                        L212:
  5901                        	.line	805
  5902                        ;
  5903                        ;						k_put_fo
                    nt(decodedKey,p->consoleCtl->curX,p->consoleCtl->curY,p->con
                    soleCtl->fgColor);
  5904                        	.line	807
  5905 00:1322: A0 54 00     	ldy	#$54
  5906 00:1325: B7 11        	lda	[<L184+p_1],Y
  5907 00:1327: 85 01        	sta	<R0
  5908 00:1329: A0 56 00     	ldy	#$56
  5909 00:132C: B7 11        	lda	[<L184+p_1],Y
  5910 00:132E: 85 03        	sta	<R0+2
  5911 00:1330: A0 08 00     	ldy	#$8
  5912 00:1333: B7 01        	lda	[<R0],Y
  5913 00:1335: 48           	pha
  5914 00:1336: A0 54 00     	ldy	#$54
  5915 00:1339: B7 11        	lda	[<L184+p_1],Y
  5916 00:133B: 85 05        	sta	<R1
  5917 00:133D: A0 56 00     	ldy	#$56
  5918 00:1340: B7 11        	lda	[<L184+p_1],Y
  5919 00:1342: 85 07        	sta	<R1+2
  5920 00:1344: A0 06 00     	ldy	#$6
  5921 00:1347: B7 05        	lda	[<R1],Y
  5922 00:1349: 48           	pha
  5923 00:134A: A0 54 00     	ldy	#$54
  5924 00:134D: B7 11        	lda	[<L184+p_1],Y
  5925 00:134F: 85 05        	sta	<R1
  5926 00:1351: A0 56 00     	ldy	#$56
  5927 00:1354: B7 11        	lda	[<L184+p_1],Y
  5928 00:1356: 85 07        	sta	<R1+2
  5929 00:1358: A0 04 00     	ldy	#$4
  5930 00:135B: B7 05        	lda	[<R1],Y
  5931 00:135D: 48           	pha
  5932 00:135E: D4 19        	pei	<L184+decodedKey_1
  5933 00:1360: 22 xx xx xx  	jsl	~~k_put_font
  5934                        ;
  5935                        ;					}
  Thu Dec  3 2020 22:25                                                Page 112


  5936                        	.line	809
  5937                        ;					else
  5938 00:1364: 82 88 00     	brl	L10135
  5939                        L10134:
  5940                        ;					{
  5941                        	.line	811
  5942                        ;
  5943                        ;						k_put_ch
                    ar(p->consoleCtl->curX,
  5944                        	.line	813
  5945                        ;							
                    	   p->consoleCtl->curY,
  5946                        ;							
                    	   decodedKey,
  5947                        ;							
                    	   p->consoleCtl->fgColor,0);
  5948 00:1367: F4 00 00     	pea	#<$0
  5949 00:136A: A0 54 00     	ldy	#$54
  5950 00:136D: B7 11        	lda	[<L184+p_1],Y
  5951 00:136F: 85 01        	sta	<R0
  5952 00:1371: A0 56 00     	ldy	#$56
  5953 00:1374: B7 11        	lda	[<L184+p_1],Y
  5954 00:1376: 85 03        	sta	<R0+2
  5955 00:1378: A0 08 00     	ldy	#$8
  5956 00:137B: B7 01        	lda	[<R0],Y
  5957 00:137D: 48           	pha
  5958 00:137E: D4 19        	pei	<L184+decodedKey_1
  5959 00:1380: A0 54 00     	ldy	#$54
  5960 00:1383: B7 11        	lda	[<L184+p_1],Y
  5961 00:1385: 85 01        	sta	<R0
  5962 00:1387: A0 56 00     	ldy	#$56
  5963 00:138A: B7 11        	lda	[<L184+p_1],Y
  5964 00:138C: 85 03        	sta	<R0+2
  5965 00:138E: A0 06 00     	ldy	#$6
  5966 00:1391: B7 01        	lda	[<R0],Y
  5967 00:1393: 48           	pha
  5968 00:1394: A0 54 00     	ldy	#$54
  5969 00:1397: B7 11        	lda	[<L184+p_1],Y
  5970 00:1399: 85 01        	sta	<R0
  5971 00:139B: A0 56 00     	ldy	#$56
  5972 00:139E: B7 11        	lda	[<L184+p_1],Y
  5973 00:13A0: 85 03        	sta	<R0+2
  5974 00:13A2: A0 04 00     	ldy	#$4
  5975 00:13A5: B7 01        	lda	[<R0],Y
  5976 00:13A7: 48           	pha
  5977 00:13A8: 22 xx xx xx  	jsl	~~k_put_char
  5978                        ;						consoleB
                    uffer[p->consoleCtl->curY][p->consoleCtl->curX] = decodedKey
                    ;
  5979                        	.line	817
  5980 00:13AC: A0 54 00     	ldy	#$54
  5981 00:13AF: B7 11        	lda	[<L184+p_1],Y
  5982 00:13B1: 85 05        	sta	<R1
  5983 00:13B3: A0 56 00     	ldy	#$56
  5984 00:13B6: B7 11        	lda	[<L184+p_1],Y
  5985 00:13B8: 85 07        	sta	<R1+2
  5986 00:13BA: A0 04 00     	ldy	#$4
  5987 00:13BD: B7 05        	lda	[<R1],Y
  Thu Dec  3 2020 22:25                                                Page 113


  5988 00:13BF: 0A           	asl	A
  5989 00:13C0: 85 01        	sta	<R0
  5990 00:13C2: A0 54 00     	ldy	#$54
  5991 00:13C5: B7 11        	lda	[<L184+p_1],Y
  5992 00:13C7: 85 05        	sta	<R1
  5993 00:13C9: A0 56 00     	ldy	#$56
  5994 00:13CC: B7 11        	lda	[<L184+p_1],Y
  5995 00:13CE: 85 07        	sta	<R1+2
  5996 00:13D0: A0 06 00     	ldy	#$6
  5997 00:13D3: B7 05        	lda	[<R1],Y
  5998 00:13D5: A2 90 00     	ldx	#<$90
  5999                        	xref	~~~mul
  6000 00:13D8: 22 xx xx xx  	jsl	~~~mul
  6001 00:13DC: 85 05        	sta	<R1
  6002 00:13DE: 18           	clc
  6003 00:13DF: A5 05        	lda	<R1
  6004 00:13E1: 65 01        	adc	<R0
  6005 00:13E3: 85 09        	sta	<R2
  6006 00:13E5: A5 19        	lda	<L184+decodedKey_1
  6007 00:13E7: 29 FF 00     	and	#$ff
  6008 00:13EA: A6 09        	ldx	<R2
  6009 00:13EC: 9D xx xx     	sta	|~~consoleBuffer,X
  6010                        ;					}
  6011                        	.line	818
  6012                        L10135:
  6013                        ;
  6014                        ;					pctx->lineBuffer
                    Index = pctx->lineBufferIndex+1;
  6015                        	.line	820
  6016 00:13EF: A7 15        	lda	[<L184+pctx_1]
  6017 00:13F1: 1A           	ina
  6018 00:13F2: 87 15        	sta	[<L184+pctx_1]
  6019                        ;					pctx->lineBuffer
                    [pctx->lineBufferIndex] = 0;
  6020                        	.line	821
  6021 00:13F4: A7 15        	lda	[<L184+pctx_1]
  6022 00:13F6: 85 01        	sta	<R0
  6023 00:13F8: 18           	clc
  6024 00:13F9: A9 02 00     	lda	#$2
  6025 00:13FC: 65 01        	adc	<R0
  6026 00:13FE: 85 05        	sta	<R1
  6027 00:1400: E2 20        	sep	#$20
  6028                        	longa	off
  6029 00:1402: A9 00        	lda	#$0
  6030 00:1404: A4 05        	ldy	<R1
  6031 00:1406: 97 15        	sta	[<L184+pctx_1],Y
  6032 00:1408: C2 20        	rep	#$20
  6033                        	longa	on
  6034                        ;
  6035                        ;					if(pctx->lineBuf
                    ferIndex > 127)
  6036                        	.line	823
  6037                        ;					{
  6038 00:140A: 38           	sec
  6039 00:140B: A9 7F 00     	lda	#$7f
  6040 00:140E: E7 15        	sbc	[<L184+pctx_1]
  6041 00:1410: 70 03        	bvs	L213
  6042 00:1412: 49 00 80     	eor	#$8000
  Thu Dec  3 2020 22:25                                                Page 114


  6043                        L213:
  6044 00:1415: 10 03        	bpl	L214
  6045 00:1417: 82 19 00     	brl	L10136
  6046                        L214:
  6047                        	.line	824
  6048                        ;						k_exec_t
                    hrow_exception(0,0,"lineBufferIndex too large",-1);
  6049                        	.line	825
  6050 00:141A: F4 FF FF     	pea	#<$ffffffff
  6051 00:141D: F4 xx xx     	pea	#^L182+274
  6052 00:1420: F4 xx xx     	pea	#<L182+274
  6053 00:1423: F4 00 00     	pea	#^$0
  6054 00:1426: F4 00 00     	pea	#<$0
  6055 00:1429: F4 00 00     	pea	#^$0
  6056 00:142C: F4 00 00     	pea	#<$0
  6057 00:142F: 22 xx xx xx  	jsl	~~k_exec_throw_exception
  6058                        ;					}
  6059                        	.line	826
  6060                        ;					//k_debug_intege
                    r("DefConsoleProc::lineBufferIndexB:",pctx->lineBufferIndex)
                    ;
  6061                        ;					//k_debug_string
                    ("DefConsoleProc::lineBuffer:");
  6062                        ;					//k_debug_string
                    (pctx->lineBuffer);
  6063                        ;					//k_debug_string
                    ("\r\n");
  6064                        ;
  6065                        ;					p->consoleCtl->c
                    urX++;
  6066                        L10136:
  6067                        	.line	832
  6068 00:1433: A0 54 00     	ldy	#$54
  6069 00:1436: B7 11        	lda	[<L184+p_1],Y
  6070 00:1438: 85 01        	sta	<R0
  6071 00:143A: A0 56 00     	ldy	#$56
  6072 00:143D: B7 11        	lda	[<L184+p_1],Y
  6073 00:143F: 85 03        	sta	<R0+2
  6074 00:1441: A0 04 00     	ldy	#$4
  6075 00:1444: B7 01        	lda	[<R0],Y
  6076 00:1446: 1A           	ina
  6077 00:1447: A0 04 00     	ldy	#$4
  6078 00:144A: 97 01        	sta	[<R0],Y
  6079                        ;					if(p->consoleCtl
                    ->curX >= p->consoleCtl->maxCols)
  6080                        	.line	833
  6081                        ;					{
  6082 00:144C: A0 54 00     	ldy	#$54
  6083 00:144F: B7 11        	lda	[<L184+p_1],Y
  6084 00:1451: 85 01        	sta	<R0
  6085 00:1453: A0 56 00     	ldy	#$56
  6086 00:1456: B7 11        	lda	[<L184+p_1],Y
  6087 00:1458: 85 03        	sta	<R0+2
  6088 00:145A: A0 54 00     	ldy	#$54
  6089 00:145D: B7 11        	lda	[<L184+p_1],Y
  6090 00:145F: 85 05        	sta	<R1
  6091 00:1461: A0 56 00     	ldy	#$56
  6092 00:1464: B7 11        	lda	[<L184+p_1],Y
  Thu Dec  3 2020 22:25                                                Page 115


  6093 00:1466: 85 07        	sta	<R1+2
  6094 00:1468: 38           	sec
  6095 00:1469: A0 04 00     	ldy	#$4
  6096 00:146C: B7 05        	lda	[<R1],Y
  6097 00:146E: E7 01        	sbc	[<R0]
  6098 00:1470: 70 03        	bvs	L215
  6099 00:1472: 49 00 80     	eor	#$8000
  6100                        L215:
  6101 00:1475: 30 03        	bmi	L216
  6102 00:1477: 82 2F 00     	brl	L10137
  6103                        L216:
  6104                        	.line	834
  6105                        ;						p->conso
                    leCtl->curX = 0;
  6106                        	.line	835
  6107 00:147A: A0 54 00     	ldy	#$54
  6108 00:147D: B7 11        	lda	[<L184+p_1],Y
  6109 00:147F: 85 01        	sta	<R0
  6110 00:1481: A0 56 00     	ldy	#$56
  6111 00:1484: B7 11        	lda	[<L184+p_1],Y
  6112 00:1486: 85 03        	sta	<R0+2
  6113 00:1488: A9 00 00     	lda	#$0
  6114 00:148B: A0 04 00     	ldy	#$4
  6115 00:148E: 97 01        	sta	[<R0],Y
  6116                        ;						p->conso
                    leCtl->curY++;
  6117                        	.line	836
  6118 00:1490: A0 54 00     	ldy	#$54
  6119 00:1493: B7 11        	lda	[<L184+p_1],Y
  6120 00:1495: 85 01        	sta	<R0
  6121 00:1497: A0 56 00     	ldy	#$56
  6122 00:149A: B7 11        	lda	[<L184+p_1],Y
  6123 00:149C: 85 03        	sta	<R0+2
  6124 00:149E: A0 06 00     	ldy	#$6
  6125 00:14A1: B7 01        	lda	[<R0],Y
  6126 00:14A3: 1A           	ina
  6127 00:14A4: A0 06 00     	ldy	#$6
  6128 00:14A7: 97 01        	sta	[<R0],Y
  6129                        ;					}
  6130                        	.line	837
  6131                        ;				}
  6132                        L10137:
  6133                        	.line	838
  6134                        L10131:
  6135                        L10125:
  6136                        ;
  6137                        ;				if(p->consoleCtl->curY >
                     50)
  6138                        	.line	840
  6139                        ;				{
  6140 00:14A9: A0 54 00     	ldy	#$54
  6141 00:14AC: B7 11        	lda	[<L184+p_1],Y
  6142 00:14AE: 85 01        	sta	<R0
  6143 00:14B0: A0 56 00     	ldy	#$56
  6144 00:14B3: B7 11        	lda	[<L184+p_1],Y
  6145 00:14B5: 85 03        	sta	<R0+2
  6146 00:14B7: 38           	sec
  6147 00:14B8: A9 32 00     	lda	#$32
  Thu Dec  3 2020 22:25                                                Page 116


  6148 00:14BB: A0 06 00     	ldy	#$6
  6149 00:14BE: F7 01        	sbc	[<R0],Y
  6150 00:14C0: 70 03        	bvs	L217
  6151 00:14C2: 49 00 80     	eor	#$8000
  6152                        L217:
  6153 00:14C5: 10 03        	bpl	L218
  6154 00:14C7: 82 1D 00     	brl	L10138
  6155                        L218:
  6156                        	.line	841
  6157                        ;					k_send_process_c
                    ommand_message(p,FX_SCROLLBAR_COMMAND,CTL_VERT_SCROLL,0,1L,0
                    L);
  6158                        	.line	842
  6159 00:14CA: F4 00 00     	pea	#^$0
  6160 00:14CD: F4 00 00     	pea	#<$0
  6161 00:14D0: F4 00 00     	pea	#^$1
  6162 00:14D3: F4 01 00     	pea	#<$1
  6163 00:14D6: F4 00 00     	pea	#<$0
  6164 00:14D9: F4 01 00     	pea	#<$1
  6165 00:14DC: F4 02 FA     	pea	#<$fa02
  6166 00:14DF: D4 13        	pei	<L184+p_1+2
  6167 00:14E1: D4 11        	pei	<L184+p_1
  6168 00:14E3: 22 xx xx xx  	jsl	~~k_send_process_command_message
  6169                        ;				}
  6170                        	.line	843
  6171                        ;			}
  6172                        L10138:
  6173                        	.line	844
  6174                        L10122:
  6175                        ;
  6176                        ;			//k_enable_text_cursor();
  6177                        ;			//k_set_cursor_position(p->conso
                    leCtl->curX+1,p->consoleCtl->curY);
  6178                        ;			//k_set_cursor_position(20,20);
  6179                        ;
  6180                        ;			break;
  6181                        	.line	850
  6182 00:14E7: 82 C9 0A     	brl	L10103
  6183                        ;		case FX_DISK_INSERT:
  6184                        	.line	851
  6185                        L10139:
  6186                        ;
  6187                        ;			k_debug_string("DefConsoleProc::
                    DISK-INSERT:");
  6188                        	.line	853
  6189 00:14EA: F4 xx xx     	pea	#^L182+300
  6190 00:14ED: F4 xx xx     	pea	#<L182+300
  6191 00:14F0: 22 xx xx xx  	jsl	~~k_debug_string
  6192                        ;			if(((PDISKINFO)pMsg->pheap)->stg
                    Name)
  6193                        	.line	854
  6194                        ;			{
  6195 00:14F4: A0 0E 00     	ldy	#$e
  6196 00:14F7: B7 34        	lda	[<L183+pMsg_0],Y
  6197 00:14F9: A0 10 00     	ldy	#$10
  6198 00:14FC: 17 34        	ora	[<L183+pMsg_0],Y
  6199 00:14FE: D0 03        	bne	L219
  6200 00:1500: 82 13 00     	brl	L10140
  Thu Dec  3 2020 22:25                                                Page 117


  6201                        L219:
  6202                        	.line	855
  6203                        ;				k_debug_string(((PDISKIN
                    FO)pMsg->pheap)->stgName);
  6204                        	.line	856
  6205 00:1503: A0 10 00     	ldy	#$10
  6206 00:1506: B7 34        	lda	[<L183+pMsg_0],Y
  6207 00:1508: 48           	pha
  6208 00:1509: A0 0E 00     	ldy	#$e
  6209 00:150C: B7 34        	lda	[<L183+pMsg_0],Y
  6210 00:150E: 48           	pha
  6211 00:150F: 22 xx xx xx  	jsl	~~k_debug_string
  6212                        ;			}
  6213                        	.line	857
  6214                        ;			else
  6215 00:1513: 82 0A 00     	brl	L10141
  6216                        L10140:
  6217                        ;			{
  6218                        	.line	859
  6219                        ;				k_debug_string("NULL");
  6220                        	.line	860
  6221 00:1516: F4 xx xx     	pea	#^L182+329
  6222 00:1519: F4 xx xx     	pea	#<L182+329
  6223 00:151C: 22 xx xx xx  	jsl	~~k_debug_string
  6224                        ;			}
  6225                        	.line	861
  6226                        L10141:
  6227                        ;			k_debug_string("\r\n");
  6228                        	.line	862
  6229 00:1520: F4 xx xx     	pea	#^L182+334
  6230 00:1523: F4 xx xx     	pea	#<L182+334
  6231 00:1526: 22 xx xx xx  	jsl	~~k_debug_string
  6232                        ;
  6233                        ;			((PDISKINFO)pMsg->pheap)->stgNam
                    e[31] = 0;
  6234                        	.line	864
  6235 00:152A: A0 0E 00     	ldy	#$e
  6236 00:152D: B7 34        	lda	[<L183+pMsg_0],Y
  6237 00:152F: 85 01        	sta	<R0
  6238 00:1531: A0 10 00     	ldy	#$10
  6239 00:1534: B7 34        	lda	[<L183+pMsg_0],Y
  6240 00:1536: 85 03        	sta	<R0+2
  6241 00:1538: E2 20        	sep	#$20
  6242                        	longa	off
  6243 00:153A: A9 00        	lda	#$0
  6244 00:153C: A0 1F 00     	ldy	#$1f
  6245 00:153F: 97 01        	sta	[<R0],Y
  6246 00:1541: C2 20        	rep	#$20
  6247                        	longa	on
  6248                        ;
  6249                        ;			if(p->consoleCtl->desktopMode)
  6250                        	.line	866
  6251                        ;			{
  6252 00:1543: A0 54 00     	ldy	#$54
  6253 00:1546: B7 11        	lda	[<L184+p_1],Y
  6254 00:1548: 85 01        	sta	<R0
  6255 00:154A: A0 56 00     	ldy	#$56
  6256 00:154D: B7 11        	lda	[<L184+p_1],Y
  Thu Dec  3 2020 22:25                                                Page 118


  6257 00:154F: 85 03        	sta	<R0+2
  6258 00:1551: A0 31 00     	ldy	#$31
  6259 00:1554: B7 01        	lda	[<R0],Y
  6260 00:1556: 29 FF 00     	and	#$ff
  6261 00:1559: D0 03        	bne	L220
  6262 00:155B: 82 C1 02     	brl	L10142
  6263                        L220:
  6264                        	.line	867
  6265                        ;				if(p->desktopCtl->curren
                    tDiskName && strcmp( k_to_uppercase(  ((PDISKINFO)pMsg->phea
                    p)->stgName),p->desktopCtl->currentDiskName) == 0)
  6266                        	.line	868
  6267                        ;				{
  6268 00:155E: A0 58 00     	ldy	#$58
  6269 00:1561: B7 11        	lda	[<L184+p_1],Y
  6270 00:1563: 85 01        	sta	<R0
  6271 00:1565: A0 5A 00     	ldy	#$5a
  6272 00:1568: B7 11        	lda	[<L184+p_1],Y
  6273 00:156A: 85 03        	sta	<R0+2
  6274 00:156C: A0 11 00     	ldy	#$11
  6275 00:156F: B7 01        	lda	[<R0],Y
  6276 00:1571: A0 13 00     	ldy	#$13
  6277 00:1574: 17 01        	ora	[<R0],Y
  6278 00:1576: D0 03        	bne	L221
  6279 00:1578: 82 47 00     	brl	L10143
  6280                        L221:
  6281 00:157B: A0 58 00     	ldy	#$58
  6282 00:157E: B7 11        	lda	[<L184+p_1],Y
  6283 00:1580: 85 01        	sta	<R0
  6284 00:1582: A0 5A 00     	ldy	#$5a
  6285 00:1585: B7 11        	lda	[<L184+p_1],Y
  6286 00:1587: 85 03        	sta	<R0+2
  6287 00:1589: A0 13 00     	ldy	#$13
  6288 00:158C: B7 01        	lda	[<R0],Y
  6289 00:158E: 48           	pha
  6290 00:158F: A0 11 00     	ldy	#$11
  6291 00:1592: B7 01        	lda	[<R0],Y
  6292 00:1594: 48           	pha
  6293 00:1595: A0 10 00     	ldy	#$10
  6294 00:1598: B7 34        	lda	[<L183+pMsg_0],Y
  6295 00:159A: 48           	pha
  6296 00:159B: A0 0E 00     	ldy	#$e
  6297 00:159E: B7 34        	lda	[<L183+pMsg_0],Y
  6298 00:15A0: 48           	pha
  6299 00:15A1: 22 xx xx xx  	jsl	~~k_to_uppercase
  6300 00:15A5: 85 01        	sta	<R0
  6301 00:15A7: 86 03        	stx	<R0+2
  6302 00:15A9: DA           	phx
  6303 00:15AA: 48           	pha
  6304 00:15AB: 22 xx xx xx  	jsl	~~strcmp
  6305 00:15AF: AA           	tax
  6306 00:15B0: F0 03        	beq	L222
  6307 00:15B2: 82 0D 00     	brl	L10143
  6308                        L222:
  6309                        	.line	869
  6310                        ;					k_debug_string("
                    DefConsoleProc::DISK-INSERT:NO-CHANGE\r\n");
  6311                        	.line	870
  Thu Dec  3 2020 22:25                                                Page 119


  6312 00:15B5: F4 xx xx     	pea	#^L182+337
  6313 00:15B8: F4 xx xx     	pea	#<L182+337
  6314 00:15BB: 22 xx xx xx  	jsl	~~k_debug_string
  6315                        ;				}
  6316                        	.line	871
  6317                        ;				else
  6318 00:15BF: 82 5A 02     	brl	L10144
  6319                        L10143:
  6320                        ;				{
  6321                        	.line	873
  6322                        ;
  6323                        ;
  6324                        ;					if(p->desktopCtl
                    ->currentDiskName)
  6325                        	.line	876
  6326                        ;					{
  6327 00:15C2: A0 58 00     	ldy	#$58
  6328 00:15C5: B7 11        	lda	[<L184+p_1],Y
  6329 00:15C7: 85 01        	sta	<R0
  6330 00:15C9: A0 5A 00     	ldy	#$5a
  6331 00:15CC: B7 11        	lda	[<L184+p_1],Y
  6332 00:15CE: 85 03        	sta	<R0+2
  6333 00:15D0: A0 11 00     	ldy	#$11
  6334 00:15D3: B7 01        	lda	[<R0],Y
  6335 00:15D5: A0 13 00     	ldy	#$13
  6336 00:15D8: 17 01        	ora	[<R0],Y
  6337 00:15DA: D0 03        	bne	L223
  6338 00:15DC: 82 B7 00     	brl	L10145
  6339                        L223:
  6340                        	.line	877
  6341                        ;						temp1 = 
                    strlen(p->desktopCtl->currentDiskName);
  6342                        	.line	878
  6343 00:15DF: A0 58 00     	ldy	#$58
  6344 00:15E2: B7 11        	lda	[<L184+p_1],Y
  6345 00:15E4: 85 01        	sta	<R0
  6346 00:15E6: A0 5A 00     	ldy	#$5a
  6347 00:15E9: B7 11        	lda	[<L184+p_1],Y
  6348 00:15EB: 85 03        	sta	<R0+2
  6349 00:15ED: A0 13 00     	ldy	#$13
  6350 00:15F0: B7 01        	lda	[<R0],Y
  6351 00:15F2: 48           	pha
  6352 00:15F3: A0 11 00     	ldy	#$11
  6353 00:15F6: B7 01        	lda	[<R0],Y
  6354 00:15F8: 48           	pha
  6355 00:15F9: 22 xx xx xx  	jsl	~~strlen
  6356 00:15FD: 85 1E        	sta	<L184+temp1_1
  6357                        ;						temp2 = 
                    (temp1*4);
  6358                        	.line	879
  6359 00:15FF: A5 1E        	lda	<L184+temp1_1
  6360 00:1601: 0A           	asl	A
  6361 00:1602: 0A           	asl	A
  6362 00:1603: 85 20        	sta	<L184+temp2_1
  6363                        ;						k_put_wi
                    nicon_point(ICON_DISK,640 - (40 + temp2/2),20,p->desktopCtl-
                    >backgroundColor,PAINTMODE_BACKGROUND);
  6364                        	.line	880
  Thu Dec  3 2020 22:25                                                Page 120


  6365 00:1605: F4 F0 00     	pea	#<$f0
  6366 00:1608: A0 58 00     	ldy	#$58
  6367 00:160B: B7 11        	lda	[<L184+p_1],Y
  6368 00:160D: 85 01        	sta	<R0
  6369 00:160F: A0 5A 00     	ldy	#$5a
  6370 00:1612: B7 11        	lda	[<L184+p_1],Y
  6371 00:1614: 85 03        	sta	<R0+2
  6372 00:1616: A0 05 00     	ldy	#$5
  6373 00:1619: B7 01        	lda	[<R0],Y
  6374 00:161B: 48           	pha
  6375 00:161C: F4 14 00     	pea	#<$14
  6376 00:161F: A5 20        	lda	<L184+temp2_1
  6377 00:1621: A2 02 00     	ldx	#<$2
  6378                        	xref	~~~div
  6379 00:1624: 22 xx xx xx  	jsl	~~~div
  6380 00:1628: 85 01        	sta	<R0
  6381 00:162A: 18           	clc
  6382 00:162B: A9 28 00     	lda	#$28
  6383 00:162E: 65 01        	adc	<R0
  6384 00:1630: 85 05        	sta	<R1
  6385 00:1632: 38           	sec
  6386 00:1633: A9 80 02     	lda	#$280
  6387 00:1636: E5 05        	sbc	<R1
  6388 00:1638: 48           	pha
  6389 00:1639: F4 03 00     	pea	#<$3
  6390 00:163C: 22 xx xx xx  	jsl	~~k_put_winicon_point
  6391                        ;						k_draw_t
                    ext_point(p->desktopCtl->currentDiskName,640 - (35 + temp2/2
                    ) - (temp2),40,p->desktopCtl->backgroundColor);
  6392                        	.line	881
  6393 00:1640: A0 58 00     	ldy	#$58
  6394 00:1643: B7 11        	lda	[<L184+p_1],Y
  6395 00:1645: 85 01        	sta	<R0
  6396 00:1647: A0 5A 00     	ldy	#$5a
  6397 00:164A: B7 11        	lda	[<L184+p_1],Y
  6398 00:164C: 85 03        	sta	<R0+2
  6399 00:164E: A0 05 00     	ldy	#$5
  6400 00:1651: B7 01        	lda	[<R0],Y
  6401 00:1653: 48           	pha
  6402 00:1654: F4 28 00     	pea	#<$28
  6403 00:1657: A5 20        	lda	<L184+temp2_1
  6404 00:1659: A2 02 00     	ldx	#<$2
  6405                        	xref	~~~div
  6406 00:165C: 22 xx xx xx  	jsl	~~~div
  6407 00:1660: 85 05        	sta	<R1
  6408 00:1662: 18           	clc
  6409 00:1663: A9 23 00     	lda	#$23
  6410 00:1666: 65 05        	adc	<R1
  6411 00:1668: 85 09        	sta	<R2
  6412 00:166A: 38           	sec
  6413 00:166B: A9 80 02     	lda	#$280
  6414 00:166E: E5 09        	sbc	<R2
  6415 00:1670: 85 05        	sta	<R1
  6416 00:1672: 38           	sec
  6417 00:1673: A5 05        	lda	<R1
  6418 00:1675: E5 20        	sbc	<L184+temp2_1
  6419 00:1677: 48           	pha
  6420 00:1678: A0 58 00     	ldy	#$58
  Thu Dec  3 2020 22:25                                                Page 121


  6421 00:167B: B7 11        	lda	[<L184+p_1],Y
  6422 00:167D: 85 05        	sta	<R1
  6423 00:167F: A0 5A 00     	ldy	#$5a
  6424 00:1682: B7 11        	lda	[<L184+p_1],Y
  6425 00:1684: 85 07        	sta	<R1+2
  6426 00:1686: A0 13 00     	ldy	#$13
  6427 00:1689: B7 05        	lda	[<R1],Y
  6428 00:168B: 48           	pha
  6429 00:168C: A0 11 00     	ldy	#$11
  6430 00:168F: B7 05        	lda	[<R1],Y
  6431 00:1691: 48           	pha
  6432 00:1692: 22 xx xx xx  	jsl	~~k_draw_text_point
  6433                        ;					}
  6434                        	.line	882
  6435                        ;
  6436                        ;					temp1 = strlen((
                    (PDISKINFO)pMsg->pheap)->stgName);
  6437                        L10145:
  6438                        	.line	884
  6439 00:1696: A0 10 00     	ldy	#$10
  6440 00:1699: B7 34        	lda	[<L183+pMsg_0],Y
  6441 00:169B: 48           	pha
  6442 00:169C: A0 0E 00     	ldy	#$e
  6443 00:169F: B7 34        	lda	[<L183+pMsg_0],Y
  6444 00:16A1: 48           	pha
  6445 00:16A2: 22 xx xx xx  	jsl	~~strlen
  6446 00:16A6: 85 1E        	sta	<L184+temp1_1
  6447                        ;					temp2 = (temp1*4
                    );
  6448                        	.line	885
  6449 00:16A8: A5 1E        	lda	<L184+temp1_1
  6450 00:16AA: 0A           	asl	A
  6451 00:16AB: 0A           	asl	A
  6452 00:16AC: 85 20        	sta	<L184+temp2_1
  6453                        ;
  6454                        ;					k_put_winicon_po
                    int(ICON_DISK,640 - (40 + temp2/2),20,0,PAINTMODE_DEFAULT);
  6455                        	.line	887
  6456 00:16AE: F4 00 00     	pea	#<$0
  6457 00:16B1: F4 00 00     	pea	#<$0
  6458 00:16B4: F4 14 00     	pea	#<$14
  6459 00:16B7: A5 20        	lda	<L184+temp2_1
  6460 00:16B9: A2 02 00     	ldx	#<$2
  6461                        	xref	~~~div
  6462 00:16BC: 22 xx xx xx  	jsl	~~~div
  6463 00:16C0: 85 01        	sta	<R0
  6464 00:16C2: 18           	clc
  6465 00:16C3: A9 28 00     	lda	#$28
  6466 00:16C6: 65 01        	adc	<R0
  6467 00:16C8: 85 05        	sta	<R1
  6468 00:16CA: 38           	sec
  6469 00:16CB: A9 80 02     	lda	#$280
  6470 00:16CE: E5 05        	sbc	<R1
  6471 00:16D0: 48           	pha
  6472 00:16D1: F4 03 00     	pea	#<$3
  6473 00:16D4: 22 xx xx xx  	jsl	~~k_put_winicon_point
  6474                        ;					k_draw_text_poin
                    t(k_to_uppercase(((PDISKINFO)pMsg->pheap)->stgName),640 - (3
  Thu Dec  3 2020 22:25                                                Page 122


                    5 + temp2/2) - (temp2),40,0);
  6475                        	.line	888
  6476 00:16D8: F4 00 00     	pea	#<$0
  6477 00:16DB: F4 28 00     	pea	#<$28
  6478 00:16DE: A5 20        	lda	<L184+temp2_1
  6479 00:16E0: A2 02 00     	ldx	#<$2
  6480                        	xref	~~~div
  6481 00:16E3: 22 xx xx xx  	jsl	~~~div
  6482 00:16E7: 85 01        	sta	<R0
  6483 00:16E9: 18           	clc
  6484 00:16EA: A9 23 00     	lda	#$23
  6485 00:16ED: 65 01        	adc	<R0
  6486 00:16EF: 85 05        	sta	<R1
  6487 00:16F1: 38           	sec
  6488 00:16F2: A9 80 02     	lda	#$280
  6489 00:16F5: E5 05        	sbc	<R1
  6490 00:16F7: 85 01        	sta	<R0
  6491 00:16F9: 38           	sec
  6492 00:16FA: A5 01        	lda	<R0
  6493 00:16FC: E5 20        	sbc	<L184+temp2_1
  6494 00:16FE: 48           	pha
  6495 00:16FF: A0 10 00     	ldy	#$10
  6496 00:1702: B7 34        	lda	[<L183+pMsg_0],Y
  6497 00:1704: 48           	pha
  6498 00:1705: A0 0E 00     	ldy	#$e
  6499 00:1708: B7 34        	lda	[<L183+pMsg_0],Y
  6500 00:170A: 48           	pha
  6501 00:170B: 22 xx xx xx  	jsl	~~k_to_uppercase
  6502 00:170F: 85 01        	sta	<R0
  6503 00:1711: 86 03        	stx	<R0+2
  6504 00:1713: DA           	phx
  6505 00:1714: 48           	pha
  6506 00:1715: 22 xx xx xx  	jsl	~~k_draw_text_point
  6507                        ;
  6508                        ;					if(p->desktopCtl
                    ->currentDiskName!=NULL)
  6509                        	.line	890
  6510                        ;						k_mem_de
                    allocate_heap(p->desktopCtl->currentDiskName);
  6511 00:1719: A0 58 00     	ldy	#$58
  6512 00:171C: B7 11        	lda	[<L184+p_1],Y
  6513 00:171E: 85 01        	sta	<R0
  6514 00:1720: A0 5A 00     	ldy	#$5a
  6515 00:1723: B7 11        	lda	[<L184+p_1],Y
  6516 00:1725: 85 03        	sta	<R0+2
  6517 00:1727: A0 11 00     	ldy	#$11
  6518 00:172A: B7 01        	lda	[<R0],Y
  6519 00:172C: A0 13 00     	ldy	#$13
  6520 00:172F: 17 01        	ora	[<R0],Y
  6521 00:1731: D0 03        	bne	L224
  6522 00:1733: 82 1E 00     	brl	L10146
  6523                        L224:
  6524                        	.line	891
  6525 00:1736: A0 58 00     	ldy	#$58
  6526 00:1739: B7 11        	lda	[<L184+p_1],Y
  6527 00:173B: 85 01        	sta	<R0
  6528 00:173D: A0 5A 00     	ldy	#$5a
  6529 00:1740: B7 11        	lda	[<L184+p_1],Y
  Thu Dec  3 2020 22:25                                                Page 123


  6530 00:1742: 85 03        	sta	<R0+2
  6531 00:1744: A0 13 00     	ldy	#$13
  6532 00:1747: B7 01        	lda	[<R0],Y
  6533 00:1749: 48           	pha
  6534 00:174A: A0 11 00     	ldy	#$11
  6535 00:174D: B7 01        	lda	[<R0],Y
  6536 00:174F: 48           	pha
  6537 00:1750: 22 xx xx xx  	jsl	~~k_mem_deallocate_heap
  6538                        ;
  6539                        ;					p->desktopCtl->c
                    urrentDiskName = k_string_copy_string(((PDISKINFO)pMsg->phea
                    p)->stgName);
  6540                        L10146:
  6541                        	.line	893
  6542 00:1754: A0 58 00     	ldy	#$58
  6543 00:1757: B7 11        	lda	[<L184+p_1],Y
  6544 00:1759: 85 01        	sta	<R0
  6545 00:175B: A0 5A 00     	ldy	#$5a
  6546 00:175E: B7 11        	lda	[<L184+p_1],Y
  6547 00:1760: 85 03        	sta	<R0+2
  6548 00:1762: A0 10 00     	ldy	#$10
  6549 00:1765: B7 34        	lda	[<L183+pMsg_0],Y
  6550 00:1767: 48           	pha
  6551 00:1768: A0 0E 00     	ldy	#$e
  6552 00:176B: B7 34        	lda	[<L183+pMsg_0],Y
  6553 00:176D: 48           	pha
  6554 00:176E: 22 xx xx xx  	jsl	~~k_string_copy_string
  6555 00:1772: 85 05        	sta	<R1
  6556 00:1774: 86 07        	stx	<R1+2
  6557 00:1776: A5 05        	lda	<R1
  6558 00:1778: A0 11 00     	ldy	#$11
  6559 00:177B: 97 01        	sta	[<R0],Y
  6560 00:177D: A5 07        	lda	<R1+2
  6561 00:177F: A0 13 00     	ldy	#$13
  6562 00:1782: 97 01        	sta	[<R0],Y
  6563                        ;
  6564                        ;					pcd = k_mem_allo
                    cate_heap(sizeof(CLICKDETECTED));
  6565                        	.line	895
  6566 00:1784: F4 08 00     	pea	#<$8
  6567 00:1787: 22 xx xx xx  	jsl	~~k_mem_allocate_heap
  6568 00:178B: 85 25        	sta	<L184+pcd_1
  6569 00:178D: 86 27        	stx	<L184+pcd_1+2
  6570                        ;					if(pcd)
  6571                        	.line	896
  6572                        ;					{
  6573 00:178F: A5 25        	lda	<L184+pcd_1
  6574 00:1791: 05 27        	ora	<L184+pcd_1+2
  6575 00:1793: D0 03        	bne	L225
  6576 00:1795: 82 60 00     	brl	L10147
  6577                        L225:
  6578                        	.line	897
  6579                        ;						pcd->win
                    dow  = k_create_ui_window_class(640 - (40 + temp2/2),20,ICON
                    H,ICONW,"disk","icon",NULL);
  6580                        	.line	898
  6581 00:1798: F4 00 00     	pea	#^$0
  6582 00:179B: F4 00 00     	pea	#<$0
  Thu Dec  3 2020 22:25                                                Page 124


  6583 00:179E: F4 xx xx     	pea	#^L182+382
  6584 00:17A1: F4 xx xx     	pea	#<L182+382
  6585 00:17A4: F4 xx xx     	pea	#^L182+377
  6586 00:17A7: F4 xx xx     	pea	#<L182+377
  6587 00:17AA: F4 10 00     	pea	#<$10
  6588 00:17AD: F4 10 00     	pea	#<$10
  6589 00:17B0: F4 14 00     	pea	#<$14
  6590 00:17B3: A5 20        	lda	<L184+temp2_1
  6591 00:17B5: A2 02 00     	ldx	#<$2
  6592                        	xref	~~~div
  6593 00:17B8: 22 xx xx xx  	jsl	~~~div
  6594 00:17BC: 85 01        	sta	<R0
  6595 00:17BE: 18           	clc
  6596 00:17BF: A9 28 00     	lda	#$28
  6597 00:17C2: 65 01        	adc	<R0
  6598 00:17C4: 85 05        	sta	<R1
  6599 00:17C6: 38           	sec
  6600 00:17C7: A9 80 02     	lda	#$280
  6601 00:17CA: E5 05        	sbc	<R1
  6602 00:17CC: 48           	pha
  6603 00:17CD: 22 xx xx xx  	jsl	~~k_create_ui_window_class
  6604 00:17D1: 85 01        	sta	<R0
  6605 00:17D3: 86 03        	stx	<R0+2
  6606 00:17D5: A5 01        	lda	<R0
  6607 00:17D7: 87 25        	sta	[<L184+pcd_1]
  6608 00:17D9: A5 03        	lda	<R0+2
  6609 00:17DB: A0 02 00     	ldy	#$2
  6610 00:17DE: 97 25        	sta	[<L184+pcd_1],Y
  6611                        ;						pcd->han
                    dler = ObjectClicked;
  6612                        	.line	899
  6613 00:17E0: A9 xx xx     	lda	#<~~ObjectClicked
  6614 00:17E3: A0 04 00     	ldy	#$4
  6615 00:17E6: 97 25        	sta	[<L184+pcd_1],Y
  6616 00:17E8: A9 xx xx     	lda	#^~~ObjectClicked
  6617 00:17EB: A0 06 00     	ldy	#$6
  6618 00:17EE: 97 25        	sta	[<L184+pcd_1],Y
  6619                        ;						k_add_wi
                    ndow_hit_node(pcd);
  6620                        	.line	900
  6621 00:17F0: D4 27        	pei	<L184+pcd_1+2
  6622 00:17F2: D4 25        	pei	<L184+pcd_1
  6623 00:17F4: 22 xx xx xx  	jsl	~~k_add_window_hit_node
  6624                        ;					}
  6625                        	.line	901
  6626                        ;
  6627                        ;					k_debug_message(
                    "DefConsoleProc::DISK-INSERT:DISK:",p->desktopCtl->currentDi
                    skName);
  6628                        L10147:
  6629                        	.line	903
  6630 00:17F8: A0 58 00     	ldy	#$58
  6631 00:17FB: B7 11        	lda	[<L184+p_1],Y
  6632 00:17FD: 85 01        	sta	<R0
  6633 00:17FF: A0 5A 00     	ldy	#$5a
  6634 00:1802: B7 11        	lda	[<L184+p_1],Y
  6635 00:1804: 85 03        	sta	<R0+2
  6636 00:1806: A0 13 00     	ldy	#$13
  Thu Dec  3 2020 22:25                                                Page 125


  6637 00:1809: B7 01        	lda	[<R0],Y
  6638 00:180B: 48           	pha
  6639 00:180C: A0 11 00     	ldy	#$11
  6640 00:180F: B7 01        	lda	[<R0],Y
  6641 00:1811: 48           	pha
  6642 00:1812: F4 xx xx     	pea	#^L182+387
  6643 00:1815: F4 xx xx     	pea	#<L182+387
  6644 00:1818: 22 xx xx xx  	jsl	~~k_debug_message
  6645                        ;				}
  6646                        	.line	904
  6647                        L10144:
  6648                        ;			}
  6649                        	.line	905
  6650                        ;			else
  6651 00:181C: 82 34 00     	brl	L10148
  6652                        L10142:
  6653                        ;			{
  6654                        	.line	907
  6655                        ;				if(pMsg && pMsg->pheap)
  6656                        	.line	908
  6657                        ;					k_put_string(0,5
                    1,((PDISKINFO)pMsg->pheap)->stgName,15,0);
  6658 00:181F: A5 34        	lda	<L183+pMsg_0
  6659 00:1821: 05 36        	ora	<L183+pMsg_0+2
  6660 00:1823: D0 03        	bne	L226
  6661 00:1825: 82 2B 00     	brl	L10149
  6662                        L226:
  6663 00:1828: A0 0E 00     	ldy	#$e
  6664 00:182B: B7 34        	lda	[<L183+pMsg_0],Y
  6665 00:182D: A0 10 00     	ldy	#$10
  6666 00:1830: 17 34        	ora	[<L183+pMsg_0],Y
  6667 00:1832: D0 03        	bne	L227
  6668 00:1834: 82 1C 00     	brl	L10149
  6669                        L227:
  6670                        	.line	909
  6671 00:1837: F4 00 00     	pea	#<$0
  6672 00:183A: F4 0F 00     	pea	#<$f
  6673 00:183D: A0 10 00     	ldy	#$10
  6674 00:1840: B7 34        	lda	[<L183+pMsg_0],Y
  6675 00:1842: 48           	pha
  6676 00:1843: A0 0E 00     	ldy	#$e
  6677 00:1846: B7 34        	lda	[<L183+pMsg_0],Y
  6678 00:1848: 48           	pha
  6679 00:1849: F4 33 00     	pea	#<$33
  6680 00:184C: F4 00 00     	pea	#<$0
  6681 00:184F: 22 xx xx xx  	jsl	~~k_put_string
  6682                        ;			}
  6683                        L10149:
  6684                        	.line	910
  6685                        L10148:
  6686                        ;
  6687                        ;			break;
  6688                        	.line	912
  6689 00:1853: 82 5D 07     	brl	L10103
  6690                        ;		case FX_DISK_REMOVE:
  6691                        	.line	913
  6692                        L10150:
  6693                        ;
  Thu Dec  3 2020 22:25                                                Page 126


  6694                        ;			k_debug_string("DefConsoleProc::
                    DISK-REMOVE\r\n");
  6695                        	.line	915
  6696 00:1856: F4 xx xx     	pea	#^L182+421
  6697 00:1859: F4 xx xx     	pea	#<L182+421
  6698 00:185C: 22 xx xx xx  	jsl	~~k_debug_string
  6699                        ;
  6700                        ;			if(p->consoleCtl->desktopMode )
  6701                        	.line	917
  6702                        ;			{
  6703 00:1860: A0 54 00     	ldy	#$54
  6704 00:1863: B7 11        	lda	[<L184+p_1],Y
  6705 00:1865: 85 01        	sta	<R0
  6706 00:1867: A0 56 00     	ldy	#$56
  6707 00:186A: B7 11        	lda	[<L184+p_1],Y
  6708 00:186C: 85 03        	sta	<R0+2
  6709 00:186E: A0 31 00     	ldy	#$31
  6710 00:1871: B7 01        	lda	[<R0],Y
  6711 00:1873: 29 FF 00     	and	#$ff
  6712 00:1876: D0 03        	bne	L228
  6713 00:1878: 82 72 01     	brl	L10151
  6714                        L228:
  6715                        	.line	918
  6716                        ;				if(p->desktopCtl->curren
                    tDiskName)
  6717                        	.line	919
  6718                        ;				{
  6719 00:187B: A0 58 00     	ldy	#$58
  6720 00:187E: B7 11        	lda	[<L184+p_1],Y
  6721 00:1880: 85 01        	sta	<R0
  6722 00:1882: A0 5A 00     	ldy	#$5a
  6723 00:1885: B7 11        	lda	[<L184+p_1],Y
  6724 00:1887: 85 03        	sta	<R0+2
  6725 00:1889: A0 11 00     	ldy	#$11
  6726 00:188C: B7 01        	lda	[<R0],Y
  6727 00:188E: A0 13 00     	ldy	#$13
  6728 00:1891: 17 01        	ora	[<R0],Y
  6729 00:1893: D0 03        	bne	L229
  6730 00:1895: 82 52 01     	brl	L10152
  6731                        L229:
  6732                        	.line	920
  6733                        ;					k_debug_message(
                    "DefConsoleProc::DISK-REMOVE:DISK:",p->desktopCtl->currentDi
                    skName);
  6734                        	.line	921
  6735 00:1898: A0 58 00     	ldy	#$58
  6736 00:189B: B7 11        	lda	[<L184+p_1],Y
  6737 00:189D: 85 01        	sta	<R0
  6738 00:189F: A0 5A 00     	ldy	#$5a
  6739 00:18A2: B7 11        	lda	[<L184+p_1],Y
  6740 00:18A4: 85 03        	sta	<R0+2
  6741 00:18A6: A0 13 00     	ldy	#$13
  6742 00:18A9: B7 01        	lda	[<R0],Y
  6743 00:18AB: 48           	pha
  6744 00:18AC: A0 11 00     	ldy	#$11
  6745 00:18AF: B7 01        	lda	[<R0],Y
  6746 00:18B1: 48           	pha
  6747 00:18B2: F4 xx xx     	pea	#^L182+451
  Thu Dec  3 2020 22:25                                                Page 127


  6748 00:18B5: F4 xx xx     	pea	#<L182+451
  6749 00:18B8: 22 xx xx xx  	jsl	~~k_debug_message
  6750                        ;					k_debug_integer(
                    "DefConsoleProc::DISK-REMOVE:backgroundColor:",p->desktopCtl
                    ->backgroundColor);
  6751                        	.line	922
  6752 00:18BC: A0 58 00     	ldy	#$58
  6753 00:18BF: B7 11        	lda	[<L184+p_1],Y
  6754 00:18C1: 85 01        	sta	<R0
  6755 00:18C3: A0 5A 00     	ldy	#$5a
  6756 00:18C6: B7 11        	lda	[<L184+p_1],Y
  6757 00:18C8: 85 03        	sta	<R0+2
  6758 00:18CA: A0 05 00     	ldy	#$5
  6759 00:18CD: B7 01        	lda	[<R0],Y
  6760 00:18CF: 48           	pha
  6761 00:18D0: F4 xx xx     	pea	#^L182+485
  6762 00:18D3: F4 xx xx     	pea	#<L182+485
  6763 00:18D6: 22 xx xx xx  	jsl	~~k_debug_integer
  6764                        ;
  6765                        ;					temp1 = strlen(p
                    ->desktopCtl->currentDiskName);
  6766                        	.line	924
  6767 00:18DA: A0 58 00     	ldy	#$58
  6768 00:18DD: B7 11        	lda	[<L184+p_1],Y
  6769 00:18DF: 85 01        	sta	<R0
  6770 00:18E1: A0 5A 00     	ldy	#$5a
  6771 00:18E4: B7 11        	lda	[<L184+p_1],Y
  6772 00:18E6: 85 03        	sta	<R0+2
  6773 00:18E8: A0 13 00     	ldy	#$13
  6774 00:18EB: B7 01        	lda	[<R0],Y
  6775 00:18ED: 48           	pha
  6776 00:18EE: A0 11 00     	ldy	#$11
  6777 00:18F1: B7 01        	lda	[<R0],Y
  6778 00:18F3: 48           	pha
  6779 00:18F4: 22 xx xx xx  	jsl	~~strlen
  6780 00:18F8: 85 1E        	sta	<L184+temp1_1
  6781                        ;					temp2 = (temp1*4
                    );
  6782                        	.line	925
  6783 00:18FA: A5 1E        	lda	<L184+temp1_1
  6784 00:18FC: 0A           	asl	A
  6785 00:18FD: 0A           	asl	A
  6786 00:18FE: 85 20        	sta	<L184+temp2_1
  6787                        ;
  6788                        ;					k_put_winicon_po
                    int(ICON_DISK,640 - (40 + temp2/2),20,p->desktopCtl->backgro
                    undColor,PAINTMODE_BACKGROUND);
  6789                        	.line	927
  6790 00:1900: F4 F0 00     	pea	#<$f0
  6791 00:1903: A0 58 00     	ldy	#$58
  6792 00:1906: B7 11        	lda	[<L184+p_1],Y
  6793 00:1908: 85 01        	sta	<R0
  6794 00:190A: A0 5A 00     	ldy	#$5a
  6795 00:190D: B7 11        	lda	[<L184+p_1],Y
  6796 00:190F: 85 03        	sta	<R0+2
  6797 00:1911: A0 05 00     	ldy	#$5
  6798 00:1914: B7 01        	lda	[<R0],Y
  6799 00:1916: 48           	pha
  Thu Dec  3 2020 22:25                                                Page 128


  6800 00:1917: F4 14 00     	pea	#<$14
  6801 00:191A: A5 20        	lda	<L184+temp2_1
  6802 00:191C: A2 02 00     	ldx	#<$2
  6803                        	xref	~~~div
  6804 00:191F: 22 xx xx xx  	jsl	~~~div
  6805 00:1923: 85 01        	sta	<R0
  6806 00:1925: 18           	clc
  6807 00:1926: A9 28 00     	lda	#$28
  6808 00:1929: 65 01        	adc	<R0
  6809 00:192B: 85 05        	sta	<R1
  6810 00:192D: 38           	sec
  6811 00:192E: A9 80 02     	lda	#$280
  6812 00:1931: E5 05        	sbc	<R1
  6813 00:1933: 48           	pha
  6814 00:1934: F4 03 00     	pea	#<$3
  6815 00:1937: 22 xx xx xx  	jsl	~~k_put_winicon_point
  6816                        ;					k_draw_text_poin
                    t(p->desktopCtl->currentDiskName,640 - (35 + temp2/2) - (tem
                    p2),40,p->desktopCtl->backgroundColor);
  6817                        	.line	928
  6818 00:193B: A0 58 00     	ldy	#$58
  6819 00:193E: B7 11        	lda	[<L184+p_1],Y
  6820 00:1940: 85 01        	sta	<R0
  6821 00:1942: A0 5A 00     	ldy	#$5a
  6822 00:1945: B7 11        	lda	[<L184+p_1],Y
  6823 00:1947: 85 03        	sta	<R0+2
  6824 00:1949: A0 05 00     	ldy	#$5
  6825 00:194C: B7 01        	lda	[<R0],Y
  6826 00:194E: 48           	pha
  6827 00:194F: F4 28 00     	pea	#<$28
  6828 00:1952: A5 20        	lda	<L184+temp2_1
  6829 00:1954: A2 02 00     	ldx	#<$2
  6830                        	xref	~~~div
  6831 00:1957: 22 xx xx xx  	jsl	~~~div
  6832 00:195B: 85 05        	sta	<R1
  6833 00:195D: 18           	clc
  6834 00:195E: A9 23 00     	lda	#$23
  6835 00:1961: 65 05        	adc	<R1
  6836 00:1963: 85 09        	sta	<R2
  6837 00:1965: 38           	sec
  6838 00:1966: A9 80 02     	lda	#$280
  6839 00:1969: E5 09        	sbc	<R2
  6840 00:196B: 85 05        	sta	<R1
  6841 00:196D: 38           	sec
  6842 00:196E: A5 05        	lda	<R1
  6843 00:1970: E5 20        	sbc	<L184+temp2_1
  6844 00:1972: 48           	pha
  6845 00:1973: A0 58 00     	ldy	#$58
  6846 00:1976: B7 11        	lda	[<L184+p_1],Y
  6847 00:1978: 85 05        	sta	<R1
  6848 00:197A: A0 5A 00     	ldy	#$5a
  6849 00:197D: B7 11        	lda	[<L184+p_1],Y
  6850 00:197F: 85 07        	sta	<R1+2
  6851 00:1981: A0 13 00     	ldy	#$13
  6852 00:1984: B7 05        	lda	[<R1],Y
  6853 00:1986: 48           	pha
  6854 00:1987: A0 11 00     	ldy	#$11
  6855 00:198A: B7 05        	lda	[<R1],Y
  Thu Dec  3 2020 22:25                                                Page 129


  6856 00:198C: 48           	pha
  6857 00:198D: 22 xx xx xx  	jsl	~~k_draw_text_point
  6858                        ;
  6859                        ;					if(p->desktopCtl
                    ->currentDiskName!=NULL)
  6860                        	.line	930
  6861                        ;						k_mem_de
                    allocate_heap(p->desktopCtl->currentDiskName);
  6862 00:1991: A0 58 00     	ldy	#$58
  6863 00:1994: B7 11        	lda	[<L184+p_1],Y
  6864 00:1996: 85 01        	sta	<R0
  6865 00:1998: A0 5A 00     	ldy	#$5a
  6866 00:199B: B7 11        	lda	[<L184+p_1],Y
  6867 00:199D: 85 03        	sta	<R0+2
  6868 00:199F: A0 11 00     	ldy	#$11
  6869 00:19A2: B7 01        	lda	[<R0],Y
  6870 00:19A4: A0 13 00     	ldy	#$13
  6871 00:19A7: 17 01        	ora	[<R0],Y
  6872 00:19A9: D0 03        	bne	L230
  6873 00:19AB: 82 1E 00     	brl	L10153
  6874                        L230:
  6875                        	.line	931
  6876 00:19AE: A0 58 00     	ldy	#$58
  6877 00:19B1: B7 11        	lda	[<L184+p_1],Y
  6878 00:19B3: 85 01        	sta	<R0
  6879 00:19B5: A0 5A 00     	ldy	#$5a
  6880 00:19B8: B7 11        	lda	[<L184+p_1],Y
  6881 00:19BA: 85 03        	sta	<R0+2
  6882 00:19BC: A0 13 00     	ldy	#$13
  6883 00:19BF: B7 01        	lda	[<R0],Y
  6884 00:19C1: 48           	pha
  6885 00:19C2: A0 11 00     	ldy	#$11
  6886 00:19C5: B7 01        	lda	[<R0],Y
  6887 00:19C7: 48           	pha
  6888 00:19C8: 22 xx xx xx  	jsl	~~k_mem_deallocate_heap
  6889                        ;
  6890                        ;					p->desktopCtl->c
                    urrentDiskName = NULL;
  6891                        L10153:
  6892                        	.line	933
  6893 00:19CC: A0 58 00     	ldy	#$58
  6894 00:19CF: B7 11        	lda	[<L184+p_1],Y
  6895 00:19D1: 85 01        	sta	<R0
  6896 00:19D3: A0 5A 00     	ldy	#$5a
  6897 00:19D6: B7 11        	lda	[<L184+p_1],Y
  6898 00:19D8: 85 03        	sta	<R0+2
  6899 00:19DA: A9 00 00     	lda	#$0
  6900 00:19DD: A0 11 00     	ldy	#$11
  6901 00:19E0: 97 01        	sta	[<R0],Y
  6902 00:19E2: A9 00 00     	lda	#$0
  6903 00:19E5: A0 13 00     	ldy	#$13
  6904 00:19E8: 97 01        	sta	[<R0],Y
  6905                        ;				}
  6906                        	.line	934
  6907                        ;			}
  6908                        L10152:
  6909                        	.line	935
  6910                        ;			else
  Thu Dec  3 2020 22:25                                                Page 130


  6911 00:19EA: 82 16 00     	brl	L10154
  6912                        L10151:
  6913                        ;				k_put_string(0,51,"No Di
                    sk Detected                               ",15,0);
  6914                        	.line	937
  6915 00:19ED: F4 00 00     	pea	#<$0
  6916 00:19F0: F4 0F 00     	pea	#<$f
  6917 00:19F3: F4 xx xx     	pea	#^L182+530
  6918 00:19F6: F4 xx xx     	pea	#<L182+530
  6919 00:19F9: F4 33 00     	pea	#<$33
  6920 00:19FC: F4 00 00     	pea	#<$0
  6921 00:19FF: 22 xx xx xx  	jsl	~~k_put_string
  6922                        L10154:
  6923                        ;
  6924                        ;			break;
  6925                        	.line	939
  6926 00:1A03: 82 AD 05     	brl	L10103
  6927                        ;		case FX_APP_MESSAGE:
  6928                        	.line	940
  6929                        L10155:
  6930                        ;			k_debug_string("DefConsoleProc::
                    FX_APP_MESSAGE\r\n");
  6931                        	.line	941
  6932 00:1A06: F4 xx xx     	pea	#^L182+578
  6933 00:1A09: F4 xx xx     	pea	#<L182+578
  6934 00:1A0C: 22 xx xx xx  	jsl	~~k_debug_string
  6935                        ;			if(pMsg->pheap)
  6936                        	.line	942
  6937                        ;			{
  6938 00:1A10: A0 0E 00     	ldy	#$e
  6939 00:1A13: B7 34        	lda	[<L183+pMsg_0],Y
  6940 00:1A15: A0 10 00     	ldy	#$10
  6941 00:1A18: 17 34        	ora	[<L183+pMsg_0],Y
  6942 00:1A1A: D0 03        	bne	L231
  6943 00:1A1C: 82 7F 00     	brl	L10156
  6944                        L231:
  6945                        	.line	943
  6946                        ;				if(((PCOMMANDARGS)pMsg->
                    pheap)->proc)
  6947                        	.line	944
  6948                        ;				{
  6949 00:1A1F: A0 0E 00     	ldy	#$e
  6950 00:1A22: B7 34        	lda	[<L183+pMsg_0],Y
  6951 00:1A24: 85 01        	sta	<R0
  6952 00:1A26: A0 10 00     	ldy	#$10
  6953 00:1A29: B7 34        	lda	[<L183+pMsg_0],Y
  6954 00:1A2B: 85 03        	sta	<R0+2
  6955 00:1A2D: A7 01        	lda	[<R0]
  6956 00:1A2F: A0 02 00     	ldy	#$2
  6957 00:1A32: 17 01        	ora	[<R0],Y
  6958 00:1A34: D0 03        	bne	L232
  6959 00:1A36: 82 3B 00     	brl	L10157
  6960                        L232:
  6961                        	.line	945
  6962                        ;					((PCOMMANDARGS)p
                    Msg->pheap)->proc(p,((PCOMMANDARGS)pMsg->pheap)->tokens);
  6963                        	.line	946
  6964 00:1A39: A0 0E 00     	ldy	#$e
  Thu Dec  3 2020 22:25                                                Page 131


  6965 00:1A3C: B7 34        	lda	[<L183+pMsg_0],Y
  6966 00:1A3E: 85 01        	sta	<R0
  6967 00:1A40: A0 10 00     	ldy	#$10
  6968 00:1A43: B7 34        	lda	[<L183+pMsg_0],Y
  6969 00:1A45: 85 03        	sta	<R0+2
  6970 00:1A47: A0 06 00     	ldy	#$6
  6971 00:1A4A: B7 01        	lda	[<R0],Y
  6972 00:1A4C: 48           	pha
  6973 00:1A4D: A0 04 00     	ldy	#$4
  6974 00:1A50: B7 01        	lda	[<R0],Y
  6975 00:1A52: 48           	pha
  6976 00:1A53: D4 13        	pei	<L184+p_1+2
  6977 00:1A55: D4 11        	pei	<L184+p_1
  6978 00:1A57: A0 0E 00     	ldy	#$e
  6979 00:1A5A: B7 34        	lda	[<L183+pMsg_0],Y
  6980 00:1A5C: 85 01        	sta	<R0
  6981 00:1A5E: A0 10 00     	ldy	#$10
  6982 00:1A61: B7 34        	lda	[<L183+pMsg_0],Y
  6983 00:1A63: 85 03        	sta	<R0+2
  6984 00:1A65: A0 02 00     	ldy	#$2
  6985 00:1A68: B7 01        	lda	[<R0],Y
  6986 00:1A6A: AA           	tax
  6987 00:1A6B: A7 01        	lda	[<R0]
  6988                        	xref	~~~lcal
  6989 00:1A6D: 22 xx xx xx  	jsl	~~~lcal
  6990                        ;					//((FXCommandHan
                    dler)pMsg->pheap)(p);
  6991                        ;				}
  6992                        	.line	948
  6993                        ;				else
  6994 00:1A71: 82 0A 00     	brl	L10158
  6995                        L10157:
  6996                        ;				{
  6997                        	.line	950
  6998                        ;					k_debug_string("
                    DefConsoleProc::FX_APP_MESSAGE BAD PROC\r\n");
  6999                        	.line	951
  7000 00:1A74: F4 xx xx     	pea	#^L182+611
  7001 00:1A77: F4 xx xx     	pea	#<L182+611
  7002 00:1A7A: 22 xx xx xx  	jsl	~~k_debug_string
  7003                        ;				}
  7004                        	.line	952
  7005                        L10158:
  7006                        ;
  7007                        ;				k_mem_deallocate_heap(pM
                    sg->pheap);
  7008                        	.line	954
  7009 00:1A7E: A0 10 00     	ldy	#$10
  7010 00:1A81: B7 34        	lda	[<L183+pMsg_0],Y
  7011 00:1A83: 48           	pha
  7012 00:1A84: A0 0E 00     	ldy	#$e
  7013 00:1A87: B7 34        	lda	[<L183+pMsg_0],Y
  7014 00:1A89: 48           	pha
  7015 00:1A8A: 22 xx xx xx  	jsl	~~k_mem_deallocate_heap
  7016                        ;				pMsg->pheap = NULL;
  7017                        	.line	955
  7018 00:1A8E: A9 00 00     	lda	#$0
  7019 00:1A91: A0 0E 00     	ldy	#$e
  Thu Dec  3 2020 22:25                                                Page 132


  7020 00:1A94: 97 34        	sta	[<L183+pMsg_0],Y
  7021 00:1A96: A9 00 00     	lda	#$0
  7022 00:1A99: A0 10 00     	ldy	#$10
  7023 00:1A9C: 97 34        	sta	[<L183+pMsg_0],Y
  7024                        ;			}
  7025                        	.line	956
  7026                        ;			k_debug_string("DefConsoleProc::
                    FX_APP_MESSAGE exit\r\n");
  7027                        L10156:
  7028                        	.line	957
  7029 00:1A9E: F4 xx xx     	pea	#^L182+653
  7030 00:1AA1: F4 xx xx     	pea	#<L182+653
  7031 00:1AA4: 22 xx xx xx  	jsl	~~k_debug_string
  7032                        ;			break;
  7033                        	.line	958
  7034 00:1AA8: 82 08 05     	brl	L10103
  7035                        ;		case FX_MOUSE_MOVE:
  7036                        	.line	959
  7037                        L10159:
  7038                        ;			//if(p->consoleCtl->desktopMode 
                    )
  7039                        ;			//	OnMouse(p,pMsg->data[0],
                    MAKEWORD(pMsg->data[1],pMsg->data[2]),MAKEWORD(pMsg->data[3]
                    ,pMsg->data[4]));
  7040                        ;			break;
  7041                        	.line	962
  7042 00:1AAB: 82 05 05     	brl	L10103
  7043                        ;
  7044                        ;		case FX_RBUTTON_DOWN:
  7045                        	.line	964
  7046                        L10160:
  7047                        ;			k_debug_string("DefConsoleProc::
                    FX_RBUTTON_DOWN\r\n");
  7048                        	.line	965
  7049 00:1AAE: F4 xx xx     	pea	#^L182+691
  7050 00:1AB1: F4 xx xx     	pea	#<L182+691
  7051 00:1AB4: 22 xx xx xx  	jsl	~~k_debug_string
  7052                        ;			//k_exec_throw_exception(0xFF000
                    000,1,"Test Exception Mode Messages",-1);
  7053                        ;			break;
  7054                        	.line	967
  7055 00:1AB8: 82 F8 04     	brl	L10103
  7056                        ;
  7057                        ;		case FX_LBUTTON_DOWN:
  7058                        	.line	969
  7059                        L10161:
  7060                        ;			k_debug_string("DefConsoleProc::
                    FX_LBUTTON_DOWN\r\n");
  7061                        	.line	970
  7062 00:1ABB: F4 xx xx     	pea	#^L182+725
  7063 00:1ABE: F4 xx xx     	pea	#<L182+725
  7064 00:1AC1: 22 xx xx xx  	jsl	~~k_debug_string
  7065                        ;
  7066                        ;
  7067                        ;			break;
  7068                        	.line	973
  7069 00:1AC5: 82 EB 04     	brl	L10103
  7070                        ;		case FX_LBUTTON_UP:
  Thu Dec  3 2020 22:25                                                Page 133


  7071                        	.line	974
  7072                        L10162:
  7073                        ;			k_debug_string("DefConsoleProc::
                    FX_LBUTTON_UP\r\n");
  7074                        	.line	975
  7075 00:1AC8: F4 xx xx     	pea	#^L182+759
  7076 00:1ACB: F4 xx xx     	pea	#<L182+759
  7077 00:1ACE: 22 xx xx xx  	jsl	~~k_debug_string
  7078                        ;			break;
  7079                        	.line	976
  7080 00:1AD2: 82 DE 04     	brl	L10103
  7081                        ;		case FX_LBUTTON_DRAG:
  7082                        	.line	977
  7083                        L10163:
  7084                        ;			k_debug_string("DefConsoleProc::
                    FX_LBUTTON_DRAG\r\n");
  7085                        	.line	978
  7086 00:1AD5: F4 xx xx     	pea	#^L182+791
  7087 00:1AD8: F4 xx xx     	pea	#<L182+791
  7088 00:1ADB: 22 xx xx xx  	jsl	~~k_debug_string
  7089                        ;			break;
  7090                        	.line	979
  7091 00:1ADF: 82 D1 04     	brl	L10103
  7092                        ;		case FX_LBUTTON_DBLCLICK:
  7093                        	.line	980
  7094                        L10164:
  7095                        ;			k_debug_string("DefConsoleProc::
                    FX_LBUTTON_DBLCLICK\r\n");
  7096                        	.line	981
  7097 00:1AE2: F4 xx xx     	pea	#^L182+825
  7098 00:1AE5: F4 xx xx     	pea	#<L182+825
  7099 00:1AE8: 22 xx xx xx  	jsl	~~k_debug_string
  7100                        ;			break;
  7101                        	.line	982
  7102 00:1AEC: 82 C4 04     	brl	L10103
  7103                        ;
  7104                        ;		case FX_WINDOW_TOFRONT:
  7105                        	.line	984
  7106                        L10165:
  7107                        ;			k_debug_string("DefConsoleProc::
                    FX_WINDOW_TOFRONT\r\n");
  7108                        	.line	985
  7109 00:1AEF: F4 xx xx     	pea	#^L182+863
  7110 00:1AF2: F4 xx xx     	pea	#<L182+863
  7111 00:1AF5: 22 xx xx xx  	jsl	~~k_debug_string
  7112                        ;
  7113                        ;			k_vdraw_ui_window(NULL,FXWS_OVER
                    LAPPED,25,25,200,300,"Clicked FRONT",15,3);
  7114                        	.line	987
  7115 00:1AF9: F4 03 00     	pea	#<$3
  7116 00:1AFC: F4 0F 00     	pea	#<$f
  7117 00:1AFF: F4 xx xx     	pea	#^L182+899
  7118 00:1B02: F4 xx xx     	pea	#<L182+899
  7119 00:1B05: F4 2C 01     	pea	#<$12c
  7120 00:1B08: F4 C8 00     	pea	#<$c8
  7121 00:1B0B: F4 19 00     	pea	#<$19
  7122 00:1B0E: F4 19 00     	pea	#<$19
  7123 00:1B11: F4 00 00     	pea	#^$0
  Thu Dec  3 2020 22:25                                                Page 134


  7124 00:1B14: F4 00 00     	pea	#<$0
  7125 00:1B17: F4 00 00     	pea	#^$0
  7126 00:1B1A: F4 00 00     	pea	#<$0
  7127 00:1B1D: 22 xx xx xx  	jsl	~~k_vdraw_ui_window
  7128                        ;
  7129                        ;			break;
  7130                        	.line	989
  7131 00:1B21: 82 8F 04     	brl	L10103
  7132                        ;		case FX_WINDOW_TOBACK:
  7133                        	.line	990
  7134                        L10166:
  7135                        ;			k_debug_string("DefConsoleProc::
                    FX_WINDOW_TOBACK\r\n");
  7136                        	.line	991
  7137 00:1B24: F4 xx xx     	pea	#^L182+913
  7138 00:1B27: F4 xx xx     	pea	#<L182+913
  7139 00:1B2A: 22 xx xx xx  	jsl	~~k_debug_string
  7140                        ;
  7141                        ;			k_vdraw_ui_window(NULL,FXWS_OVER
                    LAPPED,250,250,150,200,"Clicked BACK",15,3);
  7142                        	.line	993
  7143 00:1B2E: F4 03 00     	pea	#<$3
  7144 00:1B31: F4 0F 00     	pea	#<$f
  7145 00:1B34: F4 xx xx     	pea	#^L182+948
  7146 00:1B37: F4 xx xx     	pea	#<L182+948
  7147 00:1B3A: F4 C8 00     	pea	#<$c8
  7148 00:1B3D: F4 96 00     	pea	#<$96
  7149 00:1B40: F4 FA 00     	pea	#<$fa
  7150 00:1B43: F4 FA 00     	pea	#<$fa
  7151 00:1B46: F4 00 00     	pea	#^$0
  7152 00:1B49: F4 00 00     	pea	#<$0
  7153 00:1B4C: F4 00 00     	pea	#^$0
  7154 00:1B4F: F4 00 00     	pea	#<$0
  7155 00:1B52: 22 xx xx xx  	jsl	~~k_vdraw_ui_window
  7156                        ;
  7157                        ;			break;
  7158                        	.line	995
  7159 00:1B56: 82 5A 04     	brl	L10103
  7160                        ;		case FX_COM1_DATA:
  7161                        	.line	996
  7162                        L10167:
  7163                        ;			//if(pMsg->data[0]>64)
  7164                        ;			//	k_debug_char("DefConsole
                    Proc::FX_COM1_DATA:",(CHAR)pMsg->data[0]);
  7165                        ;			break;
  7166                        	.line	999
  7167 00:1B59: 82 57 04     	brl	L10103
  7168                        ;		case FX_COM2_DATA:
  7169                        	.line	1000
  7170                        L10168:
  7171                        ;			//k_debug_string("DefConsoleProc
                    ::FX_COM2_DATA\r\n");
  7172                        ;			break;
  7173                        	.line	1002
  7174 00:1B5C: 82 54 04     	brl	L10103
  7175                        ;		case FX_PROCESS:
  7176                        	.line	1003
  7177                        L10169:
  Thu Dec  3 2020 22:25                                                Page 135


  7178                        ;			//k_debug_string("DefConsoleProc
                    ::FX_PROCESS\r\n");
  7179                        ;
  7180                        ;			pctx = (PCONSOLECTX)p->ctx;
  7181                        	.line	1006
  7182 00:1B5F: A0 0A 00     	ldy	#$a
  7183 00:1B62: B7 11        	lda	[<L184+p_1],Y
  7184 00:1B64: 85 15        	sta	<L184+pctx_1
  7185 00:1B66: A0 0C 00     	ldy	#$c
  7186 00:1B69: B7 11        	lda	[<L184+p_1],Y
  7187 00:1B6B: 85 17        	sta	<L184+pctx_1+2
  7188                        ;
  7189                        ;
  7190                        ;			//k_updatespinner(3,40,&consoles
                    pinctx);
  7191                        ;			/*
  7192                        ;			for(i=0;i<100;i++)
  7193                        ;			{
  7194                        ;				asm NOP;
  7195                        ;			}
  7196                        ;			*/
  7197                        ;
  7198                        ;			if(((PFXCOMBUFFER)(pctx->userDat
                    a))->cbBuffer == -1)
  7199                        	.line	1017
  7200                        ;			{
  7201 00:1B6D: A0 83 00     	ldy	#$83
  7202 00:1B70: B7 15        	lda	[<L184+pctx_1],Y
  7203 00:1B72: 85 01        	sta	<R0
  7204 00:1B74: A0 85 00     	ldy	#$85
  7205 00:1B77: B7 15        	lda	[<L184+pctx_1],Y
  7206 00:1B79: 85 03        	sta	<R0+2
  7207 00:1B7B: A0 02 00     	ldy	#$2
  7208 00:1B7E: B7 01        	lda	[<R0],Y
  7209 00:1B80: C9 FF FF     	cmp	#<$ffffffff
  7210 00:1B83: F0 03        	beq	L233
  7211 00:1B85: 82 F2 00     	brl	L10170
  7212                        L233:
  7213                        	.line	1018
  7214                        ;				ptr = strtok(((PFXCOMBUF
                    FER)(pctx->userData))->buffer, "\n");
  7215                        	.line	1019
  7216 00:1B88: F4 xx xx     	pea	#^L182+961
  7217 00:1B8B: F4 xx xx     	pea	#<L182+961
  7218 00:1B8E: 18           	clc
  7219 00:1B8F: A9 04 00     	lda	#$4
  7220 00:1B92: A0 83 00     	ldy	#$83
  7221 00:1B95: 77 15        	adc	[<L184+pctx_1],Y
  7222 00:1B97: 85 01        	sta	<R0
  7223 00:1B99: A9 00 00     	lda	#$0
  7224 00:1B9C: A0 85 00     	ldy	#$85
  7225 00:1B9F: 77 15        	adc	[<L184+pctx_1],Y
  7226 00:1BA1: 85 03        	sta	<R0+2
  7227 00:1BA3: D4 03        	pei	<R0+2
  7228 00:1BA5: D4 01        	pei	<R0
  7229 00:1BA7: 22 xx xx xx  	jsl	~~strtok
  7230 00:1BAB: 85 0D        	sta	<L184+ptr_1
  7231 00:1BAD: 86 0F        	stx	<L184+ptr_1+2
  Thu Dec  3 2020 22:25                                                Page 136


  7232                        ;
  7233                        ;				while( ptr != NULL )
  7234                        	.line	1021
  7235                        L10171:
  7236 00:1BAF: A5 0D        	lda	<L184+ptr_1
  7237 00:1BB1: 05 0F        	ora	<L184+ptr_1+2
  7238 00:1BB3: D0 03        	bne	L234
  7239 00:1BB5: 82 89 00     	brl	L10172
  7240                        L234:
  7241                        ;				{
  7242                        	.line	1022
  7243                        ;					if(*ptr!='%')
  7244                        	.line	1023
  7245                        ;					{
  7246 00:1BB8: E2 20        	sep	#$20
  7247                        	longa	off
  7248 00:1BBA: A7 0D        	lda	[<L184+ptr_1]
  7249 00:1BBC: C9 25        	cmp	#<$25
  7250 00:1BBE: C2 20        	rep	#$20
  7251                        	longa	on
  7252 00:1BC0: D0 03        	bne	L235
  7253 00:1BC2: 82 65 00     	brl	L10173
  7254                        L235:
  7255                        	.line	1024
  7256                        ;						k_put_st
                    ring(p->consoleCtl->curX,p->consoleCtl->curY,ptr,15,0);
  7257                        	.line	1025
  7258 00:1BC5: F4 00 00     	pea	#<$0
  7259 00:1BC8: F4 0F 00     	pea	#<$f
  7260 00:1BCB: D4 0F        	pei	<L184+ptr_1+2
  7261 00:1BCD: D4 0D        	pei	<L184+ptr_1
  7262 00:1BCF: A0 54 00     	ldy	#$54
  7263 00:1BD2: B7 11        	lda	[<L184+p_1],Y
  7264 00:1BD4: 85 01        	sta	<R0
  7265 00:1BD6: A0 56 00     	ldy	#$56
  7266 00:1BD9: B7 11        	lda	[<L184+p_1],Y
  7267 00:1BDB: 85 03        	sta	<R0+2
  7268 00:1BDD: A0 06 00     	ldy	#$6
  7269 00:1BE0: B7 01        	lda	[<R0],Y
  7270 00:1BE2: 48           	pha
  7271 00:1BE3: A0 54 00     	ldy	#$54
  7272 00:1BE6: B7 11        	lda	[<L184+p_1],Y
  7273 00:1BE8: 85 01        	sta	<R0
  7274 00:1BEA: A0 56 00     	ldy	#$56
  7275 00:1BED: B7 11        	lda	[<L184+p_1],Y
  7276 00:1BEF: 85 03        	sta	<R0+2
  7277 00:1BF1: A0 04 00     	ldy	#$4
  7278 00:1BF4: B7 01        	lda	[<R0],Y
  7279 00:1BF6: 48           	pha
  7280 00:1BF7: 22 xx xx xx  	jsl	~~k_put_string
  7281                        ;						p->conso
                    leCtl->curX = 0;
  7282                        	.line	1026
  7283 00:1BFB: A0 54 00     	ldy	#$54
  7284 00:1BFE: B7 11        	lda	[<L184+p_1],Y
  7285 00:1C00: 85 01        	sta	<R0
  7286 00:1C02: A0 56 00     	ldy	#$56
  7287 00:1C05: B7 11        	lda	[<L184+p_1],Y
  Thu Dec  3 2020 22:25                                                Page 137


  7288 00:1C07: 85 03        	sta	<R0+2
  7289 00:1C09: A9 00 00     	lda	#$0
  7290 00:1C0C: A0 04 00     	ldy	#$4
  7291 00:1C0F: 97 01        	sta	[<R0],Y
  7292                        ;						p->conso
                    leCtl->curY++;
  7293                        	.line	1027
  7294 00:1C11: A0 54 00     	ldy	#$54
  7295 00:1C14: B7 11        	lda	[<L184+p_1],Y
  7296 00:1C16: 85 01        	sta	<R0
  7297 00:1C18: A0 56 00     	ldy	#$56
  7298 00:1C1B: B7 11        	lda	[<L184+p_1],Y
  7299 00:1C1D: 85 03        	sta	<R0+2
  7300 00:1C1F: A0 06 00     	ldy	#$6
  7301 00:1C22: B7 01        	lda	[<R0],Y
  7302 00:1C24: 1A           	ina
  7303 00:1C25: A0 06 00     	ldy	#$6
  7304 00:1C28: 97 01        	sta	[<R0],Y
  7305                        ;					}
  7306                        	.line	1028
  7307                        ;					ptr = strtok(NUL
                    L, "\n");
  7308                        L10173:
  7309                        	.line	1029
  7310 00:1C2A: F4 xx xx     	pea	#^L182+963
  7311 00:1C2D: F4 xx xx     	pea	#<L182+963
  7312 00:1C30: F4 00 00     	pea	#^$0
  7313 00:1C33: F4 00 00     	pea	#<$0
  7314 00:1C36: 22 xx xx xx  	jsl	~~strtok
  7315 00:1C3A: 85 0D        	sta	<L184+ptr_1
  7316 00:1C3C: 86 0F        	stx	<L184+ptr_1+2
  7317                        ;				}
  7318                        	.line	1030
  7319 00:1C3E: 82 6E FF     	brl	L10171
  7320                        L10172:
  7321                        ;
  7322                        ;				((PFXCOMBUFFER)(pctx->us
                    erData))->cbBuffer = 0;
  7323                        	.line	1032
  7324 00:1C41: A0 83 00     	ldy	#$83
  7325 00:1C44: B7 15        	lda	[<L184+pctx_1],Y
  7326 00:1C46: 85 01        	sta	<R0
  7327 00:1C48: A0 85 00     	ldy	#$85
  7328 00:1C4B: B7 15        	lda	[<L184+pctx_1],Y
  7329 00:1C4D: 85 03        	sta	<R0+2
  7330 00:1C4F: A9 00 00     	lda	#$0
  7331 00:1C52: A0 02 00     	ldy	#$2
  7332 00:1C55: 97 01        	sta	[<R0],Y
  7333                        ;				memset(((PFXCOMBUFFER)(p
                    ctx->userData))->buffer,0,256);
  7334                        	.line	1033
  7335 00:1C57: F4 00 01     	pea	#<$100
  7336 00:1C5A: F4 00 00     	pea	#<$0
  7337 00:1C5D: 18           	clc
  7338 00:1C5E: A9 04 00     	lda	#$4
  7339 00:1C61: A0 83 00     	ldy	#$83
  7340 00:1C64: 77 15        	adc	[<L184+pctx_1],Y
  7341 00:1C66: 85 01        	sta	<R0
  Thu Dec  3 2020 22:25                                                Page 138


  7342 00:1C68: A9 00 00     	lda	#$0
  7343 00:1C6B: A0 85 00     	ldy	#$85
  7344 00:1C6E: 77 15        	adc	[<L184+pctx_1],Y
  7345 00:1C70: 85 03        	sta	<R0+2
  7346 00:1C72: D4 03        	pei	<R0+2
  7347 00:1C74: D4 01        	pei	<R0
  7348 00:1C76: 22 xx xx xx  	jsl	~~memset
  7349                        ;			}
  7350                        	.line	1034
  7351                        ;
  7352                        ;			//k_debug_integer("DefConsolePro
                    c::FX_PROCESS:COM1 DATA:",serial);
  7353                        ;			while(UART1_BASE[UART_LSR] & 0x0
                    1)
  7354                        L10170:
  7355                        	.line	1037
  7356                        L10174:
  7357 00:1C7A: E2 20        	sep	#$20
  7358                        	longa	off
  7359 00:1C7C: AF FD 13 AF  	lda	>11473917
  7360 00:1C80: 29 01        	and	#<$1
  7361 00:1C82: C2 20        	rep	#$20
  7362                        	longa	on
  7363 00:1C84: D0 03        	bne	L236
  7364 00:1C86: 82 B9 00     	brl	L10175
  7365                        L236:
  7366                        ;			{
  7367                        	.line	1038
  7368                        ;				serial = UART1_BASE[0];
  7369                        	.line	1039
  7370 00:1C89: E2 20        	sep	#$20
  7371                        	longa	off
  7372 00:1C8B: AF F8 13 AF  	lda	>11473912
  7373 00:1C8F: 85 24        	sta	<L184+serial_1
  7374 00:1C91: C2 20        	rep	#$20
  7375                        	longa	on
  7376                        ;
  7377                        ;				//k_debug_long("DefConso
                    leProc::ProcessId:",p->procId);
  7378                        ;				//k_debug_pointer("DefCo
                    nsoleProc::p->ctx:",p->ctx);
  7379                        ;				//k_debug_pointer("DefCo
                    nsoleProc::pctx->userData:",pctx->userData);
  7380                        ;				//k_debug_hex("DefConsol
                    eProc::FX_PROCESS:COM1 DATA:",serial);
  7381                        ;
  7382                        ;				temp3 = ((PFXCOMBUFFER)(
                    pctx->userData))->cbBuffer;
  7383                        	.line	1046
  7384 00:1C93: A0 83 00     	ldy	#$83
  7385 00:1C96: B7 15        	lda	[<L184+pctx_1],Y
  7386 00:1C98: 85 01        	sta	<R0
  7387 00:1C9A: A0 85 00     	ldy	#$85
  7388 00:1C9D: B7 15        	lda	[<L184+pctx_1],Y
  7389 00:1C9F: 85 03        	sta	<R0+2
  7390 00:1CA1: A0 02 00     	ldy	#$2
  7391 00:1CA4: B7 01        	lda	[<R0],Y
  7392 00:1CA6: 85 22        	sta	<L184+temp3_1
  Thu Dec  3 2020 22:25                                                Page 139


  7393                        ;
  7394                        ;				//k_debug_integer("DefCo
                    nsoleProc::FX_PROCESS:COM1-COUNT:",temp3);
  7395                        ;
  7396                        ;				((PFXCOMBUFFER)(pctx->us
                    erData))->buffer[temp3] = (UCHAR)serial;
  7397                        	.line	1050
  7398 00:1CA8: A0 83 00     	ldy	#$83
  7399 00:1CAB: B7 15        	lda	[<L184+pctx_1],Y
  7400 00:1CAD: 85 01        	sta	<R0
  7401 00:1CAF: A0 85 00     	ldy	#$85
  7402 00:1CB2: B7 15        	lda	[<L184+pctx_1],Y
  7403 00:1CB4: 85 03        	sta	<R0+2
  7404 00:1CB6: 18           	clc
  7405 00:1CB7: A9 04 00     	lda	#$4
  7406 00:1CBA: 65 22        	adc	<L184+temp3_1
  7407 00:1CBC: 85 05        	sta	<R1
  7408 00:1CBE: E2 20        	sep	#$20
  7409                        	longa	off
  7410 00:1CC0: A5 24        	lda	<L184+serial_1
  7411 00:1CC2: A4 05        	ldy	<R1
  7412 00:1CC4: 97 01        	sta	[<R0],Y
  7413 00:1CC6: C2 20        	rep	#$20
  7414                        	longa	on
  7415                        ;				((PFXCOMBUFFER)(pctx->us
                    erData))->cbBuffer++;
  7416                        	.line	1051
  7417 00:1CC8: A0 83 00     	ldy	#$83
  7418 00:1CCB: B7 15        	lda	[<L184+pctx_1],Y
  7419 00:1CCD: 85 01        	sta	<R0
  7420 00:1CCF: A0 85 00     	ldy	#$85
  7421 00:1CD2: B7 15        	lda	[<L184+pctx_1],Y
  7422 00:1CD4: 85 03        	sta	<R0+2
  7423 00:1CD6: A0 02 00     	ldy	#$2
  7424 00:1CD9: B7 01        	lda	[<R0],Y
  7425 00:1CDB: 1A           	ina
  7426 00:1CDC: A0 02 00     	ldy	#$2
  7427 00:1CDF: 97 01        	sta	[<R0],Y
  7428                        ;
  7429                        ;				//if(serial == 13)
  7430                        ;				if(((PFXCOMBUFFER)(pctx-
                    >userData))->cbBuffer > 255 || serial == '\n')
  7431                        	.line	1054
  7432                        ;				{
  7433 00:1CE1: A0 83 00     	ldy	#$83
  7434 00:1CE4: B7 15        	lda	[<L184+pctx_1],Y
  7435 00:1CE6: 85 01        	sta	<R0
  7436 00:1CE8: A0 85 00     	ldy	#$85
  7437 00:1CEB: B7 15        	lda	[<L184+pctx_1],Y
  7438 00:1CED: 85 03        	sta	<R0+2
  7439 00:1CEF: A9 FF 00     	lda	#$ff
  7440 00:1CF2: A0 02 00     	ldy	#$2
  7441 00:1CF5: D7 01        	cmp	[<R0],Y
  7442 00:1CF7: B0 03        	bcs	L238
  7443 00:1CF9: 82 0D 00     	brl	L237
  7444                        L238:
  7445 00:1CFC: E2 20        	sep	#$20
  7446                        	longa	off
  Thu Dec  3 2020 22:25                                                Page 140


  7447 00:1CFE: A5 24        	lda	<L184+serial_1
  7448 00:1D00: C9 0A        	cmp	#<$a
  7449 00:1D02: C2 20        	rep	#$20
  7450                        	longa	on
  7451 00:1D04: F0 03        	beq	L239
  7452 00:1D06: 82 36 00     	brl	L10176
  7453                        L239:
  7454                        L237:
  7455                        	.line	1055
  7456                        ;					//k_debug_string
                    s("DefConsoleProc::FX_PROCESS:COM1-BUFFER:",((PFXCOMBUFFER)(
                    pctx->userData))->buffer);
  7457                        ;					k_debug_string((
                    (PFXCOMBUFFER)(pctx->userData))->buffer);
  7458                        	.line	1057
  7459 00:1D09: 18           	clc
  7460 00:1D0A: A9 04 00     	lda	#$4
  7461 00:1D0D: A0 83 00     	ldy	#$83
  7462 00:1D10: 77 15        	adc	[<L184+pctx_1],Y
  7463 00:1D12: 85 01        	sta	<R0
  7464 00:1D14: A9 00 00     	lda	#$0
  7465 00:1D17: A0 85 00     	ldy	#$85
  7466 00:1D1A: 77 15        	adc	[<L184+pctx_1],Y
  7467 00:1D1C: 85 03        	sta	<R0+2
  7468 00:1D1E: D4 03        	pei	<R0+2
  7469 00:1D20: D4 01        	pei	<R0
  7470 00:1D22: 22 xx xx xx  	jsl	~~k_debug_string
  7471                        ;					//k_debug_hex("D
                    efConsoleProc::FX_PROCESS:COM1 DATA:",serial);
  7472                        ;					//k_debug_intege
                    r("DefConsoleProc::FX_PROCESS:COM1-COUNT:",temp3);
  7473                        ;					((PFXCOMBUFFER)(
                    pctx->userData))->cbBuffer = -1;
  7474                        	.line	1060
  7475 00:1D26: A0 83 00     	ldy	#$83
  7476 00:1D29: B7 15        	lda	[<L184+pctx_1],Y
  7477 00:1D2B: 85 01        	sta	<R0
  7478 00:1D2D: A0 85 00     	ldy	#$85
  7479 00:1D30: B7 15        	lda	[<L184+pctx_1],Y
  7480 00:1D32: 85 03        	sta	<R0+2
  7481 00:1D34: A9 FF FF     	lda	#$ffff
  7482 00:1D37: A0 02 00     	ldy	#$2
  7483 00:1D3A: 97 01        	sta	[<R0],Y
  7484                        ;					//memset(((PFXCO
                    MBUFFER)(pctx->userData))->buffer,0,32);
  7485                        ;					break;
  7486                        	.line	1062
  7487 00:1D3C: 82 03 00     	brl	L10175
  7488                        ;				}
  7489                        	.line	1063
  7490                        ;			}
  7491                        L10176:
  7492                        	.line	1064
  7493 00:1D3F: 82 38 FF     	brl	L10174
  7494                        L10175:
  7495                        ;
  7496                        ;			//k_debug_integer("DefConsolePro
                    c::FX_PROCESS:lineBufferIndex:",pctx->lineBufferIndex);
  Thu Dec  3 2020 22:25                                                Page 141


  7497                        ;			break;
  7498                        	.line	1067
  7499 00:1D42: 82 6E 02     	brl	L10103
  7500                        ;		case FX_CONTROL_COMMAND:
  7501                        	.line	1068
  7502                        L10177:
  7503                        ;			k_debug_string("DefConsoleProc::
                    FX_CONTROL_COMMAND\r\n");
  7504                        	.line	1069
  7505 00:1D45: F4 xx xx     	pea	#^L182+965
  7506 00:1D48: F4 xx xx     	pea	#<L182+965
  7507 00:1D4B: 22 xx xx xx  	jsl	~~k_debug_string
  7508                        ;			if( MSGCMDID(pMsg) == CTL_CMD_CA
                    PTION )
  7509                        	.line	1070
  7510                        ;			{
  7511 00:1D4F: A0 16 00     	ldy	#$16
  7512 00:1D52: B7 34        	lda	[<L183+pMsg_0],Y
  7513 00:1D54: C9 01 00     	cmp	#<$1
  7514 00:1D57: F0 03        	beq	L240
  7515 00:1D59: 82 50 01     	brl	L10178
  7516                        L240:
  7517                        	.line	1071
  7518                        ;				captionText = (LPCHAR)MS
                    GCMDPARM1(pMsg);
  7519                        	.line	1072
  7520 00:1D5C: A0 1A 00     	ldy	#$1a
  7521 00:1D5F: B7 34        	lda	[<L183+pMsg_0],Y
  7522 00:1D61: 85 29        	sta	<L184+captionText_1
  7523 00:1D63: A0 1C 00     	ldy	#$1c
  7524 00:1D66: B7 34        	lda	[<L183+pMsg_0],Y
  7525 00:1D68: 85 2B        	sta	<L184+captionText_1+2
  7526                        ;				if(captionText)
  7527                        	.line	1073
  7528                        ;				{
  7529 00:1D6A: A5 29        	lda	<L184+captionText_1
  7530 00:1D6C: 05 2B        	ora	<L184+captionText_1+2
  7531 00:1D6E: D0 03        	bne	L241
  7532 00:1D70: 82 39 01     	brl	L10179
  7533                        L241:
  7534                        	.line	1074
  7535                        ;					k_debug_strings(
                    "DefConsoleProc::CTL_CMD_CAPTION:",captionText);
  7536                        	.line	1075
  7537 00:1D73: D4 2B        	pei	<L184+captionText_1+2
  7538 00:1D75: D4 29        	pei	<L184+captionText_1
  7539 00:1D77: F4 xx xx     	pea	#^L182+1002
  7540 00:1D7A: F4 xx xx     	pea	#<L182+1002
  7541 00:1D7D: 22 xx xx xx  	jsl	~~k_debug_strings
  7542                        ;
  7543                        ;					p->consoleCtl->c
                    urX = 0;
  7544                        	.line	1077
  7545 00:1D81: A0 54 00     	ldy	#$54
  7546 00:1D84: B7 11        	lda	[<L184+p_1],Y
  7547 00:1D86: 85 01        	sta	<R0
  7548 00:1D88: A0 56 00     	ldy	#$56
  7549 00:1D8B: B7 11        	lda	[<L184+p_1],Y
  Thu Dec  3 2020 22:25                                                Page 142


  7550 00:1D8D: 85 03        	sta	<R0+2
  7551 00:1D8F: A9 00 00     	lda	#$0
  7552 00:1D92: A0 04 00     	ldy	#$4
  7553 00:1D95: 97 01        	sta	[<R0],Y
  7554                        ;					//p->consoleCtl-
                    >curY++;
  7555                        ;
  7556                        ;					k_put_string(p->
                    consoleCtl->curX,p->consoleCtl->curY,captionText,15,0);
  7557                        	.line	1080
  7558 00:1D97: F4 00 00     	pea	#<$0
  7559 00:1D9A: F4 0F 00     	pea	#<$f
  7560 00:1D9D: D4 2B        	pei	<L184+captionText_1+2
  7561 00:1D9F: D4 29        	pei	<L184+captionText_1
  7562 00:1DA1: A0 54 00     	ldy	#$54
  7563 00:1DA4: B7 11        	lda	[<L184+p_1],Y
  7564 00:1DA6: 85 01        	sta	<R0
  7565 00:1DA8: A0 56 00     	ldy	#$56
  7566 00:1DAB: B7 11        	lda	[<L184+p_1],Y
  7567 00:1DAD: 85 03        	sta	<R0+2
  7568 00:1DAF: A0 06 00     	ldy	#$6
  7569 00:1DB2: B7 01        	lda	[<R0],Y
  7570 00:1DB4: 48           	pha
  7571 00:1DB5: A0 54 00     	ldy	#$54
  7572 00:1DB8: B7 11        	lda	[<L184+p_1],Y
  7573 00:1DBA: 85 01        	sta	<R0
  7574 00:1DBC: A0 56 00     	ldy	#$56
  7575 00:1DBF: B7 11        	lda	[<L184+p_1],Y
  7576 00:1DC1: 85 03        	sta	<R0+2
  7577 00:1DC3: A0 04 00     	ldy	#$4
  7578 00:1DC6: B7 01        	lda	[<R0],Y
  7579 00:1DC8: 48           	pha
  7580 00:1DC9: 22 xx xx xx  	jsl	~~k_put_string
  7581                        ;
  7582                        ;					i=p->consoleCtl-
                    >curX;
  7583                        	.line	1082
  7584 00:1DCD: A0 54 00     	ldy	#$54
  7585 00:1DD0: B7 11        	lda	[<L184+p_1],Y
  7586 00:1DD2: 85 01        	sta	<R0
  7587 00:1DD4: A0 56 00     	ldy	#$56
  7588 00:1DD7: B7 11        	lda	[<L184+p_1],Y
  7589 00:1DD9: 85 03        	sta	<R0+2
  7590 00:1DDB: A0 04 00     	ldy	#$4
  7591 00:1DDE: B7 01        	lda	[<R0],Y
  7592 00:1DE0: 85 1A        	sta	<L184+i_1
  7593                        ;					ptr = captionTex
                    t;
  7594                        	.line	1083
  7595 00:1DE2: A5 29        	lda	<L184+captionText_1
  7596 00:1DE4: 85 0D        	sta	<L184+ptr_1
  7597 00:1DE6: A5 2B        	lda	<L184+captionText_1+2
  7598 00:1DE8: 85 0F        	sta	<L184+ptr_1+2
  7599                        ;					while(*ptr)
  7600                        	.line	1084
  7601                        L10180:
  7602 00:1DEA: A7 0D        	lda	[<L184+ptr_1]
  7603 00:1DEC: 29 FF 00     	and	#$ff
  Thu Dec  3 2020 22:25                                                Page 143


  7604 00:1DEF: D0 03        	bne	L242
  7605 00:1DF1: 82 3D 00     	brl	L10181
  7606                        L242:
  7607                        ;					{
  7608                        	.line	1085
  7609                        ;						consoleB
                    uffer[p->consoleCtl->curY][i] = *ptr;
  7610                        	.line	1086
  7611 00:1DF4: A5 1A        	lda	<L184+i_1
  7612 00:1DF6: 0A           	asl	A
  7613 00:1DF7: 85 01        	sta	<R0
  7614 00:1DF9: A0 54 00     	ldy	#$54
  7615 00:1DFC: B7 11        	lda	[<L184+p_1],Y
  7616 00:1DFE: 85 05        	sta	<R1
  7617 00:1E00: A0 56 00     	ldy	#$56
  7618 00:1E03: B7 11        	lda	[<L184+p_1],Y
  7619 00:1E05: 85 07        	sta	<R1+2
  7620 00:1E07: A0 06 00     	ldy	#$6
  7621 00:1E0A: B7 05        	lda	[<R1],Y
  7622 00:1E0C: A2 90 00     	ldx	#<$90
  7623                        	xref	~~~mul
  7624 00:1E0F: 22 xx xx xx  	jsl	~~~mul
  7625 00:1E13: 85 05        	sta	<R1
  7626 00:1E15: 18           	clc
  7627 00:1E16: A5 05        	lda	<R1
  7628 00:1E18: 65 01        	adc	<R0
  7629 00:1E1A: 85 09        	sta	<R2
  7630 00:1E1C: A7 0D        	lda	[<L184+ptr_1]
  7631 00:1E1E: 29 FF 00     	and	#$ff
  7632 00:1E21: A6 09        	ldx	<R2
  7633 00:1E23: 9D xx xx     	sta	|~~consoleBuffer,X
  7634                        ;						i++;
  7635                        	.line	1087
  7636 00:1E26: E6 1A        	inc	<L184+i_1
  7637                        ;						ptr++;
  7638                        	.line	1088
  7639 00:1E28: E6 0D        	inc	<L184+ptr_1
  7640 00:1E2A: D0 02        	bne	L243
  7641 00:1E2C: E6 0F        	inc	<L184+ptr_1+2
  7642                        L243:
  7643                        ;					}
  7644                        	.line	1089
  7645 00:1E2E: 82 B9 FF     	brl	L10180
  7646                        L10181:
  7647                        ;
  7648                        ;					p->consoleCtl->c
                    urX = 0;
  7649                        	.line	1091
  7650 00:1E31: A0 54 00     	ldy	#$54
  7651 00:1E34: B7 11        	lda	[<L184+p_1],Y
  7652 00:1E36: 85 01        	sta	<R0
  7653 00:1E38: A0 56 00     	ldy	#$56
  7654 00:1E3B: B7 11        	lda	[<L184+p_1],Y
  7655 00:1E3D: 85 03        	sta	<R0+2
  7656 00:1E3F: A9 00 00     	lda	#$0
  7657 00:1E42: A0 04 00     	ldy	#$4
  7658 00:1E45: 97 01        	sta	[<R0],Y
  7659                        ;					p->consoleCtl->c
  Thu Dec  3 2020 22:25                                                Page 144


                    urY++;
  7660                        	.line	1092
  7661 00:1E47: A0 54 00     	ldy	#$54
  7662 00:1E4A: B7 11        	lda	[<L184+p_1],Y
  7663 00:1E4C: 85 01        	sta	<R0
  7664 00:1E4E: A0 56 00     	ldy	#$56
  7665 00:1E51: B7 11        	lda	[<L184+p_1],Y
  7666 00:1E53: 85 03        	sta	<R0+2
  7667 00:1E55: A0 06 00     	ldy	#$6
  7668 00:1E58: B7 01        	lda	[<R0],Y
  7669 00:1E5A: 1A           	ina
  7670 00:1E5B: A0 06 00     	ldy	#$6
  7671 00:1E5E: 97 01        	sta	[<R0],Y
  7672                        ;
  7673                        ;					k_debug_integer(
                    "DefConsoleProc::curY:",p->consoleCtl->curY);
  7674                        	.line	1094
  7675 00:1E60: A0 54 00     	ldy	#$54
  7676 00:1E63: B7 11        	lda	[<L184+p_1],Y
  7677 00:1E65: 85 01        	sta	<R0
  7678 00:1E67: A0 56 00     	ldy	#$56
  7679 00:1E6A: B7 11        	lda	[<L184+p_1],Y
  7680 00:1E6C: 85 03        	sta	<R0+2
  7681 00:1E6E: A0 06 00     	ldy	#$6
  7682 00:1E71: B7 01        	lda	[<R0],Y
  7683 00:1E73: 48           	pha
  7684 00:1E74: F4 xx xx     	pea	#^L182+1035
  7685 00:1E77: F4 xx xx     	pea	#<L182+1035
  7686 00:1E7A: 22 xx xx xx  	jsl	~~k_debug_integer
  7687                        ;
  7688                        ;					if(p->consoleCtl
                    ->curY > 50)
  7689                        	.line	1096
  7690                        ;					{
  7691 00:1E7E: A0 54 00     	ldy	#$54
  7692 00:1E81: B7 11        	lda	[<L184+p_1],Y
  7693 00:1E83: 85 01        	sta	<R0
  7694 00:1E85: A0 56 00     	ldy	#$56
  7695 00:1E88: B7 11        	lda	[<L184+p_1],Y
  7696 00:1E8A: 85 03        	sta	<R0+2
  7697 00:1E8C: 38           	sec
  7698 00:1E8D: A9 32 00     	lda	#$32
  7699 00:1E90: A0 06 00     	ldy	#$6
  7700 00:1E93: F7 01        	sbc	[<R0],Y
  7701 00:1E95: 70 03        	bvs	L244
  7702 00:1E97: 49 00 80     	eor	#$8000
  7703                        L244:
  7704 00:1E9A: 10 03        	bpl	L245
  7705 00:1E9C: 82 08 00     	brl	L10182
  7706                        L245:
  7707                        	.line	1097
  7708                        ;						k_scroll
                    _screen(p);
  7709                        	.line	1098
  7710 00:1E9F: D4 13        	pei	<L184+p_1+2
  7711 00:1EA1: D4 11        	pei	<L184+p_1
  7712 00:1EA3: 22 xx xx xx  	jsl	~~k_scroll_screen
  7713                        ;					}
  Thu Dec  3 2020 22:25                                                Page 145


  7714                        	.line	1099
  7715                        ;
  7716                        ;					pctx->lineBuffer
                    Index = 0;
  7717                        L10182:
  7718                        	.line	1101
  7719 00:1EA7: A9 00 00     	lda	#$0
  7720 00:1EAA: 87 15        	sta	[<L184+pctx_1]
  7721                        ;				}
  7722                        	.line	1102
  7723                        ;			}
  7724                        L10179:
  7725                        	.line	1103
  7726                        ;			break;
  7727                        L10178:
  7728                        	.line	1104
  7729 00:1EAC: 82 04 01     	brl	L10103
  7730                        ;		case FX_SCROLLBAR_COMMAND:
  7731                        	.line	1105
  7732                        L10183:
  7733                        ;			 if( MSGCMDID(pMsg) == CTL_VERT_
                    SCROLL )
  7734                        	.line	1106
  7735                        ;			{
  7736 00:1EAF: A0 16 00     	ldy	#$16
  7737 00:1EB2: B7 34        	lda	[<L183+pMsg_0],Y
  7738 00:1EB4: C9 01 00     	cmp	#<$1
  7739 00:1EB7: F0 03        	beq	L246
  7740 00:1EB9: 82 2E 00     	brl	L10184
  7741                        L246:
  7742                        	.line	1107
  7743                        ;				captionText = (LPCHAR)MS
                    GCMDPARM1(pMsg);
  7744                        	.line	1108
  7745 00:1EBC: A0 1A 00     	ldy	#$1a
  7746 00:1EBF: B7 34        	lda	[<L183+pMsg_0],Y
  7747 00:1EC1: 85 29        	sta	<L184+captionText_1
  7748 00:1EC3: A0 1C 00     	ldy	#$1c
  7749 00:1EC6: B7 34        	lda	[<L183+pMsg_0],Y
  7750 00:1EC8: 85 2B        	sta	<L184+captionText_1+2
  7751                        ;				if(captionText)
  7752                        	.line	1109
  7753                        ;				{
  7754 00:1ECA: A5 29        	lda	<L184+captionText_1
  7755 00:1ECC: 05 2B        	ora	<L184+captionText_1+2
  7756 00:1ECE: D0 03        	bne	L247
  7757 00:1ED0: 82 17 00     	brl	L10185
  7758                        L247:
  7759                        	.line	1110
  7760                        ;					k_debug_string("
                    DefConsoleProc::CTL_VERT_SCROLL\r\n");
  7761                        	.line	1111
  7762 00:1ED3: F4 xx xx     	pea	#^L182+1057
  7763 00:1ED6: F4 xx xx     	pea	#<L182+1057
  7764 00:1ED9: 22 xx xx xx  	jsl	~~k_debug_string
  7765                        ;
  7766                        ;					/*
  7767                        ;					for(i=0;i<55;i++
  Thu Dec  3 2020 22:25                                                Page 146


                    )
  7768                        ;					{
  7769                        ;						for(j=0;
                    j<72;j++)
  7770                        ;						{
  7771                        ;							
                    consoleBuffer[i][j] = consoleBuffer[i+1][j];
  7772                        ;						}
  7773                        ;					}
  7774                        ;
  7775                        ;					for(i=0;i<56;i++
                    )
  7776                        ;					{
  7777                        ;						for(j=0;
                    j<72;j++)
  7778                        ;						{
  7779                        ;							
                    k_put_char(j,i,consoleBuffer[i][j],15,0);
  7780                        ;						}
  7781                        ;					}
  7782                        ;
  7783                        ;					p->consoleCtl->c
                    urX = 0;
  7784                        ;					p->consoleCtl->c
                    urY--;
  7785                        ;					*/
  7786                        ;					k_scroll_screen(
                    p);
  7787                        	.line	1133
  7788 00:1EDD: D4 13        	pei	<L184+p_1+2
  7789 00:1EDF: D4 11        	pei	<L184+p_1
  7790 00:1EE1: 22 xx xx xx  	jsl	~~k_scroll_screen
  7791                        ;
  7792                        ;					pctx->lineBuffer
                    Index = 0;
  7793                        	.line	1135
  7794 00:1EE5: A9 00 00     	lda	#$0
  7795 00:1EE8: 87 15        	sta	[<L184+pctx_1]
  7796                        ;				}
  7797                        	.line	1136
  7798                        ;			}
  7799                        L10185:
  7800                        	.line	1137
  7801                        ;
  7802                        ;			break;
  7803                        L10184:
  7804                        	.line	1139
  7805 00:1EEA: 82 C6 00     	brl	L10103
  7806                        ;
  7807                        ;		default:
  7808                        	.line	1141
  7809                        L10186:
  7810                        ;			//k_updatespinner(2,40,&consoles
                    pinctx);
  7811                        ;
  7812                        ;			cursorFlashInterval++;
  7813                        	.line	1144
  7814 00:1EED: EE xx xx     	inc	|~~cursorFlashInterval
  Thu Dec  3 2020 22:25                                                Page 147


  7815                        ;
  7816                        ;			if(cursorFlashInterval > 10)
  7817                        	.line	1146
  7818                        ;			{
  7819 00:1EF0: A9 0A 00     	lda	#$a
  7820 00:1EF3: CD xx xx     	cmp	|~~cursorFlashInterval
  7821 00:1EF6: 90 03        	bcc	L248
  7822 00:1EF8: 82 27 00     	brl	L10187
  7823                        L248:
  7824                        	.line	1147
  7825                        ;				if(cursorCurrentColor ==
                     0)
  7826                        	.line	1148
  7827                        ;					cursorCurrentCol
                    or = p->consoleCtl->fgColor;
  7828 00:1EFB: AD xx xx     	lda	|~~cursorCurrentColor
  7829 00:1EFE: F0 03        	beq	L249
  7830 00:1F00: 82 19 00     	brl	L10188
  7831                        L249:
  7832                        	.line	1149
  7833 00:1F03: A0 54 00     	ldy	#$54
  7834 00:1F06: B7 11        	lda	[<L184+p_1],Y
  7835 00:1F08: 85 01        	sta	<R0
  7836 00:1F0A: A0 56 00     	ldy	#$56
  7837 00:1F0D: B7 11        	lda	[<L184+p_1],Y
  7838 00:1F0F: 85 03        	sta	<R0+2
  7839 00:1F11: A0 08 00     	ldy	#$8
  7840 00:1F14: B7 01        	lda	[<R0],Y
  7841 00:1F16: 8D xx xx     	sta	|~~cursorCurrentColor
  7842                        ;				else
  7843 00:1F19: 82 03 00     	brl	L10189
  7844                        L10188:
  7845                        ;					cursorCurrentCol
                    or = 0;
  7846                        	.line	1151
  7847 00:1F1C: 9C xx xx     	stz	|~~cursorCurrentColor
  7848                        L10189:
  7849                        ;
  7850                        ;				cursorFlashInterval = 0;
  7851                        	.line	1153
  7852 00:1F1F: 9C xx xx     	stz	|~~cursorFlashInterval
  7853                        ;			}
  7854                        	.line	1154
  7855                        ;
  7856                        ;			k_put_char(p->consoleCtl->curX,
  7857                        L10187:
  7858                        	.line	1156
  7859                        ;					   p->consoleCtl
                    ->curY,
  7860                        ;					   95,
  7861                        ;					   cursorCurrent
                    Color,0);
  7862 00:1F22: F4 00 00     	pea	#<$0
  7863 00:1F25: AD xx xx     	lda	|~~cursorCurrentColor
  7864 00:1F28: 48           	pha
  7865 00:1F29: F4 5F 00     	pea	#<$5f
  7866 00:1F2C: A0 54 00     	ldy	#$54
  7867 00:1F2F: B7 11        	lda	[<L184+p_1],Y
  Thu Dec  3 2020 22:25                                                Page 148


  7868 00:1F31: 85 01        	sta	<R0
  7869 00:1F33: A0 56 00     	ldy	#$56
  7870 00:1F36: B7 11        	lda	[<L184+p_1],Y
  7871 00:1F38: 85 03        	sta	<R0+2
  7872 00:1F3A: A0 06 00     	ldy	#$6
  7873 00:1F3D: B7 01        	lda	[<R0],Y
  7874 00:1F3F: 48           	pha
  7875 00:1F40: A0 54 00     	ldy	#$54
  7876 00:1F43: B7 11        	lda	[<L184+p_1],Y
  7877 00:1F45: 85 01        	sta	<R0
  7878 00:1F47: A0 56 00     	ldy	#$56
  7879 00:1F4A: B7 11        	lda	[<L184+p_1],Y
  7880 00:1F4C: 85 03        	sta	<R0+2
  7881 00:1F4E: A0 04 00     	ldy	#$4
  7882 00:1F51: B7 01        	lda	[<R0],Y
  7883 00:1F53: 48           	pha
  7884 00:1F54: 22 xx xx xx  	jsl	~~k_put_char
  7885                        ;
  7886                        ;
  7887                        ;			break;
  7888                        	.line	1162
  7889 00:1F58: 82 58 00     	brl	L10103
  7890                        ;		}
  7891                        	.line	1163
  7892                        L10102:
  7893                        	xref	~~~swt
  7894 00:1F5B: 22 xx xx xx  	jsl	~~~swt
  7895 00:1F5F: 14 00        	dw	20
  7896 00:1F61: 03 0F        	dw	3843
  7897 00:1F63: xx xx        	dw	L10159-1
  7898 00:1F65: 04 0F        	dw	3844
  7899 00:1F67: xx xx        	dw	L10161-1
  7900 00:1F69: 05 0F        	dw	3845
  7901 00:1F6B: xx xx        	dw	L10163-1
  7902 00:1F6D: 06 0F        	dw	3846
  7903 00:1F6F: xx xx        	dw	L10162-1
  7904 00:1F71: 07 0F        	dw	3847
  7905 00:1F73: xx xx        	dw	L10164-1
  7906 00:1F75: 08 0F        	dw	3848
  7907 00:1F77: xx xx        	dw	L10160-1
  7908 00:1F79: 10 0F        	dw	3856
  7909 00:1F7B: xx xx        	dw	L10120-1
  7910 00:1F7D: 12 0F        	dw	3858
  7911 00:1F7F: xx xx        	dw	L10117-1
  7912 00:1F81: 20 0F        	dw	3872
  7913 00:1F83: xx xx        	dw	L10139-1
  7914 00:1F85: 22 0F        	dw	3874
  7915 00:1F87: xx xx        	dw	L10150-1
  7916 00:1F89: 30 0F        	dw	3888
  7917 00:1F8B: xx xx        	dw	L10165-1
  7918 00:1F8D: 31 0F        	dw	3889
  7919 00:1F8F: xx xx        	dw	L10166-1
  7920 00:1F91: 00 FA        	dw	64000
  7921 00:1F93: xx xx        	dw	L10177-1
  7922 00:1F95: 02 FA        	dw	64002
  7923 00:1F97: xx xx        	dw	L10183-1
  7924 00:1F99: 00 FC        	dw	64512
  7925 00:1F9B: xx xx        	dw	L10167-1
  Thu Dec  3 2020 22:25                                                Page 149


  7926 00:1F9D: 01 FC        	dw	64513
  7927 00:1F9F: xx xx        	dw	L10168-1
  7928 00:1FA1: 00 FF        	dw	65280
  7929 00:1FA3: xx xx        	dw	L10169-1
  7930 00:1FA5: 01 FF        	dw	65281
  7931 00:1FA7: xx xx        	dw	L10104-1
  7932 00:1FA9: 02 FF        	dw	65282
  7933 00:1FAB: xx xx        	dw	L10116-1
  7934 00:1FAD: F0 FF        	dw	65520
  7935 00:1FAF: xx xx        	dw	L10155-1
  7936 00:1FB1: xx xx        	dw	L10186-1
  7937                        L10103:
  7938                        ;	}
  7939                        	.line	1164
  7940                        ;	//k_debug_string("DefConsoleProc exit\r\n");
  7941                        ;}
  7942                        L10100:
  7943                        	.line	1166
  7944                        L250:
  7945 00:1FB3: A5 32        	lda	<L183+2
  7946 00:1FB5: 85 36        	sta	<L183+2+4
  7947 00:1FB7: A5 31        	lda	<L183+1
  7948 00:1FB9: 85 35        	sta	<L183+1+4
  7949 00:1FBB: 2B           	pld
  7950 00:1FBC: 3B           	tsc
  7951 00:1FBD: 18           	clc
  7952 00:1FBE: 69 34 00     	adc	#L183+4
  7953 00:1FC1: 1B           	tcs
  7954 00:1FC2: 6B           	rtl
  7955                        	.endblock	1166
  7956             00000030   L183	equ	48
  7957             0000000D   L184	equ	13
  7958                        	ends
  7959                        	efunc
  7960                        	.endfunc	1166,13,48
  7961                        	.line	1166
  7962                        	data
  7963                        L182:
  7964 00:03D3: 44 65 66 43  	db	$44,$65,$66,$43,$6F,$6E,$73,$6F,$6C,$65,
                    $50,$72,$6F,$63,$3A
       00:03D7: 6F 6E 73 6F 
       00:03DB: 6C 65 50 72 
       00:03DF: 6F 63 3A 
  7965 00:03E2: 3A 50 72 6F  	db	$3A,$50,$72,$6F,$63,$65,$73,$73,$49,$64,
                    $3A,$00,$6D,$61,$78
       00:03E6: 63 65 73 73 
       00:03EA: 49 64 3A 00 
       00:03EE: 6D 61 78 
  7966 00:03F1: 43 6F 6C 73  	db	$43,$6F,$6C,$73,$3A,$00,$6D,$61,$78,$52,
                    $6F,$77,$73,$3A,$00
       00:03F5: 3A 00 6D 61 
       00:03F9: 78 52 6F 77 
       00:03FD: 73 3A 00 
  7967 00:0400: 44 65 66 43  	db	$44,$65,$66,$43,$6F,$6E,$73,$6F,$6C,$65,
                    $50,$72,$6F,$63,$3A
       00:0404: 6F 6E 73 6F 
       00:0408: 6C 65 50 72 
       00:040C: 6F 63 3A 
  Thu Dec  3 2020 22:25                                                Page 150


  7968 00:040F: 3A 70 63 74  	db	$3A,$70,$63,$74,$78,$3A,$00,$44,$65,$66,
                    $43,$6F,$6E,$73,$6F
       00:0413: 78 3A 00 44 
       00:0417: 65 66 43 6F 
       00:041B: 6E 73 6F 
  7969 00:041E: 6C 65 50 72  	db	$6C,$65,$50,$72,$6F,$63,$3A,$3A,$70,$63,
                    $74,$78,$2D,$3E,$75
       00:0422: 6F 63 3A 3A 
       00:0426: 70 63 74 78 
       00:042A: 2D 3E 75 
  7970 00:042D: 73 65 72 44  	db	$73,$65,$72,$44,$61,$74,$61,$3A,$00,$44,
                    $65,$66,$43,$6F,$6E
       00:0431: 61 74 61 3A 
       00:0435: 00 44 65 66 
       00:0439: 43 6F 6E 
  7971 00:043C: 73 6F 6C 65  	db	$73,$6F,$6C,$65,$50,$72,$6F,$63,$3A,$3A,
                    $50,$72,$6F,$63,$65
       00:0440: 50 72 6F 63 
       00:0444: 3A 3A 50 72 
       00:0448: 6F 63 65 
  7972 00:044B: 73 73 49 64  	db	$73,$73,$49,$64,$3A,$00,$44,$65,$66,$43,
                    $6F,$6E,$73,$6F,$6C
       00:044F: 3A 00 44 65 
       00:0453: 66 43 6F 6E 
       00:0457: 73 6F 6C 
  7973 00:045A: 65 50 72 6F  	db	$65,$50,$72,$6F,$63,$3A,$3A,$46,$58,$5F,
                    $50,$52,$4F,$43,$45
       00:045E: 63 3A 3A 46 
       00:0462: 58 5F 50 52 
       00:0466: 4F 43 45 
  7974 00:0469: 53 53 3A 43  	db	$53,$53,$3A,$43,$4F,$4D,$31,$2D,$43,$4F,
                    $55,$4E,$54,$3A,$00
       00:046D: 4F 4D 31 2D 
       00:0471: 43 4F 55 4E 
       00:0475: 54 3A 00 
  7975 00:0478: 44 65 66 43  	db	$44,$65,$66,$43,$6F,$6E,$73,$6F,$6C,$65,
                    $50,$72,$6F,$63,$3A
       00:047C: 6F 6E 73 6F 
       00:0480: 6C 65 50 72 
       00:0484: 6F 63 3A 
  7976 00:0487: 3A 49 6E 69  	db	$3A,$49,$6E,$69,$74,$69,$61,$6C,$2D,$6C,
                    $69,$6E,$65,$42,$75
       00:048B: 74 69 61 6C 
       00:048F: 2D 6C 69 6E 
       00:0493: 65 42 75 
  7977 00:0496: 66 66 65 72  	db	$66,$66,$65,$72,$49,$6E,$64,$65,$78,$3A,
                    $00,$44,$65,$66,$43
       00:049A: 49 6E 64 65 
       00:049E: 78 3A 00 44 
       00:04A2: 65 66 43 
  7978 00:04A5: 6F 6E 73 6F  	db	$6F,$6E,$73,$6F,$6C,$65,$50,$72,$6F,$63,
                    $3A,$3A,$46,$58,$5F
       00:04A9: 6C 65 50 72 
       00:04AD: 6F 63 3A 3A 
       00:04B1: 46 58 5F 
  7979 00:04B4: 49 4E 49 54  	db	$49,$4E,$49,$54,$5F,$4D,$45,$53,$53,$41,
                    $47,$45,$0D,$0A,$00
       00:04B8: 5F 4D 45 53 
  Thu Dec  3 2020 22:25                                                Page 151


       00:04BC: 53 41 47 45 
       00:04C0: 0D 0A 00 
  7980 00:04C3: 44 65 66 43  	db	$44,$65,$66,$43,$6F,$6E,$73,$6F,$6C,$65,
                    $50,$72,$6F,$63,$3A
       00:04C7: 6F 6E 73 6F 
       00:04CB: 6C 65 50 72 
       00:04CF: 6F 63 3A 
  7981 00:04D2: 3A 6C 69 6E  	db	$3A,$6C,$69,$6E,$65,$42,$75,$66,$66,$65,
                    $72,$49,$6E,$64,$65
       00:04D6: 65 42 75 66 
       00:04DA: 66 65 72 49 
       00:04DE: 6E 64 65 
  7982 00:04E1: 78 41 3A 00  	db	$78,$41,$3A,$00,$6C,$69,$6E,$65,$42,$75,
                    $66,$66,$65,$72,$49
       00:04E5: 6C 69 6E 65 
       00:04E9: 42 75 66 66 
       00:04ED: 65 72 49 
  7983 00:04F0: 6E 64 65 78  	db	$6E,$64,$65,$78,$20,$74,$6F,$6F,$20,$6C,
                    $61,$72,$67,$65,$00
       00:04F4: 20 74 6F 6F 
       00:04F8: 20 6C 61 72 
       00:04FC: 67 65 00 
  7984 00:04FF: 44 65 66 43  	db	$44,$65,$66,$43,$6F,$6E,$73,$6F,$6C,$65,
                    $50,$72,$6F,$63,$3A
       00:0503: 6F 6E 73 6F 
       00:0507: 6C 65 50 72 
       00:050B: 6F 63 3A 
  7985 00:050E: 3A 44 49 53  	db	$3A,$44,$49,$53,$4B,$2D,$49,$4E,$53,$45,
                    $52,$54,$3A,$00,$4E
       00:0512: 4B 2D 49 4E 
       00:0516: 53 45 52 54 
       00:051A: 3A 00 4E 
  7986 00:051D: 55 4C 4C 00  	db	$55,$4C,$4C,$00,$0D,$0A,$00,$44,$65,$66,
                    $43,$6F,$6E,$73,$6F
       00:0521: 0D 0A 00 44 
       00:0525: 65 66 43 6F 
       00:0529: 6E 73 6F 
  7987 00:052C: 6C 65 50 72  	db	$6C,$65,$50,$72,$6F,$63,$3A,$3A,$44,$49,
                    $53,$4B,$2D,$49,$4E
       00:0530: 6F 63 3A 3A 
       00:0534: 44 49 53 4B 
       00:0538: 2D 49 4E 
  7988 00:053B: 53 45 52 54  	db	$53,$45,$52,$54,$3A,$4E,$4F,$2D,$43,$48,
                    $41,$4E,$47,$45,$0D
       00:053F: 3A 4E 4F 2D 
       00:0543: 43 48 41 4E 
       00:0547: 47 45 0D 
  7989 00:054A: 0A 00 64 69  	db	$0A,$00,$64,$69,$73,$6B,$00,$69,$63,$6F,
                    $6E,$00,$44,$65,$66
       00:054E: 73 6B 00 69 
       00:0552: 63 6F 6E 00 
       00:0556: 44 65 66 
  7990 00:0559: 43 6F 6E 73  	db	$43,$6F,$6E,$73,$6F,$6C,$65,$50,$72,$6F,
                    $63,$3A,$3A,$44,$49
       00:055D: 6F 6C 65 50 
       00:0561: 72 6F 63 3A 
       00:0565: 3A 44 49 
  7991 00:0568: 53 4B 2D 49  	db	$53,$4B,$2D,$49,$4E,$53,$45,$52,$54,$3A,
  Thu Dec  3 2020 22:25                                                Page 152


                    $44,$49,$53,$4B,$3A
       00:056C: 4E 53 45 52 
       00:0570: 54 3A 44 49 
       00:0574: 53 4B 3A 
  7992 00:0577: 00 44 65 66  	db	$00,$44,$65,$66,$43,$6F,$6E,$73,$6F,$6C,
                    $65,$50,$72,$6F,$63
       00:057B: 43 6F 6E 73 
       00:057F: 6F 6C 65 50 
       00:0583: 72 6F 63 
  7993 00:0586: 3A 3A 44 49  	db	$3A,$3A,$44,$49,$53,$4B,$2D,$52,$45,$4D,
                    $4F,$56,$45,$0D,$0A
       00:058A: 53 4B 2D 52 
       00:058E: 45 4D 4F 56 
       00:0592: 45 0D 0A 
  7994 00:0595: 00 44 65 66  	db	$00,$44,$65,$66,$43,$6F,$6E,$73,$6F,$6C,
                    $65,$50,$72,$6F,$63
       00:0599: 43 6F 6E 73 
       00:059D: 6F 6C 65 50 
       00:05A1: 72 6F 63 
  7995 00:05A4: 3A 3A 44 49  	db	$3A,$3A,$44,$49,$53,$4B,$2D,$52,$45,$4D,
                    $4F,$56,$45,$3A,$44
       00:05A8: 53 4B 2D 52 
       00:05AC: 45 4D 4F 56 
       00:05B0: 45 3A 44 
  7996 00:05B3: 49 53 4B 3A  	db	$49,$53,$4B,$3A,$00,$44,$65,$66,$43,$6F,
                    $6E,$73,$6F,$6C,$65
       00:05B7: 00 44 65 66 
       00:05BB: 43 6F 6E 73 
       00:05BF: 6F 6C 65 
  7997 00:05C2: 50 72 6F 63  	db	$50,$72,$6F,$63,$3A,$3A,$44,$49,$53,$4B,
                    $2D,$52,$45,$4D,$4F
       00:05C6: 3A 3A 44 49 
       00:05CA: 53 4B 2D 52 
       00:05CE: 45 4D 4F 
  7998 00:05D1: 56 45 3A 62  	db	$56,$45,$3A,$62,$61,$63,$6B,$67,$72,$6F,
                    $75,$6E,$64,$43,$6F
       00:05D5: 61 63 6B 67 
       00:05D9: 72 6F 75 6E 
       00:05DD: 64 43 6F 
  7999 00:05E0: 6C 6F 72 3A  	db	$6C,$6F,$72,$3A,$00,$4E,$6F,$20,$44,$69,
                    $73,$6B,$20,$44,$65
       00:05E4: 00 4E 6F 20 
       00:05E8: 44 69 73 6B 
       00:05EC: 20 44 65 
  8000 00:05EF: 74 65 63 74  	db	$74,$65,$63,$74,$65,$64,$20,$20,$20,$20,
                    $20,$20,$20,$20,$20
       00:05F3: 65 64 20 20 
       00:05F7: 20 20 20 20 
       00:05FB: 20 20 20 
  8001 00:05FE: 20 20 20 20  	db	$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,
                    $20,$20,$20,$20,$20
       00:0602: 20 20 20 20 
       00:0606: 20 20 20 20 
       00:060A: 20 20 20 
  8002 00:060D: 20 20 20 20  	db	$20,$20,$20,$20,$20,$20,$20,$00,$44,$65,
                    $66,$43,$6F,$6E,$73
       00:0611: 20 20 20 00 
       00:0615: 44 65 66 43 
  Thu Dec  3 2020 22:25                                                Page 153


       00:0619: 6F 6E 73 
  8003 00:061C: 6F 6C 65 50  	db	$6F,$6C,$65,$50,$72,$6F,$63,$3A,$3A,$46,
                    $58,$5F,$41,$50,$50
       00:0620: 72 6F 63 3A 
       00:0624: 3A 46 58 5F 
       00:0628: 41 50 50 
  8004 00:062B: 5F 4D 45 53  	db	$5F,$4D,$45,$53,$53,$41,$47,$45,$0D,$0A,
                    $00,$44,$65,$66,$43
       00:062F: 53 41 47 45 
       00:0633: 0D 0A 00 44 
       00:0637: 65 66 43 
  8005 00:063A: 6F 6E 73 6F  	db	$6F,$6E,$73,$6F,$6C,$65,$50,$72,$6F,$63,
                    $3A,$3A,$46,$58,$5F
       00:063E: 6C 65 50 72 
       00:0642: 6F 63 3A 3A 
       00:0646: 46 58 5F 
  8006 00:0649: 41 50 50 5F  	db	$41,$50,$50,$5F,$4D,$45,$53,$53,$41,$47,
                    $45,$20,$42,$41,$44
       00:064D: 4D 45 53 53 
       00:0651: 41 47 45 20 
       00:0655: 42 41 44 
  8007 00:0658: 20 50 52 4F  	db	$20,$50,$52,$4F,$43,$0D,$0A,$00,$44,$65,
                    $66,$43,$6F,$6E,$73
       00:065C: 43 0D 0A 00 
       00:0660: 44 65 66 43 
       00:0664: 6F 6E 73 
  8008 00:0667: 6F 6C 65 50  	db	$6F,$6C,$65,$50,$72,$6F,$63,$3A,$3A,$46,
                    $58,$5F,$41,$50,$50
       00:066B: 72 6F 63 3A 
       00:066F: 3A 46 58 5F 
       00:0673: 41 50 50 
  8009 00:0676: 5F 4D 45 53  	db	$5F,$4D,$45,$53,$53,$41,$47,$45,$20,$65,
                    $78,$69,$74,$0D,$0A
       00:067A: 53 41 47 45 
       00:067E: 20 65 78 69 
       00:0682: 74 0D 0A 
  8010 00:0685: 00 44 65 66  	db	$00,$44,$65,$66,$43,$6F,$6E,$73,$6F,$6C,
                    $65,$50,$72,$6F,$63
       00:0689: 43 6F 6E 73 
       00:068D: 6F 6C 65 50 
       00:0691: 72 6F 63 
  8011 00:0694: 3A 3A 46 58  	db	$3A,$3A,$46,$58,$5F,$52,$42,$55,$54,$54,
                    $4F,$4E,$5F,$44,$4F
       00:0698: 5F 52 42 55 
       00:069C: 54 54 4F 4E 
       00:06A0: 5F 44 4F 
  8012 00:06A3: 57 4E 0D 0A  	db	$57,$4E,$0D,$0A,$00,$44,$65,$66,$43,$6F,
                    $6E,$73,$6F,$6C,$65
       00:06A7: 00 44 65 66 
       00:06AB: 43 6F 6E 73 
       00:06AF: 6F 6C 65 
  8013 00:06B2: 50 72 6F 63  	db	$50,$72,$6F,$63,$3A,$3A,$46,$58,$5F,$4C,
                    $42,$55,$54,$54,$4F
       00:06B6: 3A 3A 46 58 
       00:06BA: 5F 4C 42 55 
       00:06BE: 54 54 4F 
  8014 00:06C1: 4E 5F 44 4F  	db	$4E,$5F,$44,$4F,$57,$4E,$0D,$0A,$00,$44,
                    $65,$66,$43,$6F,$6E
  Thu Dec  3 2020 22:25                                                Page 154


       00:06C5: 57 4E 0D 0A 
       00:06C9: 00 44 65 66 
       00:06CD: 43 6F 6E 
  8015 00:06D0: 73 6F 6C 65  	db	$73,$6F,$6C,$65,$50,$72,$6F,$63,$3A,$3A,
                    $46,$58,$5F,$4C,$42
       00:06D4: 50 72 6F 63 
       00:06D8: 3A 3A 46 58 
       00:06DC: 5F 4C 42 
  8016 00:06DF: 55 54 54 4F  	db	$55,$54,$54,$4F,$4E,$5F,$55,$50,$0D,$0A,
                    $00,$44,$65,$66,$43
       00:06E3: 4E 5F 55 50 
       00:06E7: 0D 0A 00 44 
       00:06EB: 65 66 43 
  8017 00:06EE: 6F 6E 73 6F  	db	$6F,$6E,$73,$6F,$6C,$65,$50,$72,$6F,$63,
                    $3A,$3A,$46,$58,$5F
       00:06F2: 6C 65 50 72 
       00:06F6: 6F 63 3A 3A 
       00:06FA: 46 58 5F 
  8018 00:06FD: 4C 42 55 54  	db	$4C,$42,$55,$54,$54,$4F,$4E,$5F,$44,$52,
                    $41,$47,$0D,$0A,$00
       00:0701: 54 4F 4E 5F 
       00:0705: 44 52 41 47 
       00:0709: 0D 0A 00 
  8019 00:070C: 44 65 66 43  	db	$44,$65,$66,$43,$6F,$6E,$73,$6F,$6C,$65,
                    $50,$72,$6F,$63,$3A
       00:0710: 6F 6E 73 6F 
       00:0714: 6C 65 50 72 
       00:0718: 6F 63 3A 
  8020 00:071B: 3A 46 58 5F  	db	$3A,$46,$58,$5F,$4C,$42,$55,$54,$54,$4F,
                    $4E,$5F,$44,$42,$4C
       00:071F: 4C 42 55 54 
       00:0723: 54 4F 4E 5F 
       00:0727: 44 42 4C 
  8021 00:072A: 43 4C 49 43  	db	$43,$4C,$49,$43,$4B,$0D,$0A,$00,$44,$65,
                    $66,$43,$6F,$6E,$73
       00:072E: 4B 0D 0A 00 
       00:0732: 44 65 66 43 
       00:0736: 6F 6E 73 
  8022 00:0739: 6F 6C 65 50  	db	$6F,$6C,$65,$50,$72,$6F,$63,$3A,$3A,$46,
                    $58,$5F,$57,$49,$4E
       00:073D: 72 6F 63 3A 
       00:0741: 3A 46 58 5F 
       00:0745: 57 49 4E 
  8023 00:0748: 44 4F 57 5F  	db	$44,$4F,$57,$5F,$54,$4F,$46,$52,$4F,$4E,
                    $54,$0D,$0A,$00,$43
       00:074C: 54 4F 46 52 
       00:0750: 4F 4E 54 0D 
       00:0754: 0A 00 43 
  8024 00:0757: 6C 69 63 6B  	db	$6C,$69,$63,$6B,$65,$64,$20,$46,$52,$4F,
                    $4E,$54,$00,$44,$65
       00:075B: 65 64 20 46 
       00:075F: 52 4F 4E 54 
       00:0763: 00 44 65 
  8025 00:0766: 66 43 6F 6E  	db	$66,$43,$6F,$6E,$73,$6F,$6C,$65,$50,$72,
                    $6F,$63,$3A,$3A,$46
       00:076A: 73 6F 6C 65 
       00:076E: 50 72 6F 63 
       00:0772: 3A 3A 46 
  Thu Dec  3 2020 22:25                                                Page 155


  8026 00:0775: 58 5F 57 49  	db	$58,$5F,$57,$49,$4E,$44,$4F,$57,$5F,$54,
                    $4F,$42,$41,$43,$4B
       00:0779: 4E 44 4F 57 
       00:077D: 5F 54 4F 42 
       00:0781: 41 43 4B 
  8027 00:0784: 0D 0A 00 43  	db	$0D,$0A,$00,$43,$6C,$69,$63,$6B,$65,$64,
                    $20,$42,$41,$43,$4B
       00:0788: 6C 69 63 6B 
       00:078C: 65 64 20 42 
       00:0790: 41 43 4B 
  8028 00:0793: 00 0A 00 0A  	db	$00,$0A,$00,$0A,$00,$44,$65,$66,$43,$6F,
                    $6E,$73,$6F,$6C,$65
       00:0797: 00 44 65 66 
       00:079B: 43 6F 6E 73 
       00:079F: 6F 6C 65 
  8029 00:07A2: 50 72 6F 63  	db	$50,$72,$6F,$63,$3A,$3A,$46,$58,$5F,$43,
                    $4F,$4E,$54,$52,$4F
       00:07A6: 3A 3A 46 58 
       00:07AA: 5F 43 4F 4E 
       00:07AE: 54 52 4F 
  8030 00:07B1: 4C 5F 43 4F  	db	$4C,$5F,$43,$4F,$4D,$4D,$41,$4E,$44,$0D,
                    $0A,$00,$44,$65,$66
       00:07B5: 4D 4D 41 4E 
       00:07B9: 44 0D 0A 00 
       00:07BD: 44 65 66 
  8031 00:07C0: 43 6F 6E 73  	db	$43,$6F,$6E,$73,$6F,$6C,$65,$50,$72,$6F,
                    $63,$3A,$3A,$43,$54
       00:07C4: 6F 6C 65 50 
       00:07C8: 72 6F 63 3A 
       00:07CC: 3A 43 54 
  8032 00:07CF: 4C 5F 43 4D  	db	$4C,$5F,$43,$4D,$44,$5F,$43,$41,$50,$54,
                    $49,$4F,$4E,$3A,$00
       00:07D3: 44 5F 43 41 
       00:07D7: 50 54 49 4F 
       00:07DB: 4E 3A 00 
  8033 00:07DE: 44 65 66 43  	db	$44,$65,$66,$43,$6F,$6E,$73,$6F,$6C,$65,
                    $50,$72,$6F,$63,$3A
       00:07E2: 6F 6E 73 6F 
       00:07E6: 6C 65 50 72 
       00:07EA: 6F 63 3A 
  8034 00:07ED: 3A 63 75 72  	db	$3A,$63,$75,$72,$59,$3A,$00,$44,$65,$66,
                    $43,$6F,$6E,$73,$6F
       00:07F1: 59 3A 00 44 
       00:07F5: 65 66 43 6F 
       00:07F9: 6E 73 6F 
  8035 00:07FC: 6C 65 50 72  	db	$6C,$65,$50,$72,$6F,$63,$3A,$3A,$43,$54,
                    $4C,$5F,$56,$45,$52
       00:0800: 6F 63 3A 3A 
       00:0804: 43 54 4C 5F 
       00:0808: 56 45 52 
  8036 00:080B: 54 5F 53 43  	db	$54,$5F,$53,$43,$52,$4F,$4C,$4C,$0D,$0A,
                    $00
       00:080F: 52 4F 4C 4C 
       00:0813: 0D 0A 00 
  8037 00:0816:              	ends
  8038                        ;
  8039                        ;void ObjectClicked(PWINDOW console)
  8040                        ;{
  Thu Dec  3 2020 22:25                                                Page 156


  8041                        	.line	1168
  8042                        	.line	1169
  8043                        	code
  8044                        	xdef	~~ObjectClicked
  8045                        	func
  8046                        	.function	1169
  8047                        ~~ObjectClicked:
  8048                        	longa	on
  8049                        	longi	on
  8050 00:1FC3: 3B           	tsc
  8051 00:1FC4: 38           	sec
  8052 00:1FC5: E9 10 00     	sbc	#L252
  8053 00:1FC8: 1B           	tcs
  8054 00:1FC9: 0B           	phd
  8055 00:1FCA: 5B           	tcd
  8056             00000004   console_0	set	4
  8057                        	.block	1169
  8058                        ;	int temp1 = 0;
  8059                        ;	int temp2 = 0;
  8060                        ;	PFXPROCESS p = k_exec_get_current_process();
  8061                        ;
  8062                        ;	k_debug_string("ObjectClicked!!\r\n");
  8063             00000000   temp1_1	set	0
  8064             00000002   temp2_1	set	2
  8065             00000004   p_1	set	4
  8066                        	.sym	temp1,0,5,1,16
  8067                        	.sym	temp2,2,5,1,16
  8068                        	.sym	p,4,138,1,32,20
  8069                        	.sym	console,4,138,6,32,30
  8070 00:1FCB: 64 09        	stz	<L253+temp1_1
  8071 00:1FCD: 64 0B        	stz	<L253+temp2_1
  8072 00:1FCF: 22 xx xx xx  	jsl	~~k_exec_get_current_process
  8073 00:1FD3: 85 0D        	sta	<L253+p_1
  8074 00:1FD5: 86 0F        	stx	<L253+p_1+2
  8075                        	.line	1174
  8076 00:1FD7: F4 xx xx     	pea	#^L251
  8077 00:1FDA: F4 xx xx     	pea	#<L251
  8078 00:1FDD: 22 xx xx xx  	jsl	~~k_debug_string
  8079                        ;	if(p->desktopCtl->currentDiskName)
  8080                        	.line	1175
  8081                        ;	{
  8082 00:1FE1: A0 58 00     	ldy	#$58
  8083 00:1FE4: B7 0D        	lda	[<L253+p_1],Y
  8084 00:1FE6: 85 01        	sta	<R0
  8085 00:1FE8: A0 5A 00     	ldy	#$5a
  8086 00:1FEB: B7 0D        	lda	[<L253+p_1],Y
  8087 00:1FED: 85 03        	sta	<R0+2
  8088 00:1FEF: A0 11 00     	ldy	#$11
  8089 00:1FF2: B7 01        	lda	[<R0],Y
  8090 00:1FF4: A0 13 00     	ldy	#$13
  8091 00:1FF7: 17 01        	ora	[<R0],Y
  8092 00:1FF9: D0 03        	bne	L255
  8093 00:1FFB: 82 9F 00     	brl	L10190
  8094                        L255:
  8095                        	.line	1176
  8096                        ;		temp1 = strlen(p->desktopCtl->currentDis
                    kName);
  8097                        	.line	1177
  Thu Dec  3 2020 22:25                                                Page 157


  8098 00:1FFE: A0 58 00     	ldy	#$58
  8099 00:2001: B7 0D        	lda	[<L253+p_1],Y
  8100 00:2003: 85 01        	sta	<R0
  8101 00:2005: A0 5A 00     	ldy	#$5a
  8102 00:2008: B7 0D        	lda	[<L253+p_1],Y
  8103 00:200A: 85 03        	sta	<R0+2
  8104 00:200C: A0 13 00     	ldy	#$13
  8105 00:200F: B7 01        	lda	[<R0],Y
  8106 00:2011: 48           	pha
  8107 00:2012: A0 11 00     	ldy	#$11
  8108 00:2015: B7 01        	lda	[<R0],Y
  8109 00:2017: 48           	pha
  8110 00:2018: 22 xx xx xx  	jsl	~~strlen
  8111 00:201C: 85 09        	sta	<L253+temp1_1
  8112                        ;		temp2 = (temp1*4);
  8113                        	.line	1178
  8114 00:201E: A5 09        	lda	<L253+temp1_1
  8115 00:2020: 0A           	asl	A
  8116 00:2021: 0A           	asl	A
  8117 00:2022: 85 0B        	sta	<L253+temp2_1
  8118                        ;		k_put_winicon_point(ICON_DISK,640 - (40 
                    + temp2/2),20,6,PAINTMODE_HIGHLIGHT);
  8119                        	.line	1179
  8120 00:2024: F4 F1 00     	pea	#<$f1
  8121 00:2027: F4 06 00     	pea	#<$6
  8122 00:202A: F4 14 00     	pea	#<$14
  8123 00:202D: A5 0B        	lda	<L253+temp2_1
  8124 00:202F: A2 02 00     	ldx	#<$2
  8125                        	xref	~~~div
  8126 00:2032: 22 xx xx xx  	jsl	~~~div
  8127 00:2036: 85 01        	sta	<R0
  8128 00:2038: 18           	clc
  8129 00:2039: A9 28 00     	lda	#$28
  8130 00:203C: 65 01        	adc	<R0
  8131 00:203E: 85 05        	sta	<R1
  8132 00:2040: 38           	sec
  8133 00:2041: A9 80 02     	lda	#$280
  8134 00:2044: E5 05        	sbc	<R1
  8135 00:2046: 48           	pha
  8136 00:2047: F4 03 00     	pea	#<$3
  8137 00:204A: 22 xx xx xx  	jsl	~~k_put_winicon_point
  8138                        ;		k_draw_text_point(k_to_uppercase(p->desk
                    topCtl->currentDiskName),640 - (35 + temp2/2) - (temp2),40,0
                    );
  8139                        	.line	1180
  8140 00:204E: F4 00 00     	pea	#<$0
  8141 00:2051: F4 28 00     	pea	#<$28
  8142 00:2054: A5 0B        	lda	<L253+temp2_1
  8143 00:2056: A2 02 00     	ldx	#<$2
  8144                        	xref	~~~div
  8145 00:2059: 22 xx xx xx  	jsl	~~~div
  8146 00:205D: 85 01        	sta	<R0
  8147 00:205F: 18           	clc
  8148 00:2060: A9 23 00     	lda	#$23
  8149 00:2063: 65 01        	adc	<R0
  8150 00:2065: 85 05        	sta	<R1
  8151 00:2067: 38           	sec
  8152 00:2068: A9 80 02     	lda	#$280
  Thu Dec  3 2020 22:25                                                Page 158


  8153 00:206B: E5 05        	sbc	<R1
  8154 00:206D: 85 01        	sta	<R0
  8155 00:206F: 38           	sec
  8156 00:2070: A5 01        	lda	<R0
  8157 00:2072: E5 0B        	sbc	<L253+temp2_1
  8158 00:2074: 48           	pha
  8159 00:2075: A0 58 00     	ldy	#$58
  8160 00:2078: B7 0D        	lda	[<L253+p_1],Y
  8161 00:207A: 85 01        	sta	<R0
  8162 00:207C: A0 5A 00     	ldy	#$5a
  8163 00:207F: B7 0D        	lda	[<L253+p_1],Y
  8164 00:2081: 85 03        	sta	<R0+2
  8165 00:2083: A0 13 00     	ldy	#$13
  8166 00:2086: B7 01        	lda	[<R0],Y
  8167 00:2088: 48           	pha
  8168 00:2089: A0 11 00     	ldy	#$11
  8169 00:208C: B7 01        	lda	[<R0],Y
  8170 00:208E: 48           	pha
  8171 00:208F: 22 xx xx xx  	jsl	~~k_to_uppercase
  8172 00:2093: 85 01        	sta	<R0
  8173 00:2095: 86 03        	stx	<R0+2
  8174 00:2097: DA           	phx
  8175 00:2098: 48           	pha
  8176 00:2099: 22 xx xx xx  	jsl	~~k_draw_text_point
  8177                        ;	}
  8178                        	.line	1181
  8179                        ;}
  8180                        L10190:
  8181                        	.line	1182
  8182                        L256:
  8183 00:209D: A5 12        	lda	<L252+2
  8184 00:209F: 85 16        	sta	<L252+2+4
  8185 00:20A1: A5 11        	lda	<L252+1
  8186 00:20A3: 85 15        	sta	<L252+1+4
  8187 00:20A5: 2B           	pld
  8188 00:20A6: 3B           	tsc
  8189 00:20A7: 18           	clc
  8190 00:20A8: 69 14 00     	adc	#L252+4
  8191 00:20AB: 1B           	tcs
  8192 00:20AC: 6B           	rtl
  8193                        	.endblock	1182
  8194             00000010   L252	equ	16
  8195             00000009   L253	equ	9
  8196                        	ends
  8197                        	efunc
  8198                        	.endfunc	1182,9,16
  8199                        	.line	1182
  8200                        	data
  8201                        L251:
  8202 00:0816: 4F 62 6A 65  	db	$4F,$62,$6A,$65,$63,$74,$43,$6C,$69,$63,
                    $6B,$65,$64,$21,$21
       00:081A: 63 74 43 6C 
       00:081E: 69 63 6B 65 
       00:0822: 64 21 21 
  8203 00:0825: 0D 0A 00     	db	$0D,$0A,$00
  8204 00:0828:              	ends
  8205                        ;
  8206                        ;
  Thu Dec  3 2020 22:25                                                Page 159


  8207                        ;
  8208                        ;void DefConsoleProc2(PFXOSMESSAGE pMsg)
  8209                        ;{
  8210                        	.line	1186
  8211                        	.line	1187
  8212                        	code
  8213                        	xdef	~~DefConsoleProc2
  8214                        	func
  8215                        	.function	1187
  8216                        ~~DefConsoleProc2:
  8217                        	longa	on
  8218                        	longi	on
  8219 00:20AD: 3B           	tsc
  8220 00:20AE: 38           	sec
  8221 00:20AF: E9 0E 00     	sbc	#L258
  8222 00:20B2: 1B           	tcs
  8223 00:20B3: 0B           	phd
  8224 00:20B4: 5B           	tcd
  8225             00000004   pMsg_0	set	4
  8226                        	.block	1187
  8227                        ;
  8228                        ;	PSPINNERCTX pconsolespinctx = NULL;
  8229                        ;	PFXPROCESS p = NULL;
  8230                        ;	int i = 0;
  8231                        ;
  8232                        ;	//k_debug_string("DefConsoleProc enter\r\n");
  8233                        ;	if(pMsg!=NULL)
  8234             00000000   pconsolespinctx_1	set	0
  8235             00000004   p_1	set	4
  8236             00000008   i_1	set	8
  8237                        	.sym	pconsolespinctx,0,138,1,32,60
  8238                        	.sym	p,4,138,1,32,20
  8239                        	.sym	i,8,5,1,16
  8240                        	.sym	pMsg,4,138,6,32,16
  8241 00:20B5: 64 05        	stz	<L259+pconsolespinctx_1
  8242 00:20B7: 64 07        	stz	<L259+pconsolespinctx_1+2
  8243 00:20B9: 64 09        	stz	<L259+p_1
  8244 00:20BB: 64 0B        	stz	<L259+p_1+2
  8245 00:20BD: 64 0D        	stz	<L259+i_1
  8246                        	.line	1194
  8247                        ;	{
  8248 00:20BF: A5 12        	lda	<L258+pMsg_0
  8249 00:20C1: 05 14        	ora	<L258+pMsg_0+2
  8250 00:20C3: D0 03        	bne	L261
  8251 00:20C5: 82 7C 01     	brl	L10191
  8252                        L261:
  8253                        	.line	1195
  8254                        ;		p = k_exec_get_current_process();
  8255                        	.line	1196
  8256 00:20C8: 22 xx xx xx  	jsl	~~k_exec_get_current_process
  8257 00:20CC: 85 09        	sta	<L259+p_1
  8258 00:20CE: 86 0B        	stx	<L259+p_1+2
  8259                        ;
  8260                        ;		switch(pMsg->type)
  8261                        	.line	1198
  8262 00:20D0: A0 08 00     	ldy	#$8
  8263 00:20D3: B7 12        	lda	[<L258+pMsg_0],Y
  8264 00:20D5: 82 54 01     	brl	L10192
  Thu Dec  3 2020 22:25                                                Page 160


  8265                        ;		{
  8266                        	.line	1199
  8267                        ;		case FX_INIT_MESSAGE:
  8268                        	.line	1200
  8269                        L10194:
  8270                        ;
  8271                        ;
  8272                        ;			pconsolespinctx = (PSPINNERCTX)k
                    _mem_allocate_heap(sizeof(SPINNERCTX));
  8273                        	.line	1203
  8274 00:20D8: F4 06 00     	pea	#<$6
  8275 00:20DB: 22 xx xx xx  	jsl	~~k_mem_allocate_heap
  8276 00:20DF: 85 05        	sta	<L259+pconsolespinctx_1
  8277 00:20E1: 86 07        	stx	<L259+pconsolespinctx_1+2
  8278                        ;			pconsolespinctx->spinner = conso
                    lespinner;
  8279                        	.line	1204
  8280 00:20E3: A9 xx xx     	lda	#<~~consolespinner
  8281 00:20E6: 85 01        	sta	<R0
  8282                        	xref	_BEG_DATA
  8283 00:20E8: A9 xx xx     	lda	#_BEG_DATA>>16
  8284 00:20EB: 85 03        	sta	<R0+2
  8285 00:20ED: A5 01        	lda	<R0
  8286 00:20EF: A0 02 00     	ldy	#$2
  8287 00:20F2: 97 05        	sta	[<L259+pconsolespinctx_1],Y
  8288 00:20F4: A5 03        	lda	<R0+2
  8289 00:20F6: A0 04 00     	ldy	#$4
  8290 00:20F9: 97 05        	sta	[<L259+pconsolespinctx_1],Y
  8291                        ;			p->tls[0] = (LPVOID)pconsolespin
                    ctx;
  8292                        	.line	1205
  8293 00:20FB: A5 05        	lda	<L259+pconsolespinctx_1
  8294 00:20FD: A0 13 00     	ldy	#$13
  8295 00:2100: 97 09        	sta	[<L259+p_1],Y
  8296 00:2102: A5 07        	lda	<L259+pconsolespinctx_1+2
  8297 00:2104: A0 15 00     	ldy	#$15
  8298 00:2107: 97 09        	sta	[<L259+p_1],Y
  8299                        ;			p->tls[1] = (PRECT)k_mem_allocat
                    e_heap(sizeof(RECT));
  8300                        	.line	1206
  8301 00:2109: F4 08 00     	pea	#<$8
  8302 00:210C: 22 xx xx xx  	jsl	~~k_mem_allocate_heap
  8303 00:2110: 85 01        	sta	<R0
  8304 00:2112: 86 03        	stx	<R0+2
  8305 00:2114: A5 01        	lda	<R0
  8306 00:2116: A0 17 00     	ldy	#$17
  8307 00:2119: 97 09        	sta	[<L259+p_1],Y
  8308 00:211B: A5 03        	lda	<R0+2
  8309 00:211D: A0 19 00     	ldy	#$19
  8310 00:2120: 97 09        	sta	[<L259+p_1],Y
  8311                        ;
  8312                        ;
  8313                        ;			i = (int)((long)(p->startupArgs)
                    );
  8314                        	.line	1209
  8315 00:2122: A0 60 00     	ldy	#$60
  8316 00:2125: B7 09        	lda	[<L259+p_1],Y
  8317 00:2127: 85 0D        	sta	<L259+i_1
  Thu Dec  3 2020 22:25                                                Page 161


  8318                        ;			k_debug_integer("DefConsoleProc2
                    ::FX_PROCESS:",i);
  8319                        	.line	1210
  8320 00:2129: D4 0D        	pei	<L259+i_1
  8321 00:212B: F4 xx xx     	pea	#^L257
  8322 00:212E: F4 xx xx     	pea	#<L257
  8323 00:2131: 22 xx xx xx  	jsl	~~k_debug_integer
  8324                        ;
  8325                        ;
  8326                        ;			if(p!=NULL)
  8327                        	.line	1213
  8328                        ;				k_debug_long("DefConsole
                    Proc2::ProcessId:",p->procId);
  8329 00:2135: A5 09        	lda	<L259+p_1
  8330 00:2137: 05 0B        	ora	<L259+p_1+2
  8331 00:2139: D0 03        	bne	L262
  8332 00:213B: 82 19 00     	brl	L10195
  8333                        L262:
  8334                        	.line	1214
  8335 00:213E: A0 04 00     	ldy	#$4
  8336 00:2141: B7 09        	lda	[<L259+p_1],Y
  8337 00:2143: 48           	pha
  8338 00:2144: A0 02 00     	ldy	#$2
  8339 00:2147: B7 09        	lda	[<L259+p_1],Y
  8340 00:2149: 48           	pha
  8341 00:214A: F4 xx xx     	pea	#^L257+29
  8342 00:214D: F4 xx xx     	pea	#<L257+29
  8343 00:2150: 22 xx xx xx  	jsl	~~k_debug_long
  8344                        ;			else
  8345 00:2154: 82 0A 00     	brl	L10196
  8346                        L10195:
  8347                        ;				k_debug_string("DefConso
                    leProc2::FX_INIT_MESSAGE\r\n");
  8348                        	.line	1216
  8349 00:2157: F4 xx xx     	pea	#^L257+57
  8350 00:215A: F4 xx xx     	pea	#<L257+57
  8351 00:215D: 22 xx xx xx  	jsl	~~k_debug_string
  8352                        L10196:
  8353                        ;
  8354                        ;
  8355                        ;
  8356                        ;			k_init_spinner(pconsolespinctx);
  8357                        	.line	1220
  8358 00:2161: D4 07        	pei	<L259+pconsolespinctx_1+2
  8359 00:2163: D4 05        	pei	<L259+pconsolespinctx_1
  8360 00:2165: 22 xx xx xx  	jsl	~~k_init_spinner
  8361                        ;
  8362                        ;
  8363                        ;
  8364                        ;
  8365                        ;			//k_sd_test();
  8366                        ;			break;
  8367                        	.line	1226
  8368 00:2169: 82 D8 00     	brl	L10193
  8369                        ;		case FX_UNINIT_MESSAGE:
  8370                        	.line	1227
  8371                        L10197:
  8372                        ;			k_debug_string("DefConsoleProc2:
  Thu Dec  3 2020 22:25                                                Page 162


                    :FX_UNINIT_MESSAGE\r\n");
  8373                        	.line	1228
  8374 00:216C: F4 xx xx     	pea	#^L257+92
  8375 00:216F: F4 xx xx     	pea	#<L257+92
  8376 00:2172: 22 xx xx xx  	jsl	~~k_debug_string
  8377                        ;			if(p->tls[1])
  8378                        	.line	1229
  8379                        ;				k_mem_deallocate_heap(p-
                    >tls[1]);
  8380 00:2176: A0 17 00     	ldy	#$17
  8381 00:2179: B7 09        	lda	[<L259+p_1],Y
  8382 00:217B: A0 19 00     	ldy	#$19
  8383 00:217E: 17 09        	ora	[<L259+p_1],Y
  8384 00:2180: D0 03        	bne	L263
  8385 00:2182: 82 10 00     	brl	L10198
  8386                        L263:
  8387                        	.line	1230
  8388 00:2185: A0 19 00     	ldy	#$19
  8389 00:2188: B7 09        	lda	[<L259+p_1],Y
  8390 00:218A: 48           	pha
  8391 00:218B: A0 17 00     	ldy	#$17
  8392 00:218E: B7 09        	lda	[<L259+p_1],Y
  8393 00:2190: 48           	pha
  8394 00:2191: 22 xx xx xx  	jsl	~~k_mem_deallocate_heap
  8395                        ;			break;
  8396                        L10198:
  8397                        	.line	1231
  8398 00:2195: 82 AC 00     	brl	L10193
  8399                        ;		case FX_KEY_DOWN:
  8400                        	.line	1232
  8401                        L10199:
  8402                        ;			if(p!=NULL && p->foregroundActiv
                    e)
  8403                        	.line	1233
  8404                        ;			{
  8405 00:2198: A5 09        	lda	<L259+p_1
  8406 00:219A: 05 0B        	ora	<L259+p_1+2
  8407 00:219C: D0 03        	bne	L264
  8408 00:219E: 82 23 00     	brl	L10200
  8409                        L264:
  8410 00:21A1: A0 12 00     	ldy	#$12
  8411 00:21A4: B7 09        	lda	[<L259+p_1],Y
  8412 00:21A6: 29 FF 00     	and	#$ff
  8413 00:21A9: D0 03        	bne	L265
  8414 00:21AB: 82 16 00     	brl	L10200
  8415                        L265:
  8416                        	.line	1234
  8417                        ;				//if(p!=NULL)
  8418                        ;				//	k_debug_integer(
                    "DefConso-leProc::ProcessId:",p->procId);
  8419                        ;				k_put_char(3 ,46,pMsg->d
                    ata[2],15,0);
  8420                        	.line	1237
  8421 00:21AE: F4 00 00     	pea	#<$0
  8422 00:21B1: F4 0F 00     	pea	#<$f
  8423 00:21B4: A0 18 00     	ldy	#$18
  8424 00:21B7: B7 12        	lda	[<L258+pMsg_0],Y
  8425 00:21B9: 48           	pha
  Thu Dec  3 2020 22:25                                                Page 163


  8426 00:21BA: F4 2E 00     	pea	#<$2e
  8427 00:21BD: F4 03 00     	pea	#<$3
  8428 00:21C0: 22 xx xx xx  	jsl	~~k_put_char
  8429                        ;			}
  8430                        	.line	1238
  8431                        ;			break;
  8432                        L10200:
  8433                        	.line	1239
  8434 00:21C4: 82 7D 00     	brl	L10193
  8435                        ;		case FX_PROCESS:
  8436                        	.line	1240
  8437                        L10201:
  8438                        ;
  8439                        ;			pconsolespinctx = (PSPINNERCTX)p
                    ->tls[0];
  8440                        	.line	1242
  8441 00:21C7: A0 13 00     	ldy	#$13
  8442 00:21CA: B7 09        	lda	[<L259+p_1],Y
  8443 00:21CC: 85 05        	sta	<L259+pconsolespinctx_1
  8444 00:21CE: A0 15 00     	ldy	#$15
  8445 00:21D1: B7 09        	lda	[<L259+p_1],Y
  8446 00:21D3: 85 07        	sta	<L259+pconsolespinctx_1+2
  8447                        ;
  8448                        ;			//k_debug_string("DefConsoleProc
                    ::FX_PROCESS\r\n");
  8449                        ;			i = (int)((long)(p->startupArgs)
                    );
  8450                        	.line	1245
  8451 00:21D5: A0 60 00     	ldy	#$60
  8452 00:21D8: B7 09        	lda	[<L259+p_1],Y
  8453 00:21DA: 85 0D        	sta	<L259+i_1
  8454                        ;			k_updatespinner(3 + i,39,pconsol
                    espinctx);
  8455                        	.line	1246
  8456 00:21DC: D4 07        	pei	<L259+pconsolespinctx_1+2
  8457 00:21DE: D4 05        	pei	<L259+pconsolespinctx_1
  8458 00:21E0: F4 27 00     	pea	#<$27
  8459 00:21E3: 18           	clc
  8460 00:21E4: A9 03 00     	lda	#$3
  8461 00:21E7: 65 0D        	adc	<L259+i_1
  8462 00:21E9: 48           	pha
  8463 00:21EA: 22 xx xx xx  	jsl	~~k_updatespinner
  8464                        ;			//k_debug_integer("DefConsolePro
                    c2::FX_PROCESS:",i);
  8465                        ;
  8466                        ;			if(p->tls[1])
  8467                        	.line	1249
  8468                        ;			{
  8469 00:21EE: A0 17 00     	ldy	#$17
  8470 00:21F1: B7 09        	lda	[<L259+p_1],Y
  8471 00:21F3: A0 19 00     	ldy	#$19
  8472 00:21F6: 17 09        	ora	[<L259+p_1],Y
  8473 00:21F8: D0 03        	bne	L266
  8474 00:21FA: 82 29 00     	brl	L10202
  8475                        L266:
  8476                        	.line	1250
  8477                        ;				((PRECT)(p->tls[1]))->x 
                    = 0;
  Thu Dec  3 2020 22:25                                                Page 164


  8478                        	.line	1251
  8479 00:21FD: A0 17 00     	ldy	#$17
  8480 00:2200: B7 09        	lda	[<L259+p_1],Y
  8481 00:2202: 85 01        	sta	<R0
  8482 00:2204: A0 19 00     	ldy	#$19
  8483 00:2207: B7 09        	lda	[<L259+p_1],Y
  8484 00:2209: 85 03        	sta	<R0+2
  8485 00:220B: A9 00 00     	lda	#$0
  8486 00:220E: 87 01        	sta	[<R0]
  8487                        ;				((PRECT)(p->tls[1]))->y 
                    = 0;
  8488                        	.line	1252
  8489 00:2210: A0 17 00     	ldy	#$17
  8490 00:2213: B7 09        	lda	[<L259+p_1],Y
  8491 00:2215: 85 01        	sta	<R0
  8492 00:2217: A0 19 00     	ldy	#$19
  8493 00:221A: B7 09        	lda	[<L259+p_1],Y
  8494 00:221C: 85 03        	sta	<R0+2
  8495 00:221E: A9 00 00     	lda	#$0
  8496 00:2221: A0 02 00     	ldy	#$2
  8497 00:2224: 97 01        	sta	[<R0],Y
  8498                        ;			}
  8499                        	.line	1253
  8500                        ;			/*
  8501                        ;			for(i=0;i<1000;i++)
  8502                        ;			{
  8503                        ;				asm NOP;
  8504                        ;			}
  8505                        ;			*/
  8506                        ;			//k_debug_integer("DefConsolePro
                    c2::FX_PROCESS:",i++);
  8507                        ;			break;
  8508                        L10202:
  8509                        	.line	1261
  8510 00:2226: 82 1B 00     	brl	L10193
  8511                        ;		default:
  8512                        	.line	1262
  8513                        L10203:
  8514                        ;			//k_updatespinner(3,40,&consoles
                    pinctx);
  8515                        ;			break;
  8516                        	.line	1264
  8517 00:2229: 82 18 00     	brl	L10193
  8518                        ;		}
  8519                        	.line	1265
  8520                        L10192:
  8521                        	xref	~~~swt
  8522 00:222C: 22 xx xx xx  	jsl	~~~swt
  8523 00:2230: 04 00        	dw	4
  8524 00:2232: 10 0F        	dw	3856
  8525 00:2234: xx xx        	dw	L10199-1
  8526 00:2236: 00 FF        	dw	65280
  8527 00:2238: xx xx        	dw	L10201-1
  8528 00:223A: 01 FF        	dw	65281
  8529 00:223C: xx xx        	dw	L10194-1
  8530 00:223E: 02 FF        	dw	65282
  8531 00:2240: xx xx        	dw	L10197-1
  8532 00:2242: xx xx        	dw	L10203-1
  Thu Dec  3 2020 22:25                                                Page 165


  8533                        L10193:
  8534                        ;	}
  8535                        	.line	1266
  8536                        ;	//k_debug_string("DefConsoleProc exit\r\n");
  8537                        ;}
  8538                        L10191:
  8539                        	.line	1268
  8540                        L267:
  8541 00:2244: A5 10        	lda	<L258+2
  8542 00:2246: 85 14        	sta	<L258+2+4
  8543 00:2248: A5 0F        	lda	<L258+1
  8544 00:224A: 85 13        	sta	<L258+1+4
  8545 00:224C: 2B           	pld
  8546 00:224D: 3B           	tsc
  8547 00:224E: 18           	clc
  8548 00:224F: 69 12 00     	adc	#L258+4
  8549 00:2252: 1B           	tcs
  8550 00:2253: 6B           	rtl
  8551                        	.endblock	1268
  8552             0000000E   L258	equ	14
  8553             00000005   L259	equ	5
  8554                        	ends
  8555                        	efunc
  8556                        	.endfunc	1268,5,14
  8557                        	.line	1268
  8558                        	data
  8559                        L257:
  8560 00:0828: 44 65 66 43  	db	$44,$65,$66,$43,$6F,$6E,$73,$6F,$6C,$65,
                    $50,$72,$6F,$63,$32
       00:082C: 6F 6E 73 6F 
       00:0830: 6C 65 50 72 
       00:0834: 6F 63 32 
  8561 00:0837: 3A 3A 46 58  	db	$3A,$3A,$46,$58,$5F,$50,$52,$4F,$43,$45,
                    $53,$53,$3A,$00,$44
       00:083B: 5F 50 52 4F 
       00:083F: 43 45 53 53 
       00:0843: 3A 00 44 
  8562 00:0846: 65 66 43 6F  	db	$65,$66,$43,$6F,$6E,$73,$6F,$6C,$65,$50,
                    $72,$6F,$63,$32,$3A
       00:084A: 6E 73 6F 6C 
       00:084E: 65 50 72 6F 
       00:0852: 63 32 3A 
  8563 00:0855: 3A 50 72 6F  	db	$3A,$50,$72,$6F,$63,$65,$73,$73,$49,$64,
                    $3A,$00,$44,$65,$66
       00:0859: 63 65 73 73 
       00:085D: 49 64 3A 00 
       00:0861: 44 65 66 
  8564 00:0864: 43 6F 6E 73  	db	$43,$6F,$6E,$73,$6F,$6C,$65,$50,$72,$6F,
                    $63,$32,$3A,$3A,$46
       00:0868: 6F 6C 65 50 
       00:086C: 72 6F 63 32 
       00:0870: 3A 3A 46 
  8565 00:0873: 58 5F 49 4E  	db	$58,$5F,$49,$4E,$49,$54,$5F,$4D,$45,$53,
                    $53,$41,$47,$45,$0D
       00:0877: 49 54 5F 4D 
       00:087B: 45 53 53 41 
       00:087F: 47 45 0D 
  8566 00:0882: 0A 00 44 65  	db	$0A,$00,$44,$65,$66,$43,$6F,$6E,$73,$6F,
  Thu Dec  3 2020 22:25                                                Page 166


                    $6C,$65,$50,$72,$6F
       00:0886: 66 43 6F 6E 
       00:088A: 73 6F 6C 65 
       00:088E: 50 72 6F 
  8567 00:0891: 63 32 3A 3A  	db	$63,$32,$3A,$3A,$46,$58,$5F,$55,$4E,$49,
                    $4E,$49,$54,$5F,$4D
       00:0895: 46 58 5F 55 
       00:0899: 4E 49 4E 49 
       00:089D: 54 5F 4D 
  8568 00:08A0: 45 53 53 41  	db	$45,$53,$53,$41,$47,$45,$0D,$0A,$00
       00:08A4: 47 45 0D 0A 
       00:08A8: 00 
  8569 00:08A9:              	ends
  8570                        ;
  8571                        ;void DefConsoleProc3(PFXOSMESSAGE pMsg)
  8572                        ;{
  8573                        	.line	1270
  8574                        	.line	1271
  8575                        	code
  8576                        	xdef	~~DefConsoleProc3
  8577                        	func
  8578                        	.function	1271
  8579                        ~~DefConsoleProc3:
  8580                        	longa	on
  8581                        	longi	on
  8582 00:2254: 3B           	tsc
  8583 00:2255: 38           	sec
  8584 00:2256: E9 0E 00     	sbc	#L269
  8585 00:2259: 1B           	tcs
  8586 00:225A: 0B           	phd
  8587 00:225B: 5B           	tcd
  8588             00000004   pMsg_0	set	4
  8589                        	.block	1271
  8590                        ;	PSPINNERCTX pconsolespinctx = NULL;
  8591                        ;	PFXPROCESS p = NULL;
  8592                        ;	int i = 0;
  8593                        ;
  8594                        ;	//k_debug_string("DefConsoleProc enter\r\n");
  8595                        ;	if(pMsg!=NULL)
  8596             00000000   pconsolespinctx_1	set	0
  8597             00000004   p_1	set	4
  8598             00000008   i_1	set	8
  8599                        	.sym	pconsolespinctx,0,138,1,32,60
  8600                        	.sym	p,4,138,1,32,20
  8601                        	.sym	i,8,5,1,16
  8602                        	.sym	pMsg,4,138,6,32,16
  8603 00:225C: 64 05        	stz	<L270+pconsolespinctx_1
  8604 00:225E: 64 07        	stz	<L270+pconsolespinctx_1+2
  8605 00:2260: 64 09        	stz	<L270+p_1
  8606 00:2262: 64 0B        	stz	<L270+p_1+2
  8607 00:2264: 64 0D        	stz	<L270+i_1
  8608                        	.line	1277
  8609                        ;	{
  8610 00:2266: A5 12        	lda	<L269+pMsg_0
  8611 00:2268: 05 14        	ora	<L269+pMsg_0+2
  8612 00:226A: D0 03        	bne	L272
  8613 00:226C: 82 FE 00     	brl	L10204
  8614                        L272:
  Thu Dec  3 2020 22:25                                                Page 167


  8615                        	.line	1278
  8616                        ;		p = k_exec_get_current_process();
  8617                        	.line	1279
  8618 00:226F: 22 xx xx xx  	jsl	~~k_exec_get_current_process
  8619 00:2273: 85 09        	sta	<L270+p_1
  8620 00:2275: 86 0B        	stx	<L270+p_1+2
  8621                        ;
  8622                        ;		switch(pMsg->type)
  8623                        	.line	1281
  8624 00:2277: A0 08 00     	ldy	#$8
  8625 00:227A: B7 12        	lda	[<L269+pMsg_0],Y
  8626 00:227C: 82 DA 00     	brl	L10205
  8627                        ;		{
  8628                        	.line	1282
  8629                        ;		case FX_INIT_MESSAGE:
  8630                        	.line	1283
  8631                        L10207:
  8632                        ;
  8633                        ;			pconsolespinctx = (PSPINNERCTX)k
                    _mem_allocate_heap(sizeof(SPINNERCTX));
  8634                        	.line	1285
  8635 00:227F: F4 06 00     	pea	#<$6
  8636 00:2282: 22 xx xx xx  	jsl	~~k_mem_allocate_heap
  8637 00:2286: 85 05        	sta	<L270+pconsolespinctx_1
  8638 00:2288: 86 07        	stx	<L270+pconsolespinctx_1+2
  8639                        ;			pconsolespinctx->spinner = conso
                    lespinner;
  8640                        	.line	1286
  8641 00:228A: A9 xx xx     	lda	#<~~consolespinner
  8642 00:228D: 85 01        	sta	<R0
  8643                        	xref	_BEG_DATA
  8644 00:228F: A9 xx xx     	lda	#_BEG_DATA>>16
  8645 00:2292: 85 03        	sta	<R0+2
  8646 00:2294: A5 01        	lda	<R0
  8647 00:2296: A0 02 00     	ldy	#$2
  8648 00:2299: 97 05        	sta	[<L270+pconsolespinctx_1],Y
  8649 00:229B: A5 03        	lda	<R0+2
  8650 00:229D: A0 04 00     	ldy	#$4
  8651 00:22A0: 97 05        	sta	[<L270+pconsolespinctx_1],Y
  8652                        ;			p->tls[0] = (LPVOID)pconsolespin
                    ctx;
  8653                        	.line	1287
  8654 00:22A2: A5 05        	lda	<L270+pconsolespinctx_1
  8655 00:22A4: A0 13 00     	ldy	#$13
  8656 00:22A7: 97 09        	sta	[<L270+p_1],Y
  8657 00:22A9: A5 07        	lda	<L270+pconsolespinctx_1+2
  8658 00:22AB: A0 15 00     	ldy	#$15
  8659 00:22AE: 97 09        	sta	[<L270+p_1],Y
  8660                        ;
  8661                        ;			i = (int)(long)((PFXPROCESSMESSA
                    GE)pMsg)->processInfo->startupArgs;
  8662                        	.line	1289
  8663 00:22B0: A0 0A 00     	ldy	#$a
  8664 00:22B3: B7 12        	lda	[<L269+pMsg_0],Y
  8665 00:22B5: 85 01        	sta	<R0
  8666 00:22B7: A0 0C 00     	ldy	#$c
  8667 00:22BA: B7 12        	lda	[<L269+pMsg_0],Y
  8668 00:22BC: 85 03        	sta	<R0+2
  Thu Dec  3 2020 22:25                                                Page 168


  8669 00:22BE: A0 60 00     	ldy	#$60
  8670 00:22C1: B7 01        	lda	[<R0],Y
  8671 00:22C3: 85 0D        	sta	<L270+i_1
  8672                        ;			k_debug_integer("DefConsoleProc3
                    ::FX_PROCESS:",i);
  8673                        	.line	1290
  8674 00:22C5: D4 0D        	pei	<L270+i_1
  8675 00:22C7: F4 xx xx     	pea	#^L268
  8676 00:22CA: F4 xx xx     	pea	#<L268
  8677 00:22CD: 22 xx xx xx  	jsl	~~k_debug_integer
  8678                        ;
  8679                        ;			if(p!=NULL)
  8680                        	.line	1292
  8681                        ;				k_debug_long("DefConsole
                    Proc3::ProcessId:",p->procId);
  8682 00:22D1: A5 09        	lda	<L270+p_1
  8683 00:22D3: 05 0B        	ora	<L270+p_1+2
  8684 00:22D5: D0 03        	bne	L273
  8685 00:22D7: 82 19 00     	brl	L10208
  8686                        L273:
  8687                        	.line	1293
  8688 00:22DA: A0 04 00     	ldy	#$4
  8689 00:22DD: B7 09        	lda	[<L270+p_1],Y
  8690 00:22DF: 48           	pha
  8691 00:22E0: A0 02 00     	ldy	#$2
  8692 00:22E3: B7 09        	lda	[<L270+p_1],Y
  8693 00:22E5: 48           	pha
  8694 00:22E6: F4 xx xx     	pea	#^L268+29
  8695 00:22E9: F4 xx xx     	pea	#<L268+29
  8696 00:22EC: 22 xx xx xx  	jsl	~~k_debug_long
  8697                        ;			else
  8698 00:22F0: 82 0A 00     	brl	L10209
  8699                        L10208:
  8700                        ;				k_debug_string("DefConso
                    leProc3::FX_INIT_MESSAGE\r\n");
  8701                        	.line	1295
  8702 00:22F3: F4 xx xx     	pea	#^L268+57
  8703 00:22F6: F4 xx xx     	pea	#<L268+57
  8704 00:22F9: 22 xx xx xx  	jsl	~~k_debug_string
  8705                        L10209:
  8706                        ;			k_init_spinner(pconsolespinctx);
  8707                        	.line	1296
  8708 00:22FD: D4 07        	pei	<L270+pconsolespinctx_1+2
  8709 00:22FF: D4 05        	pei	<L270+pconsolespinctx_1
  8710 00:2301: 22 xx xx xx  	jsl	~~k_init_spinner
  8711                        ;
  8712                        ;			//k_sd_test();
  8713                        ;			break;
  8714                        	.line	1299
  8715 00:2305: 82 65 00     	brl	L10206
  8716                        ;		case FX_KEY_DOWN:
  8717                        	.line	1300
  8718                        L10210:
  8719                        ;			if(p!=NULL && p->foregroundActiv
                    e)
  8720                        	.line	1301
  8721                        ;			{
  8722 00:2308: A5 09        	lda	<L270+p_1
  Thu Dec  3 2020 22:25                                                Page 169


  8723 00:230A: 05 0B        	ora	<L270+p_1+2
  8724 00:230C: D0 03        	bne	L274
  8725 00:230E: 82 23 00     	brl	L10211
  8726                        L274:
  8727 00:2311: A0 12 00     	ldy	#$12
  8728 00:2314: B7 09        	lda	[<L270+p_1],Y
  8729 00:2316: 29 FF 00     	and	#$ff
  8730 00:2319: D0 03        	bne	L275
  8731 00:231B: 82 16 00     	brl	L10211
  8732                        L275:
  8733                        	.line	1302
  8734                        ;				//if(p!=NULL)
  8735                        ;				//	k_debug_integer(
                    "DefConso-leProc::ProcessId:",p->procId);
  8736                        ;
  8737                        ;				k_put_char(1,46,pMsg->da
                    ta[2],15,0);
  8738                        	.line	1306
  8739 00:231E: F4 00 00     	pea	#<$0
  8740 00:2321: F4 0F 00     	pea	#<$f
  8741 00:2324: A0 18 00     	ldy	#$18
  8742 00:2327: B7 12        	lda	[<L269+pMsg_0],Y
  8743 00:2329: 48           	pha
  8744 00:232A: F4 2E 00     	pea	#<$2e
  8745 00:232D: F4 01 00     	pea	#<$1
  8746 00:2330: 22 xx xx xx  	jsl	~~k_put_char
  8747                        ;			}
  8748                        	.line	1307
  8749                        ;			break;
  8750                        L10211:
  8751                        	.line	1308
  8752 00:2334: 82 36 00     	brl	L10206
  8753                        ;		case FX_PROCESS:
  8754                        	.line	1309
  8755                        L10212:
  8756                        ;			pconsolespinctx = (PSPINNERCTX)p
                    ->tls[0];
  8757                        	.line	1310
  8758 00:2337: A0 13 00     	ldy	#$13
  8759 00:233A: B7 09        	lda	[<L270+p_1],Y
  8760 00:233C: 85 05        	sta	<L270+pconsolespinctx_1
  8761 00:233E: A0 15 00     	ldy	#$15
  8762 00:2341: B7 09        	lda	[<L270+p_1],Y
  8763 00:2343: 85 07        	sta	<L270+pconsolespinctx_1+2
  8764                        ;			//k_debug_string("DefConsoleProc
                    ::FX_PROCESS\r\n");
  8765                        ;			k_updatespinner(3,41,pconsolespi
                    nctx);
  8766                        	.line	1312
  8767 00:2345: D4 07        	pei	<L270+pconsolespinctx_1+2
  8768 00:2347: D4 05        	pei	<L270+pconsolespinctx_1
  8769 00:2349: F4 29 00     	pea	#<$29
  8770 00:234C: F4 03 00     	pea	#<$3
  8771 00:234F: 22 xx xx xx  	jsl	~~k_updatespinner
  8772                        ;			//k_debug_integer("DefConsolePro
                    c3::FX_PROCESS:",i++);
  8773                        ;			break;
  8774                        	.line	1314
  Thu Dec  3 2020 22:25                                                Page 170


  8775 00:2353: 82 17 00     	brl	L10206
  8776                        ;		default:
  8777                        	.line	1315
  8778                        L10213:
  8779                        ;			//k_updatespinner(3,40,&consoles
                    pinctx);
  8780                        ;			break;
  8781                        	.line	1317
  8782 00:2356: 82 14 00     	brl	L10206
  8783                        ;		}
  8784                        	.line	1318
  8785                        L10205:
  8786                        	xref	~~~swt
  8787 00:2359: 22 xx xx xx  	jsl	~~~swt
  8788 00:235D: 03 00        	dw	3
  8789 00:235F: 10 0F        	dw	3856
  8790 00:2361: xx xx        	dw	L10210-1
  8791 00:2363: 00 FF        	dw	65280
  8792 00:2365: xx xx        	dw	L10212-1
  8793 00:2367: 01 FF        	dw	65281
  8794 00:2369: xx xx        	dw	L10207-1
  8795 00:236B: xx xx        	dw	L10213-1
  8796                        L10206:
  8797                        ;	}
  8798                        	.line	1319
  8799                        ;	//k_debug_string("DefConsoleProc exit\r\n");
  8800                        ;}
  8801                        L10204:
  8802                        	.line	1321
  8803                        L276:
  8804 00:236D: A5 10        	lda	<L269+2
  8805 00:236F: 85 14        	sta	<L269+2+4
  8806 00:2371: A5 0F        	lda	<L269+1
  8807 00:2373: 85 13        	sta	<L269+1+4
  8808 00:2375: 2B           	pld
  8809 00:2376: 3B           	tsc
  8810 00:2377: 18           	clc
  8811 00:2378: 69 12 00     	adc	#L269+4
  8812 00:237B: 1B           	tcs
  8813 00:237C: 6B           	rtl
  8814                        	.endblock	1321
  8815             0000000E   L269	equ	14
  8816             00000005   L270	equ	5
  8817                        	ends
  8818                        	efunc
  8819                        	.endfunc	1321,5,14
  8820                        	.line	1321
  8821                        	data
  8822                        L268:
  8823 00:08A9: 44 65 66 43  	db	$44,$65,$66,$43,$6F,$6E,$73,$6F,$6C,$65,
                    $50,$72,$6F,$63,$33
       00:08AD: 6F 6E 73 6F 
       00:08B1: 6C 65 50 72 
       00:08B5: 6F 63 33 
  8824 00:08B8: 3A 3A 46 58  	db	$3A,$3A,$46,$58,$5F,$50,$52,$4F,$43,$45,
                    $53,$53,$3A,$00,$44
       00:08BC: 5F 50 52 4F 
       00:08C0: 43 45 53 53 
  Thu Dec  3 2020 22:25                                                Page 171


       00:08C4: 3A 00 44 
  8825 00:08C7: 65 66 43 6F  	db	$65,$66,$43,$6F,$6E,$73,$6F,$6C,$65,$50,
                    $72,$6F,$63,$33,$3A
       00:08CB: 6E 73 6F 6C 
       00:08CF: 65 50 72 6F 
       00:08D3: 63 33 3A 
  8826 00:08D6: 3A 50 72 6F  	db	$3A,$50,$72,$6F,$63,$65,$73,$73,$49,$64,
                    $3A,$00,$44,$65,$66
       00:08DA: 63 65 73 73 
       00:08DE: 49 64 3A 00 
       00:08E2: 44 65 66 
  8827 00:08E5: 43 6F 6E 73  	db	$43,$6F,$6E,$73,$6F,$6C,$65,$50,$72,$6F,
                    $63,$33,$3A,$3A,$46
       00:08E9: 6F 6C 65 50 
       00:08ED: 72 6F 63 33 
       00:08F1: 3A 3A 46 
  8828 00:08F4: 58 5F 49 4E  	db	$58,$5F,$49,$4E,$49,$54,$5F,$4D,$45,$53,
                    $53,$41,$47,$45,$0D
       00:08F8: 49 54 5F 4D 
       00:08FC: 45 53 53 41 
       00:0900: 47 45 0D 
  8829 00:0903: 0A 00        	db	$0A,$00
  8830 00:0905:              	ends
  8831                        ;
  8832                        ;
  8833                        ;VOID k_console_process_command(LPCHAR commandLine
                    ,PFXPROCESS process)
  8834                        ;{
  8835                        	.line	1324
  8836                        	.line	1325
  8837                        	code
  8838                        	xdef	~~k_console_process_command
  8839                        	func
  8840                        	.function	1325
  8841                        ~~k_console_process_command:
  8842                        	longa	on
  8843                        	longi	on
  8844 00:237D: 3B           	tsc
  8845 00:237E: 38           	sec
  8846 00:237F: E9 24 00     	sbc	#L278
  8847 00:2382: 1B           	tcs
  8848 00:2383: 0B           	phd
  8849 00:2384: 5B           	tcd
  8850             00000004   commandLine_0	set	4
  8851             00000008   process_0	set	8
  8852                        	.block	1325
  8853                        ;	int index = 0;
  8854                        ;	int pos = 0;
  8855                        ;	LPCHAR cptr  = console_commands[0];
  8856                        ;	LPCHAR match = NULL;
  8857                        ;
  8858                        ;	PCOMMANDARGS args = NULL;
  8859                        ;
  8860                        ;	PFXNODE tokens = NULL;
  8861                        ;	PFXNODE t = NULL;
  8862                        ;
  8863                        ;	FXCommandHandler handler = NULL;
  8864                        ;
  Thu Dec  3 2020 22:25                                                Page 172


  8865                        ;	k_debug_string("k_console_process_command::enter
                    :");
  8866             00000000   index_1	set	0
  8867             00000002   pos_1	set	2
  8868             00000004   cptr_1	set	4
  8869             00000008   match_1	set	8
  8870             0000000C   args_1	set	12
  8871             00000010   tokens_1	set	16
  8872             00000014   t_1	set	20
  8873             00000018   handler_1	set	24
  8874                        	.sym	index,0,5,1,16
  8875                        	.sym	pos,2,5,1,16
  8876                        	.sym	cptr,4,142,1,32
  8877                        	.sym	match,8,142,1,32
  8878                        	.sym	args,12,138,1,32,63
  8879                        	.sym	tokens,16,138,1,32,5
  8880                        	.sym	t,20,138,1,32,5
  8881                        	.sym	handler,24,656,1,32
  8882                        	.sym	commandLine,4,142,6,32
  8883                        	.sym	process,8,138,6,32,20
  8884 00:2385: 64 09        	stz	<L279+index_1
  8885 00:2387: 64 0B        	stz	<L279+pos_1
  8886 00:2389: AD xx xx     	lda	|~~console_commands
  8887 00:238C: 85 0D        	sta	<L279+cptr_1
  8888 00:238E: AD xx xx     	lda	|~~console_commands+2
  8889 00:2391: 85 0F        	sta	<L279+cptr_1+2
  8890 00:2393: 64 11        	stz	<L279+match_1
  8891 00:2395: 64 13        	stz	<L279+match_1+2
  8892 00:2397: 64 15        	stz	<L279+args_1
  8893 00:2399: 64 17        	stz	<L279+args_1+2
  8894 00:239B: 64 19        	stz	<L279+tokens_1
  8895 00:239D: 64 1B        	stz	<L279+tokens_1+2
  8896 00:239F: 64 1D        	stz	<L279+t_1
  8897 00:23A1: 64 1F        	stz	<L279+t_1+2
  8898 00:23A3: 64 21        	stz	<L279+handler_1
  8899 00:23A5: 64 23        	stz	<L279+handler_1+2
  8900                        	.line	1338
  8901 00:23A7: F4 xx xx     	pea	#^L277
  8902 00:23AA: F4 xx xx     	pea	#<L277
  8903 00:23AD: 22 xx xx xx  	jsl	~~k_debug_string
  8904                        ;	k_debug_string(commandLine);
  8905                        	.line	1339
  8906 00:23B1: D4 2A        	pei	<L278+commandLine_0+2
  8907 00:23B3: D4 28        	pei	<L278+commandLine_0
  8908 00:23B5: 22 xx xx xx  	jsl	~~k_debug_string
  8909                        ;	k_debug_string("\r\n");
  8910                        	.line	1340
  8911 00:23B9: F4 xx xx     	pea	#^L277+34
  8912 00:23BC: F4 xx xx     	pea	#<L277+34
  8913 00:23BF: 22 xx xx xx  	jsl	~~k_debug_string
  8914                        ;
  8915                        ;
  8916                        ;	while(cptr)
  8917                        	.line	1343
  8918                        L10214:
  8919 00:23C3: A5 0D        	lda	<L279+cptr_1
  8920 00:23C5: 05 0F        	ora	<L279+cptr_1+2
  8921 00:23C7: D0 03        	bne	L281
  Thu Dec  3 2020 22:25                                                Page 173


  8922 00:23C9: 82 F8 00     	brl	L10215
  8923                        L281:
  8924                        ;	{
  8925                        	.line	1344
  8926                        ;		//k_debug_string(cptr);
  8927                        ;		//k_debug_string("\r\n");
  8928                        ;		match = strstr(commandLine,cptr);
  8929                        	.line	1347
  8930 00:23CC: D4 0F        	pei	<L279+cptr_1+2
  8931 00:23CE: D4 0D        	pei	<L279+cptr_1
  8932 00:23D0: D4 2A        	pei	<L278+commandLine_0+2
  8933 00:23D2: D4 28        	pei	<L278+commandLine_0
  8934 00:23D4: 22 xx xx xx  	jsl	~~strstr
  8935 00:23D8: 85 11        	sta	<L279+match_1
  8936 00:23DA: 86 13        	stx	<L279+match_1+2
  8937                        ;		if(match == commandLine)
  8938                        	.line	1348
  8939                        ;		{
  8940 00:23DC: A5 11        	lda	<L279+match_1
  8941 00:23DE: C5 28        	cmp	<L278+commandLine_0
  8942 00:23E0: D0 04        	bne	L282
  8943 00:23E2: A5 13        	lda	<L279+match_1+2
  8944 00:23E4: C5 2A        	cmp	<L278+commandLine_0+2
  8945                        L282:
  8946 00:23E6: F0 03        	beq	L283
  8947 00:23E8: 82 BB 00     	brl	L10216
  8948                        L283:
  8949                        	.line	1349
  8950                        ;			k_put_string(0,49,"             
                                                                               "
                    ,15,0);
  8951                        	.line	1350
  8952 00:23EB: F4 00 00     	pea	#<$0
  8953 00:23EE: F4 0F 00     	pea	#<$f
  8954 00:23F1: F4 xx xx     	pea	#^L277+37
  8955 00:23F4: F4 xx xx     	pea	#<L277+37
  8956 00:23F7: F4 31 00     	pea	#<$31
  8957 00:23FA: F4 00 00     	pea	#<$0
  8958 00:23FD: 22 xx xx xx  	jsl	~~k_put_string
  8959                        ;			k_put_string(0,50,"             
                                                                               "
                    ,15,0);
  8960                        	.line	1351
  8961 00:2401: F4 00 00     	pea	#<$0
  8962 00:2404: F4 0F 00     	pea	#<$f
  8963 00:2407: F4 xx xx     	pea	#^L277+110
  8964 00:240A: F4 xx xx     	pea	#<L277+110
  8965 00:240D: F4 32 00     	pea	#<$32
  8966 00:2410: F4 00 00     	pea	#<$0
  8967 00:2413: 22 xx xx xx  	jsl	~~k_put_string
  8968                        ;
  8969                        ;			tokens = tokenize(commandLine);
  8970                        	.line	1353
  8971 00:2417: D4 2A        	pei	<L278+commandLine_0+2
  8972 00:2419: D4 28        	pei	<L278+commandLine_0
  8973 00:241B: 22 xx xx xx  	jsl	~~tokenize
  8974 00:241F: 85 19        	sta	<L279+tokens_1
  8975 00:2421: 86 1B        	stx	<L279+tokens_1+2
  Thu Dec  3 2020 22:25                                                Page 174


  8976                        ;			if(tokens)
  8977                        	.line	1354
  8978                        ;			{
  8979 00:2423: A5 19        	lda	<L279+tokens_1
  8980 00:2425: 05 1B        	ora	<L279+tokens_1+2
  8981 00:2427: D0 03        	bne	L284
  8982 00:2429: 82 08 00     	brl	L10217
  8983                        L284:
  8984                        	.line	1355
  8985                        ;				t = tokens;
  8986                        	.line	1356
  8987 00:242C: A5 19        	lda	<L279+tokens_1
  8988 00:242E: 85 1D        	sta	<L279+t_1
  8989 00:2430: A5 1B        	lda	<L279+tokens_1+2
  8990 00:2432: 85 1F        	sta	<L279+t_1+2
  8991                        ;				/*
  8992                        ;				while(t)
  8993                        ;				{
  8994                        ;					if(t)
  8995                        ;					{
  8996                        ;						k_debug_
                    string("TOKEN:");
  8997                        ;						if( ((PT
                    OKEN)t->data)->text)
  8998                        ;						{
  8999                        ;							
                    k_debug_string(((PTOKEN)t->data)->text );
  9000                        ;						}
  9001                        ;						else
  9002                        ;							
                    k_debug_string("NO NAME");
  9003                        ;
  9004                        ;						k_debug_
                    string("(");
  9005                        ;						k_debug_
                    string( token_to_string ( ((PTOKEN)t->data)->type  ));
  9006                        ;						k_debug_
                    string(")");
  9007                        ;						k_debug_
                    string("\r\n");
  9008                        ;						t = t->n
                    ext;
  9009                        ;					}
  9010                        ;				}
  9011                        ;				*/
  9012                        ;			}
  9013                        	.line	1378
  9014                        ;
  9015                        ;			//pos = k_put_string(pos,49,"FOU
                    ND COMMAND:",15,0);
  9016                        ;			//k_put_string(pos,49,cptr,15,0)
                    ;
  9017                        ;
  9018                        ;			k_debug_strings("k_console_proce
                    ss_command::found:",cptr);
  9019                        L10217:
  9020                        	.line	1383
  9021 00:2434: D4 0F        	pei	<L279+cptr_1+2
  Thu Dec  3 2020 22:25                                                Page 175


  9022 00:2436: D4 0D        	pei	<L279+cptr_1
  9023 00:2438: F4 xx xx     	pea	#^L277+183
  9024 00:243B: F4 xx xx     	pea	#<L277+183
  9025 00:243E: 22 xx xx xx  	jsl	~~k_debug_strings
  9026                        ;
  9027                        ;			// execute command handler
  9028                        ;			if(console_command_proc[index]!=
                    NULL)
  9029                        	.line	1386
  9030                        ;			{
  9031 00:2442: A5 09        	lda	<L279+index_1
  9032 00:2444: 0A           	asl	A
  9033 00:2445: 0A           	asl	A
  9034 00:2446: 85 01        	sta	<R0
  9035 00:2448: 18           	clc
  9036 00:2449: A9 xx xx     	lda	#<~~console_command_proc
  9037 00:244C: 65 01        	adc	<R0
  9038 00:244E: 85 05        	sta	<R1
  9039 00:2450: B2 05        	lda	(<R1)
  9040 00:2452: A0 02 00     	ldy	#$2
  9041 00:2455: 11 05        	ora	(<R1),Y
  9042 00:2457: D0 03        	bne	L285
  9043 00:2459: 82 47 00     	brl	L10218
  9044                        L285:
  9045                        	.line	1387
  9046                        ;				//console_command_proc[i
                    ndex](process);
  9047                        ;
  9048                        ;				//handler = console_comm
                    and_proc[index];
  9049                        ;
  9050                        ;				args = k_mem_allocate_he
                    ap(sizeof(COMMANDARGS));
  9051                        	.line	1392
  9052 00:245C: F4 08 00     	pea	#<$8
  9053 00:245F: 22 xx xx xx  	jsl	~~k_mem_allocate_heap
  9054 00:2463: 85 15        	sta	<L279+args_1
  9055 00:2465: 86 17        	stx	<L279+args_1+2
  9056                        ;				args->proc = console_com
                    mand_proc[index];
  9057                        	.line	1393
  9058 00:2467: A5 09        	lda	<L279+index_1
  9059 00:2469: 0A           	asl	A
  9060 00:246A: 0A           	asl	A
  9061 00:246B: 85 01        	sta	<R0
  9062 00:246D: 18           	clc
  9063 00:246E: A9 xx xx     	lda	#<~~console_command_proc
  9064 00:2471: 65 01        	adc	<R0
  9065 00:2473: 85 05        	sta	<R1
  9066 00:2475: B2 05        	lda	(<R1)
  9067 00:2477: 87 15        	sta	[<L279+args_1]
  9068 00:2479: A0 02 00     	ldy	#$2
  9069 00:247C: B1 05        	lda	(<R1),Y
  9070 00:247E: A0 02 00     	ldy	#$2
  9071 00:2481: 97 15        	sta	[<L279+args_1],Y
  9072                        ;				args->tokens = tokens;
  9073                        	.line	1394
  9074 00:2483: A5 19        	lda	<L279+tokens_1
  Thu Dec  3 2020 22:25                                                Page 176


  9075 00:2485: A0 04 00     	ldy	#$4
  9076 00:2488: 97 15        	sta	[<L279+args_1],Y
  9077 00:248A: A5 1B        	lda	<L279+tokens_1+2
  9078 00:248C: A0 06 00     	ldy	#$6
  9079 00:248F: 97 15        	sta	[<L279+args_1],Y
  9080                        ;
  9081                        ;				//k_debug_integer("k_con
                    sole_process_command::presend:",index);
  9082                        ;				//k_send_message(process
                    ,FX_APP_MESSAGE,handler,-1);
  9083                        ;				k_send_message(process,F
                    X_APP_MESSAGE,args,-1);
  9084                        	.line	1398
  9085 00:2491: F4 FF FF     	pea	#<$ffffffff
  9086 00:2494: D4 17        	pei	<L279+args_1+2
  9087 00:2496: D4 15        	pei	<L279+args_1
  9088 00:2498: F4 F0 FF     	pea	#<$fff0
  9089 00:249B: D4 2E        	pei	<L278+process_0+2
  9090 00:249D: D4 2C        	pei	<L278+process_0
  9091 00:249F: 22 xx xx xx  	jsl	~~k_send_message
  9092                        ;				//k_debug_pointer("k_con
                    sole_process_command::postsend:",handler);
  9093                        ;
  9094                        ;			}
  9095                        	.line	1401
  9096                        ;			break;
  9097                        L10218:
  9098                        	.line	1402
  9099 00:24A3: 82 1E 00     	brl	L10215
  9100                        ;		}
  9101                        	.line	1403
  9102                        ;		cptr = console_commands[++index];
  9103                        L10216:
  9104                        	.line	1404
  9105 00:24A6: E6 09        	inc	<L279+index_1
  9106 00:24A8: A5 09        	lda	<L279+index_1
  9107 00:24AA: 0A           	asl	A
  9108 00:24AB: 0A           	asl	A
  9109 00:24AC: 85 01        	sta	<R0
  9110 00:24AE: 18           	clc
  9111 00:24AF: A9 xx xx     	lda	#<~~console_commands
  9112 00:24B2: 65 01        	adc	<R0
  9113 00:24B4: 85 05        	sta	<R1
  9114 00:24B6: B2 05        	lda	(<R1)
  9115 00:24B8: 85 0D        	sta	<L279+cptr_1
  9116 00:24BA: A0 02 00     	ldy	#$2
  9117 00:24BD: B1 05        	lda	(<R1),Y
  9118 00:24BF: 85 0F        	sta	<L279+cptr_1+2
  9119                        ;	}
  9120                        	.line	1405
  9121 00:24C1: 82 FF FE     	brl	L10214
  9122                        L10215:
  9123                        ;
  9124                        ;
  9125                        ;	//if(commandLine!=NULL)
  9126                        ;	//	k_put_string(0,50,commandLine,15,0);
  9127                        ;
  9128                        ;	k_debug_string("k_console_process_command::exit\
  Thu Dec  3 2020 22:25                                                Page 177


                    r\n");
  9129                        	.line	1411
  9130 00:24C4: F4 xx xx     	pea	#^L277+217
  9131 00:24C7: F4 xx xx     	pea	#<L277+217
  9132 00:24CA: 22 xx xx xx  	jsl	~~k_debug_string
  9133                        ;
  9134                        ;	return;
  9135                        	.line	1413
  9136                        L286:
  9137 00:24CE: A5 26        	lda	<L278+2
  9138 00:24D0: 85 2E        	sta	<L278+2+8
  9139 00:24D2: A5 25        	lda	<L278+1
  9140 00:24D4: 85 2D        	sta	<L278+1+8
  9141 00:24D6: 2B           	pld
  9142 00:24D7: 3B           	tsc
  9143 00:24D8: 18           	clc
  9144 00:24D9: 69 2C 00     	adc	#L278+8
  9145 00:24DC: 1B           	tcs
  9146 00:24DD: 6B           	rtl
  9147                        ;}
  9148                        	.line	1414
  9149                        	.endblock	1414
  9150             00000024   L278	equ	36
  9151             00000009   L279	equ	9
  9152                        	ends
  9153                        	efunc
  9154                        	.endfunc	1414,9,36
  9155                        	.line	1414
  9156                        	data
  9157                        L277:
  9158 00:0905: 6B 5F 63 6F  	db	$6B,$5F,$63,$6F,$6E,$73,$6F,$6C,$65,$5F,
                    $70,$72,$6F,$63,$65
       00:0909: 6E 73 6F 6C 
       00:090D: 65 5F 70 72 
       00:0911: 6F 63 65 
  9159 00:0914: 73 73 5F 63  	db	$73,$73,$5F,$63,$6F,$6D,$6D,$61,$6E,$64,
                    $3A,$3A,$65,$6E,$74
       00:0918: 6F 6D 6D 61 
       00:091C: 6E 64 3A 3A 
       00:0920: 65 6E 74 
  9160 00:0923: 65 72 3A 00  	db	$65,$72,$3A,$00,$0D,$0A,$00,$20,$20,$20,
                    $20,$20,$20,$20,$20
       00:0927: 0D 0A 00 20 
       00:092B: 20 20 20 20 
       00:092F: 20 20 20 
  9161 00:0932: 20 20 20 20  	db	$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,
                    $20,$20,$20,$20,$20
       00:0936: 20 20 20 20 
       00:093A: 20 20 20 20 
       00:093E: 20 20 20 
  9162 00:0941: 20 20 20 20  	db	$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,
                    $20,$20,$20,$20,$20
       00:0945: 20 20 20 20 
       00:0949: 20 20 20 20 
       00:094D: 20 20 20 
  9163 00:0950: 20 20 20 20  	db	$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,
                    $20,$20,$20,$20,$20
       00:0954: 20 20 20 20 
  Thu Dec  3 2020 22:25                                                Page 178


       00:0958: 20 20 20 20 
       00:095C: 20 20 20 
  9164 00:095F: 20 20 20 20  	db	$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,
                    $20,$20,$20,$20,$20
       00:0963: 20 20 20 20 
       00:0967: 20 20 20 20 
       00:096B: 20 20 20 
  9165 00:096E: 20 20 20 20  	db	$20,$20,$20,$20,$00,$20,$20,$20,$20,$20,
                    $20,$20,$20,$20,$20
       00:0972: 00 20 20 20 
       00:0976: 20 20 20 20 
       00:097A: 20 20 20 
  9166 00:097D: 20 20 20 20  	db	$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,
                    $20,$20,$20,$20,$20
       00:0981: 20 20 20 20 
       00:0985: 20 20 20 20 
       00:0989: 20 20 20 
  9167 00:098C: 20 20 20 20  	db	$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,
                    $20,$20,$20,$20,$20
       00:0990: 20 20 20 20 
       00:0994: 20 20 20 20 
       00:0998: 20 20 20 
  9168 00:099B: 20 20 20 20  	db	$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,
                    $20,$20,$20,$20,$20
       00:099F: 20 20 20 20 
       00:09A3: 20 20 20 20 
       00:09A7: 20 20 20 
  9169 00:09AA: 20 20 20 20  	db	$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,
                    $20,$20,$20,$20,$20
       00:09AE: 20 20 20 20 
       00:09B2: 20 20 20 20 
       00:09B6: 20 20 20 
  9170 00:09B9: 20 20 00 6B  	db	$20,$20,$00,$6B,$5F,$63,$6F,$6E,$73,$6F,
                    $6C,$65,$5F,$70,$72
       00:09BD: 5F 63 6F 6E 
       00:09C1: 73 6F 6C 65 
       00:09C5: 5F 70 72 
  9171 00:09C8: 6F 63 65 73  	db	$6F,$63,$65,$73,$73,$5F,$63,$6F,$6D,$6D,
                    $61,$6E,$64,$3A,$3A
       00:09CC: 73 5F 63 6F 
       00:09D0: 6D 6D 61 6E 
       00:09D4: 64 3A 3A 
  9172 00:09D7: 66 6F 75 6E  	db	$66,$6F,$75,$6E,$64,$3A,$00,$6B,$5F,$63,
                    $6F,$6E,$73,$6F,$6C
       00:09DB: 64 3A 00 6B 
       00:09DF: 5F 63 6F 6E 
       00:09E3: 73 6F 6C 
  9173 00:09E6: 65 5F 70 72  	db	$65,$5F,$70,$72,$6F,$63,$65,$73,$73,$5F,
                    $63,$6F,$6D,$6D,$61
       00:09EA: 6F 63 65 73 
       00:09EE: 73 5F 63 6F 
       00:09F2: 6D 6D 61 
  9174 00:09F5: 6E 64 3A 3A  	db	$6E,$64,$3A,$3A,$65,$78,$69,$74,$0D,$0A,
                    $00
       00:09F9: 65 78 69 74 
       00:09FD: 0D 0A 00 
  9175 00:0A00:              	ends
  9176                        ;/*
  Thu Dec  3 2020 22:25                                                Page 179


  9177                        ;VOID foreach_file_entry(LPVOID ctx,LPVOID data)
  9178                        ;{
  9179                        ;	CHAR buffer[16];
  9180                        ;	int pos = 0;
  9181                        ;	PFXPROCESS process = (PFXPROCESS)ctx;
  9182                        ;
  9183                        ;	pos = k_put_string(0,process->consoleCtl->curY,(
                    (PFILEINFO)data)->pFilename,15,0);
  9184                        ;	pos = k_put_string(20,process->consoleCtl->curY,
                    k_replace_padding( k_longtodec(  ((PFILEINFO)data)->lSize,bu
                    ffer ),' '),15,0);
  9185                        ;	pos++;
  9186                        ;	if(((PFILEINFO)data)->type == ATTR_DIRECTORY)
  9187                        ;		pos = k_put_string(pos,process->consoleC
                    tl->curY,"directory",15,0);
  9188                        ;	else
  9189                        ;		pos = k_put_string(pos,process->consoleC
                    tl->curY,"bytes",15,0);
  9190                        ;
  9191                        ;	process->consoleCtl->curY++;
  9192                        ;}
  9193                        ;*/
  9194                        ;
  9195                        ;LPCHAR token_to_string(TOKENTYPE tt)
  9196                        ;{
  9197                        	.line	1434
  9198                        	.line	1435
  9199                        	code
  9200                        	xdef	~~token_to_string
  9201                        	func
  9202                        	.function	1435
  9203                        ~~token_to_string:
  9204                        	longa	on
  9205                        	longi	on
  9206 00:24DE: 3B           	tsc
  9207 00:24DF: 38           	sec
  9208 00:24E0: E9 08 00     	sbc	#L288
  9209 00:24E3: 1B           	tcs
  9210 00:24E4: 0B           	phd
  9211 00:24E5: 5B           	tcd
  9212             00000004   tt_0	set	4
  9213                        	.block	1435
  9214                        ;	return tokentypeNames[tt];
  9215                        	.sym	tt,4,5,6,16
  9216                        	.line	1436
  9217 00:24E6: A5 0C        	lda	<L288+tt_0
  9218 00:24E8: 0A           	asl	A
  9219 00:24E9: 0A           	asl	A
  9220 00:24EA: 85 01        	sta	<R0
  9221 00:24EC: 18           	clc
  9222 00:24ED: A9 xx xx     	lda	#<~~tokentypeNames
  9223 00:24F0: 65 01        	adc	<R0
  9224 00:24F2: 85 05        	sta	<R1
  9225 00:24F4: A0 02 00     	ldy	#$2
  9226 00:24F7: B1 05        	lda	(<R1),Y
  9227 00:24F9: AA           	tax
  9228 00:24FA: B2 05        	lda	(<R1)
  9229                        L291:
  Thu Dec  3 2020 22:25                                                Page 180


  9230 00:24FC: A8           	tay
  9231 00:24FD: A5 0A        	lda	<L288+2
  9232 00:24FF: 85 0C        	sta	<L288+2+2
  9233 00:2501: A5 09        	lda	<L288+1
  9234 00:2503: 85 0B        	sta	<L288+1+2
  9235 00:2505: 2B           	pld
  9236 00:2506: 3B           	tsc
  9237 00:2507: 18           	clc
  9238 00:2508: 69 0A 00     	adc	#L288+2
  9239 00:250B: 1B           	tcs
  9240 00:250C: 98           	tya
  9241 00:250D: 6B           	rtl
  9242                        ;}
  9243                        	.line	1437
  9244                        	.endblock	1437
  9245             00000008   L288	equ	8
  9246             00000009   L289	equ	9
  9247                        	ends
  9248                        	efunc
  9249                        	.endfunc	1437,9,8
  9250                        	.line	1437
  9251                        ;
  9252                        ;PTOKEN newToken(PFXSTRING name,TOKENTYPE type)
  9253                        ;{
  9254                        	.line	1439
  9255                        	.line	1440
  9256                        	code
  9257                        	xdef	~~newToken
  9258                        	func
  9259                        	.function	1440
  9260                        ~~newToken:
  9261                        	longa	on
  9262                        	longi	on
  9263 00:250E: 3B           	tsc
  9264 00:250F: 38           	sec
  9265 00:2510: E9 08 00     	sbc	#L292
  9266 00:2513: 1B           	tcs
  9267 00:2514: 0B           	phd
  9268 00:2515: 5B           	tcd
  9269             00000004   name_0	set	4
  9270             00000008   type_0	set	8
  9271                        	.block	1440
  9272                        ;	PTOKEN t = (PTOKEN)k_mem_allocate_heap(sizeof(TO
                    KEN));
  9273                        ;	if(t)
  9274             00000000   t_1	set	0
  9275                        	.sym	t,0,138,1,32,62
  9276                        	.sym	name,4,138,6,32,45
  9277                        	.sym	type,8,5,6,16
  9278 00:2516: F4 08 00     	pea	#<$8
  9279 00:2519: 22 xx xx xx  	jsl	~~k_mem_allocate_heap
  9280 00:251D: 85 05        	sta	<L293+t_1
  9281 00:251F: 86 07        	stx	<L293+t_1+2
  9282                        	.line	1442
  9283                        ;	{
  9284 00:2521: A5 05        	lda	<L293+t_1
  9285 00:2523: 05 07        	ora	<L293+t_1+2
  9286 00:2525: D0 03        	bne	L295
  Thu Dec  3 2020 22:25                                                Page 181


  9287 00:2527: 82 26 00     	brl	L10219
  9288                        L295:
  9289                        	.line	1443
  9290                        ;		t->type = type;
  9291                        	.line	1444
  9292 00:252A: A5 10        	lda	<L292+type_0
  9293 00:252C: 87 05        	sta	[<L293+t_1]
  9294                        ;		t->depth = 0;
  9295                        	.line	1445
  9296 00:252E: A9 00 00     	lda	#$0
  9297 00:2531: A0 02 00     	ldy	#$2
  9298 00:2534: 97 05        	sta	[<L293+t_1],Y
  9299                        ;		t->text = k_fxstring_copy_string(name);
  9300                        	.line	1446
  9301 00:2536: D4 0E        	pei	<L292+name_0+2
  9302 00:2538: D4 0C        	pei	<L292+name_0
  9303 00:253A: 22 xx xx xx  	jsl	~~k_fxstring_copy_string
  9304 00:253E: 85 01        	sta	<R0
  9305 00:2540: 86 03        	stx	<R0+2
  9306 00:2542: A5 01        	lda	<R0
  9307 00:2544: A0 04 00     	ldy	#$4
  9308 00:2547: 97 05        	sta	[<L293+t_1],Y
  9309 00:2549: A5 03        	lda	<R0+2
  9310 00:254B: A0 06 00     	ldy	#$6
  9311 00:254E: 97 05        	sta	[<L293+t_1],Y
  9312                        ;	}
  9313                        	.line	1447
  9314                        ;	return t;
  9315                        L10219:
  9316                        	.line	1448
  9317 00:2550: A6 07        	ldx	<L293+t_1+2
  9318 00:2552: A5 05        	lda	<L293+t_1
  9319                        L296:
  9320 00:2554: A8           	tay
  9321 00:2555: A5 0A        	lda	<L292+2
  9322 00:2557: 85 10        	sta	<L292+2+6
  9323 00:2559: A5 09        	lda	<L292+1
  9324 00:255B: 85 0F        	sta	<L292+1+6
  9325 00:255D: 2B           	pld
  9326 00:255E: 3B           	tsc
  9327 00:255F: 18           	clc
  9328 00:2560: 69 0E 00     	adc	#L292+6
  9329 00:2563: 1B           	tcs
  9330 00:2564: 98           	tya
  9331 00:2565: 6B           	rtl
  9332                        ;}
  9333                        	.line	1449
  9334                        	.endblock	1449
  9335             00000008   L292	equ	8
  9336             00000005   L293	equ	5
  9337                        	ends
  9338                        	efunc
  9339                        	.endfunc	1449,5,8
  9340                        	.line	1449
  9341                        ;/*
  9342                        ;void sig_walk(LPVOID signature,LPVOID pdata)
  9343                        ;{
  9344                        ;	PTOKEN t = ((PTOKEN)pdata);
  Thu Dec  3 2020 22:25                                                Page 182


  9345                        ;
  9346                        ;	((LPCHAR)signature)[0]++;
  9347                        ;	((LPCHAR)signature)[((LPCHAR)signature)[0]] = (t
                    ->type + 65);
  9348                        ;
  9349                        ;	//k_debug_integer("sig count:",((LPCHAR)signatur
                    e)[0]);
  9350                        ;	k_debug_integer("sig id:",((LPCHAR)signature)[0]
                    );
  9351                        ;	//k_debug_integer("sig type:",((LPCHAR)signature
                    )[((LPCHAR)signature)[0]]);
  9352                        ;	k_debug_char("sig type:",((LPCHAR)signature)[((L
                    PCHAR)signature)[0]] );
  9353                        ;}
  9354                        ;
  9355                        ;VOID getTokenSig(PFXNODE tokens,LPVOID signature)
  9356                        ;{
  9357                        ;	memset(signature,0xFF,8);
  9358                        ;	((LPCHAR)signature)[0] = 0;
  9359                        ;
  9360                        ;	k_nodelist_foreach_data(tokens->next,signature,s
                    ig_walk);
  9361                        ;
  9362                        ;	((LPCHAR)signature)[((LPCHAR)signature)[0] + 1] 
                    = 0;
  9363                        ;	((LPCHAR)signature)[0] ='#';
  9364                        ;
  9365                        ;	k_debug_strings("string-sig:",((LPCHAR)signature
                    ));
  9366                        ;}
  9367                        ;*/
  9368                        ;void sig_walk(LPVOID signature,LPVOID pdata)
  9369                        ;{
  9370                        	.line	1477
  9371                        	.line	1478
  9372                        	code
  9373                        	xdef	~~sig_walk
  9374                        	func
  9375                        	.function	1478
  9376                        ~~sig_walk:
  9377                        	longa	on
  9378                        	longi	on
  9379 00:2566: 3B           	tsc
  9380 00:2567: 38           	sec
  9381 00:2568: E9 0A 00     	sbc	#L297
  9382 00:256B: 1B           	tcs
  9383 00:256C: 0B           	phd
  9384 00:256D: 5B           	tcd
  9385             00000004   signature_0	set	4
  9386             00000008   pdata_0	set	8
  9387                        	.block	1478
  9388                        ;	CHAR end[2];
  9389                        ;	PTOKEN t = ((PTOKEN)pdata);
  9390                        ;
  9391                        ;	if(t)
  9392             00000000   end_1	set	0
  9393             00000002   t_1	set	2
  9394                        	.sym	end,0,110,1,0,2
  Thu Dec  3 2020 22:25                                                Page 183


  9395                        	.sym	t,2,138,1,32,62
  9396                        	.sym	signature,4,129,6,32
  9397                        	.sym	pdata,8,129,6,32
  9398 00:256E: A5 12        	lda	<L297+pdata_0
  9399 00:2570: 85 07        	sta	<L298+t_1
  9400 00:2572: A5 14        	lda	<L297+pdata_0+2
  9401 00:2574: 85 09        	sta	<L298+t_1+2
  9402                        	.line	1482
  9403                        ;	{
  9404 00:2576: A5 07        	lda	<L298+t_1
  9405 00:2578: 05 09        	ora	<L298+t_1+2
  9406 00:257A: D0 03        	bne	L300
  9407 00:257C: 82 50 00     	brl	L10220
  9408                        L300:
  9409                        	.line	1483
  9410                        ;		if(t->type == 0xFF)
  9411                        	.line	1484
  9412                        ;			end[0] = '#';
  9413 00:257F: A7 07        	lda	[<L298+t_1]
  9414 00:2581: C9 FF 00     	cmp	#<$ff
  9415 00:2584: F0 03        	beq	L301
  9416 00:2586: 82 0B 00     	brl	L10221
  9417                        L301:
  9418                        	.line	1485
  9419 00:2589: E2 20        	sep	#$20
  9420                        	longa	off
  9421 00:258B: A9 23        	lda	#$23
  9422 00:258D: 85 05        	sta	<L298+end_1
  9423 00:258F: C2 20        	rep	#$20
  9424                        	longa	on
  9425                        ;		else
  9426 00:2591: 82 10 00     	brl	L10222
  9427                        L10221:
  9428                        ;			end[0] = (t->type + 65);
  9429                        	.line	1487
  9430 00:2594: 18           	clc
  9431 00:2595: A9 41 00     	lda	#$41
  9432 00:2598: 67 07        	adc	[<L298+t_1]
  9433 00:259A: 85 01        	sta	<R0
  9434 00:259C: E2 20        	sep	#$20
  9435                        	longa	off
  9436 00:259E: A5 01        	lda	<R0
  9437 00:25A0: 85 05        	sta	<L298+end_1
  9438 00:25A2: C2 20        	rep	#$20
  9439                        	longa	on
  9440                        L10222:
  9441                        ;		end[1] = 0;
  9442                        	.line	1488
  9443 00:25A4: E2 20        	sep	#$20
  9444                        	longa	off
  9445 00:25A6: 64 06        	stz	<L298+end_1+1
  9446 00:25A8: C2 20        	rep	#$20
  9447                        	longa	on
  9448                        ;
  9449                        ;		strcat((LPCHAR)signature,end);
  9450                        	.line	1490
  9451 00:25AA: F4 00 00     	pea	#0
  9452 00:25AD: 18           	clc
  Thu Dec  3 2020 22:25                                                Page 184


  9453 00:25AE: 7B           	tdc
  9454 00:25AF: 69 05 00     	adc	#<L298+end_1
  9455 00:25B2: 48           	pha
  9456 00:25B3: D4 10        	pei	<L297+signature_0+2
  9457 00:25B5: D4 0E        	pei	<L297+signature_0
  9458 00:25B7: 22 xx xx xx  	jsl	~~strcat
  9459                        ;
  9460                        ;		//k_debug_integer("sig count:",((LPCHAR)
                    signature)[0]);
  9461                        ;		//k_debug_integer("sig id:",((LPCHAR)sig
                    nature)[0]);
  9462                        ;		//k_debug_integer("sig type:",((LPCHAR)s
                    ignature)[((LPCHAR)signature)[0]]);
  9463                        ;		k_debug_char("sig type:",(t->type + 65))
                    ;
  9464                        	.line	1495
  9465 00:25BB: 18           	clc
  9466 00:25BC: A9 41 00     	lda	#$41
  9467 00:25BF: 67 07        	adc	[<L298+t_1]
  9468 00:25C1: 48           	pha
  9469 00:25C2: F4 xx xx     	pea	#^L287
  9470 00:25C5: F4 xx xx     	pea	#<L287
  9471 00:25C8: 22 xx xx xx  	jsl	~~k_debug_char
  9472                        ;	}
  9473                        	.line	1496
  9474                        ;	else
  9475 00:25CC: 82 18 00     	brl	L10223
  9476                        L10220:
  9477                        ;	{
  9478                        	.line	1498
  9479                        ;		strcat((LPCHAR)signature,"#");
  9480                        	.line	1499
  9481 00:25CF: F4 xx xx     	pea	#^L287+10
  9482 00:25D2: F4 xx xx     	pea	#<L287+10
  9483 00:25D5: D4 10        	pei	<L297+signature_0+2
  9484 00:25D7: D4 0E        	pei	<L297+signature_0
  9485 00:25D9: 22 xx xx xx  	jsl	~~strcat
  9486                        ;		k_debug_string("sig_walk:NO DATA");
  9487                        	.line	1500
  9488 00:25DD: F4 xx xx     	pea	#^L287+12
  9489 00:25E0: F4 xx xx     	pea	#<L287+12
  9490 00:25E3: 22 xx xx xx  	jsl	~~k_debug_string
  9491                        ;	}
  9492                        	.line	1501
  9493                        L10223:
  9494                        ;}
  9495                        	.line	1502
  9496                        L302:
  9497 00:25E7: A5 0C        	lda	<L297+2
  9498 00:25E9: 85 14        	sta	<L297+2+8
  9499 00:25EB: A5 0B        	lda	<L297+1
  9500 00:25ED: 85 13        	sta	<L297+1+8
  9501 00:25EF: 2B           	pld
  9502 00:25F0: 3B           	tsc
  9503 00:25F1: 18           	clc
  9504 00:25F2: 69 12 00     	adc	#L297+8
  9505 00:25F5: 1B           	tcs
  9506 00:25F6: 6B           	rtl
  Thu Dec  3 2020 22:25                                                Page 185


  9507                        	.endblock	1502
  9508             0000000A   L297	equ	10
  9509             00000005   L298	equ	5
  9510                        	ends
  9511                        	efunc
  9512                        	.endfunc	1502,5,10
  9513                        	.line	1502
  9514                        	data
  9515                        L287:
  9516 00:0A00: 73 69 67 20  	db	$73,$69,$67,$20,$74,$79,$70,$65,$3A,$00,
                    $23,$00,$73,$69,$67
       00:0A04: 74 79 70 65 
       00:0A08: 3A 00 23 00 
       00:0A0C: 73 69 67 
  9517 00:0A0F: 5F 77 61 6C  	db	$5F,$77,$61,$6C,$6B,$3A,$4E,$4F,$20,$44,
                    $41,$54,$41,$00
       00:0A13: 6B 3A 4E 4F 
       00:0A17: 20 44 41 54 
       00:0A1B: 41 00 
  9518 00:0A1D:              	ends
  9519                        ;
  9520                        ;VOID getTokenSig(PFXNODE tokens,LPVOID signature)
  9521                        ;{
  9522                        	.line	1504
  9523                        	.line	1505
  9524                        	code
  9525                        	xdef	~~getTokenSig
  9526                        	func
  9527                        	.function	1505
  9528                        ~~getTokenSig:
  9529                        	longa	on
  9530                        	longi	on
  9531 00:25F7: 3B           	tsc
  9532 00:25F8: 38           	sec
  9533 00:25F9: E9 00 00     	sbc	#L304
  9534 00:25FC: 1B           	tcs
  9535 00:25FD: 0B           	phd
  9536 00:25FE: 5B           	tcd
  9537             00000004   tokens_0	set	4
  9538             00000008   signature_0	set	8
  9539                        	.block	1505
  9540                        ;	memset(signature,0,8);
  9541                        	.sym	tokens,4,138,6,32,5
  9542                        	.sym	signature,8,129,6,32
  9543                        	.line	1506
  9544 00:25FF: F4 08 00     	pea	#<$8
  9545 00:2602: F4 00 00     	pea	#<$0
  9546 00:2605: D4 0A        	pei	<L304+signature_0+2
  9547 00:2607: D4 08        	pei	<L304+signature_0
  9548 00:2609: 22 xx xx xx  	jsl	~~memset
  9549                        ;	//((LPCHAR)signature)[0] = 0;
  9550                        ;
  9551                        ;	k_nodelist_foreach_data(tokens,signature,sig_wal
                    k);
  9552                        	.line	1509
  9553 00:260D: F4 xx xx     	pea	#^~~sig_walk
  9554 00:2610: F4 xx xx     	pea	#<~~sig_walk
  9555 00:2613: D4 0A        	pei	<L304+signature_0+2
  Thu Dec  3 2020 22:25                                                Page 186


  9556 00:2615: D4 08        	pei	<L304+signature_0
  9557 00:2617: D4 06        	pei	<L304+tokens_0+2
  9558 00:2619: D4 04        	pei	<L304+tokens_0
  9559 00:261B: 22 xx xx xx  	jsl	~~k_nodelist_foreach_data
  9560                        ;
  9561                        ;	//((LPCHAR)signature)[((LPCHAR)signature)[0] + 1
                    ] = 0;
  9562                        ;	//((LPCHAR)signature)[0] ='#';
  9563                        ;
  9564                        ;	k_debug_strings("string-sig:",((LPCHAR)signature
                    ));
  9565                        	.line	1514
  9566 00:261F: D4 0A        	pei	<L304+signature_0+2
  9567 00:2621: D4 08        	pei	<L304+signature_0
  9568 00:2623: F4 xx xx     	pea	#^L303
  9569 00:2626: F4 xx xx     	pea	#<L303
  9570 00:2629: 22 xx xx xx  	jsl	~~k_debug_strings
  9571                        ;}
  9572                        	.line	1515
  9573                        L307:
  9574 00:262D: A5 02        	lda	<L304+2
  9575 00:262F: 85 0A        	sta	<L304+2+8
  9576 00:2631: A5 01        	lda	<L304+1
  9577 00:2633: 85 09        	sta	<L304+1+8
  9578 00:2635: 2B           	pld
  9579 00:2636: 3B           	tsc
  9580 00:2637: 18           	clc
  9581 00:2638: 69 08 00     	adc	#L304+8
  9582 00:263B: 1B           	tcs
  9583 00:263C: 6B           	rtl
  9584                        	.endblock	1515
  9585             00000000   L304	equ	0
  9586             00000001   L305	equ	1
  9587                        	ends
  9588                        	efunc
  9589                        	.endfunc	1515,1,0
  9590                        	.line	1515
  9591                        	data
  9592                        L303:
  9593 00:0A1D: 73 74 72 69  	db	$73,$74,$72,$69,$6E,$67,$2D,$73,$69,$67,
                    $3A,$00
       00:0A21: 6E 67 2D 73 
       00:0A25: 69 67 3A 00 
  9594 00:0A29:              	ends
  9595                        ;
  9596                        ;
  9597                        ;
  9598                        ;PFXNODE tokenize(LPCHAR source)
  9599                        ;{
  9600                        	.line	1519
  9601                        	.line	1520
  9602                        	code
  9603                        	xdef	~~tokenize
  9604                        	func
  9605                        	.function	1520
  9606                        ~~tokenize:
  9607                        	longa	on
  9608                        	longi	on
  Thu Dec  3 2020 22:25                                                Page 187


  9609 00:263D: 3B           	tsc
  9610 00:263E: 38           	sec
  9611 00:263F: E9 51 00     	sbc	#L309
  9612 00:2642: 1B           	tcs
  9613 00:2643: 0B           	phd
  9614 00:2644: 5B           	tcd
  9615             00000004   source_0	set	4
  9616                        	.block	1520
  9617                        ;
  9618                        ;	INT 	  i = 0;
  9619                        ;	CHAR 	  c = 0;
  9620                        ;	CHAR      toString[2];
  9621                        ;	INT 	  nestedIf = 0;
  9622                        ;	UINT sourceLength = 0;
  9623                        ;	LPCHAR	  charTokens = "\n=+-/<*>(),";
  9624                        ;	//PFXSTRING charTokens = NULL;
  9625                        ;	PFXSTRING token    = NULL;
  9626                        ;	PFXNODE   tokens   = NULL;
  9627                        ;	PTOKEN    tok	   = NULL;
  9628                        ;	TOKENIZESTATE state = STATE_DEFAULT;
  9629                        ;	TOKENTYPE tokenTypes[] = {
  9630                        	data
  9631                        L312:
  9632                        ;							
                    	TTYPE_LINE, TTYPE_EQUALS, TTYPE_OPERATOR,
  9633 00:0A29: 04 00 05 00  	dw	$4,$5,$6
       00:0A2D: 06 00 
  9634                        ;							
                    	TTYPE_OPERATOR, TTYPE_OPERATOR,TTYPE_OPERATOR,
  9635 00:0A2F: 06 00 06 00  	dw	$6,$6,$6
       00:0A33: 06 00 
  9636                        ;							
                    	TTYPE_OPERATOR, TTYPE_OPERATOR,
  9637 00:0A35: 06 00 06 00  	dw	$6,$6
  9638                        ;							
                    	TTYPE_LEFT_PAREN, TTYPE_RIGHT_PAREN, TTYPE_COMMA
  9639 00:0A39: 07 00 08 00  	dw	$7,$8
  9640                        ;							
                      };
  9641 00:0A3D: 0A 00        	dw	$A
  9642 00:0A3F:              	ends
  9643                        ;
  9644                        ;
  9645                        ;	source = k_fxstring_add(k_fxstring_new(source,st
                    rlen(source) + 2)," ");
  9646             00000000   i_1	set	0
  9647             00000002   c_1	set	2
  9648             00000003   toString_1	set	3
  9649             00000005   nestedIf_1	set	5
  9650             00000007   sourceLength_1	set	7
  9651             00000009   charTokens_1	set	9
  9652             0000000D   token_1	set	13
  9653             00000011   tokens_1	set	17
  9654             00000015   tok_1	set	21
  9655             00000019   state_1	set	25
  9656             0000001B   tokenTypes_1	set	27
  9657                        	.sym	i,0,5,1,16
  9658                        	.sym	c,2,14,1,8
  Thu Dec  3 2020 22:25                                                Page 188


  9659                        	.sym	toString,3,110,1,0,2
  9660                        	.sym	nestedIf,5,5,1,16
  9661                        	.sym	sourceLength,7,16,1,16
  9662                        	.sym	charTokens,9,142,1,32
  9663                        	.sym	token,13,138,1,32,45
  9664                        	.sym	tokens,17,138,1,32,5
  9665                        	.sym	tok,21,138,1,32,62
  9666                        	.sym	state,25,5,1,16
  9667                        	.sym	tokenTypes,27,101,1,0,11
  9668                        	.sym	source,4,142,6,32
  9669 00:2645: 64 21        	stz	<L310+i_1
  9670 00:2647: E2 20        	sep	#$20
  9671                        	longa	off
  9672 00:2649: 64 23        	stz	<L310+c_1
  9673 00:264B: C2 20        	rep	#$20
  9674                        	longa	on
  9675 00:264D: 64 26        	stz	<L310+nestedIf_1
  9676 00:264F: 64 28        	stz	<L310+sourceLength_1
  9677 00:2651: A9 xx xx     	lda	#<L308
  9678 00:2654: 85 2A        	sta	<L310+charTokens_1
  9679 00:2656: A9 xx xx     	lda	#^L308
  9680 00:2659: 85 2C        	sta	<L310+charTokens_1+2
  9681 00:265B: 64 2E        	stz	<L310+token_1
  9682 00:265D: 64 30        	stz	<L310+token_1+2
  9683 00:265F: 64 32        	stz	<L310+tokens_1
  9684 00:2661: 64 34        	stz	<L310+tokens_1+2
  9685 00:2663: 64 36        	stz	<L310+tok_1
  9686 00:2665: 64 38        	stz	<L310+tok_1+2
  9687 00:2667: 64 3A        	stz	<L310+state_1
  9688 00:2669: F4 xx xx     	pea	#^L312
  9689 00:266C: F4 xx xx     	pea	#<L312
  9690 00:266F: 18           	clc
  9691 00:2670: 7B           	tdc
  9692 00:2671: 69 3C 00     	adc	#<L310+tokenTypes_1
  9693 00:2674: 85 01        	sta	<R0
  9694 00:2676: A9 00 00     	lda	#$0
  9695 00:2679: 85 03        	sta	<R0+2
  9696 00:267B: D4 03        	pei	<R0+2
  9697 00:267D: D4 01        	pei	<R0
  9698 00:267F: A9 16 00     	lda	#$16
  9699                        	xref	~~~fmov
  9700 00:2682: 22 xx xx xx  	jsl	~~~fmov
  9701                        	.line	1541
  9702 00:2686: F4 xx xx     	pea	#^L308+12
  9703 00:2689: F4 xx xx     	pea	#<L308+12
  9704 00:268C: D4 57        	pei	<L309+source_0+2
  9705 00:268E: D4 55        	pei	<L309+source_0
  9706 00:2690: 22 xx xx xx  	jsl	~~strlen
  9707 00:2694: 85 01        	sta	<R0
  9708 00:2696: 18           	clc
  9709 00:2697: A9 02 00     	lda	#$2
  9710 00:269A: 65 01        	adc	<R0
  9711 00:269C: 48           	pha
  9712 00:269D: D4 57        	pei	<L309+source_0+2
  9713 00:269F: D4 55        	pei	<L309+source_0
  9714 00:26A1: 22 xx xx xx  	jsl	~~k_fxstring_new
  9715 00:26A5: 85 01        	sta	<R0
  9716 00:26A7: 86 03        	stx	<R0+2
  Thu Dec  3 2020 22:25                                                Page 189


  9717 00:26A9: DA           	phx
  9718 00:26AA: 48           	pha
  9719 00:26AB: 22 xx xx xx  	jsl	~~k_fxstring_add
  9720 00:26AF: 85 55        	sta	<L309+source_0
  9721 00:26B1: 86 57        	stx	<L309+source_0+2
  9722                        ;
  9723                        ;
  9724                        ;	k_debug_message("SOURCE LINE:",source);
  9725                        	.line	1544
  9726 00:26B3: D4 57        	pei	<L309+source_0+2
  9727 00:26B5: D4 55        	pei	<L309+source_0
  9728 00:26B7: F4 xx xx     	pea	#^L308+14
  9729 00:26BA: F4 xx xx     	pea	#<L308+14
  9730 00:26BD: 22 xx xx xx  	jsl	~~k_debug_message
  9731                        ;
  9732                        ;	sourceLength = strlen(source);
  9733                        	.line	1546
  9734 00:26C1: D4 57        	pei	<L309+source_0+2
  9735 00:26C3: D4 55        	pei	<L309+source_0
  9736 00:26C5: 22 xx xx xx  	jsl	~~strlen
  9737 00:26C9: 85 28        	sta	<L310+sourceLength_1
  9738                        ;
  9739                        ;	k_debug_integer("SOURCE sourceLength:",sourceLen
                    gth);
  9740                        	.line	1548
  9741 00:26CB: D4 28        	pei	<L310+sourceLength_1
  9742 00:26CD: F4 xx xx     	pea	#^L308+27
  9743 00:26D0: F4 xx xx     	pea	#<L308+27
  9744 00:26D3: 22 xx xx xx  	jsl	~~k_debug_integer
  9745                        ;
  9746                        ;	//tokens = k_nodelist_init(26,"signature", newTo
                    ken( k_fxstring_new("#",2),0xFF));
  9747                        ;	tokens = k_nodelist_init(26,"signature", NULL);
  9748                        	.line	1551
  9749 00:26D7: F4 00 00     	pea	#^$0
  9750 00:26DA: F4 00 00     	pea	#<$0
  9751 00:26DD: F4 xx xx     	pea	#^L308+48
  9752 00:26E0: F4 xx xx     	pea	#<L308+48
  9753 00:26E3: F4 1A 00     	pea	#<$1a
  9754 00:26E6: 22 xx xx xx  	jsl	~~k_nodelist_init
  9755 00:26EA: 85 32        	sta	<L310+tokens_1
  9756 00:26EC: 86 34        	stx	<L310+tokens_1+2
  9757                        ;
  9758                        ;	token = k_fxstring_init(256);
  9759                        	.line	1553
  9760 00:26EE: F4 00 01     	pea	#<$100
  9761 00:26F1: 22 xx xx xx  	jsl	~~k_fxstring_init
  9762 00:26F5: 85 2E        	sta	<L310+token_1
  9763 00:26F7: 86 30        	stx	<L310+token_1+2
  9764                        ;	//charTokens = k_fxstring_new("\n=+-/<*>(),",16)
                    ;
  9765                        ;	// Scan through the code one character at a time
                    , building up the list
  9766                        ;	// of tokens.
  9767                        ;	for (i = 0; i < sourceLength; i++)
  9768                        	.line	1557
  9769 00:26F9: 64 21        	stz	<L310+i_1
  9770 00:26FB: 82 C0 03     	brl	L10227
  Thu Dec  3 2020 22:25                                                Page 190


  9771                        L10226:
  9772                        ;	{
  9773                        	.line	1558
  9774                        ;		c = source[i];
  9775                        	.line	1559
  9776 00:26FE: E2 20        	sep	#$20
  9777                        	longa	off
  9778 00:2700: A4 21        	ldy	<L310+i_1
  9779 00:2702: B7 55        	lda	[<L309+source_0],Y
  9780 00:2704: 85 23        	sta	<L310+c_1
  9781 00:2706: C2 20        	rep	#$20
  9782                        	longa	on
  9783                        ;
  9784                        ;		//k_debug_char("SOURCE CHAR:",c);
  9785                        ;		//k_debug_hex("SOURCE HEX:",c);
  9786                        ;
  9787                        ;		switch (state)
  9788                        	.line	1564
  9789 00:2708: A5 3A        	lda	<L310+state_1
  9790 00:270A: 82 9B 03     	brl	L10228
  9791                        ;		{
  9792                        	.line	1565
  9793                        ;		case STATE_DEFAULT:
  9794                        	.line	1566
  9795                        L10230:
  9796                        ;			if (k_string_indexOf(charTokens,
                    c) != -1)
  9797                        	.line	1567
  9798                        ;			{
  9799 00:270D: D4 23        	pei	<L310+c_1
  9800 00:270F: D4 2C        	pei	<L310+charTokens_1+2
  9801 00:2711: D4 2A        	pei	<L310+charTokens_1
  9802 00:2713: 22 xx xx xx  	jsl	~~k_string_indexOf
  9803 00:2717: 85 01        	sta	<R0
  9804 00:2719: A5 01        	lda	<R0
  9805 00:271B: C9 FF FF     	cmp	#<$ffffffff
  9806 00:271E: D0 03        	bne	L313
  9807 00:2720: 82 D9 00     	brl	L10231
  9808                        L313:
  9809                        	.line	1568
  9810                        ;				//k_debug_integer("TOKEN
                     TYPE:",tokenTypes[k_string_indexOf(charTokens,c)]);
  9811                        ;
  9812                        ;				k_nodelist_add(tokens,k_
                    nodelist_create(tokenTypes[k_string_indexOf(charTokens,c)],"
                    token",
  9813                        	.line	1571
  9814                        ;						        
                                            newToken( k_fxstring_new(k_string_to
                    String(c,toString),2) ,
  9815                        ;						        
                                            		  tokenTypes[k_string_in
                    dexOf(charTokens,c)]),NULL,NULL)
  9816                        ;						        
                                            );
  9817 00:2723: F4 00 00     	pea	#^$0
  9818 00:2726: F4 00 00     	pea	#<$0
  9819 00:2729: F4 00 00     	pea	#^$0
  Thu Dec  3 2020 22:25                                                Page 191


  9820 00:272C: F4 00 00     	pea	#<$0
  9821 00:272F: D4 23        	pei	<L310+c_1
  9822 00:2731: D4 2C        	pei	<L310+charTokens_1+2
  9823 00:2733: D4 2A        	pei	<L310+charTokens_1
  9824 00:2735: 22 xx xx xx  	jsl	~~k_string_indexOf
  9825 00:2739: 85 05        	sta	<R1
  9826 00:273B: A0 00 00     	ldy	#$0
  9827 00:273E: A5 05        	lda	<R1
  9828 00:2740: 10 01        	bpl	L314
  9829 00:2742: 88           	dey
  9830                        L314:
  9831 00:2743: 85 05        	sta	<R1
  9832 00:2745: 84 07        	sty	<R1+2
  9833 00:2747: D4 07        	pei	<R1+2
  9834 00:2749: D4 05        	pei	<R1
  9835 00:274B: A9 01 00     	lda	#$1
  9836                        	xref	~~~lasl
  9837 00:274E: 22 xx xx xx  	jsl	~~~lasl
  9838 00:2752: 85 01        	sta	<R0
  9839 00:2754: 86 03        	stx	<R0+2
  9840 00:2756: 18           	clc
  9841 00:2757: 7B           	tdc
  9842 00:2758: 69 3C 00     	adc	#<L310+tokenTypes_1
  9843 00:275B: 85 09        	sta	<R2
  9844 00:275D: A9 00 00     	lda	#$0
  9845 00:2760: 85 0B        	sta	<R2+2
  9846 00:2762: 18           	clc
  9847 00:2763: A5 09        	lda	<R2
  9848 00:2765: 65 01        	adc	<R0
  9849 00:2767: 85 0D        	sta	<R3
  9850 00:2769: A5 0B        	lda	<R2+2
  9851 00:276B: 65 03        	adc	<R0+2
  9852 00:276D: 85 0F        	sta	<R3+2
  9853 00:276F: A7 0D        	lda	[<R3]
  9854 00:2771: 48           	pha
  9855 00:2772: F4 02 00     	pea	#<$2
  9856 00:2775: F4 00 00     	pea	#0
  9857 00:2778: 18           	clc
  9858 00:2779: 7B           	tdc
  9859 00:277A: 69 24 00     	adc	#<L310+toString_1
  9860 00:277D: 48           	pha
  9861 00:277E: D4 23        	pei	<L310+c_1
  9862 00:2780: 22 xx xx xx  	jsl	~~k_string_toString
  9863 00:2784: 85 01        	sta	<R0
  9864 00:2786: 86 03        	stx	<R0+2
  9865 00:2788: DA           	phx
  9866 00:2789: 48           	pha
  9867 00:278A: 22 xx xx xx  	jsl	~~k_fxstring_new
  9868 00:278E: 85 09        	sta	<R2
  9869 00:2790: 86 0B        	stx	<R2+2
  9870 00:2792: DA           	phx
  9871 00:2793: 48           	pha
  9872 00:2794: 22 xx xx xx  	jsl	~~newToken
  9873 00:2798: 85 0D        	sta	<R3
  9874 00:279A: 86 0F        	stx	<R3+2
  9875 00:279C: DA           	phx
  9876 00:279D: 48           	pha
  9877 00:279E: F4 xx xx     	pea	#^L308+58
  Thu Dec  3 2020 22:25                                                Page 192


  9878 00:27A1: F4 xx xx     	pea	#<L308+58
  9879 00:27A4: D4 23        	pei	<L310+c_1
  9880 00:27A6: D4 2C        	pei	<L310+charTokens_1+2
  9881 00:27A8: D4 2A        	pei	<L310+charTokens_1
  9882 00:27AA: 22 xx xx xx  	jsl	~~k_string_indexOf
  9883 00:27AE: 85 15        	sta	<21
  9884 00:27B0: A0 00 00     	ldy	#$0
  9885 00:27B3: A5 15        	lda	<21
  9886 00:27B5: 10 01        	bpl	L315
  9887 00:27B7: 88           	dey
  9888                        L315:
  9889 00:27B8: 85 15        	sta	<21
  9890 00:27BA: 84 17        	sty	<21+2
  9891 00:27BC: D4 17        	pei	<21+2
  9892 00:27BE: D4 15        	pei	<21
  9893 00:27C0: A9 01 00     	lda	#$1
  9894                        	xref	~~~lasl
  9895 00:27C3: 22 xx xx xx  	jsl	~~~lasl
  9896 00:27C7: 85 11        	sta	<17
  9897 00:27C9: 86 13        	stx	<17+2
  9898 00:27CB: 18           	clc
  9899 00:27CC: 7B           	tdc
  9900 00:27CD: 69 3C 00     	adc	#<L310+tokenTypes_1
  9901 00:27D0: 85 19        	sta	<25
  9902 00:27D2: A9 00 00     	lda	#$0
  9903 00:27D5: 85 1B        	sta	<25+2
  9904 00:27D7: 18           	clc
  9905 00:27D8: A5 19        	lda	<25
  9906 00:27DA: 65 11        	adc	<17
  9907 00:27DC: 85 1D        	sta	<29
  9908 00:27DE: A5 1B        	lda	<25+2
  9909 00:27E0: 65 13        	adc	<17+2
  9910 00:27E2: 85 1F        	sta	<29+2
  9911 00:27E4: A7 1D        	lda	[<29]
  9912 00:27E6: 48           	pha
  9913 00:27E7: 22 xx xx xx  	jsl	~~k_nodelist_create
  9914 00:27EB: 85 11        	sta	<17
  9915 00:27ED: 86 13        	stx	<17+2
  9916 00:27EF: DA           	phx
  9917 00:27F0: 48           	pha
  9918 00:27F1: D4 34        	pei	<L310+tokens_1+2
  9919 00:27F3: D4 32        	pei	<L310+tokens_1
  9920 00:27F5: 22 xx xx xx  	jsl	~~k_nodelist_add
  9921                        ;				//tokens.add(new Token(C
                    haracter.toString(c), tokenTypes[charTokens.indexOf(c)]));
  9922                        ;			}
  9923                        	.line	1576
  9924                        ;			else if (isalpha(c))
  9925 00:27F9: 82 79 00     	brl	L10232
  9926                        L10231:
  9927                        	.line	1577
  9928                        ;			{
  9929 00:27FC: A5 23        	lda	<L310+c_1
  9930 00:27FE: 29 FF 00     	and	#$ff
  9931 00:2801: 85 01        	sta	<R0
  9932 00:2803: E2 20        	sep	#$20
  9933                        	longa	off
  9934 00:2805: A6 01        	ldx	<R0
  Thu Dec  3 2020 22:25                                                Page 193


  9935 00:2807: BD xx xx     	lda	|~~_ctype+1,X
  9936 00:280A: 29 03        	and	#<$3
  9937 00:280C: C2 20        	rep	#$20
  9938                        	longa	on
  9939 00:280E: D0 03        	bne	L316
  9940 00:2810: 82 12 00     	brl	L10233
  9941                        L316:
  9942                        	.line	1578
  9943                        ;				k_fxstring_addchar(token
                    ,c);
  9944                        	.line	1579
  9945 00:2813: D4 23        	pei	<L310+c_1
  9946 00:2815: D4 30        	pei	<L310+token_1+2
  9947 00:2817: D4 2E        	pei	<L310+token_1
  9948 00:2819: 22 xx xx xx  	jsl	~~k_fxstring_addchar
  9949                        ;				state = STATE_WORD;
  9950                        	.line	1580
  9951 00:281D: A9 01 00     	lda	#$1
  9952 00:2820: 85 3A        	sta	<L310+state_1
  9953                        ;			}
  9954                        	.line	1581
  9955                        ;			else if (isdigit(c))
  9956 00:2822: 82 50 00     	brl	L10234
  9957                        L10233:
  9958                        	.line	1582
  9959                        ;			{
  9960 00:2825: A5 23        	lda	<L310+c_1
  9961 00:2827: 29 FF 00     	and	#$ff
  9962 00:282A: 85 01        	sta	<R0
  9963 00:282C: E2 20        	sep	#$20
  9964                        	longa	off
  9965 00:282E: A6 01        	ldx	<R0
  9966 00:2830: BD xx xx     	lda	|~~_ctype+1,X
  9967 00:2833: 29 04        	and	#<$4
  9968 00:2835: C2 20        	rep	#$20
  9969                        	longa	on
  9970 00:2837: D0 03        	bne	L317
  9971 00:2839: 82 12 00     	brl	L10235
  9972                        L317:
  9973                        	.line	1583
  9974                        ;				k_fxstring_addchar(token
                    ,c);
  9975                        	.line	1584
  9976 00:283C: D4 23        	pei	<L310+c_1
  9977 00:283E: D4 30        	pei	<L310+token_1+2
  9978 00:2840: D4 2E        	pei	<L310+token_1
  9979 00:2842: 22 xx xx xx  	jsl	~~k_fxstring_addchar
  9980                        ;				state = STATE_NUMBER;
  9981                        	.line	1585
  9982 00:2846: A9 02 00     	lda	#$2
  9983 00:2849: 85 3A        	sta	<L310+state_1
  9984                        ;			}
  9985                        	.line	1586
  9986                        ;			else if (c == '"')
  9987 00:284B: 82 27 00     	brl	L10236
  9988                        L10235:
  9989                        	.line	1587
  9990                        ;			{
  Thu Dec  3 2020 22:25                                                Page 194


  9991 00:284E: E2 20        	sep	#$20
  9992                        	longa	off
  9993 00:2850: A5 23        	lda	<L310+c_1
  9994 00:2852: C9 22        	cmp	#<$22
  9995 00:2854: C2 20        	rep	#$20
  9996                        	longa	on
  9997 00:2856: F0 03        	beq	L318
  9998 00:2858: 82 08 00     	brl	L10237
  9999                        L318:
 10000                        	.line	1588
 10001                        ;				state = STATE_STRING;
 10002                        	.line	1589
 10003 00:285B: A9 03 00     	lda	#$3
 10004 00:285E: 85 3A        	sta	<L310+state_1
 10005                        ;			}
 10006                        	.line	1590
 10007                        ;			else if (c == '\'')
 10008 00:2860: 82 12 00     	brl	L10238
 10009                        L10237:
 10010                        	.line	1591
 10011                        ;			{
 10012 00:2863: E2 20        	sep	#$20
 10013                        	longa	off
 10014 00:2865: A5 23        	lda	<L310+c_1
 10015 00:2867: C9 27        	cmp	#<$27
 10016 00:2869: C2 20        	rep	#$20
 10017                        	longa	on
 10018 00:286B: F0 03        	beq	L319
 10019 00:286D: 82 05 00     	brl	L10239
 10020                        L319:
 10021                        	.line	1592
 10022                        ;				state = STATE_COMMENT;
 10023                        	.line	1593
 10024 00:2870: A9 04 00     	lda	#$4
 10025 00:2873: 85 3A        	sta	<L310+state_1
 10026                        ;			}
 10027                        	.line	1594
 10028                        ;
 10029                        ;			break;
 10030                        L10239:
 10031                        L10238:
 10032                        L10236:
 10033                        L10234:
 10034                        L10232:
 10035                        	.line	1596
 10036 00:2875: 82 44 02     	brl	L10229
 10037                        ;
 10038                        ;		case STATE_WORD:
 10039                        	.line	1598
 10040                        L10240:
 10041                        ;			if (isalpha(c) || isdigit(c))
 10042                        	.line	1599
 10043                        ;			{
 10044 00:2878: A5 23        	lda	<L310+c_1
 10045 00:287A: 29 FF 00     	and	#$ff
 10046 00:287D: 85 01        	sta	<R0
 10047 00:287F: E2 20        	sep	#$20
 10048                        	longa	off
  Thu Dec  3 2020 22:25                                                Page 195


 10049 00:2881: A6 01        	ldx	<R0
 10050 00:2883: BD xx xx     	lda	|~~_ctype+1,X
 10051 00:2886: 29 03        	and	#<$3
 10052 00:2888: C2 20        	rep	#$20
 10053                        	longa	on
 10054 00:288A: F0 03        	beq	L321
 10055 00:288C: 82 17 00     	brl	L320
 10056                        L321:
 10057 00:288F: A5 23        	lda	<L310+c_1
 10058 00:2891: 29 FF 00     	and	#$ff
 10059 00:2894: 85 05        	sta	<R1
 10060 00:2896: E2 20        	sep	#$20
 10061                        	longa	off
 10062 00:2898: A6 05        	ldx	<R1
 10063 00:289A: BD xx xx     	lda	|~~_ctype+1,X
 10064 00:289D: 29 04        	and	#<$4
 10065 00:289F: C2 20        	rep	#$20
 10066                        	longa	on
 10067 00:28A1: D0 03        	bne	L322
 10068 00:28A3: 82 0D 00     	brl	L10241
 10069                        L322:
 10070                        L320:
 10071                        	.line	1600
 10072                        ;				k_fxstring_addchar(token
                    ,c);
 10073                        	.line	1601
 10074 00:28A6: D4 23        	pei	<L310+c_1
 10075 00:28A8: D4 30        	pei	<L310+token_1+2
 10076 00:28AA: D4 2E        	pei	<L310+token_1
 10077 00:28AC: 22 xx xx xx  	jsl	~~k_fxstring_addchar
 10078                        ;			}
 10079                        	.line	1602
 10080                        ;			else if (c == '.')
 10081 00:28B0: 82 EF 00     	brl	L10242
 10082                        L10241:
 10083                        	.line	1603
 10084                        ;			{
 10085 00:28B3: E2 20        	sep	#$20
 10086                        	longa	off
 10087 00:28B5: A5 23        	lda	<L310+c_1
 10088 00:28B7: C9 2E        	cmp	#<$2e
 10089 00:28B9: C2 20        	rep	#$20
 10090                        	longa	on
 10091 00:28BB: F0 03        	beq	L323
 10092 00:28BD: 82 0D 00     	brl	L10243
 10093                        L323:
 10094                        	.line	1604
 10095                        ;				k_fxstring_addchar(token
                    ,c);
 10096                        	.line	1605
 10097 00:28C0: D4 23        	pei	<L310+c_1
 10098 00:28C2: D4 30        	pei	<L310+token_1+2
 10099 00:28C4: D4 2E        	pei	<L310+token_1
 10100 00:28C6: 22 xx xx xx  	jsl	~~k_fxstring_addchar
 10101                        ;			}
 10102                        	.line	1606
 10103                        ;			else if (c == '_')
 10104 00:28CA: 82 D5 00     	brl	L10244
  Thu Dec  3 2020 22:25                                                Page 196


 10105                        L10243:
 10106                        	.line	1607
 10107                        ;			{
 10108 00:28CD: E2 20        	sep	#$20
 10109                        	longa	off
 10110 00:28CF: A5 23        	lda	<L310+c_1
 10111 00:28D1: C9 5F        	cmp	#<$5f
 10112 00:28D3: C2 20        	rep	#$20
 10113                        	longa	on
 10114 00:28D5: F0 03        	beq	L324
 10115 00:28D7: 82 0D 00     	brl	L10245
 10116                        L324:
 10117                        	.line	1608
 10118                        ;				k_fxstring_addchar(token
                    ,c);
 10119                        	.line	1609
 10120 00:28DA: D4 23        	pei	<L310+c_1
 10121 00:28DC: D4 30        	pei	<L310+token_1+2
 10122 00:28DE: D4 2E        	pei	<L310+token_1
 10123 00:28E0: 22 xx xx xx  	jsl	~~k_fxstring_addchar
 10124                        ;			}
 10125                        	.line	1610
 10126                        ;			else if (c == '[')
 10127 00:28E4: 82 BB 00     	brl	L10246
 10128                        L10245:
 10129                        	.line	1611
 10130                        ;			{
 10131 00:28E7: E2 20        	sep	#$20
 10132                        	longa	off
 10133 00:28E9: A5 23        	lda	<L310+c_1
 10134 00:28EB: C9 5B        	cmp	#<$5b
 10135 00:28ED: C2 20        	rep	#$20
 10136                        	longa	on
 10137 00:28EF: F0 03        	beq	L325
 10138 00:28F1: 82 0D 00     	brl	L10247
 10139                        L325:
 10140                        	.line	1612
 10141                        ;				k_fxstring_addchar(token
                    ,c);
 10142                        	.line	1613
 10143 00:28F4: D4 23        	pei	<L310+c_1
 10144 00:28F6: D4 30        	pei	<L310+token_1+2
 10145 00:28F8: D4 2E        	pei	<L310+token_1
 10146 00:28FA: 22 xx xx xx  	jsl	~~k_fxstring_addchar
 10147                        ;			}
 10148                        	.line	1614
 10149                        ;			else if (c == ']')
 10150 00:28FE: 82 A1 00     	brl	L10248
 10151                        L10247:
 10152                        	.line	1615
 10153                        ;			{
 10154 00:2901: E2 20        	sep	#$20
 10155                        	longa	off
 10156 00:2903: A5 23        	lda	<L310+c_1
 10157 00:2905: C9 5D        	cmp	#<$5d
 10158 00:2907: C2 20        	rep	#$20
 10159                        	longa	on
 10160 00:2909: F0 03        	beq	L326
  Thu Dec  3 2020 22:25                                                Page 197


 10161 00:290B: 82 0D 00     	brl	L10249
 10162                        L326:
 10163                        	.line	1616
 10164                        ;				k_fxstring_addchar(token
                    ,c);
 10165                        	.line	1617
 10166 00:290E: D4 23        	pei	<L310+c_1
 10167 00:2910: D4 30        	pei	<L310+token_1+2
 10168 00:2912: D4 2E        	pei	<L310+token_1
 10169 00:2914: 22 xx xx xx  	jsl	~~k_fxstring_addchar
 10170                        ;			}
 10171                        	.line	1618
 10172                        ;			/*
 10173                        ;			else if (c == ':')
 10174                        ;			{
 10175                        ;				k_nodelist_add(tokens,k_
                    nodelist_create(TTYPE_LABEL,"token",newToken(token, TTYPE_LA
                    BEL),NULL,NULL));
 10176                        ;
 10177                        ;				k_fxstring_reinit(token)
                    ;
 10178                        ;				state = STATE_DEFAULT;
 10179                        ;			}
 10180                        ;			*/
 10181                        ;			else
 10182 00:2918: 82 87 00     	brl	L10250
 10183                        L10249:
 10184                        ;			{
 10185                        	.line	1629
 10186                        ;				tok = newToken(token, TT
                    YPE_WORD);
 10187                        	.line	1630
 10188 00:291B: F4 00 00     	pea	#<$0
 10189 00:291E: D4 30        	pei	<L310+token_1+2
 10190 00:2920: D4 2E        	pei	<L310+token_1
 10191 00:2922: 22 xx xx xx  	jsl	~~newToken
 10192 00:2926: 85 36        	sta	<L310+tok_1
 10193 00:2928: 86 38        	stx	<L310+tok_1+2
 10194                        ;
 10195                        ;				if (k_fxstring_equals(to
                    ken,"if"))
 10196                        	.line	1632
 10197                        ;				{
 10198 00:292A: F4 xx xx     	pea	#^L308+64
 10199 00:292D: F4 xx xx     	pea	#<L308+64
 10200 00:2930: D4 30        	pei	<L310+token_1+2
 10201 00:2932: D4 2E        	pei	<L310+token_1
 10202 00:2934: 22 xx xx xx  	jsl	~~k_fxstring_equals
 10203 00:2938: 29 FF 00     	and	#$ff
 10204 00:293B: D0 03        	bne	L327
 10205 00:293D: 82 0C 00     	brl	L10251
 10206                        L327:
 10207                        	.line	1633
 10208                        ;					tok->depth = nes
                    tedIf;
 10209                        	.line	1634
 10210 00:2940: A5 26        	lda	<L310+nestedIf_1
 10211 00:2942: A0 02 00     	ldy	#$2
  Thu Dec  3 2020 22:25                                                Page 198


 10212 00:2945: 97 36        	sta	[<L310+tok_1],Y
 10213                        ;					nestedIf++;
 10214                        	.line	1635
 10215 00:2947: E6 26        	inc	<L310+nestedIf_1
 10216                        ;				}
 10217                        	.line	1636
 10218                        ;				else if (k_fxstring_equa
                    ls(token,"endif"))
 10219 00:2949: 82 1F 00     	brl	L10252
 10220                        L10251:
 10221                        	.line	1637
 10222                        ;				{
 10223 00:294C: F4 xx xx     	pea	#^L308+67
 10224 00:294F: F4 xx xx     	pea	#<L308+67
 10225 00:2952: D4 30        	pei	<L310+token_1+2
 10226 00:2954: D4 2E        	pei	<L310+token_1
 10227 00:2956: 22 xx xx xx  	jsl	~~k_fxstring_equals
 10228 00:295A: 29 FF 00     	and	#$ff
 10229 00:295D: D0 03        	bne	L328
 10230 00:295F: 82 09 00     	brl	L10253
 10231                        L328:
 10232                        	.line	1638
 10233                        ;					nestedIf--;
 10234                        	.line	1639
 10235 00:2962: C6 26        	dec	<L310+nestedIf_1
 10236                        ;					tok->depth = nes
                    tedIf;
 10237                        	.line	1640
 10238 00:2964: A5 26        	lda	<L310+nestedIf_1
 10239 00:2966: A0 02 00     	ldy	#$2
 10240 00:2969: 97 36        	sta	[<L310+tok_1],Y
 10241                        ;				}
 10242                        	.line	1641
 10243                        ;
 10244                        ;				k_nodelist_add(tokens,k_
                    nodelist_create(tok->type,"token",tok,NULL,NULL));
 10245                        L10253:
 10246                        L10252:
 10247                        	.line	1643
 10248 00:296B: F4 00 00     	pea	#^$0
 10249 00:296E: F4 00 00     	pea	#<$0
 10250 00:2971: F4 00 00     	pea	#^$0
 10251 00:2974: F4 00 00     	pea	#<$0
 10252 00:2977: D4 38        	pei	<L310+tok_1+2
 10253 00:2979: D4 36        	pei	<L310+tok_1
 10254 00:297B: F4 xx xx     	pea	#^L308+73
 10255 00:297E: F4 xx xx     	pea	#<L308+73
 10256 00:2981: A7 36        	lda	[<L310+tok_1]
 10257 00:2983: 48           	pha
 10258 00:2984: 22 xx xx xx  	jsl	~~k_nodelist_create
 10259 00:2988: 85 01        	sta	<R0
 10260 00:298A: 86 03        	stx	<R0+2
 10261 00:298C: DA           	phx
 10262 00:298D: 48           	pha
 10263 00:298E: D4 34        	pei	<L310+tokens_1+2
 10264 00:2990: D4 32        	pei	<L310+tokens_1
 10265 00:2992: 22 xx xx xx  	jsl	~~k_nodelist_add
 10266                        ;				k_fxstring_reinit(token)
  Thu Dec  3 2020 22:25                                                Page 199


                    ;
 10267                        	.line	1644
 10268 00:2996: D4 30        	pei	<L310+token_1+2
 10269 00:2998: D4 2E        	pei	<L310+token_1
 10270 00:299A: 22 xx xx xx  	jsl	~~k_fxstring_reinit
 10271                        ;				state = STATE_DEFAULT;
 10272                        	.line	1645
 10273 00:299E: 64 3A        	stz	<L310+state_1
 10274                        ;				i--; // Reprocess this c
                    haracter in the default state.
 10275                        	.line	1646
 10276 00:29A0: C6 21        	dec	<L310+i_1
 10277                        ;			}
 10278                        	.line	1647
 10279                        L10250:
 10280                        L10248:
 10281                        L10246:
 10282                        L10244:
 10283                        L10242:
 10284                        ;			break;
 10285                        	.line	1648
 10286 00:29A2: 82 17 01     	brl	L10229
 10287                        ;
 10288                        ;		case STATE_NUMBER:
 10289                        	.line	1650
 10290                        L10254:
 10291                        ;			// HACK: Negative numbers and fl
                    oating points aren't supported.
 10292                        ;			// To get a negative number, jus
                    t do 0 - <your number>.
 10293                        ;			// To get a floating point, divi
                    de.
 10294                        ;			if (isdigit(c))
 10295                        	.line	1654
 10296                        ;			{
 10297 00:29A5: A5 23        	lda	<L310+c_1
 10298 00:29A7: 29 FF 00     	and	#$ff
 10299 00:29AA: 85 01        	sta	<R0
 10300 00:29AC: E2 20        	sep	#$20
 10301                        	longa	off
 10302 00:29AE: A6 01        	ldx	<R0
 10303 00:29B0: BD xx xx     	lda	|~~_ctype+1,X
 10304 00:29B3: 29 04        	and	#<$4
 10305 00:29B5: C2 20        	rep	#$20
 10306                        	longa	on
 10307 00:29B7: D0 03        	bne	L329
 10308 00:29B9: 82 0D 00     	brl	L10255
 10309                        L329:
 10310                        	.line	1655
 10311                        ;				k_fxstring_addchar(token
                    ,c);
 10312                        	.line	1656
 10313 00:29BC: D4 23        	pei	<L310+c_1
 10314 00:29BE: D4 30        	pei	<L310+token_1+2
 10315 00:29C0: D4 2E        	pei	<L310+token_1
 10316 00:29C2: 22 xx xx xx  	jsl	~~k_fxstring_addchar
 10317                        ;			}
 10318                        	.line	1657
  Thu Dec  3 2020 22:25                                                Page 200


 10319                        ;			else if (c == '.')
 10320 00:29C6: 82 5E 00     	brl	L10256
 10321                        L10255:
 10322                        	.line	1658
 10323                        ;			{
 10324 00:29C9: E2 20        	sep	#$20
 10325                        	longa	off
 10326 00:29CB: A5 23        	lda	<L310+c_1
 10327 00:29CD: C9 2E        	cmp	#<$2e
 10328 00:29CF: C2 20        	rep	#$20
 10329                        	longa	on
 10330 00:29D1: F0 03        	beq	L330
 10331 00:29D3: 82 0D 00     	brl	L10257
 10332                        L330:
 10333                        	.line	1659
 10334                        ;				k_fxstring_addchar(token
                    ,c);
 10335                        	.line	1660
 10336 00:29D6: D4 23        	pei	<L310+c_1
 10337 00:29D8: D4 30        	pei	<L310+token_1+2
 10338 00:29DA: D4 2E        	pei	<L310+token_1
 10339 00:29DC: 22 xx xx xx  	jsl	~~k_fxstring_addchar
 10340                        ;			}
 10341                        	.line	1661
 10342                        ;			else
 10343 00:29E0: 82 44 00     	brl	L10258
 10344                        L10257:
 10345                        ;			{
 10346                        	.line	1663
 10347                        ;				k_nodelist_add(tokens,k_
                    nodelist_create(TTYPE_NUMBER,"token",newToken(token, TTYPE_N
                    UMBER),NULL,NULL));
 10348                        	.line	1664
 10349 00:29E3: F4 00 00     	pea	#^$0
 10350 00:29E6: F4 00 00     	pea	#<$0
 10351 00:29E9: F4 00 00     	pea	#^$0
 10352 00:29EC: F4 00 00     	pea	#<$0
 10353 00:29EF: F4 01 00     	pea	#<$1
 10354 00:29F2: D4 30        	pei	<L310+token_1+2
 10355 00:29F4: D4 2E        	pei	<L310+token_1
 10356 00:29F6: 22 xx xx xx  	jsl	~~newToken
 10357 00:29FA: 85 01        	sta	<R0
 10358 00:29FC: 86 03        	stx	<R0+2
 10359 00:29FE: DA           	phx
 10360 00:29FF: 48           	pha
 10361 00:2A00: F4 xx xx     	pea	#^L308+79
 10362 00:2A03: F4 xx xx     	pea	#<L308+79
 10363 00:2A06: F4 01 00     	pea	#<$1
 10364 00:2A09: 22 xx xx xx  	jsl	~~k_nodelist_create
 10365 00:2A0D: 85 05        	sta	<R1
 10366 00:2A0F: 86 07        	stx	<R1+2
 10367 00:2A11: DA           	phx
 10368 00:2A12: 48           	pha
 10369 00:2A13: D4 34        	pei	<L310+tokens_1+2
 10370 00:2A15: D4 32        	pei	<L310+tokens_1
 10371 00:2A17: 22 xx xx xx  	jsl	~~k_nodelist_add
 10372                        ;				k_fxstring_reinit(token)
                    ;
  Thu Dec  3 2020 22:25                                                Page 201


 10373                        	.line	1665
 10374 00:2A1B: D4 30        	pei	<L310+token_1+2
 10375 00:2A1D: D4 2E        	pei	<L310+token_1
 10376 00:2A1F: 22 xx xx xx  	jsl	~~k_fxstring_reinit
 10377                        ;				state = STATE_DEFAULT;
 10378                        	.line	1666
 10379 00:2A23: 64 3A        	stz	<L310+state_1
 10380                        ;				i--; // Reprocess this c
                    haracter in the default state.
 10381                        	.line	1667
 10382 00:2A25: C6 21        	dec	<L310+i_1
 10383                        ;			}
 10384                        	.line	1668
 10385                        L10258:
 10386                        L10256:
 10387                        ;			break;
 10388                        	.line	1669
 10389 00:2A27: 82 92 00     	brl	L10229
 10390                        ;
 10391                        ;		case STATE_STRING:
 10392                        	.line	1671
 10393                        L10259:
 10394                        ;			if (c == '"' || c == '\n')
 10395                        	.line	1672
 10396                        ;			{
 10397 00:2A2A: E2 20        	sep	#$20
 10398                        	longa	off
 10399 00:2A2C: A5 23        	lda	<L310+c_1
 10400 00:2A2E: C9 22        	cmp	#<$22
 10401 00:2A30: C2 20        	rep	#$20
 10402                        	longa	on
 10403 00:2A32: D0 03        	bne	L332
 10404 00:2A34: 82 0D 00     	brl	L331
 10405                        L332:
 10406 00:2A37: E2 20        	sep	#$20
 10407                        	longa	off
 10408 00:2A39: A5 23        	lda	<L310+c_1
 10409 00:2A3B: C9 0A        	cmp	#<$a
 10410 00:2A3D: C2 20        	rep	#$20
 10411                        	longa	on
 10412 00:2A3F: F0 03        	beq	L333
 10413 00:2A41: 82 45 00     	brl	L10260
 10414                        L333:
 10415                        L331:
 10416                        	.line	1673
 10417                        ;				k_nodelist_add(tokens,k_
                    nodelist_create(TTYPE_STRING,"token",newToken(token, TTYPE_S
                    TRING),NULL,NULL));
 10418                        	.line	1674
 10419 00:2A44: F4 00 00     	pea	#^$0
 10420 00:2A47: F4 00 00     	pea	#<$0
 10421 00:2A4A: F4 00 00     	pea	#^$0
 10422 00:2A4D: F4 00 00     	pea	#<$0
 10423 00:2A50: F4 02 00     	pea	#<$2
 10424 00:2A53: D4 30        	pei	<L310+token_1+2
 10425 00:2A55: D4 2E        	pei	<L310+token_1
 10426 00:2A57: 22 xx xx xx  	jsl	~~newToken
 10427 00:2A5B: 85 01        	sta	<R0
  Thu Dec  3 2020 22:25                                                Page 202


 10428 00:2A5D: 86 03        	stx	<R0+2
 10429 00:2A5F: DA           	phx
 10430 00:2A60: 48           	pha
 10431 00:2A61: F4 xx xx     	pea	#^L308+85
 10432 00:2A64: F4 xx xx     	pea	#<L308+85
 10433 00:2A67: F4 02 00     	pea	#<$2
 10434 00:2A6A: 22 xx xx xx  	jsl	~~k_nodelist_create
 10435 00:2A6E: 85 05        	sta	<R1
 10436 00:2A70: 86 07        	stx	<R1+2
 10437 00:2A72: DA           	phx
 10438 00:2A73: 48           	pha
 10439 00:2A74: D4 34        	pei	<L310+tokens_1+2
 10440 00:2A76: D4 32        	pei	<L310+tokens_1
 10441 00:2A78: 22 xx xx xx  	jsl	~~k_nodelist_add
 10442                        ;
 10443                        ;				k_fxstring_reinit(token)
                    ;
 10444                        	.line	1676
 10445 00:2A7C: D4 30        	pei	<L310+token_1+2
 10446 00:2A7E: D4 2E        	pei	<L310+token_1
 10447 00:2A80: 22 xx xx xx  	jsl	~~k_fxstring_reinit
 10448                        ;				state = STATE_DEFAULT;
 10449                        	.line	1677
 10450 00:2A84: 64 3A        	stz	<L310+state_1
 10451                        ;			}
 10452                        	.line	1678
 10453                        ;			else
 10454 00:2A86: 82 0A 00     	brl	L10261
 10455                        L10260:
 10456                        ;			{
 10457                        	.line	1680
 10458                        ;				k_fxstring_addchar(token
                    ,c);
 10459                        	.line	1681
 10460 00:2A89: D4 23        	pei	<L310+c_1
 10461 00:2A8B: D4 30        	pei	<L310+token_1+2
 10462 00:2A8D: D4 2E        	pei	<L310+token_1
 10463 00:2A8F: 22 xx xx xx  	jsl	~~k_fxstring_addchar
 10464                        ;			}
 10465                        	.line	1682
 10466                        L10261:
 10467                        ;			break;
 10468                        	.line	1683
 10469 00:2A93: 82 26 00     	brl	L10229
 10470                        ;
 10471                        ;		case STATE_COMMENT:
 10472                        	.line	1685
 10473                        L10262:
 10474                        ;			if (c == '\n')
 10475                        	.line	1686
 10476                        ;			{
 10477 00:2A96: E2 20        	sep	#$20
 10478                        	longa	off
 10479 00:2A98: A5 23        	lda	<L310+c_1
 10480 00:2A9A: C9 0A        	cmp	#<$a
 10481 00:2A9C: C2 20        	rep	#$20
 10482                        	longa	on
 10483 00:2A9E: F0 03        	beq	L334
  Thu Dec  3 2020 22:25                                                Page 203


 10484 00:2AA0: 82 02 00     	brl	L10263
 10485                        L334:
 10486                        	.line	1687
 10487                        ;				state = STATE_DEFAULT;
 10488                        	.line	1688
 10489 00:2AA3: 64 3A        	stz	<L310+state_1
 10490                        ;			}
 10491                        	.line	1689
 10492                        ;			break;
 10493                        L10263:
 10494                        	.line	1690
 10495 00:2AA5: 82 14 00     	brl	L10229
 10496                        ;		}
 10497                        	.line	1691
 10498                        L10228:
 10499                        	xref	~~~fsw
 10500 00:2AA8: 22 xx xx xx  	jsl	~~~fsw
 10501 00:2AAC: 00 00        	dw	0
 10502 00:2AAE: 05 00        	dw	5
 10503 00:2AB0: xx xx        	dw	L10229-1
 10504 00:2AB2: xx xx        	dw	L10230-1
 10505 00:2AB4: xx xx        	dw	L10240-1
 10506 00:2AB6: xx xx        	dw	L10254-1
 10507 00:2AB8: xx xx        	dw	L10259-1
 10508 00:2ABA: xx xx        	dw	L10262-1
 10509                        L10229:
 10510                        ;	}
 10511                        	.line	1692
 10512                        L10224:
 10513 00:2ABC: E6 21        	inc	<L310+i_1
 10514                        L10227:
 10515 00:2ABE: A5 21        	lda	<L310+i_1
 10516 00:2AC0: C5 28        	cmp	<L310+sourceLength_1
 10517 00:2AC2: B0 03        	bcs	L335
 10518 00:2AC4: 82 37 FC     	brl	L10226
 10519                        L335:
 10520                        L10225:
 10521                        ;
 10522                        ;	return tokens;
 10523                        	.line	1694
 10524 00:2AC7: A6 34        	ldx	<L310+tokens_1+2
 10525 00:2AC9: A5 32        	lda	<L310+tokens_1
 10526                        L336:
 10527 00:2ACB: A8           	tay
 10528 00:2ACC: A5 53        	lda	<L309+2
 10529 00:2ACE: 85 57        	sta	<L309+2+4
 10530 00:2AD0: A5 52        	lda	<L309+1
 10531 00:2AD2: 85 56        	sta	<L309+1+4
 10532 00:2AD4: 2B           	pld
 10533 00:2AD5: 3B           	tsc
 10534 00:2AD6: 18           	clc
 10535 00:2AD7: 69 55 00     	adc	#L309+4
 10536 00:2ADA: 1B           	tcs
 10537 00:2ADB: 98           	tya
 10538 00:2ADC: 6B           	rtl
 10539                        ;
 10540                        ;	//return NULL;
 10541                        ;}
  Thu Dec  3 2020 22:25                                                Page 204


 10542                        	.line	1697
 10543                        	.endblock	1697
 10544             00000051   L309	equ	81
 10545             00000021   L310	equ	33
 10546                        	ends
 10547                        	efunc
 10548                        	.endfunc	1697,33,81
 10549                        	.line	1697
 10550                        	data
 10551                        L308:
 10552 00:0A3F: 0A 3D 2B 2D  	db	$0A,$3D,$2B,$2D,$2F,$3C,$2A,$3E,$28,$29,
                    $2C,$00,$20,$00,$53
       00:0A43: 2F 3C 2A 3E 
       00:0A47: 28 29 2C 00 
       00:0A4B: 20 00 53 
 10553 00:0A4E: 4F 55 52 43  	db	$4F,$55,$52,$43,$45,$20,$4C,$49,$4E,$45,
                    $3A,$00,$53,$4F,$55
       00:0A52: 45 20 4C 49 
       00:0A56: 4E 45 3A 00 
       00:0A5A: 53 4F 55 
 10554 00:0A5D: 52 43 45 20  	db	$52,$43,$45,$20,$73,$6F,$75,$72,$63,$65,
                    $4C,$65,$6E,$67,$74
       00:0A61: 73 6F 75 72 
       00:0A65: 63 65 4C 65 
       00:0A69: 6E 67 74 
 10555 00:0A6C: 68 3A 00 73  	db	$68,$3A,$00,$73,$69,$67,$6E,$61,$74,$75,
                    $72,$65,$00,$74,$6F
       00:0A70: 69 67 6E 61 
       00:0A74: 74 75 72 65 
       00:0A78: 00 74 6F 
 10556 00:0A7B: 6B 65 6E 00  	db	$6B,$65,$6E,$00,$69,$66,$00,$65,$6E,$64,
                    $69,$66,$00,$74,$6F
       00:0A7F: 69 66 00 65 
       00:0A83: 6E 64 69 66 
       00:0A87: 00 74 6F 
 10557 00:0A8A: 6B 65 6E 00  	db	$6B,$65,$6E,$00,$74,$6F,$6B,$65,$6E,$00,
                    $74,$6F,$6B,$65,$6E
       00:0A8E: 74 6F 6B 65 
       00:0A92: 6E 00 74 6F 
       00:0A96: 6B 65 6E 
 10558 00:0A99: 00           	db	$00
 10559 00:0A9A:              	ends
 10560                        ;
 10561                        ;
 10562                        	.line	1698
 10563                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxconsole.c",1519
 10564                        	xref	~~cmd_LINEUP
 10565                        	xref	~~cmd_RESUME
 10566                        	xref	~~cmd_PAUSE
 10567                        	xref	~~cmd_TIME
 10568                        	xref	~~cmd_EXIT
 10569                        	xref	~~cmd_START
 10570                        	xref	~~cmd_Window
 10571                        	xref	~~cmd_SEND
 10572                        	xref	~~cmd_DISPLAY
 10573                        	xref	~~cmd_CHRDIR
 10574                        	xref	~~cmd_TASKS
  Thu Dec  3 2020 22:25                                                Page 205


 10575                        	xref	~~cmd_BACK
 10576                        	xref	~~cmd_FRONT
 10577                        	xref	~~cmd_NEWDIR
 10578                        	xref	~~cmd_INIT
 10579                        	xref	~~cmd_BCOLOR
 10580                        	xref	~~cmd_FCOLOR
 10581                        	xref	~~cmd_VOL
 10582                        	xref	~~cmd_DIR
 10583                        	xref	~~cmd_TESTSD
 10584                        	xref	~~cmd_WORKBENCH
 10585                        	xref	~~cmd_CLEAR
 10586                        	xref	~~k_send_process_command_message
 10587                        	xref	~~k_send_message
 10588                        	xref	~~k_getKeyboardChar
 10589                        	xref	~~k_create_ui_window_class
 10590                        	xref	~~k_add_window_hit_node
 10591                        	xref	~~k_vdraw_ui_window
 10592                        	xref	~~k_put_winicon_point
 10593                        	xref	~~k_draw_text_point
 10594                        	xref	~~k_put_font
 10595                        	xref	~~setColors
 10596                        	xref	~~k_mem_deallocate_heap
 10597                        	xref	~~k_mem_allocate_heap
 10598                        	xref	~~k_exec_get_current_process
 10599                        	xref	~~k_exec_throw_exception
 10600                        	xref	~~k_debug_strings
 10601                        	xref	~~k_debug_message
 10602                        	xref	~~k_debug_long
 10603                        	xref	~~k_debug_integer
 10604                        	xref	~~k_debug_pointer
 10605                        	xref	~~k_debug_char
 10606                        	xref	~~k_debug_string
 10607                        	xref	~~k_nodelist_foreach_data
 10608                        	xref	~~k_nodelist_add
 10609                        	xref	~~k_nodelist_create
 10610                        	xref	~~k_nodelist_init
 10611                        	xref	~~k_to_uppercase
 10612                        	xref	~~k_string_copy_string
 10613                        	xref	~~k_string_toString
 10614                        	xref	~~k_string_indexOf
 10615                        	xref	~~k_fxstring_equals
 10616                        	xref	~~k_fxstring_copy_string
 10617                        	xref	~~k_fxstring_add
 10618                        	xref	~~k_fxstring_addchar
 10619                        	xref	~~k_fxstring_reinit
 10620                        	xref	~~k_fxstring_new
 10621                        	xref	~~k_fxstring_init
 10622                        	xref	~~strtok
 10623                        	xref	~~strstr
 10624                        	xref	~~strlen
 10625                        	xref	~~strcpy
 10626                        	xref	~~strcmp
 10627                        	xref	~~strcat
 10628                        	xref	~~memset
 10629                        	udata
 10630                        ~~consoleBufferTemp
 10631 00:0000:              	ds	8064
 10632 00:1F80:              	ends
  Thu Dec  3 2020 22:25                                                Page 206


 10633                        	udata
 10634                        ~~consoleBuffer
 10635 00:1F80:              	ds	8064
 10636 00:3F00:              	ends
 10637                        	udata
 10638                        ~~consolespinctx
 10639 00:3F00:              	ds	6
 10640 00:3F06:              	ends
 10641                        	udata
 10642                        ~~_k_window_list
 10643 00:3F06:              	ds	3510
 10644 00:4CBC:              	ends
 10645                        	xref	~~EGAFONT
 10646                        	xref	~~_ctype
 10647                        	.sym	~~consoleWindowProc,~~consoleWindowProc,
                    78,2,0
 10648                        	.sym	~~k_set_background,~~k_set_background,65
                    ,2,0
 10649                        	.sym	~~k_scroll_screen,~~k_scroll_screen,65,2
                    ,0
 10650                        	.sym	~~consoleBufferTemp,~~consoleBufferTemp,
                    869,3,0,56,72
 10651                        	.sym	~~consoleBuffer,~~consoleBuffer,869,3,0,
                    56,72
 10652                        	.sym	~~tokentypeNames,~~tokentypeNames,1134,3
                    ,32,29
 10653                        	.sym	~~cursorCurrentColor,~~cursorCurrentColo
                    r,16,3,16
 10654                        	.sym	~~cursorFlashInterval,~~cursorFlashInter
                    val,16,3,16
 10655                        	.sym	~~consolespinctx,~~consolespinctx,10,3,4
                    8,60
 10656                        	.sym	~~consolespinner,~~consolespinner,110,3,
                    0,4
 10657                        	.sym	~~console_command_proc,~~console_command
                    _proc,5232,3,32,23
 10658                        	.sym	~~console_commands,~~console_commands,11
                    34,3,32,23
 10659                        	.sym	~~_k_window_list,~~_k_window_list,106,3,
                    0,30,10
 10660                        	.sym	~~_k_window_index,~~_k_window_index,5,3,
                    16
 10661                        	.sym	PFXDOSDEVICE,0,138,14,32,101
 10662                        	.sym	FXDOSDEVICE,0,10,14,5648,101
 10663                        	.sym	DOSINITDEVICE,0,641,14,32
 10664                        	.sym	DOSSECTORWRITER,0,654,14,32
 10665                        	.sym	DOSSECTORREADER,0,654,14,32
 10666                        	.sym	PIDENTIFY_DEVICE_DATA,0,138,14,32,100
 10667                        	.sym	IDENTIFY_DEVICE_DATA,0,10,14,4096,100
 10668                        	.sym	PIDSECTOR,0,138,14,32,77
 10669                        	.sym	IDSECTOR,0,10,14,2048,77
 10670                        	.sym	PLFN,0,138,14,32,76
 10671                        	.sym	LFN,0,10,14,256,76
 10672                        	.sym	PFAT16ENTRYLONG,0,138,14,32,75
 10673                        	.sym	FAT16ENTRYLONG,0,10,14,288,75
 10674                        	.sym	PFAT16ENTRY,0,138,14,32,74
 10675                        	.sym	FAT16ENTRY,0,10,14,256,74
 10676                        	.sym	Fat16BootSector,0,10,14,4096,73
  Thu Dec  3 2020 22:25                                                Page 207


 10677                        	.sym	PPARTITIONTABLE,0,138,14,32,72
 10678                        	.sym	PARTITIONTABLE,0,10,14,128,72
 10679                        	.sym	PFATBOOTSECTOR,0,138,14,32,71
 10680                        	.sym	FATBOOTSECTOR,0,10,14,928,71
 10681                        	.sym	fat_BS_t,0,10,14,688,70
 10682                        	.sym	fat_extBS_16_t,0,10,14,192,69
 10683                        	.sym	PFAT32EXT,0,138,14,32,68
 10684                        	.sym	fat_extBS_32_t,0,10,14,416,68
 10685                        	.sym	P_FX_FAT_DIR_INFO,0,138,14,32,67
 10686                        	.sym	FX_FAT_DIR_INFO,0,10,14,256,67
 10687                        	.sym	PFILEINFO,0,138,14,32,66
 10688                        	.sym	FILEINFO,0,10,14,136,66
 10689                        	.sym	PDISKINFO,0,138,14,32,65
 10690                        	.sym	DISKINFO,0,10,14,416,65
 10691                        	.sym	PDIRENTRY,0,138,14,32,64
 10692                        	.sym	DIRENTRY,0,10,14,256,64
 10693                        	.sym	~~cmd_LINEUP,~~cmd_LINEUP,80,18,0
 10694                        	.sym	~~cmd_RESUME,~~cmd_RESUME,80,18,0
 10695                        	.sym	~~cmd_PAUSE,~~cmd_PAUSE,80,18,0
 10696                        	.sym	~~cmd_TIME,~~cmd_TIME,80,18,0
 10697                        	.sym	~~cmd_EXIT,~~cmd_EXIT,80,18,0
 10698                        	.sym	~~cmd_START,~~cmd_START,80,18,0
 10699                        	.sym	~~cmd_Window,~~cmd_Window,80,18,0
 10700                        	.sym	~~cmd_SEND,~~cmd_SEND,80,18,0
 10701                        	.sym	~~cmd_DISPLAY,~~cmd_DISPLAY,80,18,0
 10702                        	.sym	~~cmd_CHRDIR,~~cmd_CHRDIR,80,18,0
 10703                        	.sym	~~cmd_TASKS,~~cmd_TASKS,80,18,0
 10704                        	.sym	~~cmd_BACK,~~cmd_BACK,80,18,0
 10705                        	.sym	~~cmd_FRONT,~~cmd_FRONT,80,18,0
 10706                        	.sym	~~cmd_NEWDIR,~~cmd_NEWDIR,80,18,0
 10707                        	.sym	~~cmd_INIT,~~cmd_INIT,80,18,0
 10708                        	.sym	~~cmd_BCOLOR,~~cmd_BCOLOR,80,18,0
 10709                        	.sym	~~cmd_FCOLOR,~~cmd_FCOLOR,80,18,0
 10710                        	.sym	~~cmd_VOL,~~cmd_VOL,80,18,0
 10711                        	.sym	~~cmd_DIR,~~cmd_DIR,80,18,0
 10712                        	.sym	~~cmd_TESTSD,~~cmd_TESTSD,80,18,0
 10713                        	.sym	~~cmd_WORKBENCH,~~cmd_WORKBENCH,80,18,0
 10714                        	.sym	~~cmd_CLEAR,~~cmd_CLEAR,80,18,0
 10715                        	.sym	~~getTokenSig,~~getTokenSig,65,2,0
 10716                        	.sym	~~sig_walk,~~sig_walk,65,2,0
 10717                        	.sym	~~newToken,~~newToken,1098,2,32,62
 10718                        	.sym	~~token_to_string,~~token_to_string,1102
                    ,2,32
 10719                        	.sym	~~tokenize,~~tokenize,1098,2,32,5
 10720                        	.sym	~~DefConsoleProc3,~~DefConsoleProc3,65,2
                    ,0
 10721                        	.sym	~~DefConsoleProc2,~~DefConsoleProc2,65,2
                    ,0
 10722                        	.sym	~~ObjectClicked,~~ObjectClicked,65,2,0
 10723                        	.sym	~~DefConsoleProc,~~DefConsoleProc,65,2,0
 10724                        	.sym	~~k_console_process_command,~~k_console_
                    process_command,65,2,0
 10725                        	.sym	~~k_create_text_window,~~k_create_text_w
                    indow,65,2,0
 10726                        	.sym	~~k_window_draw,~~k_window_draw,65,2,0
 10727                        	.sym	~~k_text_mode_dialog,~~k_text_mode_dialo
                    g,65,2,0
 10728                        	.sym	~~k_put_color,~~k_put_color,69,2,0
  Thu Dec  3 2020 22:25                                                Page 208


 10729                        	.sym	~~k_put_string_buffer,~~k_put_string_buf
                    fer,69,2,0
 10730                        	.sym	~~k_put_string,~~k_put_string,69,2,0
 10731                        	.sym	~~k_put_char,~~k_put_char,65,2,0
 10732                        	.sym	~~k_clear_screen,~~k_clear_screen,65,2,0
 10733                        	.sym	~~k_set_cursor_position,~~k_set_cursor_p
                    osition,65,2,0
 10734                        	.sym	~~k_enable_text_cursor,~~k_enable_text_c
                    ursor,65,2,0
 10735                        	.sym	~~k_set_text_font_page,~~k_set_text_font
                    _page,65,2,0
 10736                        	.sym	~~k_set_border_color,~~k_set_border_colo
                    r,65,2,0
 10737                        	.sym	~~k_disable_border,~~k_disable_border,65
                    ,2,0
 10738                        	.sym	~~k_enable_border,~~k_enable_border,65,2
                    ,0
 10739                        	.sym	~~k_initialize_text_fonts,~~k_initialize
                    _text_fonts,69,2,0
 10740                        	.sym	~~k_initialize_text,~~k_initialize_text,
                    65,2,0
 10741                        	.sym	~~k_updatespinner,~~k_updatespinner,65,2
                    ,0
 10742                        	.sym	~~k_init_spinner,~~k_init_spinner,65,2,0
 10743                        	.sym	PCOMMANDARGS,0,138,14,32,63
 10744                        	.sym	COMMANDARGS,0,10,14,64,63
 10745                        	.sym	PTOKENIZESTATE,0,133,14,32
 10746                        	.sym	TOKENIZESTATE,0,5,14,16
 10747                        	.sym	PTOKEN,0,138,14,32,62
 10748                        	.sym	TOKEN,0,10,14,64,62
 10749                        	.sym	PTOKENTYPE,0,133,14,32
 10750                        	.sym	TOKENTYPE,0,5,14,16
 10751                        	.sym	FXCommandHandler,0,656,14,32
 10752                        	.sym	PCONSOLECTX,0,138,14,32,61
 10753                        	.sym	CONSOLECTX,0,10,14,1144,61
 10754                        	.sym	PSPINNERCTX,0,138,14,32,60
 10755                        	.sym	SPINNERCTX,0,10,14,48,60
 10756                        	.sym	~~k_send_process_command_message,~~k_sen
                    d_process_command_message,78,18,0
 10757                        	.sym	~~k_send_message,~~k_send_message,78,18,
                    0
 10758                        	.sym	~~k_getKeyboardChar,~~k_getKeyboardChar,
                    78,18,0
 10759                        	.sym	PMOUSE_MSG_STATE,0,138,14,32,59
 10760                        	.sym	MOUSE_MSG_STATE,0,10,14,184,59
 10761                        	.sym	PFXEVENTPROCESS,0,138,14,32,58
 10762                        	.sym	FXEVENTPROCESS,0,10,14,64,58
 10763                        	.sym	FXEventProc,0,641,14,32
 10764                        	.sym	PMOUSEMSGDATA,0,138,14,32,57
 10765                        	.sym	MOUSEMSGDATA,0,10,14,64,57
 10766                        	.sym	MSGIRQ,0,5,14,16
 10767                        	.sym	MAINLOOPARGS,0,10,14,16,56
 10768                        	.sym	PEACHCHILD_MSG,0,138,14,32,55
 10769                        	.sym	EACHCHILD_MSG,0,10,14,64,55
 10770                        	.sym	~~k_create_ui_window_class,~~k_create_ui
                    _window_class,1098,18,32,30
 10771                        	.sym	~~k_add_window_hit_node,~~k_add_window_h
                    it_node,65,18,0
  Thu Dec  3 2020 22:25                                                Page 209


 10772                        	.sym	~~k_vdraw_ui_window,~~k_vdraw_ui_window,
                    65,18,0
 10773                        	.sym	~~k_put_winicon_point,~~k_put_winicon_po
                    int,69,18,0
 10774                        	.sym	~~k_window_draw_background,~~k_window_dr
                    aw_background,65,2,0
 10775                        	.sym	~~k_draw_text_point,~~k_draw_text_point,
                    69,18,0
 10776                        	.sym	~~k_put_font,~~k_put_font,65,18,0
 10777                        	.sym	~~setColors,~~setColors,65,18,0
 10778                        	.sym	~~k_get_lines_max,~~k_get_lines_max,69,2
                    ,0
 10779                        	.sym	~~k_get_lines_visible,~~k_get_lines_visi
                    ble,69,2,0
 10780                        	.sym	~~k_get_cols_per_line,~~k_get_cols_per_l
                    ine,69,2,0
 10781                        	.sym	~~k_get_cols_visible,~~k_get_cols_visibl
                    e,69,2,0
 10782                        	.sym	~~k_enable_text_mode,~~k_enable_text_mod
                    e,65,2,0
 10783                        	.sym	PCUR_PALETTE_MAP,0,138,14,32,54
 10784                        	.sym	CUR_PALETTE_MAP,0,10,14,400,54
 10785                        	.sym	PCLICKDETECTED,0,138,14,32,53
 10786                        	.sym	CLICKDETECTED,0,10,14,64,53
 10787                        	.sym	OBJECTCLICKED,0,641,14,32
 10788                        	.sym	~~EGAFONT,~~EGAFONT,110,18,0,0
 10789                        	.sym	~~k_mem_deallocate_heap,~~k_mem_dealloca
                    te_heap,65,18,0
 10790                        	.sym	~~k_mem_allocate_heap,~~k_mem_allocate_h
                    eap,1089,18,32
 10791                        	.sym	MemoryCallback,0,641,14,32
 10792                        	.sym	PFXMEMORYMAP,0,138,14,32,52
 10793                        	.sym	FXMEMORYMAP,0,10,14,2072,52
 10794                        	.sym	UMM_HEAP_INFO,0,10,14,256,51
 10795                        	.sym	~~k_exec_get_current_process,~~k_exec_ge
                    t_current_process,1098,18,32,20
 10796                        	.sym	~~k_exec_throw_exception,~~k_exec_throw_
                    exception,65,18,0
 10797                        	.sym	DEVICEDRIVER_COMMAND,0,656,14,32
 10798                        	.sym	DEVICEDRIVER_UNLOAD,0,654,14,32
 10799                        	.sym	DEVICEDRIVER_WRITE,0,656,14,32
 10800                        	.sym	DEVICEDRIVER_READ,0,656,14,32
 10801                        	.sym	DEVICEDRIVER_LOAD,0,654,14,32
 10802                        	.sym	PFX_BLOCK_DEVICE_DRIVER,0,138,14,32,50
 10803                        	.sym	FX_BLOCK_DEVICE_DRIVER,0,10,14,1448,50
 10804                        	.sym	PFX_DEVICE_DRIVER,0,138,14,32,49
 10805                        	.sym	FX_DEVICE_DRIVER,0,10,14,1416,49
 10806                        	.sym	~~k_debug_strings,~~k_debug_strings,65,1
                    8,0
 10807                        	.sym	~~k_debug_message,~~k_debug_message,65,1
                    8,0
 10808                        	.sym	~~k_debug_long,~~k_debug_long,65,18,0
 10809                        	.sym	~~k_debug_integer,~~k_debug_integer,65,1
                    8,0
 10810                        	.sym	~~k_debug_pointer,~~k_debug_pointer,65,1
                    8,0
 10811                        	.sym	~~k_debug_char,~~k_debug_char,65,18,0
 10812                        	.sym	~~k_debug_string,~~k_debug_string,65,18,
  Thu Dec  3 2020 22:25                                                Page 210


                    0
 10813                        	.sym	PDEBUGBYTEBITS,0,138,14,32,48
 10814                        	.sym	DEBUGBYTEBITS,0,10,14,8,48
 10815                        	.sym	PFXENVIRONMENT,0,138,14,32,47
 10816                        	.sym	FXENVIRONMENT,0,10,14,96,47
 10817                        	.sym	PFXZERPOPAGE,0,138,14,32,46
 10818                        	.sym	FXZERPOPAGE,0,10,14,448,46
 10819                        	.sym	KERNELTRAPCALL,0,641,14,32
 10820                        	.sym	~~k_nodelist_foreach_data,~~k_nodelist_f
                    oreach_data,65,18,0
 10821                        	.sym	FOREACHNODEUNTIL,0,654,14,32
 10822                        	.sym	FOREACHNODE,0,641,14,32
 10823                        	.sym	~~k_nodelist_add,~~k_nodelist_add,65,18,
                    0
 10824                        	.sym	~~k_nodelist_create,~~k_nodelist_create,
                    1098,18,32,5
 10825                        	.sym	~~k_nodelist_init,~~k_nodelist_init,1098
                    ,18,32,5
 10826                        	.sym	~~_ctype,~~_ctype,110,18,0,0
 10827                        	.sym	~~k_to_uppercase,~~k_to_uppercase,1102,1
                    8,32
 10828                        	.sym	~~k_string_copy_string,~~k_string_copy_s
                    tring,1102,18,32
 10829                        	.sym	~~k_string_toString,~~k_string_toString,
                    1102,18,32
 10830                        	.sym	~~k_string_indexOf,~~k_string_indexOf,69
                    ,18,0
 10831                        	.sym	~~k_fxstring_equals,~~k_fxstring_equals,
                    78,18,0
 10832                        	.sym	~~k_fxstring_copy_string,~~k_fxstring_co
                    py_string,1102,18,32
 10833                        	.sym	~~k_fxstring_add,~~k_fxstring_add,1102,1
                    8,32
 10834                        	.sym	~~k_fxstring_addchar,~~k_fxstring_addcha
                    r,1102,18,32
 10835                        	.sym	~~k_fxstring_reinit,~~k_fxstring_reinit,
                    1098,18,32,45
 10836                        	.sym	~~k_fxstring_new,~~k_fxstring_new,1098,1
                    8,32,45
 10837                        	.sym	~~k_fxstring_init,~~k_fxstring_init,1098
                    ,18,32,45
 10838                        	.sym	PFXSTRING,0,138,14,32,45
 10839                        	.sym	FXSTRING,0,10,14,64,45
 10840                        	.sym	PFXCOMBUFFER,0,138,14,32,44
 10841                        	.sym	FXCOMBUFFER,0,10,14,2080,44
 10842                        	.sym	PSUBMENULIST,0,138,14,32,43
 10843                        	.sym	SUBMENULIST,0,10,14,40,43
 10844                        	.sym	HSUBMENU,0,7,14,32
 10845                        	.sym	PSUBMENU,0,138,14,32,42
 10846                        	.sym	SUBMENU,0,10,14,64,42
 10847                        	.sym	MenuAction,0,641,14,32
 10848                        	.sym	PMENUANCHOR,0,138,14,32,41
 10849                        	.sym	MENUANCHOR,0,10,14,144,41
 10850                        	.sym	PTEXTBOX,0,138,14,32,40
 10851                        	.sym	TEXTBOX,0,10,14,144,40
 10852                        	.sym	PLISTBOX,0,138,14,32,39
 10853                        	.sym	LISTBOX,0,10,14,240,39
 10854                        	.sym	PSCROLLBAR,0,138,14,32,38
  Thu Dec  3 2020 22:25                                                Page 211


 10855                        	.sym	SCROLLBAR,0,10,14,192,38
 10856                        	.sym	PBUTTON,0,138,14,32,37
 10857                        	.sym	BUTTON,0,10,14,80,37
 10858                        	.sym	PMENUDROPDOWNDATA,0,138,14,32,36
 10859                        	.sym	MENUDROPDOWNDATA,0,10,14,3568,36
 10860                        	.sym	PMENUTAG,0,138,14,32,35
 10861                        	.sym	MENUTAG,0,10,14,112,35
 10862                        	.sym	PMENU,0,138,14,32,34
 10863                        	.sym	MENU,0,10,14,248,34
 10864                        	.sym	HMENURESOURCE,0,129,14,32
 10865                        	.sym	HTEXTBOX,0,7,14,32
 10866                        	.sym	PTEXTBOXX,0,138,14,32,33
 10867                        	.sym	TEXTBOXX,0,10,14,112,33
 10868                        	.sym	FONTMETRIC,0,10,14,32,32
 10869                        	.sym	TITLE,0,142,14,32
 10870                        	.sym	PHANDLE,0,1153,14,32
 10871                        	.sym	HANDLE,0,129,14,32
 10872                        	.sym	PWINDOWEX,0,138,14,32,31
 10873                        	.sym	WINDOWEX,0,10,14,2704,31
 10874                        	.sym	PWINDOW,0,138,14,32,30
 10875                        	.sym	WINDOW,0,10,14,2808,30
 10876                        	.sym	PDRAGDATA,0,138,14,32,29
 10877                        	.sym	DRAGDATA,0,10,14,136,29
 10878                        	.sym	PNCCLICKABLE,0,138,14,32,28
 10879                        	.sym	NCCLICKABLE,0,10,14,88,28
 10880                        	.sym	HCLICKABLE,0,7,14,32
 10881                        	.sym	PCLICKABLE,0,138,14,32,27
 10882                        	.sym	CLICKABLE,0,10,14,88,27
 10883                        	.sym	PWNDCLASS,0,138,14,32,26
 10884                        	.sym	WNDCLASS,0,10,14,256,26
 10885                        	.sym	HBRUSH,0,129,14,32
 10886                        	.sym	HCURSOR,0,129,14,32
 10887                        	.sym	HICON,0,129,14,32
 10888                        	.sym	HINSTANCE,0,129,14,32
 10889                        	.sym	FXWndProc,0,654,14,32
 10890                        	.sym	PRECT,0,138,14,32,25
 10891                        	.sym	RECT,0,10,14,64,25
 10892                        	.sym	PPOINT,0,138,14,32,24
 10893                        	.sym	POINT,0,10,14,32,24
 10894                        	.sym	PFXPROPERTY,0,138,14,32,22
 10895                        	.sym	FXPROPERTY,0,10,14,384,22
 10896                        	.sym	SCANCODE,0,14,14,8
 10897                        	.sym	KEYCODE,0,14,14,8
 10898                        	.sym	PFXPROCESSMESSAGE,0,138,14,32,21
 10899                        	.sym	FXPROCESSMESSAGE,0,10,14,112,21
 10900                        	.sym	PFXPROCESS,0,138,14,32,20
 10901                        	.sym	FXPROCESS,0,10,14,800,20
 10902                        	.sym	PDESKTOP_CONTROL,0,138,14,32,19
 10903                        	.sym	DESKTOP_CONTROL,0,10,14,392,19
 10904                        	.sym	PCONSOLE_CONTROL,0,138,14,32,18
 10905                        	.sym	CONSOLE_CONTROL,0,10,14,448,18
 10906                        	.sym	FXProcessProc,0,641,14,32
 10907                        	.sym	PFXCMDMESSAGE,0,138,14,32,17
 10908                        	.sym	FXCMDMESSAGE,0,10,14,304,17
 10909                        	.sym	PFXOSMESSAGE,0,138,14,32,16
 10910                        	.sym	FXOSMESSAGE,0,10,14,304,16
 10911                        	.sym	PINT_REGS,0,138,14,32,15
 10912                        	.sym	INT_REGS,0,10,14,104,15
  Thu Dec  3 2020 22:25                                                Page 212


 10913                        	.sym	TASK_STACK,0,10,14,32,14
 10914                        	.sym	TASK,0,10,14,48,13
 10915                        	.sym	PIRQDATA,0,138,14,32,12
 10916                        	.sym	IRQDATA,0,10,14,48,12
 10917                        	.sym	HMENU,0,129,14,32
 10918                        	.sym	HWND,0,129,14,32
 10919                        	.sym	MSGDATA,0,14,14,8
 10920                        	.sym	MSGDEST,0,18,14,32
 10921                        	.sym	MSGSRC,0,18,14,32
 10922                        	.sym	MSGTYPE,0,16,14,16
 10923                        	.sym	PROCESS_RESOURCE_LIST,0,138,14,32,6
 10924                        	.sym	PROCESS_TLS_LIST,0,138,14,32,6
 10925                        	.sym	SEMAPHORE_LIST,0,138,14,32,6
 10926                        	.sym	FILE_BLOCK_LIST,0,138,14,32,6
 10927                        	.sym	FILE_PATH_LIST,0,138,14,32,6
 10928                        	.sym	PROCEDURE_LIST,0,138,14,32,6
 10929                        	.sym	FILE_HANDLE,0,138,14,32,11
 10930                        	.sym	FILE_BLOCK,0,10,14,552,11
 10931                        	.sym	SEMAPHORE,0,10,14,16,10
 10932                        	.sym	PPROCESS_SIGNAL,0,138,14,32,9
 10933                        	.sym	PROCESS_SIGNAL,0,10,14,16,9
 10934                        	.sym	KRESULT,0,18,14,32
 10935                        	.sym	PKERNEL_ERROR,0,138,14,32,8
 10936                        	.sym	KERNEL_ERROR,0,10,14,32,8
 10937                        	.sym	PROCESS_STATUS,0,16,14,16
 10938                        	.sym	FILE_PATH_NAME,0,142,14,32
 10939                        	.sym	PROCESS_RESOURCE,0,129,14,32
 10940                        	.sym	PROCESS_TLS,0,129,14,32
 10941                        	.sym	PROCESS_CTX,0,129,14,32
 10942                        	.sym	USERID,0,16,14,16
 10943                        	.sym	PROCESS_ID,0,18,14,32
 10944                        	.sym	PROCESS_BANK,0,14,14,8
 10945                        	.sym	PFXQUEUE,0,138,14,32,7
 10946                        	.sym	FXQUEUE,0,10,14,80,7
 10947                        	.sym	PFXNODELIST,0,138,14,32,6
 10948                        	.sym	FXNODELIST,0,10,14,96,6
 10949                        	.sym	NodeListDeallocator,0,641,14,32
 10950                        	.sym	PFXNODE,0,138,14,32,5
 10951                        	.sym	FXNODE,0,10,14,384,5
 10952                        	.sym	PBYTEBITS,0,138,14,32,4
 10953                        	.sym	BYTEBITS,0,10,14,8,4
 10954                        	.sym	HCOLOR,0,129,14,32
 10955                        	.sym	HFONT,0,129,14,32
 10956                        	.sym	HDC,0,129,14,32
 10957                        	.sym	HPOINTER,0,129,14,32
 10958                        	.sym	uint32_t,0,18,14,32
 10959                        	.sym	uint8_t,0,14,14,8
 10960                        	.sym	PFAR,0,142,14,32
 10961                        	.sym	LPBOOL,0,142,14,32
 10962                        	.sym	BOOL,0,14,14,8
 10963                        	.sym	DWORD,0,18,14,32
 10964                        	.sym	ULONG,0,18,14,32
 10965                        	.sym	LPLONG,0,135,14,32
 10966                        	.sym	LONG,0,7,14,32
 10967                        	.sym	PUINT,0,144,14,32
 10968                        	.sym	USHORT,0,16,14,16
 10969                        	.sym	UINT,0,16,14,16
 10970                        	.sym	INT,0,5,14,16
  Thu Dec  3 2020 22:25                                                Page 213


 10971                        	.sym	WORD,0,5,14,16
 10972                        	.sym	PBYTE,0,142,14,32
 10973                        	.sym	BYTE,0,14,14,8
 10974                        	.sym	UCHAR,0,14,14,8
 10975                        	.sym	LPWCSTR,0,142,14,32
 10976                        	.sym	LPCSTR,0,142,14,32
 10977                        	.sym	LPSTR,0,142,14,32
 10978                        	.sym	LPCHAR,0,142,14,32
 10979                        	.sym	CHAR,0,14,14,8
 10980                        	.sym	LPVOID,0,129,14,32
 10981                        	.sym	VOID,0,1,14,32
 10982                        	.sym	ldiv_t,0,10,14,64,2
 10983                        	.sym	div_t,0,10,14,32,1
 10984                        	.sym	wctype_t,0,16,14,16
 10985                        	.sym	wint_t,0,16,14,16
 10986                        	.sym	wchar_t,0,14,14,8
 10987                        	.sym	ptrdiff_t,0,7,14,32
 10988                        	.sym	~~strtok,~~strtok,1102,18,32
 10989                        	.sym	~~strstr,~~strstr,1102,18,32
 10990                        	.sym	~~strlen,~~strlen,80,18,0
 10991                        	.sym	~~strcpy,~~strcpy,1102,18,32
 10992                        	.sym	~~strcmp,~~strcmp,69,18,0
 10993                        	.sym	~~strcat,~~strcat,1102,18,32
 10994                        	.sym	~~memset,~~memset,1089,18,32
 10995                        	.sym	Boolean_T,0,5,14,16
 10996                        	.sym	size_t,0,16,14,16
 10997                        	end


      Lines assembled: 10997
      Errors: 0
