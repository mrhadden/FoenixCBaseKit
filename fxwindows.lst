  Tue Oct  1 2019  1:02                                                Page 1


                     ***************************************
                     **      WDC 65C816 Macro Assembler   **
                     **                                   **
                     **     Version 3.49.1- Feb  6 2006    **
                     ***************************************

     1                        ;:ts=8
     2             00000001   R0	equ	1
     3             00000005   R1	equ	5
     4             00000009   R2	equ	9
     5             0000000D   R3	equ	13
     6                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxwindows.c",0
     7                        ;#include "fxwindows.h"
     8                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxwindows.h",0
     9                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxtypes.h",0
    10                        	.stag	_fx_bytebits,8,1
    11                        	.member	b7,0,14,17,1
    12                        	.member	b6,1,14,17,1
    13                        	.member	b5,2,14,17,1
    14                        	.member	b4,3,14,17,1
    15                        	.member	b3,4,14,17,1
    16                        	.member	b2,5,14,17,1
    17                        	.member	b1,6,14,17,1
    18                        	.member	b0,7,14,17,1
    19                        	.eos
    20                        	.stag	_fx_node,384,2
    21                        	.member	type,0,14,8,8
    22                        	.member	Reserved0,8,14,8,8
    23                        	.member	data,16,129,8,32
    24                        	.member	last,48,138,8,32,2
    25                        	.member	next,80,138,8,32,2
    26                        	.member	name,112,110,8,0,32
    27                        	.member	Reserved1,368,16,8,16
    28                        	.eos
    29                        	.stag	_fx_nodelist,96,3
    30                        	.member	listhead,0,138,8,32,2
    31                        	.member	listData,32,129,8,32
    32                        	.member	deallocator,64,641,8,32
    33                        	.eos
    34                        	.stag	_fx_queue,80,4
    35                        	.member	count,0,5,8,16
    36                        	.member	front,16,138,8,32,2
    37                        	.member	rear,48,138,8,32,2
    38                        	.eos
    39                        	.stag	_fx_process_signal,16,5
    40                        	.member	cbSize,0,16,8,16
    41                        	.eos
    42                        	.stag	_fx_semaphore,16,6
    43                        	.member	reserved,0,5,8,16
    44                        	.eos
    45                        	.stag	_fx_fileBlock,552,7
    46                        	.member	openCount,0,16,8,16
    47                        	.member	lockCount,16,16,8,16
    48                        	.member	dirty,32,14,8,8
    49                        	.member	fileBuffer,40,110,8,0,64
  Tue Oct  1 2019  1:02                                                Page 2


    50                        	.eos
    51                        	.stag	_fx_irq_data,48,8
    52                        	.member	line,0,5,8,16
    53                        	.member	keycode,16,142,8,32
    54                        	.eos
    55                        	.stag	_task,48,9
    56                        	.member	SPL,0,14,8,8
    57                        	.member	SPH,8,14,8,8
    58                        	.member	pstack,16,142,8,32
    59                        	.eos
    60                        	.stag	_task_stack,32,10
    61                        	.member	SS,0,142,8,32
    62                        	.eos
    63                        	.stag	int_regs,104,11
    64                        	.member	PB,0,14,8,8
    65                        	.member	PH,8,14,8,8
    66                        	.member	PL,16,14,8,8
    67                        	.member	PP,24,14,8,8
    68                        	.member	DB,32,14,8,8
    69                        	.member	DH,40,14,8,8
    70                        	.member	DL,48,14,8,8
    71                        	.member	AH,56,14,8,8
    72                        	.member	AL,64,14,8,8
    73                        	.member	XH,72,14,8,8
    74                        	.member	XL,80,14,8,8
    75                        	.member	YH,88,14,8,8
    76                        	.member	YL,96,14,8,8
    77                        	.eos
    78                        	.stag	_fx_eventMessage,304,12
    79                        	.member	src,0,18,8,32
    80                        	.member	dest,32,18,8,32
    81                        	.member	type,64,16,8,16
    82                        	.member	hwnd,80,129,8,32
    83                        	.member	pheap,112,129,8,32
    84                        	.member	msgTime,144,18,8,32
    85                        	.member	data,176,110,8,0,16
    86                        	.eos
    87                        	.stag	_fx_cmdMessage,304,13
    88                        	.member	src,0,18,8,32
    89                        	.member	dest,32,18,8,32
    90                        	.member	type,64,16,8,16
    91                        	.member	hwnd,80,129,8,32
    92                        	.member	pheap,112,129,8,32
    93                        	.member	msgTime,144,18,8,32
    94                        	.member	cmdCId,176,16,8,16
    95                        	.member	cmdMId,192,16,8,16
    96                        	.member	parameter1,208,18,8,32
    97                        	.member	parameter2,240,18,8,32
    98                        	.member	parameter3,272,18,8,32
    99                        	.eos
   100                        	.stag	_fx_console_ctl,448,14
   101                        	.member	maxCols,0,5,8,16
   102                        	.member	maxRows,16,5,8,16
   103                        	.member	curX,32,5,8,16
   104                        	.member	curY,48,5,8,16
   105                        	.member	fgColor,64,5,8,16
   106                        	.member	bgColor,80,5,8,16
   107                        	.member	mode,96,14,8,8
  Tue Oct  1 2019  1:02                                                Page 3


   108                        	.member	kbBuffer,104,101,8,0,16
   109                        	.member	screenBuffer,360,142,8,32
   110                        	.member	desktopMode,392,14,8,8
   111                        	.member	lastMouseButton,400,5,8,16
   112                        	.member	lastMouseX,416,5,8,16
   113                        	.member	lastMouseY,432,5,8,16
   114                        	.eos
   115                        	.stag	_fx_desktop_ctl,328,15
   116                        	.member	desktopMode,0,14,8,8
   117                        	.member	backgroundColor,8,5,8,16
   118                        	.member	foregroundColor,24,5,8,16
   119                        	.member	menuMode,40,5,8,16
   120                        	.member	lastMouseButton,56,5,8,16
   121                        	.member	lastMouseX,72,5,8,16
   122                        	.member	lastMouseY,88,5,8,16
   123                        	.member	currentDiskName,104,142,8,32
   124                        	.member	diskNodes,136,129,8,32
   125                        	.member	titleNodes,168,129,8,32
   126                        	.member	menuNodes,200,129,8,32
   127                        	.member	iconNodes,232,129,8,32
   128                        	.member	windowNodes,264,129,8,32
   129                        	.member	fontNodes,296,129,8,32
   130                        	.eos
   131                        	.stag	_fx_process,664,16
   132                        	.member	cbSize,0,5,8,16
   133                        	.member	procId,16,18,8,32
   134                        	.member	parentId,48,18,8,32
   135                        	.member	ctx,80,129,8,32
   136                        	.member	userId,112,16,8,16
   137                        	.member	status,128,16,8,16
   138                        	.member	foregroundActive,144,14,8,8
   139                        	.member	tls,152,1121,8,32,8
   140                        	.member	commandLine,408,142,8,32
   141                        	.member	semaphores,440,138,8,32,3
   142                        	.member	fileHandles,472,138,8,32,3
   143                        	.member	pathList,504,138,8,32,3
   144                        	.member	resources,536,138,8,32,3
   145                        	.member	consoleCtl,568,138,8,32,14
   146                        	.member	desktopCtl,600,138,8,32,15
   147                        	.member	execProc,632,641,8,32
   148                        	.eos
   149                        	.stag	_fxProcessMessage,112,17
   150                        	.member	src,0,18,8,32
   151                        	.member	dest,32,18,8,32
   152                        	.member	type,64,16,8,16
   153                        	.member	processInfo,80,138,8,32,16
   154                        	.eos
   155                        	.stag	_fx_property,384,18
   156                        	.member	name,0,110,8,0,16
   157                        	.member	value,128,110,8,0,32
   158                        	.eos
   159                        	.utag	_24bitPointer,32,19
   160                        	.member	address,0,142,11,32
   161                        	.member	bytes,0,110,11,0,4
   162                        	.eos
   163                        	.stag	_PointStruct,32,20
   164                        	.member	x,0,5,8,16
   165                        	.member	y,16,5,8,16
  Tue Oct  1 2019  1:02                                                Page 4


   166                        	.eos
   167                        	.stag	_RectStruct,64,21
   168                        	.member	x,0,5,8,16
   169                        	.member	y,16,5,8,16
   170                        	.member	width,32,5,8,16
   171                        	.member	height,48,5,8,16
   172                        	.eos
   173                        	.stag	_k_WindowClass,256,22
   174                        	.member	cbSize,0,16,8,16
   175                        	.member	style,16,16,8,16
   176                        	.member	pWndProc,32,654,8,32
   177                        	.member	hInstance,64,129,8,32
   178                        	.member	hIcon,96,129,8,32
   179                        	.member	hCursor,128,129,8,32
   180                        	.member	hbrBackground,160,129,8,32
   181                        	.member	lpszMenuName,192,142,8,32
   182                        	.member	lpszClassName,224,142,8,32
   183                        	.eos
   184                        	.stag	_k_WindowStruct,776,23
   185                        	.member	cbSize,0,16,8,16
   186                        	.member	style,16,18,8,32
   187                        	.member	win_id,48,5,8,16
   188                        	.member	win_x,64,5,8,16
   189                        	.member	win_y,80,5,8,16
   190                        	.member	win_width,96,5,8,16
   191                        	.member	win_height,112,5,8,16
   192                        	.member	clickable,128,129,8,32
   193                        	.member	win_title,160,110,8,0,32
   194                        	.member	win_class,416,110,8,0,16
   195                        	.member	procid,544,18,8,32
   196                        	.member	pWndClass,576,138,8,32,22
   197                        	.member	pParentWindow,608,129,8,32
   198                        	.member	hMenu,640,129,8,32
   199                        	.member	pChildWindows,672,138,8,32,3
   200                        	.member	pChildHitList,704,138,8,32,3
   201                        	.member	isVisible,736,14,8,8
   202                        	.member	windowData,744,129,8,32
   203                        	.eos
   204                        	.stag	_FontMetric,32,24
   205                        	.member	width,0,5,8,16
   206                        	.member	height,16,5,8,16
   207                        	.eos
   208                        	.stag	_ctl_Textbox,112,25
   209                        	.member	win_id,0,5,8,16
   210                        	.member	win_x,16,5,8,16
   211                        	.member	win_y,32,5,8,16
   212                        	.member	win_width,48,5,8,16
   213                        	.member	win_height,64,5,8,16
   214                        	.member	content,80,1166,8,32
   215                        	.eos
   216                        	.stag	_ClickableRect,80,26
   217                        	.member	area,0,10,8,64,21
   218                        	.member	enabled,64,14,8,8
   219                        	.member	depth,72,14,8,8
   220                        	.eos
   221                        	.stag	_MenuStruct,248,27
   222                        	.member	cx,0,5,8,16
   223                        	.member	cy,16,5,8,16
  Tue Oct  1 2019  1:02                                                Page 5


   224                        	.member	width,32,5,8,16
   225                        	.member	height,48,5,8,16
   226                        	.member	fcolor,64,14,8,8
   227                        	.member	bcolor,72,14,8,8
   228                        	.member	chromeLeft,80,14,8,8
   229                        	.member	chromeRight1,88,14,8,8
   230                        	.member	chromeRight2,96,14,8,8
   231                        	.member	itemId,104,16,8,16
   232                        	.member	pCaption,120,142,8,32
   233                        	.member	subMenus,152,138,8,32,3
   234                        	.member	pBackground,184,129,8,32
   235                        	.member	hWndOwner,216,129,8,32
   236                        	.eos
   237                        	.stag	fake28_,2896,28
   238                        	.member	pParent,0,138,8,32,23
   239                        	.member	rect,32,10,8,64,21
   240                        	.member	captions,96,1134,8,32,25
   241                        	.member	clickable,896,106,8,0,26,25
   242                        	.eos
   243                        	.stag	_fx_button_t,64,29
   244                        	.member	pCaption,0,142,8,32
   245                        	.member	data,32,129,8,32
   246                        	.eos
   247                        	.stag	_fx_menuAnchor_t,96,30
   248                        	.member	pCaption,0,142,8,32
   249                        	.member	renderLayoutX,32,16,8,16
   250                        	.member	renderLayoutY,48,16,8,16
   251                        	.member	data,64,129,8,32
   252                        	.eos
   253                        	.stag	_SubMenuStruct,64,31
   254                        	.member	caption,0,142,8,32
   255                        	.member	action,32,641,8,32
   256                        	.eos
   257                        	.stag	_SubMenuListStruct,40,32
   258                        	.member	cMenus,0,14,8,8
   259                        	.member	psubmenus,8,9354,8,32,31
   260                        	.eos
   261                        	.stag	_fx_ComBuffer,2080,33
   262                        	.member	cbSize,0,16,8,16
   263                        	.member	cbBuffer,16,16,8,16
   264                        	.member	buffer,32,110,8,0,256
   265                        	.eos
   266                        	.line	537
   267                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxwindows.h",5
   268                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxos.h",0
   269                        	.file	"G:\devtools\WDCTools\wdc\Tools\include\
                    stdlib.h",0
   270                        	.file	"G:\devtools\WDCTools\wdc\Tools\include\
                    stddef.h",0
   271                        	.line	88
   272                        	.file	"G:\devtools\WDCTools\wdc\Tools\include\
                    stdlib.h",43
   273                        	.stag	fake34_,32,34
   274                        	.member	quot,0,5,8,16
   275                        	.member	rem,16,5,8,16
   276                        	.eos
  Tue Oct  1 2019  1:02                                                Page 6


   277                        	.stag	fake35_,64,35
   278                        	.member	quot,0,7,8,32
   279                        	.member	rem,32,7,8,32
   280                        	.eos
   281                        	.stag	int_sqrt,32,36
   282                        	.member	sqrt,0,16,8,16
   283                        	.member	frac,16,16,8,16
   284                        	.eos
   285                        	.line	205
   286                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxos.h",4
   287                        	.file	"G:\devtools\WDCTools\wdc\Tools\include\
                    string.h",0
   288                        	.line	134
   289                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxos.h",5
   290                        	.file	"G:\devtools\WDCTools\wdc\Tools\include\
                    ctype.h",0
   291                        	.line	103
   292                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxos.h",6
   293                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxtypes.h",0
   294                        	.line	537
   295                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxos.h",8
   296                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxstringtable.h",0
   297                        	.line	89
   298                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxos.h",9
   299                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxc256.h",0
   300                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxtypes.h",0
   301                        	.line	537
   302                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxc256.h",5
   303                        	.line	812
   304                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxos.h",10
   305                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxkernel.h",0
   306                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxos.h",0
   307                        	.line	17
   308                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxkernel.h",5
   309                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxnode.h",0
   310                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxtypes.h",0
   311                        	.line	537
   312                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxnode.h",5
   313                        	.line	56
   314                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxkernel.h",6
  Tue Oct  1 2019  1:02                                                Page 7


   315                        	.stag	_fx_zero_page,352,37
   316                        	.member	fxos_mouse_byte_0,0,14,8,8
   317                        	.member	fxos_mouse_byte_1,8,14,8,8
   318                        	.member	fxos_mouse_byte_2,16,14,8,8
   319                        	.member	fxos_mouse_byte_t,24,14,8,8
   320                        	.member	fxos_mouse_byte_x_l,32,14,8,8
   321                        	.member	fxos_mouse_byte_x_h,40,14,8,8
   322                        	.member	fxos_mouse_byte_y_l,48,14,8,8
   323                        	.member	fxos_mouse_byte_y_h,56,14,8,8
   324                        	.member	fxos_key_byte_0,64,14,8,8
   325                        	.member	fxos_key_byte_1,72,14,8,8
   326                        	.member	fxos_key_byte_2,80,14,8,8
   327                        	.member	fxos_mouse_ctl,88,14,8,8
   328                        	.member	fxos_mouse_index,96,14,8,8
   329                        	.member	fxos_mouse_status,104,14,8,8
   330                        	.member	VersionMajor,112,16,8,16
   331                        	.member	VersionMinor,128,16,8,16
   332                        	.member	VersionRelease,144,16,8,16
   333                        	.member	topMemory,160,18,8,32
   334                        	.member	bottomMemory,192,18,8,32
   335                        	.member	availableMemory,224,18,8,32
   336                        	.member	availableMemoryK,256,18,8,32
   337                        	.member	availableHeapMemory,288,18,8,32
   338                        	.member	availableHeapMemoryK,320,18,8,32
   339                        	.eos
   340                        	.stag	_fx_environment,96,38
   341                        	.member	variables,0,142,8,32
   342                        	.member	reserved1,32,5,8,16
   343                        	.member	reserved2,48,5,8,16
   344                        	.member	reserved3,64,5,8,16
   345                        	.member	reserved4,80,5,8,16
   346                        	.eos
   347                        	.line	158
   348                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxos.h",11
   349                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxconsole.h",0
   350                        	.file	"G:\devtools\WDCTools\wdc\Tools\include\
                    string.h",0
   351                        	.line	134
   352                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxconsole.h",5
   353                        	.file	"G:\devtools\WDCTools\wdc\Tools\include\
                    stdlib.h",0
   354                        	.line	205
   355                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxconsole.h",6
   356                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxtypes.h",0
   357                        	.line	537
   358                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxconsole.h",7
   359                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxc256.h",0
   360                        	.line	812
   361                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxconsole.h",8
   362                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
  Tue Oct  1 2019  1:02                                                Page 8


                    space\FXOSv1\src\fxstring.h",0
   363                        	.file	"G:\devtools\WDCTools\wdc\Tools\include\
                    stdlib.h",0
   364                        	.line	205
   365                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxstring.h",5
   366                        	.file	"G:\devtools\WDCTools\wdc\Tools\include\
                    string.h",0
   367                        	.line	134
   368                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxstring.h",6
   369                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxtypes.h",0
   370                        	.line	537
   371                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxstring.h",7
   372                        	.stag	_fx_string,64,39
   373                        	.member	size,0,16,8,16
   374                        	.member	pos,16,16,8,16
   375                        	.member	buffer,32,142,8,32
   376                        	.eos
   377                        	.line	63
   378                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxconsole.h",9
   379                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxeventmanager.h",0
   380                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxos.h",0
   381                        	.line	17
   382                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxeventmanager.h",5
   383                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxexec.h",0
   384                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxtypes.h",0
   385                        	.line	537
   386                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxexec.h",5
   387                        	.line	47
   388                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxeventmanager.h",6
   389                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxnode.h",0
   390                        	.line	56
   391                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxeventmanager.h",7
   392                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxconsole.h",0
   393                        	.line	152
   394                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxeventmanager.h",8
   395                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxwindows.h",0
   396                        	.line	242
   397                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxeventmanager.h",9
   398                        	.stag	_fx_main_loopvars,16,40
   399                        	.member	dummy,0,5,8,16
  Tue Oct  1 2019  1:02                                                Page 9


   400                        	.eos
   401                        	.stag	_fxMouseMessageData,64,41
   402                        	.member	button1,0,14,8,8
   403                        	.member	button2,8,14,8,8
   404                        	.member	button3,16,14,8,8
   405                        	.member	button4,24,14,8,8
   406                        	.member	x,32,16,8,16
   407                        	.member	y,48,16,8,16
   408                        	.eos
   409                        	.stag	_fx_eventProcess,64,42
   410                        	.member	process,0,138,8,32,16
   411                        	.member	eventProc,32,641,8,32
   412                        	.eos
   413                        	.stag	_mouse_msg_state,184,43
   414                        	.member	lastEvent,0,18,8,32
   415                        	.member	buttonLeftDown,32,14,8,8
   416                        	.member	lastLeftDown,40,18,8,32
   417                        	.member	buttonRightDown,72,14,8,8
   418                        	.member	lastRightDown,80,18,8,32
   419                        	.member	buttonMiddleDown,112,14,8,8
   420                        	.member	lastMiddleDown,120,18,8,32
   421                        	.member	lastX,152,16,8,16
   422                        	.member	lastY,168,16,8,16
   423                        	.eos
   424                        	data
   425                        ~~_k_keyCodesSet:
   426 00:0000: 00 1B 31 32  	db	$0,$1B,$31,$32,$33,$34,$35,$36,$37,$38
       00:0004: 33 34 35 36 
       00:0008: 37 38 
   427 00:000A: 39 30 2D 3D  	db	$39,$30,$2D,$3D,$8,$9,$71,$77,$65,$72
       00:000E: 08 09 71 77 
       00:0012: 65 72 
   428 00:0014: 74 79 75 69  	db	$74,$79,$75,$69,$6F,$70,$5B,$5D,$D,$0
       00:0018: 6F 70 5B 5D 
       00:001C: 0D 00 
   429 00:001E: 61 73 64 66  	db	$61,$73,$64,$66,$67,$68,$6A,$6B,$6C,$3B
       00:0022: 67 68 6A 6B 
       00:0026: 6C 3B 
   430 00:0028: 27 60 00 5C  	db	$27,$60,$0,$5C,$7A,$78,$63,$76,$62,$6E
       00:002C: 7A 78 63 76 
       00:0030: 62 6E 
   431 00:0032: 6D 2C 2E 2F  	db	$6D,$2C,$2E,$2F,$0,$2A,$0,$20,$0,$0
       00:0036: 00 2A 00 20 
       00:003A: 00 00 
   432 00:003C: 00 00 00 00  	db	$0,$0,$0,$0,$0,$0,$0,$0,$0,$0
       00:0040: 00 00 00 00 
       00:0044: 00 00 
   433 00:0046: 00 37 38 39  	db	$0,$37,$38,$39,$2D,$34,$35,$36,$2B,$31
       00:004A: 2D 34 35 36 
       00:004E: 2B 31 
   434 00:0050: 32 33 30 2E  	db	$32,$33,$30,$2E,$0,$0,$0,$0,$0
       00:0054: 00 00 00 00 
       00:0058: 00 
   435 00:0059:              	ends
   436                        	data
   437                        ~~_k_keyCodesShiftSet:
   438 00:0059: 00 1B 21 40  	db	$0,$1B,$21,$40,$23,$24,$25,$5E,$26,$2A
       00:005D: 23 24 25 5E 
  Tue Oct  1 2019  1:02                                                Page 10


       00:0061: 26 2A 
   439 00:0063: 28 29 5F 2B  	db	$28,$29,$5F,$2B,$8,$9,$51,$57,$45,$52
       00:0067: 08 09 51 57 
       00:006B: 45 52 
   440 00:006D: 54 59 55 49  	db	$54,$59,$55,$49,$4F,$50,$7B,$7D,$D,$0
       00:0071: 4F 50 7B 7D 
       00:0075: 0D 00 
   441 00:0077: 41 53 44 46  	db	$41,$53,$44,$46,$47,$48,$4A,$4B,$4C,$3A
       00:007B: 47 48 4A 4B 
       00:007F: 4C 3A 
   442 00:0081: 22 7E 00 7C  	db	$22,$7E,$0,$7C,$5A,$58,$43,$56,$42,$4E
       00:0085: 5A 58 43 56 
       00:0089: 42 4E 
   443 00:008B: 4D 3C 3E 3F  	db	$4D,$3C,$3E,$3F,$0,$2A,$0,$20,$0,$0
       00:008F: 00 2A 00 20 
       00:0093: 00 00 
   444 00:0095: 00 00 00 00  	db	$0,$0,$0,$0,$0,$0,$0,$0,$0,$0
       00:0099: 00 00 00 00 
       00:009D: 00 00 
   445 00:009F: 00 37 38 39  	db	$0,$37,$38,$39,$2D,$34,$35,$36,$2B,$31
       00:00A3: 2D 34 35 36 
       00:00A7: 2B 31 
   446 00:00A9: 32 33 30 2E  	db	$32,$33,$30,$2E,$0,$0,$0,$0,$0
       00:00AD: 00 00 00 00 
       00:00B1: 00 
   447 00:00B2:              	ends
   448                        	data
   449                        ~~_k_keyCodesExtSet:
   450 00:00B2: 00           	db	$0
   451 00:00B3:              	ends
   452                        	.line	655
   453                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxconsole.h",10
   454                        	.stag	_fx_spinner_ctx,48,44
   455                        	.member	index,0,5,8,16
   456                        	.member	spinner,16,142,8,32
   457                        	.eos
   458                        	.stag	_fx_console_ctx,1144,45
   459                        	.member	lineBufferIndex,0,5,8,16
   460                        	.member	lineBuffer,16,110,8,0,128
   461                        	.member	isShifted,1040,14,8,8
   462                        	.member	userData,1048,129,8,32
   463                        	.member	screenBuffer,1080,129,8,32
   464                        	.member	Reserved1,1112,129,8,32
   465                        	.eos
   466                        	.stag	_token,64,46
   467                        	.member	type,0,5,8,16
   468                        	.member	depth,16,16,8,16
   469                        	.member	text,32,142,8,32
   470                        	.eos
   471                        	.stag	_command_args,64,47
   472                        	.member	proc,0,656,8,32
   473                        	.member	tokens,32,138,8,32,2
   474                        	.eos
   475                        	.line	152
   476                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxos.h",12
   477                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
  Tue Oct  1 2019  1:02                                                Page 11


                    space\FXOSv1\src\fxstring.h",0
   478                        	.line	63
   479                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxos.h",13
   480                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxnode.h",0
   481                        	.line	56
   482                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxos.h",14
   483                        	.line	17
   484                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxwindows.h",6
   485                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxmemorymanager.h",0
   486                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxos.h",0
   487                        	.line	17
   488                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxmemorymanager.h",5
   489                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\umm_malloc_cfg.h",0
   490                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxos_build_parameters.h",0
   491                        	.line	13
   492                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\umm_malloc_cfg.h",8
   493                        	.stag	UMM_HEAP_INFO_t,256,48
   494                        	.member	totalEntries,0,18,8,32
   495                        	.member	usedEntries,32,18,8,32
   496                        	.member	freeEntries,64,18,8,32
   497                        	.member	totalBlocks,96,18,8,32
   498                        	.member	usedBlocks,128,18,8,32
   499                        	.member	freeBlocks,160,18,8,32
   500                        	.member	maxFreeContiguousBlocks,192,18,8,32
   501                        	.member	blockSize,224,18,8,32
   502                        	.eos
   503                        	.line	199
   504                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxmemorymanager.h",6
   505                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\umm_malloc.h",0
   506                        	.line	22
   507                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxmemorymanager.h",7
   508                        	.stag	_fx_memory_map,2072,49
   509                        	.member	availableMemory,0,18,8,32
   510                        	.member	valid_segments,32,110,8,0,255
   511                        	.eos
   512                        	.line	35
   513                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxwindows.h",7
   514                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxeventmanager.h",0
   515                        	.line	655
   516                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxwindows.h",8
   517                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxgui.h",0
  Tue Oct  1 2019  1:02                                                Page 12


   518                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxfont.h",0
   519                        	.line	53
   520                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxgui.h",4
   521                        	.stag	_click_detected,64,50
   522                        	.member	window,0,138,8,32,23
   523                        	.member	handler,32,641,8,32
   524                        	.eos
   525                        	.stag	_current_palette_map,400,51
   526                        	.member	CUR_DESKTOP,0,5,8,16
   527                        	.member	CUR_BACKGROUND,16,5,8,16
   528                        	.member	CUR_FONT,32,5,8,16
   529                        	.member	CUR_SELECTED_FONT,48,5,8,16
   530                        	.member	CUR_HIGHLIGHT_COLOR,64,5,8,16
   531                        	.member	CUR_WINDOWFRAME,80,5,8,16
   532                        	.member	CUR_WINDOWBORDER,96,5,8,16
   533                        	.member	CUR_WINDOWSHADOW,112,5,8,16
   534                        	.member	CUR_MENU,128,5,8,16
   535                        	.member	CUR_GADGET,144,5,8,16
   536                        	.member	CUR_COLOR,160,101,8,0,15
   537                        	.eos
   538                        	.line	195
   539                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxwindows.h",9
   540                        	.stag	_childMessage_t,64,52
   541                        	.member	msgType,0,16,8,16
   542                        	.member	msgData,16,129,8,32
   543                        	.member	dataSize,48,16,8,16
   544                        	.eos
   545                        	.line	242
   546                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxwindows.c",1
   547                        ;#include "fxfont.h"
   548                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxfont.h",0
   549                        	.line	53
   550                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxwindows.c",2
   551                        ;#include <stdlib.h>
   552                        	.file	"G:\devtools\WDCTools\wdc\Tools\include\
                    stdlib.h",0
   553                        	.line	205
   554                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxwindows.c",3
   555                        ;
   556                        ;static PFXNODELIST _k_windowManager_WindowClassLi
                    st 	= NULL;
   557                        	data
   558                        ~~_k_windowManager_WindowClassList:
   559 00:00B3: 00 00 00 00  	dl	$0
   560 00:00B7:              	ends
   561                        ;static PFXNODELIST _k_windowManager_WindowObjectL
                    ist	= NULL;
   562                        	data
   563                        ~~_k_windowManager_WindowObjectList:
   564 00:00B7: 00 00 00 00  	dl	$0
   565 00:00BB:              	ends
  Tue Oct  1 2019  1:02                                                Page 13


   566                        ;static PFXNODELIST _k_windowManager_ObjectHitList
                    		= NULL;
   567                        	data
   568                        ~~_k_windowManager_ObjectHitList:
   569 00:00BB: 00 00 00 00  	dl	$0
   570 00:00BF:              	ends
   571                        ;static PFXNODELIST _k_windowManager_WindowMenuLis
                    t 		= NULL;
   572                        	data
   573                        ~~_k_windowManager_WindowMenuList:
   574 00:00BF: 00 00 00 00  	dl	$0
   575 00:00C3:              	ends
   576                        ;static PFXNODELIST _k_windowManager_IconList 	
                    		= NULL;
   577                        	data
   578                        ~~_k_windowManager_IconList:
   579 00:00C3: 00 00 00 00  	dl	$0
   580 00:00C7:              	ends
   581                        ;
   582                        ;
   583                        ;#pragma section CODE=WINMAN,offset $4:0000
   584                        WINMAN	section	offset $4:0000
   585 04:0000:              	ends
   586                        ;
   587                        ;
   588                        ;VOID k_deallocate_window_class(LPCSTR name,LPVOID
                     data)
   589                        ;{
   590                        	.line	15
   591                        	.line	16
   592                        	WINMAN
   593                        	xdef	~~k_deallocate_window_class
   594                        	func
   595                        	.function	16
   596                        ~~k_deallocate_window_class:
   597                        	longa	on
   598                        	longi	on
   599 04:0000: 3B           	tsc
   600 04:0001: 38           	sec
   601 04:0002: E9 00 00     	sbc	#L2
   602 04:0005: 1B           	tcs
   603 04:0006: 0B           	phd
   604 04:0007: 5B           	tcd
   605             00000004   name_0	set	4
   606             00000008   data_0	set	8
   607                        	.block	16
   608                        ;}
   609                        	.sym	name,4,142,6,32
   610                        	.sym	data,8,129,6,32
   611                        	.line	17
   612                        L5:
   613 04:0008: A5 02        	lda	<L2+2
   614 04:000A: 85 0A        	sta	<L2+2+8
   615 04:000C: A5 01        	lda	<L2+1
   616 04:000E: 85 09        	sta	<L2+1+8
   617 04:0010: 2B           	pld
   618 04:0011: 3B           	tsc
   619 04:0012: 18           	clc
  Tue Oct  1 2019  1:02                                                Page 14


   620 04:0013: 69 08 00     	adc	#L2+8
   621 04:0016: 1B           	tcs
   622 04:0017: 6B           	rtl
   623                        	.endblock	17
   624             00000000   L2	equ	0
   625             00000001   L3	equ	1
   626 04:0018:              	ends
   627                        	efunc
   628                        	.endfunc	17,1,0
   629                        	.line	17
   630                        ;
   631                        ;VOID k_deallocate_window_object(LPCSTR name,LPVOI
                    D data)
   632                        ;{
   633                        	.line	19
   634                        	.line	20
   635                        	WINMAN
   636                        	xdef	~~k_deallocate_window_object
   637                        	func
   638                        	.function	20
   639                        ~~k_deallocate_window_object:
   640                        	longa	on
   641                        	longi	on
   642 04:0018: 3B           	tsc
   643 04:0019: 38           	sec
   644 04:001A: E9 00 00     	sbc	#L6
   645 04:001D: 1B           	tcs
   646 04:001E: 0B           	phd
   647 04:001F: 5B           	tcd
   648             00000004   name_0	set	4
   649             00000008   data_0	set	8
   650                        	.block	20
   651                        ;}
   652                        	.sym	name,4,142,6,32
   653                        	.sym	data,8,129,6,32
   654                        	.line	21
   655                        L9:
   656 04:0020: A5 02        	lda	<L6+2
   657 04:0022: 85 0A        	sta	<L6+2+8
   658 04:0024: A5 01        	lda	<L6+1
   659 04:0026: 85 09        	sta	<L6+1+8
   660 04:0028: 2B           	pld
   661 04:0029: 3B           	tsc
   662 04:002A: 18           	clc
   663 04:002B: 69 08 00     	adc	#L6+8
   664 04:002E: 1B           	tcs
   665 04:002F: 6B           	rtl
   666                        	.endblock	21
   667             00000000   L6	equ	0
   668             00000001   L7	equ	1
   669 04:0030:              	ends
   670                        	efunc
   671                        	.endfunc	21,1,0
   672                        	.line	21
   673                        ;
   674                        ;VOID k_deallocate_menu_object(LPCSTR name,LPVOID 
                    data)
   675                        ;{
  Tue Oct  1 2019  1:02                                                Page 15


   676                        	.line	23
   677                        	.line	24
   678                        	WINMAN
   679                        	xdef	~~k_deallocate_menu_object
   680                        	func
   681                        	.function	24
   682                        ~~k_deallocate_menu_object:
   683                        	longa	on
   684                        	longi	on
   685 04:0030: 3B           	tsc
   686 04:0031: 38           	sec
   687 04:0032: E9 00 00     	sbc	#L10
   688 04:0035: 1B           	tcs
   689 04:0036: 0B           	phd
   690 04:0037: 5B           	tcd
   691             00000004   name_0	set	4
   692             00000008   data_0	set	8
   693                        	.block	24
   694                        ;}
   695                        	.sym	name,4,142,6,32
   696                        	.sym	data,8,129,6,32
   697                        	.line	25
   698                        L13:
   699 04:0038: A5 02        	lda	<L10+2
   700 04:003A: 85 0A        	sta	<L10+2+8
   701 04:003C: A5 01        	lda	<L10+1
   702 04:003E: 85 09        	sta	<L10+1+8
   703 04:0040: 2B           	pld
   704 04:0041: 3B           	tsc
   705 04:0042: 18           	clc
   706 04:0043: 69 08 00     	adc	#L10+8
   707 04:0046: 1B           	tcs
   708 04:0047: 6B           	rtl
   709                        	.endblock	25
   710             00000000   L10	equ	0
   711             00000001   L11	equ	1
   712 04:0048:              	ends
   713                        	efunc
   714                        	.endfunc	25,1,0
   715                        	.line	25
   716                        ;
   717                        ;VOID k_deallocate_icon_object(LPCSTR name,LPVOID 
                    data)
   718                        ;{
   719                        	.line	27
   720                        	.line	28
   721                        	WINMAN
   722                        	xdef	~~k_deallocate_icon_object
   723                        	func
   724                        	.function	28
   725                        ~~k_deallocate_icon_object:
   726                        	longa	on
   727                        	longi	on
   728 04:0048: 3B           	tsc
   729 04:0049: 38           	sec
   730 04:004A: E9 00 00     	sbc	#L14
   731 04:004D: 1B           	tcs
   732 04:004E: 0B           	phd
  Tue Oct  1 2019  1:02                                                Page 16


   733 04:004F: 5B           	tcd
   734             00000004   name_0	set	4
   735             00000008   data_0	set	8
   736                        	.block	28
   737                        ;}
   738                        	.sym	name,4,142,6,32
   739                        	.sym	data,8,129,6,32
   740                        	.line	29
   741                        L17:
   742 04:0050: A5 02        	lda	<L14+2
   743 04:0052: 85 0A        	sta	<L14+2+8
   744 04:0054: A5 01        	lda	<L14+1
   745 04:0056: 85 09        	sta	<L14+1+8
   746 04:0058: 2B           	pld
   747 04:0059: 3B           	tsc
   748 04:005A: 18           	clc
   749 04:005B: 69 08 00     	adc	#L14+8
   750 04:005E: 1B           	tcs
   751 04:005F: 6B           	rtl
   752                        	.endblock	29
   753             00000000   L14	equ	0
   754             00000001   L15	equ	1
   755 04:0060:              	ends
   756                        	efunc
   757                        	.endfunc	29,1,0
   758                        	.line	29
   759                        ;
   760                        ;VOID k_deallocate_hit_class(LPCSTR name,LPVOID da
                    ta)
   761                        ;{
   762                        	.line	31
   763                        	.line	32
   764                        	WINMAN
   765                        	xdef	~~k_deallocate_hit_class
   766                        	func
   767                        	.function	32
   768                        ~~k_deallocate_hit_class:
   769                        	longa	on
   770                        	longi	on
   771 04:0060: 3B           	tsc
   772 04:0061: 38           	sec
   773 04:0062: E9 00 00     	sbc	#L18
   774 04:0065: 1B           	tcs
   775 04:0066: 0B           	phd
   776 04:0067: 5B           	tcd
   777             00000004   name_0	set	4
   778             00000008   data_0	set	8
   779                        	.block	32
   780                        ;}
   781                        	.sym	name,4,142,6,32
   782                        	.sym	data,8,129,6,32
   783                        	.line	33
   784                        L21:
   785 04:0068: A5 02        	lda	<L18+2
   786 04:006A: 85 0A        	sta	<L18+2+8
   787 04:006C: A5 01        	lda	<L18+1
   788 04:006E: 85 09        	sta	<L18+1+8
   789 04:0070: 2B           	pld
  Tue Oct  1 2019  1:02                                                Page 17


   790 04:0071: 3B           	tsc
   791 04:0072: 18           	clc
   792 04:0073: 69 08 00     	adc	#L18+8
   793 04:0076: 1B           	tcs
   794 04:0077: 6B           	rtl
   795                        	.endblock	33
   796             00000000   L18	equ	0
   797             00000001   L19	equ	1
   798 04:0078:              	ends
   799                        	efunc
   800                        	.endfunc	33,1,0
   801                        	.line	33
   802                        ;
   803                        ;VOID k_deallocate_menu_resource(LPCSTR name,LPVOI
                    D data)
   804                        ;{
   805                        	.line	35
   806                        	.line	36
   807                        	WINMAN
   808                        	xdef	~~k_deallocate_menu_resource
   809                        	func
   810                        	.function	36
   811                        ~~k_deallocate_menu_resource:
   812                        	longa	on
   813                        	longi	on
   814 04:0078: 3B           	tsc
   815 04:0079: 38           	sec
   816 04:007A: E9 00 00     	sbc	#L22
   817 04:007D: 1B           	tcs
   818 04:007E: 0B           	phd
   819 04:007F: 5B           	tcd
   820             00000004   name_0	set	4
   821             00000008   data_0	set	8
   822                        	.block	36
   823                        ;
   824                        ;}
   825                        	.sym	name,4,142,6,32
   826                        	.sym	data,8,129,6,32
   827                        	.line	38
   828                        L25:
   829 04:0080: A5 02        	lda	<L22+2
   830 04:0082: 85 0A        	sta	<L22+2+8
   831 04:0084: A5 01        	lda	<L22+1
   832 04:0086: 85 09        	sta	<L22+1+8
   833 04:0088: 2B           	pld
   834 04:0089: 3B           	tsc
   835 04:008A: 18           	clc
   836 04:008B: 69 08 00     	adc	#L22+8
   837 04:008E: 1B           	tcs
   838 04:008F: 6B           	rtl
   839                        	.endblock	38
   840             00000000   L22	equ	0
   841             00000001   L23	equ	1
   842 04:0090:              	ends
   843                        	efunc
   844                        	.endfunc	38,1,0
   845                        	.line	38
   846                        ;
  Tue Oct  1 2019  1:02                                                Page 18


   847                        ;
   848                        ;BOOL k_initializeWindowManager(void)
   849                        ;{
   850                        	.line	41
   851                        	.line	42
   852                        	WINMAN
   853                        	xdef	~~k_initializeWindowManager
   854                        	func
   855                        	.function	42
   856                        ~~k_initializeWindowManager:
   857                        	longa	on
   858                        	longi	on
   859 04:0090: 3B           	tsc
   860 04:0091: 38           	sec
   861 04:0092: E9 00 00     	sbc	#L26
   862 04:0095: 1B           	tcs
   863 04:0096: 0B           	phd
   864 04:0097: 5B           	tcd
   865                        	.block	42
   866                        ;	k_debug_string("k_initializeWindowManager\r\n");
   867                        	.line	43
   868 04:0098: F4 xx xx     	pea	#^L1
   869 04:009B: F4 xx xx     	pea	#<L1
   870 04:009E: 22 xx xx xx  	jsl	~~k_debug_string
   871                        ;
   872                        ;	_k_windowManager_WindowClassList 	= k_node
                    list_allocate_list("_window_class_list" ,k_deallocate_window
                    _class);
   873                        	.line	45
   874 04:00A2: F4 04 00     	pea	#^~~k_deallocate_window_class
   875 04:00A5: F4 00 00     	pea	#<~~k_deallocate_window_class
   876 04:00A8: F4 xx xx     	pea	#^L1+28
   877 04:00AB: F4 xx xx     	pea	#<L1+28
   878 04:00AE: 22 xx xx xx  	jsl	~~k_nodelist_allocate_list
   879 04:00B2: 8D xx xx     	sta	|~~_k_windowManager_WindowClassList
   880 04:00B5: 8E xx xx     	stx	|~~_k_windowManager_WindowClassList+2
   881                        ;	_k_windowManager_WindowObjectList   = k_nodelist
                    _allocate_list("_window_object_list",k_deallocate_window_obj
                    ect);
   882                        	.line	46
   883 04:00B8: F4 04 00     	pea	#^~~k_deallocate_window_object
   884 04:00BB: F4 18 00     	pea	#<~~k_deallocate_window_object
   885 04:00BE: F4 xx xx     	pea	#^L1+47
   886 04:00C1: F4 xx xx     	pea	#<L1+47
   887 04:00C4: 22 xx xx xx  	jsl	~~k_nodelist_allocate_list
   888 04:00C8: 8D xx xx     	sta	|~~_k_windowManager_WindowObjectList
   889 04:00CB: 8E xx xx     	stx	|~~_k_windowManager_WindowObjectList+2
   890                        ;	_k_windowManager_WindowMenuList 	= k_node
                    list_allocate_list("_window_menu_list"  ,k_deallocate_menu_o
                    bject);
   891                        	.line	47
   892 04:00CE: F4 04 00     	pea	#^~~k_deallocate_menu_object
   893 04:00D1: F4 30 00     	pea	#<~~k_deallocate_menu_object
   894 04:00D4: F4 xx xx     	pea	#^L1+67
   895 04:00D7: F4 xx xx     	pea	#<L1+67
   896 04:00DA: 22 xx xx xx  	jsl	~~k_nodelist_allocate_list
   897 04:00DE: 8D xx xx     	sta	|~~_k_windowManager_WindowMenuList
   898 04:00E1: 8E xx xx     	stx	|~~_k_windowManager_WindowMenuList+2
  Tue Oct  1 2019  1:02                                                Page 19


   899                        ;	_k_windowManager_IconList  		 	
                    = k_nodelist_allocate_list("_window_icon_list"  ,k_deallocat
                    e_icon_object);
   900                        	.line	48
   901 04:00E4: F4 04 00     	pea	#^~~k_deallocate_icon_object
   902 04:00E7: F4 48 00     	pea	#<~~k_deallocate_icon_object
   903 04:00EA: F4 xx xx     	pea	#^L1+85
   904 04:00ED: F4 xx xx     	pea	#<L1+85
   905 04:00F0: 22 xx xx xx  	jsl	~~k_nodelist_allocate_list
   906 04:00F4: 8D xx xx     	sta	|~~_k_windowManager_IconList
   907 04:00F7: 8E xx xx     	stx	|~~_k_windowManager_IconList+2
   908                        ;	_k_windowManager_ObjectHitList		= k_node
                    list_allocate_list("_object_hit_list"  ,k_deallocate_hit_cla
                    ss);
   909                        	.line	49
   910 04:00FA: F4 04 00     	pea	#^~~k_deallocate_hit_class
   911 04:00FD: F4 60 00     	pea	#<~~k_deallocate_hit_class
   912 04:0100: F4 xx xx     	pea	#^L1+103
   913 04:0103: F4 xx xx     	pea	#<L1+103
   914 04:0106: 22 xx xx xx  	jsl	~~k_nodelist_allocate_list
   915 04:010A: 8D xx xx     	sta	|~~_k_windowManager_ObjectHitList
   916 04:010D: 8E xx xx     	stx	|~~_k_windowManager_ObjectHitList+2
   917                        ;
   918                        ;
   919                        ;	k_user_CreateWindowClass("menuWindowClass",NULL,
                    0,NULL,NULL,NULL,menuWindowProc);
   920                        	.line	52
   921 04:0110: F4 04 00     	pea	#^~~menuWindowProc
   922 04:0113: F4 24 0B     	pea	#<~~menuWindowProc
   923 04:0116: F4 00 00     	pea	#^$0
   924 04:0119: F4 00 00     	pea	#<$0
   925 04:011C: F4 00 00     	pea	#^$0
   926 04:011F: F4 00 00     	pea	#<$0
   927 04:0122: F4 00 00     	pea	#^$0
   928 04:0125: F4 00 00     	pea	#<$0
   929 04:0128: F4 00 00     	pea	#<$0
   930 04:012B: F4 00 00     	pea	#^$0
   931 04:012E: F4 00 00     	pea	#<$0
   932 04:0131: F4 xx xx     	pea	#^L1+120
   933 04:0134: F4 xx xx     	pea	#<L1+120
   934 04:0137: 22 C8 03 04  	jsl	~~k_user_CreateWindowClass
   935                        ;	k_heap_integrity_check();
   936                        	.line	53
   937 04:013B: 22 xx xx xx  	jsl	~~k_heap_integrity_check
   938                        ;	k_user_CreateWindowClass("gadgetWindowClass",NUL
                    L,0,NULL,NULL,NULL,gadgetWindowProc);
   939                        	.line	54
   940 04:013F: F4 04 00     	pea	#^~~gadgetWindowProc
   941 04:0142: F4 9C 27     	pea	#<~~gadgetWindowProc
   942 04:0145: F4 00 00     	pea	#^$0
   943 04:0148: F4 00 00     	pea	#<$0
   944 04:014B: F4 00 00     	pea	#^$0
   945 04:014E: F4 00 00     	pea	#<$0
   946 04:0151: F4 00 00     	pea	#^$0
   947 04:0154: F4 00 00     	pea	#<$0
   948 04:0157: F4 00 00     	pea	#<$0
   949 04:015A: F4 00 00     	pea	#^$0
   950 04:015D: F4 00 00     	pea	#<$0
  Tue Oct  1 2019  1:02                                                Page 20


   951 04:0160: F4 xx xx     	pea	#^L1+136
   952 04:0163: F4 xx xx     	pea	#<L1+136
   953 04:0166: 22 C8 03 04  	jsl	~~k_user_CreateWindowClass
   954                        ;	k_heap_integrity_check();
   955                        	.line	55
   956 04:016A: 22 xx xx xx  	jsl	~~k_heap_integrity_check
   957                        ;	k_user_CreateWindowClass("buttonWindowClass",NUL
                    L,0,NULL,NULL,NULL,buttonWindowProc);
   958                        	.line	56
   959 04:016E: F4 04 00     	pea	#^~~buttonWindowProc
   960 04:0171: F4 11 15     	pea	#<~~buttonWindowProc
   961 04:0174: F4 00 00     	pea	#^$0
   962 04:0177: F4 00 00     	pea	#<$0
   963 04:017A: F4 00 00     	pea	#^$0
   964 04:017D: F4 00 00     	pea	#<$0
   965 04:0180: F4 00 00     	pea	#^$0
   966 04:0183: F4 00 00     	pea	#<$0
   967 04:0186: F4 00 00     	pea	#<$0
   968 04:0189: F4 00 00     	pea	#^$0
   969 04:018C: F4 00 00     	pea	#<$0
   970 04:018F: F4 xx xx     	pea	#^L1+154
   971 04:0192: F4 xx xx     	pea	#<L1+154
   972 04:0195: 22 C8 03 04  	jsl	~~k_user_CreateWindowClass
   973                        ;	k_heap_integrity_check();
   974                        	.line	57
   975 04:0199: 22 xx xx xx  	jsl	~~k_heap_integrity_check
   976                        ;	k_user_CreateWindowClass("menuAnchorWindowClass"
                    ,NULL,0,NULL,NULL,NULL,menuAnchorWindowProc);
   977                        	.line	58
   978 04:019D: F4 04 00     	pea	#^~~menuAnchorWindowProc
   979 04:01A0: F4 0A 10     	pea	#<~~menuAnchorWindowProc
   980 04:01A3: F4 00 00     	pea	#^$0
   981 04:01A6: F4 00 00     	pea	#<$0
   982 04:01A9: F4 00 00     	pea	#^$0
   983 04:01AC: F4 00 00     	pea	#<$0
   984 04:01AF: F4 00 00     	pea	#^$0
   985 04:01B2: F4 00 00     	pea	#<$0
   986 04:01B5: F4 00 00     	pea	#<$0
   987 04:01B8: F4 00 00     	pea	#^$0
   988 04:01BB: F4 00 00     	pea	#<$0
   989 04:01BE: F4 xx xx     	pea	#^L1+172
   990 04:01C1: F4 xx xx     	pea	#<L1+172
   991 04:01C4: 22 C8 03 04  	jsl	~~k_user_CreateWindowClass
   992                        ;	k_heap_integrity_check();
   993                        	.line	59
   994 04:01C8: 22 xx xx xx  	jsl	~~k_heap_integrity_check
   995                        ;	k_user_CreateWindowClass("menuDropDownWindowClas
                    s",NULL,0,NULL,NULL,NULL,menuDropDownWindowProc);
   996                        	.line	60
   997 04:01CC: F4 04 00     	pea	#^~~menuDropDownWindowProc
   998 04:01CF: F4 0B 1E     	pea	#<~~menuDropDownWindowProc
   999 04:01D2: F4 00 00     	pea	#^$0
  1000 04:01D5: F4 00 00     	pea	#<$0
  1001 04:01D8: F4 00 00     	pea	#^$0
  1002 04:01DB: F4 00 00     	pea	#<$0
  1003 04:01DE: F4 00 00     	pea	#^$0
  1004 04:01E1: F4 00 00     	pea	#<$0
  1005 04:01E4: F4 00 00     	pea	#<$0
  Tue Oct  1 2019  1:02                                                Page 21


  1006 04:01E7: F4 00 00     	pea	#^$0
  1007 04:01EA: F4 00 00     	pea	#<$0
  1008 04:01ED: F4 xx xx     	pea	#^L1+194
  1009 04:01F0: F4 xx xx     	pea	#<L1+194
  1010 04:01F3: 22 C8 03 04  	jsl	~~k_user_CreateWindowClass
  1011                        ;	k_heap_integrity_check();
  1012                        	.line	61
  1013 04:01F7: 22 xx xx xx  	jsl	~~k_heap_integrity_check
  1014                        ;	k_user_CreateWindowClass("menuItemWindowClass",N
                    ULL,0,NULL,NULL,NULL,menuItemWindowProc);
  1015                        	.line	62
  1016 04:01FB: F4 04 00     	pea	#^~~menuItemWindowProc
  1017 04:01FE: F4 BB 1B     	pea	#<~~menuItemWindowProc
  1018 04:0201: F4 00 00     	pea	#^$0
  1019 04:0204: F4 00 00     	pea	#<$0
  1020 04:0207: F4 00 00     	pea	#^$0
  1021 04:020A: F4 00 00     	pea	#<$0
  1022 04:020D: F4 00 00     	pea	#^$0
  1023 04:0210: F4 00 00     	pea	#<$0
  1024 04:0213: F4 00 00     	pea	#<$0
  1025 04:0216: F4 00 00     	pea	#^$0
  1026 04:0219: F4 00 00     	pea	#<$0
  1027 04:021C: F4 xx xx     	pea	#^L1+218
  1028 04:021F: F4 xx xx     	pea	#<L1+218
  1029 04:0222: 22 C8 03 04  	jsl	~~k_user_CreateWindowClass
  1030                        ;	k_heap_integrity_check();
  1031                        	.line	63
  1032 04:0226: 22 xx xx xx  	jsl	~~k_heap_integrity_check
  1033                        ;
  1034                        ;	k_user_CreateWindowClass("dialogWindowClass",NUL
                    L,0,NULL,NULL,NULL,DlgWindowProc);
  1035                        	.line	65
  1036 04:022A: F4 04 00     	pea	#^~~DlgWindowProc
  1037 04:022D: F4 12 2C     	pea	#<~~DlgWindowProc
  1038 04:0230: F4 00 00     	pea	#^$0
  1039 04:0233: F4 00 00     	pea	#<$0
  1040 04:0236: F4 00 00     	pea	#^$0
  1041 04:0239: F4 00 00     	pea	#<$0
  1042 04:023C: F4 00 00     	pea	#^$0
  1043 04:023F: F4 00 00     	pea	#<$0
  1044 04:0242: F4 00 00     	pea	#<$0
  1045 04:0245: F4 00 00     	pea	#^$0
  1046 04:0248: F4 00 00     	pea	#<$0
  1047 04:024B: F4 xx xx     	pea	#^L1+238
  1048 04:024E: F4 xx xx     	pea	#<L1+238
  1049 04:0251: 22 C8 03 04  	jsl	~~k_user_CreateWindowClass
  1050                        ;
  1051                        ;
  1052                        ;	return TRUE;
  1053                        	.line	68
  1054 04:0255: A9 01 00     	lda	#$1
  1055                        L29:
  1056 04:0258: A8           	tay
  1057 04:0259: 2B           	pld
  1058 04:025A: 3B           	tsc
  1059 04:025B: 18           	clc
  1060 04:025C: 69 00 00     	adc	#L26
  1061 04:025F: 1B           	tcs
  Tue Oct  1 2019  1:02                                                Page 22


  1062 04:0260: 98           	tya
  1063 04:0261: 6B           	rtl
  1064                        ;}
  1065                        	.line	69
  1066                        	.endblock	69
  1067             00000000   L26	equ	0
  1068             00000001   L27	equ	1
  1069 04:0262:              	ends
  1070                        	efunc
  1071                        	.endfunc	69,1,0
  1072                        	.line	69
  1073                        	data
  1074                        L1:
  1075 00:00C7: 6B 5F 69 6E  	db	$6B,$5F,$69,$6E,$69,$74,$69,$61,$6C,$69,
                    $7A,$65,$57,$69,$6E
       00:00CB: 69 74 69 61 
       00:00CF: 6C 69 7A 65 
       00:00D3: 57 69 6E 
  1076 00:00D6: 64 6F 77 4D  	db	$64,$6F,$77,$4D,$61,$6E,$61,$67,$65,$72,
                    $0D,$0A,$00,$5F,$77
       00:00DA: 61 6E 61 67 
       00:00DE: 65 72 0D 0A 
       00:00E2: 00 5F 77 
  1077 00:00E5: 69 6E 64 6F  	db	$69,$6E,$64,$6F,$77,$5F,$63,$6C,$61,$73,
                    $73,$5F,$6C,$69,$73
       00:00E9: 77 5F 63 6C 
       00:00ED: 61 73 73 5F 
       00:00F1: 6C 69 73 
  1078 00:00F4: 74 00 5F 77  	db	$74,$00,$5F,$77,$69,$6E,$64,$6F,$77,$5F,
                    $6F,$62,$6A,$65,$63
       00:00F8: 69 6E 64 6F 
       00:00FC: 77 5F 6F 62 
       00:0100: 6A 65 63 
  1079 00:0103: 74 5F 6C 69  	db	$74,$5F,$6C,$69,$73,$74,$00,$5F,$77,$69,
                    $6E,$64,$6F,$77,$5F
       00:0107: 73 74 00 5F 
       00:010B: 77 69 6E 64 
       00:010F: 6F 77 5F 
  1080 00:0112: 6D 65 6E 75  	db	$6D,$65,$6E,$75,$5F,$6C,$69,$73,$74,$00,
                    $5F,$77,$69,$6E,$64
       00:0116: 5F 6C 69 73 
       00:011A: 74 00 5F 77 
       00:011E: 69 6E 64 
  1081 00:0121: 6F 77 5F 69  	db	$6F,$77,$5F,$69,$63,$6F,$6E,$5F,$6C,$69,
                    $73,$74,$00,$5F,$6F
       00:0125: 63 6F 6E 5F 
       00:0129: 6C 69 73 74 
       00:012D: 00 5F 6F 
  1082 00:0130: 62 6A 65 63  	db	$62,$6A,$65,$63,$74,$5F,$68,$69,$74,$5F,
                    $6C,$69,$73,$74,$00
       00:0134: 74 5F 68 69 
       00:0138: 74 5F 6C 69 
       00:013C: 73 74 00 
  1083 00:013F: 6D 65 6E 75  	db	$6D,$65,$6E,$75,$57,$69,$6E,$64,$6F,$77,
                    $43,$6C,$61,$73,$73
       00:0143: 57 69 6E 64 
       00:0147: 6F 77 43 6C 
       00:014B: 61 73 73 
  Tue Oct  1 2019  1:02                                                Page 23


  1084 00:014E: 00 67 61 64  	db	$00,$67,$61,$64,$67,$65,$74,$57,$69,$6E,
                    $64,$6F,$77,$43,$6C
       00:0152: 67 65 74 57 
       00:0156: 69 6E 64 6F 
       00:015A: 77 43 6C 
  1085 00:015D: 61 73 73 00  	db	$61,$73,$73,$00,$62,$75,$74,$74,$6F,$6E,
                    $57,$69,$6E,$64,$6F
       00:0161: 62 75 74 74 
       00:0165: 6F 6E 57 69 
       00:0169: 6E 64 6F 
  1086 00:016C: 77 43 6C 61  	db	$77,$43,$6C,$61,$73,$73,$00,$6D,$65,$6E,
                    $75,$41,$6E,$63,$68
       00:0170: 73 73 00 6D 
       00:0174: 65 6E 75 41 
       00:0178: 6E 63 68 
  1087 00:017B: 6F 72 57 69  	db	$6F,$72,$57,$69,$6E,$64,$6F,$77,$43,$6C,
                    $61,$73,$73,$00,$6D
       00:017F: 6E 64 6F 77 
       00:0183: 43 6C 61 73 
       00:0187: 73 00 6D 
  1088 00:018A: 65 6E 75 44  	db	$65,$6E,$75,$44,$72,$6F,$70,$44,$6F,$77,
                    $6E,$57,$69,$6E,$64
       00:018E: 72 6F 70 44 
       00:0192: 6F 77 6E 57 
       00:0196: 69 6E 64 
  1089 00:0199: 6F 77 43 6C  	db	$6F,$77,$43,$6C,$61,$73,$73,$00,$6D,$65,
                    $6E,$75,$49,$74,$65
       00:019D: 61 73 73 00 
       00:01A1: 6D 65 6E 75 
       00:01A5: 49 74 65 
  1090 00:01A8: 6D 57 69 6E  	db	$6D,$57,$69,$6E,$64,$6F,$77,$43,$6C,$61,
                    $73,$73,$00,$64,$69
       00:01AC: 64 6F 77 43 
       00:01B0: 6C 61 73 73 
       00:01B4: 00 64 69 
  1091 00:01B7: 61 6C 6F 67  	db	$61,$6C,$6F,$67,$57,$69,$6E,$64,$6F,$77,
                    $43,$6C,$61,$73,$73
       00:01BB: 57 69 6E 64 
       00:01BF: 6F 77 43 6C 
       00:01C3: 61 73 73 
  1092 00:01C6: 00           	db	$00
  1093 00:01C7:              	ends
  1094                        ;
  1095                        ;BOOL find_window_caption(LPVOID ctx,LPVOID data)
  1096                        ;{
  1097                        	.line	71
  1098                        	.line	72
  1099                        	WINMAN
  1100                        	xdef	~~find_window_caption
  1101                        	func
  1102                        	.function	72
  1103                        ~~find_window_caption:
  1104                        	longa	on
  1105                        	longi	on
  1106 04:0262: 3B           	tsc
  1107 04:0263: 38           	sec
  1108 04:0264: E9 08 00     	sbc	#L31
  1109 04:0267: 1B           	tcs
  Tue Oct  1 2019  1:02                                                Page 24


  1110 04:0268: 0B           	phd
  1111 04:0269: 5B           	tcd
  1112             00000004   ctx_0	set	4
  1113             00000008   data_0	set	8
  1114                        	.block	72
  1115                        ;	if(ctx && data)
  1116                        	.sym	ctx,4,129,6,32
  1117                        	.sym	data,8,129,6,32
  1118                        	.line	73
  1119                        ;	{
  1120 04:026A: A5 0C        	lda	<L31+ctx_0
  1121 04:026C: 05 0E        	ora	<L31+ctx_0+2
  1122 04:026E: D0 03        	bne	L34
  1123 04:0270: 82 40 00     	brl	L10001
  1124                        L34:
  1125 04:0273: A5 10        	lda	<L31+data_0
  1126 04:0275: 05 12        	ora	<L31+data_0+2
  1127 04:0277: D0 03        	bne	L35
  1128 04:0279: 82 37 00     	brl	L10001
  1129                        L35:
  1130                        	.line	74
  1131                        ;		return (strcmp((LPCHAR)ctx,((PWINDOW)dat
                    a)->win_title) == 0);
  1132                        	.line	75
  1133 04:027C: 64 01        	stz	<R0
  1134 04:027E: 18           	clc
  1135 04:027F: A9 14 00     	lda	#$14
  1136 04:0282: 65 10        	adc	<L31+data_0
  1137 04:0284: 85 05        	sta	<R1
  1138 04:0286: A9 00 00     	lda	#$0
  1139 04:0289: 65 12        	adc	<L31+data_0+2
  1140 04:028B: 85 07        	sta	<R1+2
  1141 04:028D: D4 07        	pei	<R1+2
  1142 04:028F: D4 05        	pei	<R1
  1143 04:0291: D4 0E        	pei	<L31+ctx_0+2
  1144 04:0293: D4 0C        	pei	<L31+ctx_0
  1145 04:0295: 22 xx xx xx  	jsl	~~strcmp
  1146 04:0299: AA           	tax
  1147 04:029A: F0 03        	beq	L37
  1148 04:029C: 82 02 00     	brl	L36
  1149                        L37:
  1150 04:029F: E6 01        	inc	<R0
  1151                        L36:
  1152                        L38:
  1153 04:02A1: A8           	tay
  1154 04:02A2: A5 0A        	lda	<L31+2
  1155 04:02A4: 85 12        	sta	<L31+2+8
  1156 04:02A6: A5 09        	lda	<L31+1
  1157 04:02A8: 85 11        	sta	<L31+1+8
  1158 04:02AA: 2B           	pld
  1159 04:02AB: 3B           	tsc
  1160 04:02AC: 18           	clc
  1161 04:02AD: 69 10 00     	adc	#L31+8
  1162 04:02B0: 1B           	tcs
  1163 04:02B1: 98           	tya
  1164 04:02B2: 6B           	rtl
  1165                        ;	}
  1166                        	.line	76
  Tue Oct  1 2019  1:02                                                Page 25


  1167                        ;
  1168                        ;	return FALSE;
  1169                        L10001:
  1170                        	.line	78
  1171 04:02B3: A9 00 00     	lda	#$0
  1172 04:02B6: 82 E8 FF     	brl	L38
  1173                        ;}
  1174                        	.line	79
  1175                        	.endblock	79
  1176             00000008   L31	equ	8
  1177             00000009   L32	equ	9
  1178 04:02B9:              	ends
  1179                        	efunc
  1180                        	.endfunc	79,9,8
  1181                        	.line	79
  1182                        ;
  1183                        ;HWND k_user_getDesktopWindow(void)
  1184                        ;{
  1185                        	.line	81
  1186                        	.line	82
  1187                        	WINMAN
  1188                        	xdef	~~k_user_getDesktopWindow
  1189                        	func
  1190                        	.function	82
  1191                        ~~k_user_getDesktopWindow:
  1192                        	longa	on
  1193                        	longi	on
  1194 04:02B9: 3B           	tsc
  1195 04:02BA: 38           	sec
  1196 04:02BB: E9 08 00     	sbc	#L39
  1197 04:02BE: 1B           	tcs
  1198 04:02BF: 0B           	phd
  1199 04:02C0: 5B           	tcd
  1200                        	.block	82
  1201                        ;	PFXNODE node = NULL;
  1202                        ;	HWND hWnd = NULL;
  1203                        ;
  1204                        ;	node = k_nodelist_foreach_until_listdata(_k_wind
                    owManager_WindowObjectList,"DesktopWindow",find_window_capti
                    on);
  1205             00000000   node_1	set	0
  1206             00000004   hWnd_1	set	4
  1207                        	.sym	node,0,138,1,32,2
  1208                        	.sym	hWnd,4,129,1,32
  1209 04:02C1: 64 01        	stz	<L40+node_1
  1210 04:02C3: 64 03        	stz	<L40+node_1+2
  1211 04:02C5: 64 05        	stz	<L40+hWnd_1
  1212 04:02C7: 64 07        	stz	<L40+hWnd_1+2
  1213                        	.line	86
  1214 04:02C9: F4 04 00     	pea	#^~~find_window_caption
  1215 04:02CC: F4 62 02     	pea	#<~~find_window_caption
  1216 04:02CF: F4 xx xx     	pea	#^L30
  1217 04:02D2: F4 xx xx     	pea	#<L30
  1218 04:02D5: AD xx xx     	lda	|~~_k_windowManager_WindowObjectList+2
  1219 04:02D8: 48           	pha
  1220 04:02D9: AD xx xx     	lda	|~~_k_windowManager_WindowObjectList
  1221 04:02DC: 48           	pha
  1222 04:02DD: 22 xx xx xx  	jsl	~~k_nodelist_foreach_until_listdata
  Tue Oct  1 2019  1:02                                                Page 26


  1223 04:02E1: 85 01        	sta	<L40+node_1
  1224 04:02E3: 86 03        	stx	<L40+node_1+2
  1225                        ;	if(node)
  1226                        	.line	87
  1227                        ;	{
  1228 04:02E5: A5 01        	lda	<L40+node_1
  1229 04:02E7: 05 03        	ora	<L40+node_1+2
  1230 04:02E9: D0 03        	bne	L42
  1231 04:02EB: 82 14 00     	brl	L10002
  1232                        L42:
  1233                        	.line	88
  1234                        ;		//k_debug_pointer("k_user_getDesktopWind
                    ow:",node);
  1235                        ;		hWnd = k_getHandleFromWindow((PWINDOW)no
                    de->data);
  1236                        	.line	90
  1237 04:02EE: A0 04 00     	ldy	#$4
  1238 04:02F1: B7 01        	lda	[<L40+node_1],Y
  1239 04:02F3: 48           	pha
  1240 04:02F4: A0 02 00     	ldy	#$2
  1241 04:02F7: B7 01        	lda	[<L40+node_1],Y
  1242 04:02F9: 48           	pha
  1243 04:02FA: 22 8C 03 04  	jsl	~~k_getHandleFromWindow
  1244 04:02FE: 85 05        	sta	<L40+hWnd_1
  1245 04:0300: 86 07        	stx	<L40+hWnd_1+2
  1246                        ;		//k_debug_pointer("k_user_getDesktopWind
                    ow:hWnd:",hWnd);
  1247                        ;	}
  1248                        	.line	92
  1249                        ;
  1250                        ;	return hWnd;
  1251                        L10002:
  1252                        	.line	94
  1253 04:0302: A6 07        	ldx	<L40+hWnd_1+2
  1254 04:0304: A5 05        	lda	<L40+hWnd_1
  1255                        L43:
  1256 04:0306: A8           	tay
  1257 04:0307: 2B           	pld
  1258 04:0308: 3B           	tsc
  1259 04:0309: 18           	clc
  1260 04:030A: 69 08 00     	adc	#L39
  1261 04:030D: 1B           	tcs
  1262 04:030E: 98           	tya
  1263 04:030F: 6B           	rtl
  1264                        ;}
  1265                        	.line	95
  1266                        	.endblock	95
  1267             00000008   L39	equ	8
  1268             00000001   L40	equ	1
  1269 04:0310:              	ends
  1270                        	efunc
  1271                        	.endfunc	95,1,8
  1272                        	.line	95
  1273                        	data
  1274                        L30:
  1275 00:01C7: 44 65 73 6B  	db	$44,$65,$73,$6B,$74,$6F,$70,$57,$69,$6E,
                    $64,$6F,$77,$00
       00:01CB: 74 6F 70 57 
  Tue Oct  1 2019  1:02                                                Page 27


       00:01CF: 69 6E 64 6F 
       00:01D3: 77 00 
  1276 00:01D5:              	ends
  1277                        ;
  1278                        ;PFXNODELIST k_getWindowManagerList(void)
  1279                        ;{
  1280                        	.line	97
  1281                        	.line	98
  1282                        	WINMAN
  1283                        	xdef	~~k_getWindowManagerList
  1284                        	func
  1285                        	.function	98
  1286                        ~~k_getWindowManagerList:
  1287                        	longa	on
  1288                        	longi	on
  1289 04:0310: 3B           	tsc
  1290 04:0311: 38           	sec
  1291 04:0312: E9 00 00     	sbc	#L45
  1292 04:0315: 1B           	tcs
  1293 04:0316: 0B           	phd
  1294 04:0317: 5B           	tcd
  1295                        	.block	98
  1296                        ;	return _k_windowManager_WindowObjectList;
  1297                        	.line	99
  1298 04:0318: AE xx xx     	ldx	|~~_k_windowManager_WindowObjectList+2
  1299 04:031B: AD xx xx     	lda	|~~_k_windowManager_WindowObjectList
  1300                        L48:
  1301 04:031E: A8           	tay
  1302 04:031F: 2B           	pld
  1303 04:0320: 3B           	tsc
  1304 04:0321: 18           	clc
  1305 04:0322: 69 00 00     	adc	#L45
  1306 04:0325: 1B           	tcs
  1307 04:0326: 98           	tya
  1308 04:0327: 6B           	rtl
  1309                        ;}
  1310                        	.line	100
  1311                        	.endblock	100
  1312             00000000   L45	equ	0
  1313             00000001   L46	equ	1
  1314 04:0328:              	ends
  1315                        	efunc
  1316                        	.endfunc	100,1,0
  1317                        	.line	100
  1318                        ;
  1319                        ;PFXNODELIST	k_getWindowManagerClassList(void
                    )
  1320                        ;{
  1321                        	.line	102
  1322                        	.line	103
  1323                        	WINMAN
  1324                        	xdef	~~k_getWindowManagerClassList
  1325                        	func
  1326                        	.function	103
  1327                        ~~k_getWindowManagerClassList:
  1328                        	longa	on
  1329                        	longi	on
  1330 04:0328: 3B           	tsc
  Tue Oct  1 2019  1:02                                                Page 28


  1331 04:0329: 38           	sec
  1332 04:032A: E9 00 00     	sbc	#L49
  1333 04:032D: 1B           	tcs
  1334 04:032E: 0B           	phd
  1335 04:032F: 5B           	tcd
  1336                        	.block	103
  1337                        ;	return _k_windowManager_WindowClassList;
  1338                        	.line	104
  1339 04:0330: AE xx xx     	ldx	|~~_k_windowManager_WindowClassList+2
  1340 04:0333: AD xx xx     	lda	|~~_k_windowManager_WindowClassList
  1341                        L52:
  1342 04:0336: A8           	tay
  1343 04:0337: 2B           	pld
  1344 04:0338: 3B           	tsc
  1345 04:0339: 18           	clc
  1346 04:033A: 69 00 00     	adc	#L49
  1347 04:033D: 1B           	tcs
  1348 04:033E: 98           	tya
  1349 04:033F: 6B           	rtl
  1350                        ;}
  1351                        	.line	105
  1352                        	.endblock	105
  1353             00000000   L49	equ	0
  1354             00000001   L50	equ	1
  1355 04:0340:              	ends
  1356                        	efunc
  1357                        	.endfunc	105,1,0
  1358                        	.line	105
  1359                        ;
  1360                        ;PFXNODE k_getWindowList(void)
  1361                        ;{
  1362                        	.line	107
  1363                        	.line	108
  1364                        	WINMAN
  1365                        	xdef	~~k_getWindowList
  1366                        	func
  1367                        	.function	108
  1368                        ~~k_getWindowList:
  1369                        	longa	on
  1370                        	longi	on
  1371 04:0340: 3B           	tsc
  1372 04:0341: 38           	sec
  1373 04:0342: E9 04 00     	sbc	#L53
  1374 04:0345: 1B           	tcs
  1375 04:0346: 0B           	phd
  1376 04:0347: 5B           	tcd
  1377                        	.block	108
  1378                        ;	return k_nodelist_getfirstnode(_k_windowManager_
                    WindowObjectList);
  1379                        	.line	109
  1380 04:0348: AD xx xx     	lda	|~~_k_windowManager_WindowObjectList+2
  1381 04:034B: 48           	pha
  1382 04:034C: AD xx xx     	lda	|~~_k_windowManager_WindowObjectList
  1383 04:034F: 48           	pha
  1384 04:0350: 22 xx xx xx  	jsl	~~k_nodelist_getfirstnode
  1385 04:0354: 85 01        	sta	<R0
  1386 04:0356: 86 03        	stx	<R0+2
  1387 04:0358: A6 03        	ldx	<R0+2
  Tue Oct  1 2019  1:02                                                Page 29


  1388 04:035A: A5 01        	lda	<R0
  1389                        L56:
  1390 04:035C: A8           	tay
  1391 04:035D: 2B           	pld
  1392 04:035E: 3B           	tsc
  1393 04:035F: 18           	clc
  1394 04:0360: 69 04 00     	adc	#L53
  1395 04:0363: 1B           	tcs
  1396 04:0364: 98           	tya
  1397 04:0365: 6B           	rtl
  1398                        ;}
  1399                        	.line	110
  1400                        	.endblock	110
  1401             00000004   L53	equ	4
  1402             00000005   L54	equ	5
  1403 04:0366:              	ends
  1404                        	efunc
  1405                        	.endfunc	110,5,4
  1406                        	.line	110
  1407                        ;
  1408                        ;PFXNODE	k_getWindowClassList(void)
  1409                        ;{
  1410                        	.line	112
  1411                        	.line	113
  1412                        	WINMAN
  1413                        	xdef	~~k_getWindowClassList
  1414                        	func
  1415                        	.function	113
  1416                        ~~k_getWindowClassList:
  1417                        	longa	on
  1418                        	longi	on
  1419 04:0366: 3B           	tsc
  1420 04:0367: 38           	sec
  1421 04:0368: E9 04 00     	sbc	#L57
  1422 04:036B: 1B           	tcs
  1423 04:036C: 0B           	phd
  1424 04:036D: 5B           	tcd
  1425                        	.block	113
  1426                        ;	return  k_nodelist_getfirstnode(_k_windowManager
                    _WindowClassList);
  1427                        	.line	114
  1428 04:036E: AD xx xx     	lda	|~~_k_windowManager_WindowClassList+2
  1429 04:0371: 48           	pha
  1430 04:0372: AD xx xx     	lda	|~~_k_windowManager_WindowClassList
  1431 04:0375: 48           	pha
  1432 04:0376: 22 xx xx xx  	jsl	~~k_nodelist_getfirstnode
  1433 04:037A: 85 01        	sta	<R0
  1434 04:037C: 86 03        	stx	<R0+2
  1435 04:037E: A6 03        	ldx	<R0+2
  1436 04:0380: A5 01        	lda	<R0
  1437                        L60:
  1438 04:0382: A8           	tay
  1439 04:0383: 2B           	pld
  1440 04:0384: 3B           	tsc
  1441 04:0385: 18           	clc
  1442 04:0386: 69 04 00     	adc	#L57
  1443 04:0389: 1B           	tcs
  1444 04:038A: 98           	tya
  Tue Oct  1 2019  1:02                                                Page 30


  1445 04:038B: 6B           	rtl
  1446                        ;}
  1447                        	.line	115
  1448                        	.endblock	115
  1449             00000004   L57	equ	4
  1450             00000005   L58	equ	5
  1451 04:038C:              	ends
  1452                        	efunc
  1453                        	.endfunc	115,5,4
  1454                        	.line	115
  1455                        ;
  1456                        ;
  1457                        ;HWND k_getHandleFromWindow(PWINDOW pWin)
  1458                        ;{
  1459                        	.line	118
  1460                        	.line	119
  1461                        	WINMAN
  1462                        	xdef	~~k_getHandleFromWindow
  1463                        	func
  1464                        	.function	119
  1465                        ~~k_getHandleFromWindow:
  1466                        	longa	on
  1467                        	longi	on
  1468 04:038C: 3B           	tsc
  1469 04:038D: 38           	sec
  1470 04:038E: E9 00 00     	sbc	#L61
  1471 04:0391: 1B           	tcs
  1472 04:0392: 0B           	phd
  1473 04:0393: 5B           	tcd
  1474             00000004   pWin_0	set	4
  1475                        	.block	119
  1476                        ;	return (HWND)pWin;
  1477                        	.sym	pWin,4,138,6,32,23
  1478                        	.line	120
  1479 04:0394: A6 06        	ldx	<L61+pWin_0+2
  1480 04:0396: A5 04        	lda	<L61+pWin_0
  1481                        L64:
  1482 04:0398: A8           	tay
  1483 04:0399: A5 02        	lda	<L61+2
  1484 04:039B: 85 06        	sta	<L61+2+4
  1485 04:039D: A5 01        	lda	<L61+1
  1486 04:039F: 85 05        	sta	<L61+1+4
  1487 04:03A1: 2B           	pld
  1488 04:03A2: 3B           	tsc
  1489 04:03A3: 18           	clc
  1490 04:03A4: 69 04 00     	adc	#L61+4
  1491 04:03A7: 1B           	tcs
  1492 04:03A8: 98           	tya
  1493 04:03A9: 6B           	rtl
  1494                        ;}
  1495                        	.line	121
  1496                        	.endblock	121
  1497             00000000   L61	equ	0
  1498             00000001   L62	equ	1
  1499 04:03AA:              	ends
  1500                        	efunc
  1501                        	.endfunc	121,1,0
  1502                        	.line	121
  Tue Oct  1 2019  1:02                                                Page 31


  1503                        ;
  1504                        ;
  1505                        ;PWINDOW k_getWindowFromHandle(HWND hWnd)
  1506                        ;{
  1507                        	.line	124
  1508                        	.line	125
  1509                        	WINMAN
  1510                        	xdef	~~k_getWindowFromHandle
  1511                        	func
  1512                        	.function	125
  1513                        ~~k_getWindowFromHandle:
  1514                        	longa	on
  1515                        	longi	on
  1516 04:03AA: 3B           	tsc
  1517 04:03AB: 38           	sec
  1518 04:03AC: E9 00 00     	sbc	#L65
  1519 04:03AF: 1B           	tcs
  1520 04:03B0: 0B           	phd
  1521 04:03B1: 5B           	tcd
  1522             00000004   hWnd_0	set	4
  1523                        	.block	125
  1524                        ;	return (PWINDOW)hWnd;
  1525                        	.sym	hWnd,4,129,6,32
  1526                        	.line	126
  1527 04:03B2: A6 06        	ldx	<L65+hWnd_0+2
  1528 04:03B4: A5 04        	lda	<L65+hWnd_0
  1529                        L68:
  1530 04:03B6: A8           	tay
  1531 04:03B7: A5 02        	lda	<L65+2
  1532 04:03B9: 85 06        	sta	<L65+2+4
  1533 04:03BB: A5 01        	lda	<L65+1
  1534 04:03BD: 85 05        	sta	<L65+1+4
  1535 04:03BF: 2B           	pld
  1536 04:03C0: 3B           	tsc
  1537 04:03C1: 18           	clc
  1538 04:03C2: 69 04 00     	adc	#L65+4
  1539 04:03C5: 1B           	tcs
  1540 04:03C6: 98           	tya
  1541 04:03C7: 6B           	rtl
  1542                        ;}
  1543                        	.line	127
  1544                        	.endblock	127
  1545             00000000   L65	equ	0
  1546             00000001   L66	equ	1
  1547 04:03C8:              	ends
  1548                        	efunc
  1549                        	.endfunc	127,1,0
  1550                        	.line	127
  1551                        ;
  1552                        ;
  1553                        ;PWNDCLASS k_user_CreateWindowClass(LPCSTR pClassN
                    ame,LPCSTR pMenuName,UINT style,HICON icon,HCURSOR cursor,HB
                    RUSH brush,FXWndProc pWndProc)
  1554                        ;{
  1555                        	.line	130
  1556                        	.line	131
  1557                        	WINMAN
  1558                        	xdef	~~k_user_CreateWindowClass
  Tue Oct  1 2019  1:02                                                Page 32


  1559                        	func
  1560                        	.function	131
  1561                        ~~k_user_CreateWindowClass:
  1562                        	longa	on
  1563                        	longi	on
  1564 04:03C8: 3B           	tsc
  1565 04:03C9: 38           	sec
  1566 04:03CA: E9 08 00     	sbc	#L69
  1567 04:03CD: 1B           	tcs
  1568 04:03CE: 0B           	phd
  1569 04:03CF: 5B           	tcd
  1570             00000004   pClassName_0	set	4
  1571             00000008   pMenuName_0	set	8
  1572             0000000C   style_0	set	12
  1573             0000000E   icon_0	set	14
  1574             00000012   cursor_0	set	18
  1575             00000016   brush_0	set	22
  1576             0000001A   pWndProc_0	set	26
  1577                        	.block	131
  1578                        ;	PWNDCLASS wndClass = NULL;
  1579                        ;
  1580                        ;	//k_debug_strings("k_user_CreateWindowClass:",(L
                    PVOID)pClassName);
  1581                        ;
  1582                        ;
  1583                        ;	if(pClassName)
  1584             00000000   wndClass_1	set	0
  1585                        	.sym	wndClass,0,138,1,32,22
  1586                        	.sym	pClassName,4,142,6,32
  1587                        	.sym	pMenuName,8,142,6,32
  1588                        	.sym	style,12,16,6,16
  1589                        	.sym	icon,14,129,6,32
  1590                        	.sym	cursor,18,129,6,32
  1591                        	.sym	brush,22,129,6,32
  1592                        	.sym	pWndProc,26,654,6,32
  1593 04:03D0: 64 05        	stz	<L70+wndClass_1
  1594 04:03D2: 64 07        	stz	<L70+wndClass_1+2
  1595                        	.line	137
  1596                        ;	{
  1597 04:03D4: A5 0C        	lda	<L69+pClassName_0
  1598 04:03D6: 05 0E        	ora	<L69+pClassName_0+2
  1599 04:03D8: D0 03        	bne	L72
  1600 04:03DA: 82 97 00     	brl	L10003
  1601                        L72:
  1602                        	.line	138
  1603                        ;		wndClass = k_mem_allocate_heap(sizeof(WN
                    DCLASS));
  1604                        	.line	139
  1605 04:03DD: F4 20 00     	pea	#<$20
  1606 04:03E0: 22 xx xx xx  	jsl	~~k_mem_allocate_heap
  1607 04:03E4: 85 05        	sta	<L70+wndClass_1
  1608 04:03E6: 86 07        	stx	<L70+wndClass_1+2
  1609                        ;		if(wndClass)
  1610                        	.line	140
  1611                        ;		{
  1612 04:03E8: A5 05        	lda	<L70+wndClass_1
  1613 04:03EA: 05 07        	ora	<L70+wndClass_1+2
  1614 04:03EC: D0 03        	bne	L73
  Tue Oct  1 2019  1:02                                                Page 33


  1615 04:03EE: 82 83 00     	brl	L10004
  1616                        L73:
  1617                        	.line	141
  1618                        ;			memset(wndClass,0,sizeof(WNDCLAS
                    S));
  1619                        	.line	142
  1620 04:03F1: F4 20 00     	pea	#<$20
  1621 04:03F4: F4 00 00     	pea	#<$0
  1622 04:03F7: D4 07        	pei	<L70+wndClass_1+2
  1623 04:03F9: D4 05        	pei	<L70+wndClass_1
  1624 04:03FB: 22 xx xx xx  	jsl	~~memset
  1625                        ;			wndClass->cbSize = sizeof(WNDCLA
                    SS);
  1626                        	.line	143
  1627 04:03FF: A9 20 00     	lda	#$20
  1628 04:0402: 87 05        	sta	[<L70+wndClass_1]
  1629                        ;			wndClass->lpszClassName = k_stri
                    ng_copy_string(pClassName);
  1630                        	.line	144
  1631 04:0404: D4 0E        	pei	<L69+pClassName_0+2
  1632 04:0406: D4 0C        	pei	<L69+pClassName_0
  1633 04:0408: 22 xx xx xx  	jsl	~~k_string_copy_string
  1634 04:040C: 85 01        	sta	<R0
  1635 04:040E: 86 03        	stx	<R0+2
  1636 04:0410: A5 01        	lda	<R0
  1637 04:0412: A0 1C 00     	ldy	#$1c
  1638 04:0415: 97 05        	sta	[<L70+wndClass_1],Y
  1639 04:0417: A5 03        	lda	<R0+2
  1640 04:0419: A0 1E 00     	ldy	#$1e
  1641 04:041C: 97 05        	sta	[<L70+wndClass_1],Y
  1642                        ;			wndClass->pWndProc = pWndProc;
  1643                        	.line	145
  1644 04:041E: A5 22        	lda	<L69+pWndProc_0
  1645 04:0420: A0 04 00     	ldy	#$4
  1646 04:0423: 97 05        	sta	[<L70+wndClass_1],Y
  1647 04:0425: A5 24        	lda	<L69+pWndProc_0+2
  1648 04:0427: A0 06 00     	ldy	#$6
  1649 04:042A: 97 05        	sta	[<L70+wndClass_1],Y
  1650                        ;			wndClass->style = style;
  1651                        	.line	146
  1652 04:042C: A5 14        	lda	<L69+style_0
  1653 04:042E: A0 02 00     	ldy	#$2
  1654 04:0431: 97 05        	sta	[<L70+wndClass_1],Y
  1655                        ;			wndClass->hIcon = icon;
  1656                        	.line	147
  1657 04:0433: A5 16        	lda	<L69+icon_0
  1658 04:0435: A0 0C 00     	ldy	#$c
  1659 04:0438: 97 05        	sta	[<L70+wndClass_1],Y
  1660 04:043A: A5 18        	lda	<L69+icon_0+2
  1661 04:043C: A0 0E 00     	ldy	#$e
  1662 04:043F: 97 05        	sta	[<L70+wndClass_1],Y
  1663                        ;			wndClass->hCursor = cursor;
  1664                        	.line	148
  1665 04:0441: A5 1A        	lda	<L69+cursor_0
  1666 04:0443: A0 10 00     	ldy	#$10
  1667 04:0446: 97 05        	sta	[<L70+wndClass_1],Y
  1668 04:0448: A5 1C        	lda	<L69+cursor_0+2
  1669 04:044A: A0 12 00     	ldy	#$12
  Tue Oct  1 2019  1:02                                                Page 34


  1670 04:044D: 97 05        	sta	[<L70+wndClass_1],Y
  1671                        ;			wndClass->hbrBackground = brush;
  1672                        	.line	149
  1673 04:044F: A5 1E        	lda	<L69+brush_0
  1674 04:0451: A0 14 00     	ldy	#$14
  1675 04:0454: 97 05        	sta	[<L70+wndClass_1],Y
  1676 04:0456: A5 20        	lda	<L69+brush_0+2
  1677 04:0458: A0 16 00     	ldy	#$16
  1678 04:045B: 97 05        	sta	[<L70+wndClass_1],Y
  1679                        ;
  1680                        ;			k_nodelist_addtolist(_k_windowMa
                    nager_WindowClassList,NL_TYPE_WINDOW_CLS,pClassName,wndClass
                    );
  1681                        	.line	151
  1682 04:045D: D4 07        	pei	<L70+wndClass_1+2
  1683 04:045F: D4 05        	pei	<L70+wndClass_1
  1684 04:0461: D4 0E        	pei	<L69+pClassName_0+2
  1685 04:0463: D4 0C        	pei	<L69+pClassName_0
  1686 04:0465: F4 01 00     	pea	#<$1
  1687 04:0468: AD xx xx     	lda	|~~_k_windowManager_WindowClassList+2
  1688 04:046B: 48           	pha
  1689 04:046C: AD xx xx     	lda	|~~_k_windowManager_WindowClassList
  1690 04:046F: 48           	pha
  1691 04:0470: 22 xx xx xx  	jsl	~~k_nodelist_addtolist
  1692                        ;			//k_debug_nodelist(k_nodelist_ge
                    tfirstnode(_k_windowManager_WindowClassList));
  1693                        ;		}
  1694                        	.line	153
  1695                        ;
  1696                        ;		//k_debug_strings("k_user_CreateWindowCl
                    ass:","exit");
  1697                        ;	}
  1698                        L10004:
  1699                        	.line	156
  1700                        ;	return wndClass;
  1701                        L10003:
  1702                        	.line	157
  1703 04:0474: A6 07        	ldx	<L70+wndClass_1+2
  1704 04:0476: A5 05        	lda	<L70+wndClass_1
  1705                        L74:
  1706 04:0478: A8           	tay
  1707 04:0479: A5 0A        	lda	<L69+2
  1708 04:047B: 85 24        	sta	<L69+2+26
  1709 04:047D: A5 09        	lda	<L69+1
  1710 04:047F: 85 23        	sta	<L69+1+26
  1711 04:0481: 2B           	pld
  1712 04:0482: 3B           	tsc
  1713 04:0483: 18           	clc
  1714 04:0484: 69 22 00     	adc	#L69+26
  1715 04:0487: 1B           	tcs
  1716 04:0488: 98           	tya
  1717 04:0489: 6B           	rtl
  1718                        ;}
  1719                        	.line	158
  1720                        	.endblock	158
  1721             00000008   L69	equ	8
  1722             00000005   L70	equ	5
  1723 04:048A:              	ends
  Tue Oct  1 2019  1:02                                                Page 35


  1724                        	efunc
  1725                        	.endfunc	158,5,8
  1726                        	.line	158
  1727                        ;
  1728                        ;HANDLE k_user_RegisterWindowClass(PWNDCLASS pTemp
                    late)
  1729                        ;{
  1730                        	.line	160
  1731                        	.line	161
  1732                        	WINMAN
  1733                        	xdef	~~k_user_RegisterWindowClass
  1734                        	func
  1735                        	.function	161
  1736                        ~~k_user_RegisterWindowClass:
  1737                        	longa	on
  1738                        	longi	on
  1739 04:048A: 3B           	tsc
  1740 04:048B: 38           	sec
  1741 04:048C: E9 00 00     	sbc	#L75
  1742 04:048F: 1B           	tcs
  1743 04:0490: 0B           	phd
  1744 04:0491: 5B           	tcd
  1745             00000004   pTemplate_0	set	4
  1746                        	.block	161
  1747                        ;	return NULL;
  1748                        	.sym	pTemplate,4,138,6,32,22
  1749                        	.line	162
  1750 04:0492: A9 00 00     	lda	#$0
  1751 04:0495: AA           	tax
  1752 04:0496: A9 00 00     	lda	#$0
  1753                        L78:
  1754 04:0499: A8           	tay
  1755 04:049A: A5 02        	lda	<L75+2
  1756 04:049C: 85 06        	sta	<L75+2+4
  1757 04:049E: A5 01        	lda	<L75+1
  1758 04:04A0: 85 05        	sta	<L75+1+4
  1759 04:04A2: 2B           	pld
  1760 04:04A3: 3B           	tsc
  1761 04:04A4: 18           	clc
  1762 04:04A5: 69 04 00     	adc	#L75+4
  1763 04:04A8: 1B           	tcs
  1764 04:04A9: 98           	tya
  1765 04:04AA: 6B           	rtl
  1766                        ;}
  1767                        	.line	163
  1768                        	.endblock	163
  1769             00000000   L75	equ	0
  1770             00000001   L76	equ	1
  1771 04:04AB:              	ends
  1772                        	efunc
  1773                        	.endfunc	163,1,0
  1774                        	.line	163
  1775                        ;
  1776                        ;
  1777                        ;PWINDOW	k_user_CreateWindow(ULONG     style,
  1778                        ;						    LPCS
                    TR    pClassName,
  1779                        ;							
  Tue Oct  1 2019  1:02                                                Page 36


                    LPCSTR    pWindowName,
  1780                        ;							
                    INT       x,
  1781                        ;							
                    INT       y,
  1782                        ;							
                    INT       nWidth,
  1783                        ;							
                    INT       nHeight,
  1784                        ;							
                    HWND      hWndParent,
  1785                        ;							
                    HMENU     hMenu,
  1786                        ;							
                    HINSTANCE hInstance)
  1787                        ;{
  1788                        	.line	166
  1789                        	.line	176
  1790                        	WINMAN
  1791                        	xdef	~~k_user_CreateWindow
  1792                        	func
  1793                        	.function	176
  1794                        ~~k_user_CreateWindow:
  1795                        	longa	on
  1796                        	longi	on
  1797 04:04AB: 3B           	tsc
  1798 04:04AC: 38           	sec
  1799 04:04AD: E9 24 00     	sbc	#L79
  1800 04:04B0: 1B           	tcs
  1801 04:04B1: 0B           	phd
  1802 04:04B2: 5B           	tcd
  1803             00000004   style_0	set	4
  1804             00000008   pClassName_0	set	8
  1805             0000000C   pWindowName_0	set	12
  1806             00000010   x_0	set	16
  1807             00000012   y_0	set	18
  1808             00000014   nWidth_0	set	20
  1809             00000016   nHeight_0	set	22
  1810             00000018   hWndParent_0	set	24
  1811             0000001C   hMenu_0	set	28
  1812             00000020   hInstance_0	set	32
  1813                        	.block	176
  1814                        ;
  1815                        ;	PFXNODE   found = NULL;
  1816                        ;	PWINDOW   pWin = NULL;
  1817                        ;	PWNDCLASS wndClass = NULL;
  1818                        ;
  1819                        ;	UCHAR localBuffer[16];
  1820                        ;
  1821                        ;	//k_debug_strings("k_user_CreateWindow:",(LPCHAR
                    )pWindowName);
  1822                        ;
  1823                        ;	if(pClassName && pWindowName)
  1824             00000000   found_1	set	0
  1825             00000004   pWin_1	set	4
  1826             00000008   wndClass_1	set	8
  1827             0000000C   localBuffer_1	set	12
  1828                        	.sym	found,0,138,1,32,2
  Tue Oct  1 2019  1:02                                                Page 37


  1829                        	.sym	pWin,4,138,1,32,23
  1830                        	.sym	wndClass,8,138,1,32,22
  1831                        	.sym	localBuffer,12,110,1,0,16
  1832                        	.sym	style,4,18,6,32
  1833                        	.sym	pClassName,8,142,6,32
  1834                        	.sym	pWindowName,12,142,6,32
  1835                        	.sym	x,16,5,6,16
  1836                        	.sym	y,18,5,6,16
  1837                        	.sym	nWidth,20,5,6,16
  1838                        	.sym	nHeight,22,5,6,16
  1839                        	.sym	hWndParent,24,129,6,32
  1840                        	.sym	hMenu,28,129,6,32
  1841                        	.sym	hInstance,32,129,6,32
  1842 04:04B3: 64 09        	stz	<L80+found_1
  1843 04:04B5: 64 0B        	stz	<L80+found_1+2
  1844 04:04B7: 64 0D        	stz	<L80+pWin_1
  1845 04:04B9: 64 0F        	stz	<L80+pWin_1+2
  1846 04:04BB: 64 11        	stz	<L80+wndClass_1
  1847 04:04BD: 64 13        	stz	<L80+wndClass_1+2
  1848                        	.line	186
  1849                        ;	{
  1850 04:04BF: A5 2C        	lda	<L79+pClassName_0
  1851 04:04C1: 05 2E        	ora	<L79+pClassName_0+2
  1852 04:04C3: D0 03        	bne	L82
  1853 04:04C5: 82 59 02     	brl	L10005
  1854                        L82:
  1855 04:04C8: A5 30        	lda	<L79+pWindowName_0
  1856 04:04CA: 05 32        	ora	<L79+pWindowName_0+2
  1857 04:04CC: D0 03        	bne	L83
  1858 04:04CE: 82 50 02     	brl	L10005
  1859                        L83:
  1860                        	.line	187
  1861                        ;		//pWindowName = strupr((LPCHAR)pWindowNa
                    me); // temp fix for font def issue
  1862                        ;
  1863                        ;		found = k_nodelist_searchByName(_k_windo
                    wManager_WindowClassList,pClassName);
  1864                        	.line	190
  1865 04:04D1: D4 2E        	pei	<L79+pClassName_0+2
  1866 04:04D3: D4 2C        	pei	<L79+pClassName_0
  1867 04:04D5: AD xx xx     	lda	|~~_k_windowManager_WindowClassList+2
  1868 04:04D8: 48           	pha
  1869 04:04D9: AD xx xx     	lda	|~~_k_windowManager_WindowClassList
  1870 04:04DC: 48           	pha
  1871 04:04DD: 22 xx xx xx  	jsl	~~k_nodelist_searchByName
  1872 04:04E1: 85 09        	sta	<L80+found_1
  1873 04:04E3: 86 0B        	stx	<L80+found_1+2
  1874                        ;		if(found && found->data)
  1875                        	.line	191
  1876                        ;		{
  1877 04:04E5: A5 09        	lda	<L80+found_1
  1878 04:04E7: 05 0B        	ora	<L80+found_1+2
  1879 04:04E9: D0 03        	bne	L84
  1880 04:04EB: 82 33 02     	brl	L10006
  1881                        L84:
  1882 04:04EE: A0 02 00     	ldy	#$2
  1883 04:04F1: B7 09        	lda	[<L80+found_1],Y
  1884 04:04F3: A0 04 00     	ldy	#$4
  Tue Oct  1 2019  1:02                                                Page 38


  1885 04:04F6: 17 09        	ora	[<L80+found_1],Y
  1886 04:04F8: D0 03        	bne	L85
  1887 04:04FA: 82 24 02     	brl	L10006
  1888                        L85:
  1889                        	.line	192
  1890                        ;			wndClass = (PWNDCLASS)found->dat
                    a;
  1891                        	.line	193
  1892 04:04FD: A0 02 00     	ldy	#$2
  1893 04:0500: B7 09        	lda	[<L80+found_1],Y
  1894 04:0502: 85 11        	sta	<L80+wndClass_1
  1895 04:0504: A0 04 00     	ldy	#$4
  1896 04:0507: B7 09        	lda	[<L80+found_1],Y
  1897 04:0509: 85 13        	sta	<L80+wndClass_1+2
  1898                        ;
  1899                        ;			//k_debug_strings("k_user_Create
                    Window:Found WndClass:",(LPVOID)wndClass->lpszClassName);
  1900                        ;
  1901                        ;			pWin = k_mem_allocate_heap(sizeo
                    f(WINDOW));
  1902                        	.line	197
  1903 04:050B: F4 61 00     	pea	#<$61
  1904 04:050E: 22 xx xx xx  	jsl	~~k_mem_allocate_heap
  1905 04:0512: 85 0D        	sta	<L80+pWin_1
  1906 04:0514: 86 0F        	stx	<L80+pWin_1+2
  1907                        ;			if(pWin)
  1908                        	.line	198
  1909                        ;			{
  1910 04:0516: A5 0D        	lda	<L80+pWin_1
  1911 04:0518: 05 0F        	ora	<L80+pWin_1+2
  1912 04:051A: D0 03        	bne	L86
  1913 04:051C: 82 02 02     	brl	L10007
  1914                        L86:
  1915                        	.line	199
  1916                        ;				memset(pWin,0,sizeof(WIN
                    DOW));
  1917                        	.line	200
  1918 04:051F: F4 61 00     	pea	#<$61
  1919 04:0522: F4 00 00     	pea	#<$0
  1920 04:0525: D4 0F        	pei	<L80+pWin_1+2
  1921 04:0527: D4 0D        	pei	<L80+pWin_1
  1922 04:0529: 22 xx xx xx  	jsl	~~memset
  1923                        ;				pWin->cbSize = sizeof(WI
                    NDOW);
  1924                        	.line	201
  1925 04:052D: A9 61 00     	lda	#$61
  1926 04:0530: 87 0D        	sta	[<L80+pWin_1]
  1927                        ;				pWin->style = style;
  1928                        	.line	202
  1929 04:0532: A5 28        	lda	<L79+style_0
  1930 04:0534: A0 02 00     	ldy	#$2
  1931 04:0537: 97 0D        	sta	[<L80+pWin_1],Y
  1932 04:0539: A5 2A        	lda	<L79+style_0+2
  1933 04:053B: A0 04 00     	ldy	#$4
  1934 04:053E: 97 0D        	sta	[<L80+pWin_1],Y
  1935                        ;				pWin->pParentWindow = hW
                    ndParent;
  1936                        	.line	203
  Tue Oct  1 2019  1:02                                                Page 39


  1937 04:0540: A5 3C        	lda	<L79+hWndParent_0
  1938 04:0542: A0 4C 00     	ldy	#$4c
  1939 04:0545: 97 0D        	sta	[<L80+pWin_1],Y
  1940 04:0547: A5 3E        	lda	<L79+hWndParent_0+2
  1941 04:0549: A0 4E 00     	ldy	#$4e
  1942 04:054C: 97 0D        	sta	[<L80+pWin_1],Y
  1943                        ;				pWin->pWndClass = wndCla
                    ss;
  1944                        	.line	204
  1945 04:054E: A5 11        	lda	<L80+wndClass_1
  1946 04:0550: A0 48 00     	ldy	#$48
  1947 04:0553: 97 0D        	sta	[<L80+pWin_1],Y
  1948 04:0555: A5 13        	lda	<L80+wndClass_1+2
  1949 04:0557: A0 4A 00     	ldy	#$4a
  1950 04:055A: 97 0D        	sta	[<L80+pWin_1],Y
  1951                        ;				strcpy(pWin->win_title,p
                    WindowName);
  1952                        	.line	205
  1953 04:055C: D4 32        	pei	<L79+pWindowName_0+2
  1954 04:055E: D4 30        	pei	<L79+pWindowName_0
  1955 04:0560: 18           	clc
  1956 04:0561: A9 14 00     	lda	#$14
  1957 04:0564: 65 0D        	adc	<L80+pWin_1
  1958 04:0566: 85 01        	sta	<R0
  1959 04:0568: A9 00 00     	lda	#$0
  1960 04:056B: 65 0F        	adc	<L80+pWin_1+2
  1961 04:056D: 85 03        	sta	<R0+2
  1962 04:056F: D4 03        	pei	<R0+2
  1963 04:0571: D4 01        	pei	<R0
  1964 04:0573: 22 xx xx xx  	jsl	~~strcpy
  1965                        ;				pWin->win_x = x;
  1966                        	.line	206
  1967 04:0577: A5 34        	lda	<L79+x_0
  1968 04:0579: A0 08 00     	ldy	#$8
  1969 04:057C: 97 0D        	sta	[<L80+pWin_1],Y
  1970                        ;				pWin->win_y = y;
  1971                        	.line	207
  1972 04:057E: A5 36        	lda	<L79+y_0
  1973 04:0580: A0 0A 00     	ldy	#$a
  1974 04:0583: 97 0D        	sta	[<L80+pWin_1],Y
  1975                        ;				pWin->win_width = nWidth
                    ;
  1976                        	.line	208
  1977 04:0585: A5 38        	lda	<L79+nWidth_0
  1978 04:0587: A0 0C 00     	ldy	#$c
  1979 04:058A: 97 0D        	sta	[<L80+pWin_1],Y
  1980                        ;				pWin->win_height = nHeig
                    ht;
  1981                        	.line	209
  1982 04:058C: A5 3A        	lda	<L79+nHeight_0
  1983 04:058E: A0 0E 00     	ldy	#$e
  1984 04:0591: 97 0D        	sta	[<L80+pWin_1],Y
  1985                        ;				pWin->hMenu = hMenu;
  1986                        	.line	210
  1987 04:0593: A5 40        	lda	<L79+hMenu_0
  1988 04:0595: A0 50 00     	ldy	#$50
  1989 04:0598: 97 0D        	sta	[<L80+pWin_1],Y
  1990 04:059A: A5 42        	lda	<L79+hMenu_0+2
  Tue Oct  1 2019  1:02                                                Page 40


  1991 04:059C: A0 52 00     	ldy	#$52
  1992 04:059F: 97 0D        	sta	[<L80+pWin_1],Y
  1993                        ;				pWin->pChildWindows = NU
                    LL;
  1994                        	.line	211
  1995 04:05A1: A9 00 00     	lda	#$0
  1996 04:05A4: A0 54 00     	ldy	#$54
  1997 04:05A7: 97 0D        	sta	[<L80+pWin_1],Y
  1998 04:05A9: A9 00 00     	lda	#$0
  1999 04:05AC: A0 56 00     	ldy	#$56
  2000 04:05AF: 97 0D        	sta	[<L80+pWin_1],Y
  2001                        ;				pWin->pChildHitList = NU
                    LL;
  2002                        	.line	212
  2003 04:05B1: A9 00 00     	lda	#$0
  2004 04:05B4: A0 58 00     	ldy	#$58
  2005 04:05B7: 97 0D        	sta	[<L80+pWin_1],Y
  2006 04:05B9: A9 00 00     	lda	#$0
  2007 04:05BC: A0 5A 00     	ldy	#$5a
  2008 04:05BF: 97 0D        	sta	[<L80+pWin_1],Y
  2009                        ;				pWin->isVisible 	
                    = ((style & FXWS_VISIBLE) == FXWS_VISIBLE);
  2010                        	.line	213
  2011 04:05C1: 64 01        	stz	<R0
  2012 04:05C3: 64 05        	stz	<R1
  2013 04:05C5: A5 2A        	lda	<L79+style_0+2
  2014 04:05C7: 29 00 10     	and	#^$10000000
  2015 04:05CA: 85 07        	sta	<R1+2
  2016 04:05CC: A5 05        	lda	<R1
  2017 04:05CE: C9 00 00     	cmp	#<$10000000
  2018 04:05D1: D0 05        	bne	L88
  2019 04:05D3: A5 07        	lda	<R1+2
  2020 04:05D5: C9 00 10     	cmp	#^$10000000
  2021                        L88:
  2022 04:05D8: F0 03        	beq	L89
  2023 04:05DA: 82 02 00     	brl	L87
  2024                        L89:
  2025 04:05DD: E6 01        	inc	<R0
  2026                        L87:
  2027 04:05DF: E2 20        	sep	#$20
  2028                        	longa	off
  2029 04:05E1: A5 01        	lda	<R0
  2030 04:05E3: A0 5C 00     	ldy	#$5c
  2031 04:05E6: 97 0D        	sta	[<L80+pWin_1],Y
  2032 04:05E8: C2 20        	rep	#$20
  2033                        	longa	on
  2034                        ;
  2035                        ;				//k_debug_long("k_user_C
                    reateWindow:sytle:",style);
  2036                        ;				//k_debug_long("k_user_C
                    reateWindow:FXWS_VISIBLE:", FXWS_VISIBLE);
  2037                        ;				//k_debug_long("k_user_C
                    reateWindow:style & FXWS_VISIBLE:",style & FXWS_VISIBLE);
  2038                        ;				//k_debug_integer("k_use
                    r_CreateWindow:isVisible:",pWin->isVisible);
  2039                        ;
  2040                        ;				pWin->clickable = k_mem_
                    allocate_heap(sizeof(CLICKABLE));
  Tue Oct  1 2019  1:02                                                Page 41


  2041                        	.line	220
  2042 04:05EA: F4 0A 00     	pea	#<$a
  2043 04:05ED: 22 xx xx xx  	jsl	~~k_mem_allocate_heap
  2044 04:05F1: 85 01        	sta	<R0
  2045 04:05F3: 86 03        	stx	<R0+2
  2046 04:05F5: A5 01        	lda	<R0
  2047 04:05F7: A0 10 00     	ldy	#$10
  2048 04:05FA: 97 0D        	sta	[<L80+pWin_1],Y
  2049 04:05FC: A5 03        	lda	<R0+2
  2050 04:05FE: A0 12 00     	ldy	#$12
  2051 04:0601: 97 0D        	sta	[<L80+pWin_1],Y
  2052                        ;				if(pWin->clickable)
  2053                        	.line	221
  2054                        ;				{
  2055 04:0603: A0 10 00     	ldy	#$10
  2056 04:0606: B7 0D        	lda	[<L80+pWin_1],Y
  2057 04:0608: A0 12 00     	ldy	#$12
  2058 04:060B: 17 0D        	ora	[<L80+pWin_1],Y
  2059 04:060D: D0 03        	bne	L90
  2060 04:060F: 82 5D 00     	brl	L10008
  2061                        L90:
  2062                        	.line	222
  2063                        ;					((PCLICKABLE)pWi
                    n->clickable)->area.x 		= pWin->win_x;
  2064                        	.line	223
  2065 04:0612: A0 10 00     	ldy	#$10
  2066 04:0615: B7 0D        	lda	[<L80+pWin_1],Y
  2067 04:0617: 85 01        	sta	<R0
  2068 04:0619: A0 12 00     	ldy	#$12
  2069 04:061C: B7 0D        	lda	[<L80+pWin_1],Y
  2070 04:061E: 85 03        	sta	<R0+2
  2071 04:0620: A0 08 00     	ldy	#$8
  2072 04:0623: B7 0D        	lda	[<L80+pWin_1],Y
  2073 04:0625: 87 01        	sta	[<R0]
  2074                        ;					((PCLICKABLE)pWi
                    n->clickable)->area.y 		= pWin->win_y;
  2075                        	.line	224
  2076 04:0627: A0 10 00     	ldy	#$10
  2077 04:062A: B7 0D        	lda	[<L80+pWin_1],Y
  2078 04:062C: 85 01        	sta	<R0
  2079 04:062E: A0 12 00     	ldy	#$12
  2080 04:0631: B7 0D        	lda	[<L80+pWin_1],Y
  2081 04:0633: 85 03        	sta	<R0+2
  2082 04:0635: A0 0A 00     	ldy	#$a
  2083 04:0638: B7 0D        	lda	[<L80+pWin_1],Y
  2084 04:063A: A0 02 00     	ldy	#$2
  2085 04:063D: 97 01        	sta	[<R0],Y
  2086                        ;					((PCLICKABLE)pWi
                    n->clickable)->area.height 	= pWin->win_height;
  2087                        	.line	225
  2088 04:063F: A0 10 00     	ldy	#$10
  2089 04:0642: B7 0D        	lda	[<L80+pWin_1],Y
  2090 04:0644: 85 01        	sta	<R0
  2091 04:0646: A0 12 00     	ldy	#$12
  2092 04:0649: B7 0D        	lda	[<L80+pWin_1],Y
  2093 04:064B: 85 03        	sta	<R0+2
  2094 04:064D: A0 0E 00     	ldy	#$e
  2095 04:0650: B7 0D        	lda	[<L80+pWin_1],Y
  Tue Oct  1 2019  1:02                                                Page 42


  2096 04:0652: A0 06 00     	ldy	#$6
  2097 04:0655: 97 01        	sta	[<R0],Y
  2098                        ;					((PCLICKABLE)pWi
                    n->clickable)->area.width 	= pWin->win_width;
  2099                        	.line	226
  2100 04:0657: A0 10 00     	ldy	#$10
  2101 04:065A: B7 0D        	lda	[<L80+pWin_1],Y
  2102 04:065C: 85 01        	sta	<R0
  2103 04:065E: A0 12 00     	ldy	#$12
  2104 04:0661: B7 0D        	lda	[<L80+pWin_1],Y
  2105 04:0663: 85 03        	sta	<R0+2
  2106 04:0665: A0 0C 00     	ldy	#$c
  2107 04:0668: B7 0D        	lda	[<L80+pWin_1],Y
  2108 04:066A: A0 04 00     	ldy	#$4
  2109 04:066D: 97 01        	sta	[<R0],Y
  2110                        ;				}
  2111                        	.line	227
  2112                        ;
  2113                        ;				//strcpy(pWin->win_title
                    ,(LPCSTR)k_longtodec((ULONG)pWin,localBuffer));
  2114                        ;
  2115                        ;				//k_nodelist_addtolist(_
                    k_windowManager_WindowObjectList,NL_TYPE_WINDOW_OBJ,(LPCSTR)
                    k_longtodec((ULONG)pWin,localBuffer),pWin);
  2116                        ;				k_nodelist_naddtolist(_k
                    _windowManager_WindowObjectList,NL_TYPE_WINDOW_OBJ,(ULONG)pW
                    in,pWin);
  2117                        L10008:
  2118                        	.line	232
  2119 04:066F: D4 0F        	pei	<L80+pWin_1+2
  2120 04:0671: D4 0D        	pei	<L80+pWin_1
  2121 04:0673: D4 0F        	pei	<L80+pWin_1+2
  2122 04:0675: D4 0D        	pei	<L80+pWin_1
  2123 04:0677: F4 02 00     	pea	#<$2
  2124 04:067A: AD xx xx     	lda	|~~_k_windowManager_WindowObjectList+2
  2125 04:067D: 48           	pha
  2126 04:067E: AD xx xx     	lda	|~~_k_windowManager_WindowObjectList
  2127 04:0681: 48           	pha
  2128 04:0682: 22 xx xx xx  	jsl	~~k_nodelist_naddtolist
  2129                        ;				//k_debug_nodelist(_k_wi
                    ndowManager_WindowObjectList->listhead->next);
  2130                        ;
  2131                        ;				/*
  2132                        ;				if(pWin->isVisible)
  2133                        ;					k_vdraw_ui_windo
                    w(style,
  2134                        ;							
                    		  pWin->win_x ,pWin->win_y,
  2135                        ;							
                    		  pWin->win_height,pWin->win_width,
  2136                        ;							
                    		  pWin->win_title,
  2137                        ;							
                    		  k_getUIGadgetColor(), k_getUIMenuColor());
  2138                        ;				*/
  2139                        ;
  2140                        ;				if(hWndParent)
  2141                        	.line	244
  Tue Oct  1 2019  1:02                                                Page 43


  2142                        ;				{
  2143 04:0686: A5 3C        	lda	<L79+hWndParent_0
  2144 04:0688: 05 3E        	ora	<L79+hWndParent_0+2
  2145 04:068A: D0 03        	bne	L91
  2146 04:068C: 82 2A 00     	brl	L10009
  2147                        L91:
  2148                        	.line	245
  2149                        ;					k_debug_long("k_
                    user_CreateWindow:k_add_child_window:hWndParent:",(ULONG)hWn
                    dParent);
  2150                        	.line	246
  2151 04:068F: D4 3E        	pei	<L79+hWndParent_0+2
  2152 04:0691: D4 3C        	pei	<L79+hWndParent_0
  2153 04:0693: F4 xx xx     	pea	#^L44
  2154 04:0696: F4 xx xx     	pea	#<L44
  2155 04:0699: 22 xx xx xx  	jsl	~~k_debug_long
  2156                        ;					k_add_child_wind
                    ow(k_getWindowFromHandle(hWndParent),pWin,k_update_hover_loc
                    ation);
  2157                        	.line	247
  2158 04:069D: F4 04 00     	pea	#^~~k_update_hover_location
  2159 04:06A0: F4 7E 20     	pea	#<~~k_update_hover_location
  2160 04:06A3: D4 0F        	pei	<L80+pWin_1+2
  2161 04:06A5: D4 0D        	pei	<L80+pWin_1
  2162 04:06A7: D4 3E        	pei	<L79+hWndParent_0+2
  2163 04:06A9: D4 3C        	pei	<L79+hWndParent_0
  2164 04:06AB: 22 AA 03 04  	jsl	~~k_getWindowFromHandle
  2165 04:06AF: 85 01        	sta	<R0
  2166 04:06B1: 86 03        	stx	<R0+2
  2167 04:06B3: DA           	phx
  2168 04:06B4: 48           	pha
  2169 04:06B5: 22 39 1F 04  	jsl	~~k_add_child_window
  2170                        ;				}
  2171                        	.line	248
  2172                        ;
  2173                        ;				k_attach_mouse_detection
                    (pWin,k_update_hover_location);
  2174                        L10009:
  2175                        	.line	250
  2176 04:06B9: F4 04 00     	pea	#^~~k_update_hover_location
  2177 04:06BC: F4 7E 20     	pea	#<~~k_update_hover_location
  2178 04:06BF: D4 0F        	pei	<L80+pWin_1+2
  2179 04:06C1: D4 0D        	pei	<L80+pWin_1
  2180 04:06C3: 22 6D 22 04  	jsl	~~k_attach_mouse_detection
  2181                        ;
  2182                        ;				k_send_window_message(k_
                    getHandleFromWindow(pWin),FX_CREATE_WINDOW,NULL,0);
  2183                        	.line	252
  2184 04:06C7: F4 00 00     	pea	#<$0
  2185 04:06CA: F4 00 00     	pea	#^$0
  2186 04:06CD: F4 00 00     	pea	#<$0
  2187 04:06D0: F4 03 FF     	pea	#<$ff03
  2188 04:06D3: D4 0F        	pei	<L80+pWin_1+2
  2189 04:06D5: D4 0D        	pei	<L80+pWin_1
  2190 04:06D7: 22 8C 03 04  	jsl	~~k_getHandleFromWindow
  2191 04:06DB: 85 01        	sta	<R0
  2192 04:06DD: 86 03        	stx	<R0+2
  2193 04:06DF: DA           	phx
  Tue Oct  1 2019  1:02                                                Page 44


  2194 04:06E0: 48           	pha
  2195 04:06E1: 22 xx xx xx  	jsl	~~k_send_window_message
  2196                        ;				k_send_window_message(k_
                    getHandleFromWindow(pWin),FX_DRAW_NONCLIENT,NULL,0);
  2197                        	.line	253
  2198 04:06E5: F4 00 00     	pea	#<$0
  2199 04:06E8: F4 00 00     	pea	#^$0
  2200 04:06EB: F4 00 00     	pea	#<$0
  2201 04:06EE: F4 01 FB     	pea	#<$fb01
  2202 04:06F1: D4 0F        	pei	<L80+pWin_1+2
  2203 04:06F3: D4 0D        	pei	<L80+pWin_1
  2204 04:06F5: 22 8C 03 04  	jsl	~~k_getHandleFromWindow
  2205 04:06F9: 85 01        	sta	<R0
  2206 04:06FB: 86 03        	stx	<R0+2
  2207 04:06FD: DA           	phx
  2208 04:06FE: 48           	pha
  2209 04:06FF: 22 xx xx xx  	jsl	~~k_send_window_message
  2210                        ;				k_send_window_message(k_
                    getHandleFromWindow(pWin),FX_DRAW_WINDOW,NULL,0);
  2211                        	.line	254
  2212 04:0703: F4 00 00     	pea	#<$0
  2213 04:0706: F4 00 00     	pea	#^$0
  2214 04:0709: F4 00 00     	pea	#<$0
  2215 04:070C: F4 00 FB     	pea	#<$fb00
  2216 04:070F: D4 0F        	pei	<L80+pWin_1+2
  2217 04:0711: D4 0D        	pei	<L80+pWin_1
  2218 04:0713: 22 8C 03 04  	jsl	~~k_getHandleFromWindow
  2219 04:0717: 85 01        	sta	<R0
  2220 04:0719: 86 03        	stx	<R0+2
  2221 04:071B: DA           	phx
  2222 04:071C: 48           	pha
  2223 04:071D: 22 xx xx xx  	jsl	~~k_send_window_message
  2224                        ;
  2225                        ;
  2226                        ;			}
  2227                        	.line	257
  2228                        ;		}
  2229                        L10007:
  2230                        	.line	258
  2231                        ;	}
  2232                        L10006:
  2233                        	.line	259
  2234                        ;	return pWin;
  2235                        L10005:
  2236                        	.line	260
  2237 04:0721: A6 0F        	ldx	<L80+pWin_1+2
  2238 04:0723: A5 0D        	lda	<L80+pWin_1
  2239                        L92:
  2240 04:0725: A8           	tay
  2241 04:0726: A5 26        	lda	<L79+2
  2242 04:0728: 85 46        	sta	<L79+2+32
  2243 04:072A: A5 25        	lda	<L79+1
  2244 04:072C: 85 45        	sta	<L79+1+32
  2245 04:072E: 2B           	pld
  2246 04:072F: 3B           	tsc
  2247 04:0730: 18           	clc
  2248 04:0731: 69 44 00     	adc	#L79+32
  2249 04:0734: 1B           	tcs
  Tue Oct  1 2019  1:02                                                Page 45


  2250 04:0735: 98           	tya
  2251 04:0736: 6B           	rtl
  2252                        ;}
  2253                        	.line	261
  2254                        	.endblock	261
  2255             00000024   L79	equ	36
  2256             00000009   L80	equ	9
  2257 04:0737:              	ends
  2258                        	efunc
  2259                        	.endfunc	261,9,36
  2260                        	.line	261
  2261                        	data
  2262                        L44:
  2263 00:01D5: 6B 5F 75 73  	db	$6B,$5F,$75,$73,$65,$72,$5F,$43,$72,$65,
                    $61,$74,$65,$57,$69
       00:01D9: 65 72 5F 43 
       00:01DD: 72 65 61 74 
       00:01E1: 65 57 69 
  2264 00:01E4: 6E 64 6F 77  	db	$6E,$64,$6F,$77,$3A,$6B,$5F,$61,$64,$64,
                    $5F,$63,$68,$69,$6C
       00:01E8: 3A 6B 5F 61 
       00:01EC: 64 64 5F 63 
       00:01F0: 68 69 6C 
  2265 00:01F3: 64 5F 77 69  	db	$64,$5F,$77,$69,$6E,$64,$6F,$77,$3A,$68,
                    $57,$6E,$64,$50,$61
       00:01F7: 6E 64 6F 77 
       00:01FB: 3A 68 57 6E 
       00:01FF: 64 50 61 
  2266 00:0202: 72 65 6E 74  	db	$72,$65,$6E,$74,$3A,$00
       00:0206: 3A 00 
  2267 00:0208:              	ends
  2268                        ;
  2269                        ;HMENU k_user_CreateMenuResource()
  2270                        ;{
  2271                        	.line	263
  2272                        	.line	264
  2273                        	WINMAN
  2274                        	xdef	~~k_user_CreateMenuResource
  2275                        	func
  2276                        	.function	264
  2277                        ~~k_user_CreateMenuResource:
  2278                        	longa	on
  2279                        	longi	on
  2280 04:0737: 3B           	tsc
  2281 04:0738: 38           	sec
  2282 04:0739: E9 04 00     	sbc	#L94
  2283 04:073C: 1B           	tcs
  2284 04:073D: 0B           	phd
  2285 04:073E: 5B           	tcd
  2286                        	.block	264
  2287                        ;	PMENU pMenu = NULL;
  2288                        ;
  2289                        ;	k_debug_strings("k_user_CreateMenuResource:","En
                    ter");
  2290             00000000   pMenu_1	set	0
  2291                        	.sym	pMenu,0,138,1,32,27
  2292 04:073F: 64 01        	stz	<L95+pMenu_1
  2293 04:0741: 64 03        	stz	<L95+pMenu_1+2
  Tue Oct  1 2019  1:02                                                Page 46


  2294                        	.line	267
  2295 04:0743: F4 xx xx     	pea	#^L93+27
  2296 04:0746: F4 xx xx     	pea	#<L93+27
  2297 04:0749: F4 xx xx     	pea	#^L93
  2298 04:074C: F4 xx xx     	pea	#<L93
  2299 04:074F: 22 xx xx xx  	jsl	~~k_debug_strings
  2300                        ;
  2301                        ;	pMenu = k_mem_allocate_heap(sizeof(MENU));
  2302                        	.line	269
  2303 04:0753: F4 1F 00     	pea	#<$1f
  2304 04:0756: 22 xx xx xx  	jsl	~~k_mem_allocate_heap
  2305 04:075A: 85 01        	sta	<L95+pMenu_1
  2306 04:075C: 86 03        	stx	<L95+pMenu_1+2
  2307                        ;	memset(pMenu,0,sizeof(MENU));
  2308                        	.line	270
  2309 04:075E: F4 1F 00     	pea	#<$1f
  2310 04:0761: F4 00 00     	pea	#<$0
  2311 04:0764: D4 03        	pei	<L95+pMenu_1+2
  2312 04:0766: D4 01        	pei	<L95+pMenu_1
  2313 04:0768: 22 xx xx xx  	jsl	~~memset
  2314                        ;
  2315                        ;	pMenu->pCaption = NULL;//k_string_copy_string("@
                    root");
  2316                        	.line	272
  2317 04:076C: A9 00 00     	lda	#$0
  2318 04:076F: A0 0F 00     	ldy	#$f
  2319 04:0772: 97 01        	sta	[<L95+pMenu_1],Y
  2320 04:0774: A9 00 00     	lda	#$0
  2321 04:0777: A0 11 00     	ldy	#$11
  2322 04:077A: 97 01        	sta	[<L95+pMenu_1],Y
  2323                        ;	pMenu->width    = 0;
  2324                        	.line	273
  2325 04:077C: A9 00 00     	lda	#$0
  2326 04:077F: A0 04 00     	ldy	#$4
  2327 04:0782: 97 01        	sta	[<L95+pMenu_1],Y
  2328                        ;	pMenu->height   = 0;
  2329                        	.line	274
  2330 04:0784: A9 00 00     	lda	#$0
  2331 04:0787: A0 06 00     	ldy	#$6
  2332 04:078A: 97 01        	sta	[<L95+pMenu_1],Y
  2333                        ;	pMenu->subMenus = NULL;
  2334                        	.line	275
  2335 04:078C: A9 00 00     	lda	#$0
  2336 04:078F: A0 13 00     	ldy	#$13
  2337 04:0792: 97 01        	sta	[<L95+pMenu_1],Y
  2338 04:0794: A9 00 00     	lda	#$0
  2339 04:0797: A0 15 00     	ldy	#$15
  2340 04:079A: 97 01        	sta	[<L95+pMenu_1],Y
  2341                        ;
  2342                        ;	k_debug_strings("k_user_CreateMenuResource:","Ex
                    it");
  2343                        	.line	277
  2344 04:079C: F4 xx xx     	pea	#^L93+60
  2345 04:079F: F4 xx xx     	pea	#<L93+60
  2346 04:07A2: F4 xx xx     	pea	#^L93+33
  2347 04:07A5: F4 xx xx     	pea	#<L93+33
  2348 04:07A8: 22 xx xx xx  	jsl	~~k_debug_strings
  2349                        ;
  Tue Oct  1 2019  1:02                                                Page 47


  2350                        ;	return (HMENU)pMenu;
  2351                        	.line	279
  2352 04:07AC: A6 03        	ldx	<L95+pMenu_1+2
  2353 04:07AE: A5 01        	lda	<L95+pMenu_1
  2354                        L97:
  2355 04:07B0: A8           	tay
  2356 04:07B1: 2B           	pld
  2357 04:07B2: 3B           	tsc
  2358 04:07B3: 18           	clc
  2359 04:07B4: 69 04 00     	adc	#L94
  2360 04:07B7: 1B           	tcs
  2361 04:07B8: 98           	tya
  2362 04:07B9: 6B           	rtl
  2363                        ;}
  2364                        	.line	280
  2365                        	.endblock	280
  2366             00000004   L94	equ	4
  2367             00000001   L95	equ	1
  2368 04:07BA:              	ends
  2369                        	efunc
  2370                        	.endfunc	280,1,4
  2371                        	.line	280
  2372                        	data
  2373                        L93:
  2374 00:0208: 6B 5F 75 73  	db	$6B,$5F,$75,$73,$65,$72,$5F,$43,$72,$65,
                    $61,$74,$65,$4D,$65
       00:020C: 65 72 5F 43 
       00:0210: 72 65 61 74 
       00:0214: 65 4D 65 
  2375 00:0217: 6E 75 52 65  	db	$6E,$75,$52,$65,$73,$6F,$75,$72,$63,$65,
                    $3A,$00,$45,$6E,$74
       00:021B: 73 6F 75 72 
       00:021F: 63 65 3A 00 
       00:0223: 45 6E 74 
  2376 00:0226: 65 72 00 6B  	db	$65,$72,$00,$6B,$5F,$75,$73,$65,$72,$5F,
                    $43,$72,$65,$61,$74
       00:022A: 5F 75 73 65 
       00:022E: 72 5F 43 72 
       00:0232: 65 61 74 
  2377 00:0235: 65 4D 65 6E  	db	$65,$4D,$65,$6E,$75,$52,$65,$73,$6F,$75,
                    $72,$63,$65,$3A,$00
       00:0239: 75 52 65 73 
       00:023D: 6F 75 72 63 
       00:0241: 65 3A 00 
  2378 00:0244: 45 78 69 74  	db	$45,$78,$69,$74,$00
       00:0248: 00 
  2379 00:0249:              	ends
  2380                        ;
  2381                        ;HMENU k_user_AddMenuItem(HMENU hMenu,LPCSTR menuC
                    aption,UINT menuId)
  2382                        ;{
  2383                        	.line	282
  2384                        	.line	283
  2385                        	WINMAN
  2386                        	xdef	~~k_user_AddMenuItem
  2387                        	func
  2388                        	.function	283
  2389                        ~~k_user_AddMenuItem:
  Tue Oct  1 2019  1:02                                                Page 48


  2390                        	longa	on
  2391                        	longi	on
  2392 04:07BA: 3B           	tsc
  2393 04:07BB: 38           	sec
  2394 04:07BC: E9 0C 00     	sbc	#L99
  2395 04:07BF: 1B           	tcs
  2396 04:07C0: 0B           	phd
  2397 04:07C1: 5B           	tcd
  2398             00000004   hMenu_0	set	4
  2399             00000008   menuCaption_0	set	8
  2400             0000000C   menuId_0	set	12
  2401                        	.block	283
  2402                        ;	PMENU pMenu = NULL;
  2403                        ;	PMENU pRoot = (PMENU)hMenu;
  2404                        ;
  2405                        ;	//k_debug_strings("k_user_AddMenuItem:","Enter")
                    ;
  2406                        ;
  2407                        ;	if(pRoot)
  2408             00000000   pMenu_1	set	0
  2409             00000004   pRoot_1	set	4
  2410                        	.sym	pMenu,0,138,1,32,27
  2411                        	.sym	pRoot,4,138,1,32,27
  2412                        	.sym	hMenu,4,129,6,32
  2413                        	.sym	menuCaption,8,142,6,32
  2414                        	.sym	menuId,12,16,6,16
  2415 04:07C2: 64 05        	stz	<L100+pMenu_1
  2416 04:07C4: 64 07        	stz	<L100+pMenu_1+2
  2417 04:07C6: A5 10        	lda	<L99+hMenu_0
  2418 04:07C8: 85 09        	sta	<L100+pRoot_1
  2419 04:07CA: A5 12        	lda	<L99+hMenu_0+2
  2420 04:07CC: 85 0B        	sta	<L100+pRoot_1+2
  2421                        	.line	289
  2422                        ;	{
  2423 04:07CE: A5 09        	lda	<L100+pRoot_1
  2424 04:07D0: 05 0B        	ora	<L100+pRoot_1+2
  2425 04:07D2: D0 03        	bne	L102
  2426 04:07D4: 82 BA 00     	brl	L10010
  2427                        L102:
  2428                        	.line	290
  2429                        ;
  2430                        ;		pMenu = k_mem_allocate_heap(sizeof(MENU)
                    );
  2431                        	.line	292
  2432 04:07D7: F4 1F 00     	pea	#<$1f
  2433 04:07DA: 22 xx xx xx  	jsl	~~k_mem_allocate_heap
  2434 04:07DE: 85 05        	sta	<L100+pMenu_1
  2435 04:07E0: 86 07        	stx	<L100+pMenu_1+2
  2436                        ;		memset(pMenu,0,sizeof(MENU));
  2437                        	.line	293
  2438 04:07E2: F4 1F 00     	pea	#<$1f
  2439 04:07E5: F4 00 00     	pea	#<$0
  2440 04:07E8: D4 07        	pei	<L100+pMenu_1+2
  2441 04:07EA: D4 05        	pei	<L100+pMenu_1
  2442 04:07EC: 22 xx xx xx  	jsl	~~memset
  2443                        ;		pMenu->itemId = menuId;
  2444                        	.line	294
  2445 04:07F0: A5 18        	lda	<L99+menuId_0
  Tue Oct  1 2019  1:02                                                Page 49


  2446 04:07F2: A0 0D 00     	ldy	#$d
  2447 04:07F5: 97 05        	sta	[<L100+pMenu_1],Y
  2448                        ;		pMenu->pCaption = k_string_copy_string(m
                    enuCaption);
  2449                        	.line	295
  2450 04:07F7: D4 16        	pei	<L99+menuCaption_0+2
  2451 04:07F9: D4 14        	pei	<L99+menuCaption_0
  2452 04:07FB: 22 xx xx xx  	jsl	~~k_string_copy_string
  2453 04:07FF: 85 01        	sta	<R0
  2454 04:0801: 86 03        	stx	<R0+2
  2455 04:0803: A5 01        	lda	<R0
  2456 04:0805: A0 0F 00     	ldy	#$f
  2457 04:0808: 97 05        	sta	[<L100+pMenu_1],Y
  2458 04:080A: A5 03        	lda	<R0+2
  2459 04:080C: A0 11 00     	ldy	#$11
  2460 04:080F: 97 05        	sta	[<L100+pMenu_1],Y
  2461                        ;		pMenu->cx 	  = 0;
  2462                        	.line	296
  2463 04:0811: A9 00 00     	lda	#$0
  2464 04:0814: 87 05        	sta	[<L100+pMenu_1]
  2465                        ;		pMenu->cy	  = 0;
  2466                        	.line	297
  2467 04:0816: A9 00 00     	lda	#$0
  2468 04:0819: A0 02 00     	ldy	#$2
  2469 04:081C: 97 05        	sta	[<L100+pMenu_1],Y
  2470                        ;		pMenu->width  = 0;
  2471                        	.line	298
  2472 04:081E: A9 00 00     	lda	#$0
  2473 04:0821: A0 04 00     	ldy	#$4
  2474 04:0824: 97 05        	sta	[<L100+pMenu_1],Y
  2475                        ;		pMenu->height = 0;
  2476                        	.line	299
  2477 04:0826: A9 00 00     	lda	#$0
  2478 04:0829: A0 06 00     	ldy	#$6
  2479 04:082C: 97 05        	sta	[<L100+pMenu_1],Y
  2480                        ;
  2481                        ;		if(!pRoot->subMenus)
  2482                        	.line	301
  2483                        ;		{
  2484 04:082E: A0 13 00     	ldy	#$13
  2485 04:0831: B7 09        	lda	[<L100+pRoot_1],Y
  2486 04:0833: A0 15 00     	ldy	#$15
  2487 04:0836: 17 09        	ora	[<L100+pRoot_1],Y
  2488 04:0838: F0 03        	beq	L103
  2489 04:083A: 82 22 00     	brl	L10011
  2490                        L103:
  2491                        	.line	302
  2492                        ;			pRoot->subMenus = k_nodelist_all
                    ocate_list("_menu_sub_item_list" ,k_deallocate_menu_resource
                    );
  2493                        	.line	303
  2494 04:083D: F4 04 00     	pea	#^~~k_deallocate_menu_resource
  2495 04:0840: F4 78 00     	pea	#<~~k_deallocate_menu_resource
  2496 04:0843: F4 xx xx     	pea	#^L98
  2497 04:0846: F4 xx xx     	pea	#<L98
  2498 04:0849: 22 xx xx xx  	jsl	~~k_nodelist_allocate_list
  2499 04:084D: 85 01        	sta	<R0
  2500 04:084F: 86 03        	stx	<R0+2
  Tue Oct  1 2019  1:02                                                Page 50


  2501 04:0851: A5 01        	lda	<R0
  2502 04:0853: A0 13 00     	ldy	#$13
  2503 04:0856: 97 09        	sta	[<L100+pRoot_1],Y
  2504 04:0858: A5 03        	lda	<R0+2
  2505 04:085A: A0 15 00     	ldy	#$15
  2506 04:085D: 97 09        	sta	[<L100+pRoot_1],Y
  2507                        ;		}
  2508                        	.line	304
  2509                        ;
  2510                        ;		if(pRoot->subMenus)
  2511                        L10011:
  2512                        	.line	306
  2513                        ;		{
  2514 04:085F: A0 13 00     	ldy	#$13
  2515 04:0862: B7 09        	lda	[<L100+pRoot_1],Y
  2516 04:0864: A0 15 00     	ldy	#$15
  2517 04:0867: 17 09        	ora	[<L100+pRoot_1],Y
  2518 04:0869: D0 03        	bne	L104
  2519 04:086B: 82 23 00     	brl	L10012
  2520                        L104:
  2521                        	.line	307
  2522                        ;			k_nodelist_addtolist(pRoot->subM
                    enus,NL_TYPE_WINDOW_MENU,pMenu->pCaption,pMenu);
  2523                        	.line	308
  2524 04:086E: D4 07        	pei	<L100+pMenu_1+2
  2525 04:0870: D4 05        	pei	<L100+pMenu_1
  2526 04:0872: A0 11 00     	ldy	#$11
  2527 04:0875: B7 05        	lda	[<L100+pMenu_1],Y
  2528 04:0877: 48           	pha
  2529 04:0878: A0 0F 00     	ldy	#$f
  2530 04:087B: B7 05        	lda	[<L100+pMenu_1],Y
  2531 04:087D: 48           	pha
  2532 04:087E: F4 03 00     	pea	#<$3
  2533 04:0881: A0 15 00     	ldy	#$15
  2534 04:0884: B7 09        	lda	[<L100+pRoot_1],Y
  2535 04:0886: 48           	pha
  2536 04:0887: A0 13 00     	ldy	#$13
  2537 04:088A: B7 09        	lda	[<L100+pRoot_1],Y
  2538 04:088C: 48           	pha
  2539 04:088D: 22 xx xx xx  	jsl	~~k_nodelist_addtolist
  2540                        ;		}
  2541                        	.line	309
  2542                        ;
  2543                        ;	}
  2544                        L10012:
  2545                        	.line	311
  2546                        ;
  2547                        ;	//k_debug_strings("k_user_AddMenuItem:","Exit");
  2548                        ;
  2549                        ;	return pMenu;
  2550                        L10010:
  2551                        	.line	315
  2552 04:0891: A6 07        	ldx	<L100+pMenu_1+2
  2553 04:0893: A5 05        	lda	<L100+pMenu_1
  2554                        L105:
  2555 04:0895: A8           	tay
  2556 04:0896: A5 0E        	lda	<L99+2
  2557 04:0898: 85 18        	sta	<L99+2+10
  Tue Oct  1 2019  1:02                                                Page 51


  2558 04:089A: A5 0D        	lda	<L99+1
  2559 04:089C: 85 17        	sta	<L99+1+10
  2560 04:089E: 2B           	pld
  2561 04:089F: 3B           	tsc
  2562 04:08A0: 18           	clc
  2563 04:08A1: 69 16 00     	adc	#L99+10
  2564 04:08A4: 1B           	tcs
  2565 04:08A5: 98           	tya
  2566 04:08A6: 6B           	rtl
  2567                        ;}
  2568                        	.line	316
  2569                        	.endblock	316
  2570             0000000C   L99	equ	12
  2571             00000005   L100	equ	5
  2572 04:08A7:              	ends
  2573                        	efunc
  2574                        	.endfunc	316,5,12
  2575                        	.line	316
  2576                        	data
  2577                        L98:
  2578 00:0249: 5F 6D 65 6E  	db	$5F,$6D,$65,$6E,$75,$5F,$73,$75,$62,$5F,
                    $69,$74,$65,$6D,$5F
       00:024D: 75 5F 73 75 
       00:0251: 62 5F 69 74 
       00:0255: 65 6D 5F 
  2579 00:0258: 6C 69 73 74  	db	$6C,$69,$73,$74,$00
       00:025C: 00 
  2580 00:025D:              	ends
  2581                        ;
  2582                        ;PWINDOW	k_user_CreateMenu(HWND      hWndParent,
  2583                        ;						  HMENU 
                        hMenu,
  2584                        ;						  HINSTA
                    NCE hInstance)
  2585                        ;{
  2586                        	.line	318
  2587                        	.line	321
  2588                        	WINMAN
  2589                        	xdef	~~k_user_CreateMenu
  2590                        	func
  2591                        	.function	321
  2592                        ~~k_user_CreateMenu:
  2593                        	longa	on
  2594                        	longi	on
  2595 04:08A7: 3B           	tsc
  2596 04:08A8: 38           	sec
  2597 04:08A9: E9 3C 00     	sbc	#L107
  2598 04:08AC: 1B           	tcs
  2599 04:08AD: 0B           	phd
  2600 04:08AE: 5B           	tcd
  2601             00000004   hWndParent_0	set	4
  2602             00000008   hMenu_0	set	8
  2603             0000000C   hInstance_0	set	12
  2604                        	.block	321
  2605                        ;
  2606                        ;	PFXNODE   found = NULL;
  2607                        ;	PFXNODE   new = NULL;
  2608                        ;	PWINDOW   pWin = NULL;
  Tue Oct  1 2019  1:02                                                Page 52


  2609                        ;	PWNDCLASS wndClass = NULL;
  2610                        ;	PWINDOW   pParent = NULL;
  2611                        ;	CHAR localBuffer[32];
  2612                        ;
  2613                        ;	k_debug_pointer("k_user_CreateMenu:Parent hWnd:"
                    ,hWndParent);
  2614             00000000   found_1	set	0
  2615             00000004   new_1	set	4
  2616             00000008   pWin_1	set	8
  2617             0000000C   wndClass_1	set	12
  2618             00000010   pParent_1	set	16
  2619             00000014   localBuffer_1	set	20
  2620                        	.sym	found,0,138,1,32,2
  2621                        	.sym	new,4,138,1,32,2
  2622                        	.sym	pWin,8,138,1,32,23
  2623                        	.sym	wndClass,12,138,1,32,22
  2624                        	.sym	pParent,16,138,1,32,23
  2625                        	.sym	localBuffer,20,110,1,0,32
  2626                        	.sym	hWndParent,4,129,6,32
  2627                        	.sym	hMenu,8,129,6,32
  2628                        	.sym	hInstance,12,129,6,32
  2629 04:08AF: 64 09        	stz	<L108+found_1
  2630 04:08B1: 64 0B        	stz	<L108+found_1+2
  2631 04:08B3: 64 0D        	stz	<L108+new_1
  2632 04:08B5: 64 0F        	stz	<L108+new_1+2
  2633 04:08B7: 64 11        	stz	<L108+pWin_1
  2634 04:08B9: 64 13        	stz	<L108+pWin_1+2
  2635 04:08BB: 64 15        	stz	<L108+wndClass_1
  2636 04:08BD: 64 17        	stz	<L108+wndClass_1+2
  2637 04:08BF: 64 19        	stz	<L108+pParent_1
  2638 04:08C1: 64 1B        	stz	<L108+pParent_1+2
  2639                        	.line	330
  2640 04:08C3: D4 42        	pei	<L107+hWndParent_0+2
  2641 04:08C5: D4 40        	pei	<L107+hWndParent_0
  2642 04:08C7: F4 xx xx     	pea	#^L106
  2643 04:08CA: F4 xx xx     	pea	#<L106
  2644 04:08CD: 22 xx xx xx  	jsl	~~k_debug_pointer
  2645                        ;	k_debug_pointer("k_user_CreateMenu:DesktopWindow
                    :",k_user_getDesktopWindow());
  2646                        	.line	331
  2647 04:08D1: 22 B9 02 04  	jsl	~~k_user_getDesktopWindow
  2648 04:08D5: 85 01        	sta	<R0
  2649 04:08D7: 86 03        	stx	<R0+2
  2650 04:08D9: DA           	phx
  2651 04:08DA: 48           	pha
  2652 04:08DB: F4 xx xx     	pea	#^L106+31
  2653 04:08DE: F4 xx xx     	pea	#<L106+31
  2654 04:08E1: 22 xx xx xx  	jsl	~~k_debug_pointer
  2655                        ;
  2656                        ;
  2657                        ;
  2658                        ;
  2659                        ;	found = k_nodelist_searchByName(_k_windowManager
                    _WindowClassList,"menuWindowClass");
  2660                        	.line	336
  2661 04:08E5: F4 xx xx     	pea	#^L106+64
  2662 04:08E8: F4 xx xx     	pea	#<L106+64
  2663 04:08EB: AD xx xx     	lda	|~~_k_windowManager_WindowClassList+2
  Tue Oct  1 2019  1:02                                                Page 53


  2664 04:08EE: 48           	pha
  2665 04:08EF: AD xx xx     	lda	|~~_k_windowManager_WindowClassList
  2666 04:08F2: 48           	pha
  2667 04:08F3: 22 xx xx xx  	jsl	~~k_nodelist_searchByName
  2668 04:08F7: 85 09        	sta	<L108+found_1
  2669 04:08F9: 86 0B        	stx	<L108+found_1+2
  2670                        ;	if(found && found->data)
  2671                        	.line	337
  2672                        ;	{
  2673 04:08FB: A5 09        	lda	<L108+found_1
  2674 04:08FD: 05 0B        	ora	<L108+found_1+2
  2675 04:08FF: D0 03        	bne	L110
  2676 04:0901: 82 0A 02     	brl	L10013
  2677                        L110:
  2678 04:0904: A0 02 00     	ldy	#$2
  2679 04:0907: B7 09        	lda	[<L108+found_1],Y
  2680 04:0909: A0 04 00     	ldy	#$4
  2681 04:090C: 17 09        	ora	[<L108+found_1],Y
  2682 04:090E: D0 03        	bne	L111
  2683 04:0910: 82 FB 01     	brl	L10013
  2684                        L111:
  2685                        	.line	338
  2686                        ;		wndClass = (PWNDCLASS)found->data;
  2687                        	.line	339
  2688 04:0913: A0 02 00     	ldy	#$2
  2689 04:0916: B7 09        	lda	[<L108+found_1],Y
  2690 04:0918: 85 15        	sta	<L108+wndClass_1
  2691 04:091A: A0 04 00     	ldy	#$4
  2692 04:091D: B7 09        	lda	[<L108+found_1],Y
  2693 04:091F: 85 17        	sta	<L108+wndClass_1+2
  2694                        ;
  2695                        ;		k_debug_strings("k_user_CreateMenu:Found
                     WndClass:",(LPVOID)wndClass->lpszClassName);
  2696                        	.line	341
  2697 04:0921: A0 1E 00     	ldy	#$1e
  2698 04:0924: B7 15        	lda	[<L108+wndClass_1],Y
  2699 04:0926: 48           	pha
  2700 04:0927: A0 1C 00     	ldy	#$1c
  2701 04:092A: B7 15        	lda	[<L108+wndClass_1],Y
  2702 04:092C: 48           	pha
  2703 04:092D: F4 xx xx     	pea	#^L106+80
  2704 04:0930: F4 xx xx     	pea	#<L106+80
  2705 04:0933: 22 xx xx xx  	jsl	~~k_debug_strings
  2706                        ;
  2707                        ;		pWin = k_mem_allocate_heap(sizeof(WINDOW
                    ));
  2708                        	.line	343
  2709 04:0937: F4 61 00     	pea	#<$61
  2710 04:093A: 22 xx xx xx  	jsl	~~k_mem_allocate_heap
  2711 04:093E: 85 11        	sta	<L108+pWin_1
  2712 04:0940: 86 13        	stx	<L108+pWin_1+2
  2713                        ;		if(pWin)
  2714                        	.line	344
  2715                        ;		{
  2716 04:0942: A5 11        	lda	<L108+pWin_1
  2717 04:0944: 05 13        	ora	<L108+pWin_1+2
  2718 04:0946: D0 03        	bne	L112
  2719 04:0948: 82 C3 01     	brl	L10014
  Tue Oct  1 2019  1:02                                                Page 54


  2720                        L112:
  2721                        	.line	345
  2722                        ;			pParent = k_getWindowFromHandle(
                    hWndParent);
  2723                        	.line	346
  2724 04:094B: D4 42        	pei	<L107+hWndParent_0+2
  2725 04:094D: D4 40        	pei	<L107+hWndParent_0
  2726 04:094F: 22 AA 03 04  	jsl	~~k_getWindowFromHandle
  2727 04:0953: 85 19        	sta	<L108+pParent_1
  2728 04:0955: 86 1B        	stx	<L108+pParent_1+2
  2729                        ;
  2730                        ;			memset(pWin,0,sizeof(WINDOW));
  2731                        	.line	348
  2732 04:0957: F4 61 00     	pea	#<$61
  2733 04:095A: F4 00 00     	pea	#<$0
  2734 04:095D: D4 13        	pei	<L108+pWin_1+2
  2735 04:095F: D4 11        	pei	<L108+pWin_1
  2736 04:0961: 22 xx xx xx  	jsl	~~memset
  2737                        ;			pWin->cbSize = sizeof(WINDOW);
  2738                        	.line	349
  2739 04:0965: A9 61 00     	lda	#$61
  2740 04:0968: 87 11        	sta	[<L108+pWin_1]
  2741                        ;			pWin->pParentWindow = hWndParent
                    ;
  2742                        	.line	350
  2743 04:096A: A5 40        	lda	<L107+hWndParent_0
  2744 04:096C: A0 4C 00     	ldy	#$4c
  2745 04:096F: 97 11        	sta	[<L108+pWin_1],Y
  2746 04:0971: A5 42        	lda	<L107+hWndParent_0+2
  2747 04:0973: A0 4E 00     	ldy	#$4e
  2748 04:0976: 97 11        	sta	[<L108+pWin_1],Y
  2749                        ;			pWin->pWndClass 	= wndCla
                    ss;
  2750                        	.line	351
  2751 04:0978: A5 15        	lda	<L108+wndClass_1
  2752 04:097A: A0 48 00     	ldy	#$48
  2753 04:097D: 97 11        	sta	[<L108+pWin_1],Y
  2754 04:097F: A5 17        	lda	<L108+wndClass_1+2
  2755 04:0981: A0 4A 00     	ldy	#$4a
  2756 04:0984: 97 11        	sta	[<L108+pWin_1],Y
  2757                        ;			strcpy(pWin->win_title,(LPCSTR)k
                    _longtodec((ULONG)pWin,localBuffer));
  2758                        	.line	352
  2759 04:0986: F4 00 00     	pea	#0
  2760 04:0989: 18           	clc
  2761 04:098A: 7B           	tdc
  2762 04:098B: 69 1D 00     	adc	#<L108+localBuffer_1
  2763 04:098E: 48           	pha
  2764 04:098F: D4 13        	pei	<L108+pWin_1+2
  2765 04:0991: D4 11        	pei	<L108+pWin_1
  2766 04:0993: 22 xx xx xx  	jsl	~~k_longtodec
  2767 04:0997: 85 01        	sta	<R0
  2768 04:0999: 86 03        	stx	<R0+2
  2769 04:099B: DA           	phx
  2770 04:099C: 48           	pha
  2771 04:099D: 18           	clc
  2772 04:099E: A9 14 00     	lda	#$14
  2773 04:09A1: 65 11        	adc	<L108+pWin_1
  Tue Oct  1 2019  1:02                                                Page 55


  2774 04:09A3: 85 05        	sta	<R1
  2775 04:09A5: A9 00 00     	lda	#$0
  2776 04:09A8: 65 13        	adc	<L108+pWin_1+2
  2777 04:09AA: 85 07        	sta	<R1+2
  2778 04:09AC: D4 07        	pei	<R1+2
  2779 04:09AE: D4 05        	pei	<R1
  2780 04:09B0: 22 xx xx xx  	jsl	~~strcpy
  2781                        ;			pWin->win_x		 = 0;
  2782                        	.line	353
  2783 04:09B4: A9 00 00     	lda	#$0
  2784 04:09B7: A0 08 00     	ldy	#$8
  2785 04:09BA: 97 11        	sta	[<L108+pWin_1],Y
  2786                        ;			pWin->win_y 	 = 0;
  2787                        	.line	354
  2788 04:09BC: A9 00 00     	lda	#$0
  2789 04:09BF: A0 0A 00     	ldy	#$a
  2790 04:09C2: 97 11        	sta	[<L108+pWin_1],Y
  2791                        ;			pWin->win_width  = k_user_getSys
                    temMetric(SM_CXMENUSIZE);
  2792                        	.line	355
  2793 04:09C4: F4 36 00     	pea	#<$36
  2794 04:09C7: 22 2C 28 04  	jsl	~~k_user_getSystemMetric
  2795 04:09CB: A0 0C 00     	ldy	#$c
  2796 04:09CE: 97 11        	sta	[<L108+pWin_1],Y
  2797                        ;			pWin->win_height = k_user_getSys
                    temMetric(SM_CYMENUSIZE);
  2798                        	.line	356
  2799 04:09D0: F4 37 00     	pea	#<$37
  2800 04:09D3: 22 2C 28 04  	jsl	~~k_user_getSystemMetric
  2801 04:09D7: A0 0E 00     	ldy	#$e
  2802 04:09DA: 97 11        	sta	[<L108+pWin_1],Y
  2803                        ;			pWin->hMenu 	 = hMenu;
  2804                        	.line	357
  2805 04:09DC: A5 44        	lda	<L107+hMenu_0
  2806 04:09DE: A0 50 00     	ldy	#$50
  2807 04:09E1: 97 11        	sta	[<L108+pWin_1],Y
  2808 04:09E3: A5 46        	lda	<L107+hMenu_0+2
  2809 04:09E5: A0 52 00     	ldy	#$52
  2810 04:09E8: 97 11        	sta	[<L108+pWin_1],Y
  2811                        ;			pWin->clickable  = k_mem_allocat
                    e_heap(sizeof(CLICKABLE));
  2812                        	.line	358
  2813 04:09EA: F4 0A 00     	pea	#<$a
  2814 04:09ED: 22 xx xx xx  	jsl	~~k_mem_allocate_heap
  2815 04:09F1: 85 01        	sta	<R0
  2816 04:09F3: 86 03        	stx	<R0+2
  2817 04:09F5: A5 01        	lda	<R0
  2818 04:09F7: A0 10 00     	ldy	#$10
  2819 04:09FA: 97 11        	sta	[<L108+pWin_1],Y
  2820 04:09FC: A5 03        	lda	<R0+2
  2821 04:09FE: A0 12 00     	ldy	#$12
  2822 04:0A01: 97 11        	sta	[<L108+pWin_1],Y
  2823                        ;			if(pWin->clickable)
  2824                        	.line	359
  2825                        ;			{
  2826 04:0A03: A0 10 00     	ldy	#$10
  2827 04:0A06: B7 11        	lda	[<L108+pWin_1],Y
  2828 04:0A08: A0 12 00     	ldy	#$12
  Tue Oct  1 2019  1:02                                                Page 56


  2829 04:0A0B: 17 11        	ora	[<L108+pWin_1],Y
  2830 04:0A0D: D0 03        	bne	L113
  2831 04:0A0F: 82 5D 00     	brl	L10015
  2832                        L113:
  2833                        	.line	360
  2834                        ;				((PCLICKABLE)pWin->click
                    able)->area.x 		= pWin->win_x;
  2835                        	.line	361
  2836 04:0A12: A0 10 00     	ldy	#$10
  2837 04:0A15: B7 11        	lda	[<L108+pWin_1],Y
  2838 04:0A17: 85 01        	sta	<R0
  2839 04:0A19: A0 12 00     	ldy	#$12
  2840 04:0A1C: B7 11        	lda	[<L108+pWin_1],Y
  2841 04:0A1E: 85 03        	sta	<R0+2
  2842 04:0A20: A0 08 00     	ldy	#$8
  2843 04:0A23: B7 11        	lda	[<L108+pWin_1],Y
  2844 04:0A25: 87 01        	sta	[<R0]
  2845                        ;				((PCLICKABLE)pWin->click
                    able)->area.y 		= pWin->win_y;
  2846                        	.line	362
  2847 04:0A27: A0 10 00     	ldy	#$10
  2848 04:0A2A: B7 11        	lda	[<L108+pWin_1],Y
  2849 04:0A2C: 85 01        	sta	<R0
  2850 04:0A2E: A0 12 00     	ldy	#$12
  2851 04:0A31: B7 11        	lda	[<L108+pWin_1],Y
  2852 04:0A33: 85 03        	sta	<R0+2
  2853 04:0A35: A0 0A 00     	ldy	#$a
  2854 04:0A38: B7 11        	lda	[<L108+pWin_1],Y
  2855 04:0A3A: A0 02 00     	ldy	#$2
  2856 04:0A3D: 97 01        	sta	[<R0],Y
  2857                        ;				((PCLICKABLE)pWin->click
                    able)->area.height 	= pWin->win_height;
  2858                        	.line	363
  2859 04:0A3F: A0 10 00     	ldy	#$10
  2860 04:0A42: B7 11        	lda	[<L108+pWin_1],Y
  2861 04:0A44: 85 01        	sta	<R0
  2862 04:0A46: A0 12 00     	ldy	#$12
  2863 04:0A49: B7 11        	lda	[<L108+pWin_1],Y
  2864 04:0A4B: 85 03        	sta	<R0+2
  2865 04:0A4D: A0 0E 00     	ldy	#$e
  2866 04:0A50: B7 11        	lda	[<L108+pWin_1],Y
  2867 04:0A52: A0 06 00     	ldy	#$6
  2868 04:0A55: 97 01        	sta	[<R0],Y
  2869                        ;				((PCLICKABLE)pWin->click
                    able)->area.width 	= pWin->win_width;
  2870                        	.line	364
  2871 04:0A57: A0 10 00     	ldy	#$10
  2872 04:0A5A: B7 11        	lda	[<L108+pWin_1],Y
  2873 04:0A5C: 85 01        	sta	<R0
  2874 04:0A5E: A0 12 00     	ldy	#$12
  2875 04:0A61: B7 11        	lda	[<L108+pWin_1],Y
  2876 04:0A63: 85 03        	sta	<R0+2
  2877 04:0A65: A0 0C 00     	ldy	#$c
  2878 04:0A68: B7 11        	lda	[<L108+pWin_1],Y
  2879 04:0A6A: A0 04 00     	ldy	#$4
  2880 04:0A6D: 97 01        	sta	[<R0],Y
  2881                        ;			}
  2882                        	.line	365
  Tue Oct  1 2019  1:02                                                Page 57


  2883                        ;
  2884                        ;			k_debug_strings("k_user_CreateMe
                    nu:F","After clickable");
  2885                        L10015:
  2886                        	.line	367
  2887 04:0A6F: F4 xx xx     	pea	#^L106+134
  2888 04:0A72: F4 xx xx     	pea	#<L106+134
  2889 04:0A75: F4 xx xx     	pea	#^L106+114
  2890 04:0A78: F4 xx xx     	pea	#<L106+114
  2891 04:0A7B: 22 xx xx xx  	jsl	~~k_debug_strings
  2892                        ;
  2893                        ;			((PMENU)hMenu)->cx 		
                    = pWin->win_x;
  2894                        	.line	369
  2895 04:0A7F: A0 08 00     	ldy	#$8
  2896 04:0A82: B7 11        	lda	[<L108+pWin_1],Y
  2897 04:0A84: 87 44        	sta	[<L107+hMenu_0]
  2898                        ;			((PMENU)hMenu)->cy 		
                    = pWin->win_y;
  2899                        	.line	370
  2900 04:0A86: A0 0A 00     	ldy	#$a
  2901 04:0A89: B7 11        	lda	[<L108+pWin_1],Y
  2902 04:0A8B: A0 02 00     	ldy	#$2
  2903 04:0A8E: 97 44        	sta	[<L107+hMenu_0],Y
  2904                        ;			((PMENU)hMenu)->height 	= pWin->
                    win_height;
  2905                        	.line	371
  2906 04:0A90: A0 0E 00     	ldy	#$e
  2907 04:0A93: B7 11        	lda	[<L108+pWin_1],Y
  2908 04:0A95: A0 06 00     	ldy	#$6
  2909 04:0A98: 97 44        	sta	[<L107+hMenu_0],Y
  2910                        ;			((PMENU)hMenu)->width 	= pWin->
                    win_width;
  2911                        	.line	372
  2912 04:0A9A: A0 0C 00     	ldy	#$c
  2913 04:0A9D: B7 11        	lda	[<L108+pWin_1],Y
  2914 04:0A9F: A0 04 00     	ldy	#$4
  2915 04:0AA2: 97 44        	sta	[<L107+hMenu_0],Y
  2916                        ;
  2917                        ;
  2918                        ;			if(pParent)
  2919                        	.line	375
  2920                        ;				pWin->isVisible = pParen
                    t->isVisible;
  2921 04:0AA4: A5 19        	lda	<L108+pParent_1
  2922 04:0AA6: 05 1B        	ora	<L108+pParent_1+2
  2923 04:0AA8: D0 03        	bne	L114
  2924 04:0AAA: 82 0E 00     	brl	L10016
  2925                        L114:
  2926                        	.line	376
  2927 04:0AAD: E2 20        	sep	#$20
  2928                        	longa	off
  2929 04:0AAF: A0 5C 00     	ldy	#$5c
  2930 04:0AB2: B7 19        	lda	[<L108+pParent_1],Y
  2931 04:0AB4: A0 5C 00     	ldy	#$5c
  2932 04:0AB7: 97 11        	sta	[<L108+pWin_1],Y
  2933 04:0AB9: C2 20        	rep	#$20
  2934                        	longa	on
  Tue Oct  1 2019  1:02                                                Page 58


  2935                        ;
  2936                        ;
  2937                        ;			k_add_child_window(pParent,pWin,
                    k_update_hover_location);//k_menuHitDetected);
  2938                        L10016:
  2939                        	.line	379
  2940 04:0ABB: F4 04 00     	pea	#^~~k_update_hover_location
  2941 04:0ABE: F4 7E 20     	pea	#<~~k_update_hover_location
  2942 04:0AC1: D4 13        	pei	<L108+pWin_1+2
  2943 04:0AC3: D4 11        	pei	<L108+pWin_1
  2944 04:0AC5: D4 1B        	pei	<L108+pParent_1+2
  2945 04:0AC7: D4 19        	pei	<L108+pParent_1
  2946 04:0AC9: 22 39 1F 04  	jsl	~~k_add_child_window
  2947                        ;
  2948                        ;			//k_debug_strings("k_user_Create
                    Menu:F","After k_add_child_window");
  2949                        ;
  2950                        ;			k_nodelist_naddtolist(_k_windowM
                    anager_WindowObjectList,NL_TYPE_WINDOW_OBJ,(ULONG)k_getHandl
                    eFromWindow(pWin),pWin);
  2951                        	.line	383
  2952 04:0ACD: D4 13        	pei	<L108+pWin_1+2
  2953 04:0ACF: D4 11        	pei	<L108+pWin_1
  2954 04:0AD1: D4 13        	pei	<L108+pWin_1+2
  2955 04:0AD3: D4 11        	pei	<L108+pWin_1
  2956 04:0AD5: 22 8C 03 04  	jsl	~~k_getHandleFromWindow
  2957 04:0AD9: 85 01        	sta	<R0
  2958 04:0ADB: 86 03        	stx	<R0+2
  2959 04:0ADD: D4 03        	pei	<R0+2
  2960 04:0ADF: D4 01        	pei	<R0
  2961 04:0AE1: F4 02 00     	pea	#<$2
  2962 04:0AE4: AD xx xx     	lda	|~~_k_windowManager_WindowObjectList+2
  2963 04:0AE7: 48           	pha
  2964 04:0AE8: AD xx xx     	lda	|~~_k_windowManager_WindowObjectList
  2965 04:0AEB: 48           	pha
  2966 04:0AEC: 22 xx xx xx  	jsl	~~k_nodelist_naddtolist
  2967                        ;
  2968                        ;			//k_debug_strings("k_user_Create
                    Menu:F","After k_nodelist_addtolist");
  2969                        ;
  2970                        ;			k_send_window_message(k_getHandl
                    eFromWindow(pWin),FX_CREATE_WINDOW,NULL,0);
  2971                        	.line	387
  2972 04:0AF0: F4 00 00     	pea	#<$0
  2973 04:0AF3: F4 00 00     	pea	#^$0
  2974 04:0AF6: F4 00 00     	pea	#<$0
  2975 04:0AF9: F4 03 FF     	pea	#<$ff03
  2976 04:0AFC: D4 13        	pei	<L108+pWin_1+2
  2977 04:0AFE: D4 11        	pei	<L108+pWin_1
  2978 04:0B00: 22 8C 03 04  	jsl	~~k_getHandleFromWindow
  2979 04:0B04: 85 01        	sta	<R0
  2980 04:0B06: 86 03        	stx	<R0+2
  2981 04:0B08: DA           	phx
  2982 04:0B09: 48           	pha
  2983 04:0B0A: 22 xx xx xx  	jsl	~~k_send_window_message
  2984                        ;
  2985                        ;			//k_debug_strings("k_user_Create
                    Menu:F","After k_send_window_message");
  Tue Oct  1 2019  1:02                                                Page 59


  2986                        ;		}
  2987                        	.line	390
  2988                        ;	}
  2989                        L10014:
  2990                        	.line	391
  2991                        ;	return pWin;
  2992                        L10013:
  2993                        	.line	392
  2994 04:0B0E: A6 13        	ldx	<L108+pWin_1+2
  2995 04:0B10: A5 11        	lda	<L108+pWin_1
  2996                        L115:
  2997 04:0B12: A8           	tay
  2998 04:0B13: A5 3E        	lda	<L107+2
  2999 04:0B15: 85 4A        	sta	<L107+2+12
  3000 04:0B17: A5 3D        	lda	<L107+1
  3001 04:0B19: 85 49        	sta	<L107+1+12
  3002 04:0B1B: 2B           	pld
  3003 04:0B1C: 3B           	tsc
  3004 04:0B1D: 18           	clc
  3005 04:0B1E: 69 48 00     	adc	#L107+12
  3006 04:0B21: 1B           	tcs
  3007 04:0B22: 98           	tya
  3008 04:0B23: 6B           	rtl
  3009                        ;}
  3010                        	.line	393
  3011                        	.endblock	393
  3012             0000003C   L107	equ	60
  3013             00000009   L108	equ	9
  3014 04:0B24:              	ends
  3015                        	efunc
  3016                        	.endfunc	393,9,60
  3017                        	.line	393
  3018                        	data
  3019                        L106:
  3020 00:025D: 6B 5F 75 73  	db	$6B,$5F,$75,$73,$65,$72,$5F,$43,$72,$65,
                    $61,$74,$65,$4D,$65
       00:0261: 65 72 5F 43 
       00:0265: 72 65 61 74 
       00:0269: 65 4D 65 
  3021 00:026C: 6E 75 3A 50  	db	$6E,$75,$3A,$50,$61,$72,$65,$6E,$74,$20,
                    $68,$57,$6E,$64,$3A
       00:0270: 61 72 65 6E 
       00:0274: 74 20 68 57 
       00:0278: 6E 64 3A 
  3022 00:027B: 00 6B 5F 75  	db	$00,$6B,$5F,$75,$73,$65,$72,$5F,$43,$72,
                    $65,$61,$74,$65,$4D
       00:027F: 73 65 72 5F 
       00:0283: 43 72 65 61 
       00:0287: 74 65 4D 
  3023 00:028A: 65 6E 75 3A  	db	$65,$6E,$75,$3A,$44,$65,$73,$6B,$74,$6F,
                    $70,$57,$69,$6E,$64
       00:028E: 44 65 73 6B 
       00:0292: 74 6F 70 57 
       00:0296: 69 6E 64 
  3024 00:0299: 6F 77 3A 00  	db	$6F,$77,$3A,$00,$6D,$65,$6E,$75,$57,$69,
                    $6E,$64,$6F,$77,$43
       00:029D: 6D 65 6E 75 
       00:02A1: 57 69 6E 64 
  Tue Oct  1 2019  1:02                                                Page 60


       00:02A5: 6F 77 43 
  3025 00:02A8: 6C 61 73 73  	db	$6C,$61,$73,$73,$00,$6B,$5F,$75,$73,$65,
                    $72,$5F,$43,$72,$65
       00:02AC: 00 6B 5F 75 
       00:02B0: 73 65 72 5F 
       00:02B4: 43 72 65 
  3026 00:02B7: 61 74 65 4D  	db	$61,$74,$65,$4D,$65,$6E,$75,$3A,$46,$6F,
                    $75,$6E,$64,$20,$57
       00:02BB: 65 6E 75 3A 
       00:02BF: 46 6F 75 6E 
       00:02C3: 64 20 57 
  3027 00:02C6: 6E 64 43 6C  	db	$6E,$64,$43,$6C,$61,$73,$73,$3A,$00,$6B,
                    $5F,$75,$73,$65,$72
       00:02CA: 61 73 73 3A 
       00:02CE: 00 6B 5F 75 
       00:02D2: 73 65 72 
  3028 00:02D5: 5F 43 72 65  	db	$5F,$43,$72,$65,$61,$74,$65,$4D,$65,$6E,
                    $75,$3A,$46,$00,$41
       00:02D9: 61 74 65 4D 
       00:02DD: 65 6E 75 3A 
       00:02E1: 46 00 41 
  3029 00:02E4: 66 74 65 72  	db	$66,$74,$65,$72,$20,$63,$6C,$69,$63,$6B,
                    $61,$62,$6C,$65,$00
       00:02E8: 20 63 6C 69 
       00:02EC: 63 6B 61 62 
       00:02F0: 6C 65 00 
  3030 00:02F3:              	ends
  3031                        ;
  3032                        ;BOOL menuWindowProc(PFXOSMESSAGE pMsg)
  3033                        ;{
  3034                        	.line	395
  3035                        	.line	396
  3036                        	WINMAN
  3037                        	xdef	~~menuWindowProc
  3038                        	func
  3039                        	.function	396
  3040                        ~~menuWindowProc:
  3041                        	longa	on
  3042                        	longi	on
  3043 04:0B24: 3B           	tsc
  3044 04:0B25: 38           	sec
  3045 04:0B26: E9 2C 00     	sbc	#L117
  3046 04:0B29: 1B           	tcs
  3047 04:0B2A: 0B           	phd
  3048 04:0B2B: 5B           	tcd
  3049             00000004   pMsg_0	set	4
  3050                        	.block	396
  3051                        ;	PWINDOW pWin = NULL;
  3052                        ;	PFXPROCESS p = NULL;
  3053                        ;	PFXSTRING  fxstr = NULL;
  3054                        ;	LPCHAR title = NULL;
  3055                        ;	UCHAR localBuffer[16];
  3056                        ;	PFXNODE node = NULL;
  3057                        ;
  3058                        ;	if(pMsg!=NULL)
  3059             00000000   pWin_1	set	0
  3060             00000004   p_1	set	4
  3061             00000008   fxstr_1	set	8
  Tue Oct  1 2019  1:02                                                Page 61


  3062             0000000C   title_1	set	12
  3063             00000010   localBuffer_1	set	16
  3064             00000020   node_1	set	32
  3065                        	.sym	pWin,0,138,1,32,23
  3066                        	.sym	p,4,138,1,32,16
  3067                        	.sym	fxstr,8,138,1,32,39
  3068                        	.sym	title,12,142,1,32
  3069                        	.sym	localBuffer,16,110,1,0,16
  3070                        	.sym	node,32,138,1,32,2
  3071                        	.sym	pMsg,4,138,6,32,12
  3072 04:0B2C: 64 09        	stz	<L118+pWin_1
  3073 04:0B2E: 64 0B        	stz	<L118+pWin_1+2
  3074 04:0B30: 64 0D        	stz	<L118+p_1
  3075 04:0B32: 64 0F        	stz	<L118+p_1+2
  3076 04:0B34: 64 11        	stz	<L118+fxstr_1
  3077 04:0B36: 64 13        	stz	<L118+fxstr_1+2
  3078 04:0B38: 64 15        	stz	<L118+title_1
  3079 04:0B3A: 64 17        	stz	<L118+title_1+2
  3080 04:0B3C: 64 29        	stz	<L118+node_1
  3081 04:0B3E: 64 2B        	stz	<L118+node_1+2
  3082                        	.line	404
  3083                        ;	{
  3084 04:0B40: A5 30        	lda	<L117+pMsg_0
  3085 04:0B42: 05 32        	ora	<L117+pMsg_0+2
  3086 04:0B44: D0 03        	bne	L120
  3087 04:0B46: 82 05 02     	brl	L10017
  3088                        L120:
  3089                        	.line	405
  3090                        ;		p = k_exec_get_current_process();
  3091                        	.line	406
  3092 04:0B49: 22 xx xx xx  	jsl	~~k_exec_get_current_process
  3093 04:0B4D: 85 0D        	sta	<L118+p_1
  3094 04:0B4F: 86 0F        	stx	<L118+p_1+2
  3095                        ;
  3096                        ;		pWin = k_getWindowFromHandle(pMsg->hwnd)
                    ;
  3097                        	.line	408
  3098 04:0B51: A0 0C 00     	ldy	#$c
  3099 04:0B54: B7 30        	lda	[<L117+pMsg_0],Y
  3100 04:0B56: 48           	pha
  3101 04:0B57: A0 0A 00     	ldy	#$a
  3102 04:0B5A: B7 30        	lda	[<L117+pMsg_0],Y
  3103 04:0B5C: 48           	pha
  3104 04:0B5D: 22 AA 03 04  	jsl	~~k_getWindowFromHandle
  3105 04:0B61: 85 09        	sta	<L118+pWin_1
  3106 04:0B63: 86 0B        	stx	<L118+pWin_1+2
  3107                        ;
  3108                        ;		//k_debug_long("consoleWindowProc::Proce
                    ssId:",p->procId);
  3109                        ;
  3110                        ;		switch(pMsg->type)
  3111                        	.line	412
  3112 04:0B65: A0 08 00     	ldy	#$8
  3113 04:0B68: B7 30        	lda	[<L117+pMsg_0],Y
  3114 04:0B6A: 82 C5 01     	brl	L10018
  3115                        ;		{
  3116                        	.line	413
  3117                        ;		case FX_CREATE_WINDOW:
  Tue Oct  1 2019  1:02                                                Page 62


  3118                        	.line	414
  3119                        L10020:
  3120                        ;			k_debug_string("menuWindowProc::
                    FX_CREATE_WINDOW\r\n");
  3121                        	.line	415
  3122 04:0B6D: F4 xx xx     	pea	#^L116
  3123 04:0B70: F4 xx xx     	pea	#<L116
  3124 04:0B73: 22 xx xx xx  	jsl	~~k_debug_string
  3125                        ;			//k_debug_long("menuWindowProc::
                    heap:",umm_free_heap_size());
  3126                        ;			//k_debug_integer("menuWindowPro
                    c::MessageId:",pMsg->type);
  3127                        ;
  3128                        ;			pWin->windowData = k_mem_allocat
                    e_heap(sizeof(MENUANCHOR));
  3129                        	.line	419
  3130 04:0B77: F4 0C 00     	pea	#<$c
  3131 04:0B7A: 22 xx xx xx  	jsl	~~k_mem_allocate_heap
  3132 04:0B7E: 85 01        	sta	<R0
  3133 04:0B80: 86 03        	stx	<R0+2
  3134 04:0B82: A5 01        	lda	<R0
  3135 04:0B84: A0 5D 00     	ldy	#$5d
  3136 04:0B87: 97 09        	sta	[<L118+pWin_1],Y
  3137 04:0B89: A5 03        	lda	<R0+2
  3138 04:0B8B: A0 5F 00     	ldy	#$5f
  3139 04:0B8E: 97 09        	sta	[<L118+pWin_1],Y
  3140                        ;			((PMENUANCHOR)pWin->windowData)-
                    >renderLayoutX = 2 * FONTW;
  3141                        	.line	420
  3142 04:0B90: A0 5D 00     	ldy	#$5d
  3143 04:0B93: B7 09        	lda	[<L118+pWin_1],Y
  3144 04:0B95: 85 01        	sta	<R0
  3145 04:0B97: A0 5F 00     	ldy	#$5f
  3146 04:0B9A: B7 09        	lda	[<L118+pWin_1],Y
  3147 04:0B9C: 85 03        	sta	<R0+2
  3148 04:0B9E: 22 xx xx xx  	jsl	~~k_font_getFontWidth
  3149 04:0BA2: 85 05        	sta	<R1
  3150 04:0BA4: A5 05        	lda	<R1
  3151 04:0BA6: 0A           	asl	A
  3152 04:0BA7: A0 04 00     	ldy	#$4
  3153 04:0BAA: 97 01        	sta	[<R0],Y
  3154                        ;			((PMENUANCHOR)pWin->windowData)-
                    >renderLayoutY = 2;
  3155                        	.line	421
  3156 04:0BAC: A0 5D 00     	ldy	#$5d
  3157 04:0BAF: B7 09        	lda	[<L118+pWin_1],Y
  3158 04:0BB1: 85 01        	sta	<R0
  3159 04:0BB3: A0 5F 00     	ldy	#$5f
  3160 04:0BB6: B7 09        	lda	[<L118+pWin_1],Y
  3161 04:0BB8: 85 03        	sta	<R0+2
  3162 04:0BBA: A9 02 00     	lda	#$2
  3163 04:0BBD: A0 06 00     	ldy	#$6
  3164 04:0BC0: 97 01        	sta	[<R0],Y
  3165                        ;
  3166                        ;			k_debug_pointer("menuWindowProc:
                    :pWin->hMenu:",pWin->hMenu);
  3167                        	.line	423
  3168 04:0BC2: A0 52 00     	ldy	#$52
  Tue Oct  1 2019  1:02                                                Page 63


  3169 04:0BC5: B7 09        	lda	[<L118+pWin_1],Y
  3170 04:0BC7: 48           	pha
  3171 04:0BC8: A0 50 00     	ldy	#$50
  3172 04:0BCB: B7 09        	lda	[<L118+pWin_1],Y
  3173 04:0BCD: 48           	pha
  3174 04:0BCE: F4 xx xx     	pea	#^L116+35
  3175 04:0BD1: F4 xx xx     	pea	#<L116+35
  3176 04:0BD4: 22 xx xx xx  	jsl	~~k_debug_pointer
  3177                        ;			if(pWin->hMenu)
  3178                        	.line	424
  3179                        ;			{
  3180 04:0BD8: A0 50 00     	ldy	#$50
  3181 04:0BDB: B7 09        	lda	[<L118+pWin_1],Y
  3182 04:0BDD: A0 52 00     	ldy	#$52
  3183 04:0BE0: 17 09        	ora	[<L118+pWin_1],Y
  3184 04:0BE2: D0 03        	bne	L121
  3185 04:0BE4: 82 D8 00     	brl	L10021
  3186                        L121:
  3187                        	.line	425
  3188                        ;
  3189                        ;				/*
  3190                        ;				title = k_string_replace
                    (CONST_WB_MENU_TITLE,"%s1", k_strip_padding(k_longtodec(k_ge
                    tZeroPage()->availableMemoryK,localBuffer)) );
  3191                        ;				((PMENU)pWin->hMenu)->pC
                    aption = k_string_replace(title,"%s2",k_strip_padding(k_long
                    todec(k_getZeroPage()->availableHeapMemoryK,localBuffer)) );
  3192                        ;
  3193                        ;				k_debug_strings("menuWin
                    dowProc::FX_CREATE_WINDOW:title:",(LPCHAR)((PMENU)pWin->hMen
                    u)->pCaption);
  3194                        ;
  3195                        ;				k_vdraw_ui_menu(pWin->wi
                    n_x,pWin->win_y,
  3196                        ;							
                        pWin->win_width,
  3197                        ;							
                    	pWin->win_height,
  3198                        ;							
                    	((PMENU)pWin->hMenu)->pCaption,
  3199                        ;							
                    	15,3);
  3200                        ;
  3201                        ;				*/
  3202                        ;				k_nodelist_foreach_type(
                    ((PMENU)pWin->hMenu)->subMenus,
  3203                        	.line	440
  3204                        ;							
                    			NL_TYPE_WINDOW_MENU,
  3205                        ;							
                    			pMsg->hwnd,
  3206                        ;							
                    			k_iterate_menus);
  3207 04:0BE7: F4 04 00     	pea	#^~~k_iterate_menus
  3208 04:0BEA: F4 63 0D     	pea	#<~~k_iterate_menus
  3209 04:0BED: A0 0C 00     	ldy	#$c
  3210 04:0BF0: B7 30        	lda	[<L117+pMsg_0],Y
  3211 04:0BF2: 48           	pha
  Tue Oct  1 2019  1:02                                                Page 64


  3212 04:0BF3: A0 0A 00     	ldy	#$a
  3213 04:0BF6: B7 30        	lda	[<L117+pMsg_0],Y
  3214 04:0BF8: 48           	pha
  3215 04:0BF9: F4 03 00     	pea	#<$3
  3216 04:0BFC: A0 50 00     	ldy	#$50
  3217 04:0BFF: B7 09        	lda	[<L118+pWin_1],Y
  3218 04:0C01: 85 01        	sta	<R0
  3219 04:0C03: A0 52 00     	ldy	#$52
  3220 04:0C06: B7 09        	lda	[<L118+pWin_1],Y
  3221 04:0C08: 85 03        	sta	<R0+2
  3222 04:0C0A: A0 15 00     	ldy	#$15
  3223 04:0C0D: B7 01        	lda	[<R0],Y
  3224 04:0C0F: 48           	pha
  3225 04:0C10: A0 13 00     	ldy	#$13
  3226 04:0C13: B7 01        	lda	[<R0],Y
  3227 04:0C15: 48           	pha
  3228 04:0C16: 22 xx xx xx  	jsl	~~k_nodelist_foreach_type
  3229                        ;
  3230                        ;
  3231                        ;				if(((PMENU)pWin->hMenu)-
                    >subMenus)
  3232                        	.line	446
  3233                        ;				{
  3234 04:0C1A: A0 50 00     	ldy	#$50
  3235 04:0C1D: B7 09        	lda	[<L118+pWin_1],Y
  3236 04:0C1F: 85 01        	sta	<R0
  3237 04:0C21: A0 52 00     	ldy	#$52
  3238 04:0C24: B7 09        	lda	[<L118+pWin_1],Y
  3239 04:0C26: 85 03        	sta	<R0+2
  3240 04:0C28: A0 13 00     	ldy	#$13
  3241 04:0C2B: B7 01        	lda	[<R0],Y
  3242 04:0C2D: A0 15 00     	ldy	#$15
  3243 04:0C30: 17 01        	ora	[<R0],Y
  3244 04:0C32: D0 03        	bne	L122
  3245 04:0C34: 82 88 00     	brl	L10022
  3246                        L122:
  3247                        	.line	447
  3248                        ;					k_vdraw_ui_menu(
                    pWin->win_x,pWin->win_y,
  3249                        	.line	448
  3250                        ;							
                    		pWin->win_width,
  3251                        ;							
                    		pWin->win_height,
  3252                        ;							
                    		"", //((PFXSTRING)((PMENU)pWin->hMenu)->subMenus
                    ->listData)->buffer,
  3253                        ;							
                    		4,3);
  3254 04:0C37: F4 03 00     	pea	#<$3
  3255 04:0C3A: F4 04 00     	pea	#<$4
  3256 04:0C3D: F4 xx xx     	pea	#^L116+64
  3257 04:0C40: F4 xx xx     	pea	#<L116+64
  3258 04:0C43: A0 0E 00     	ldy	#$e
  3259 04:0C46: B7 09        	lda	[<L118+pWin_1],Y
  3260 04:0C48: 48           	pha
  3261 04:0C49: A0 0C 00     	ldy	#$c
  3262 04:0C4C: B7 09        	lda	[<L118+pWin_1],Y
  Tue Oct  1 2019  1:02                                                Page 65


  3263 04:0C4E: 48           	pha
  3264 04:0C4F: A0 0A 00     	ldy	#$a
  3265 04:0C52: B7 09        	lda	[<L118+pWin_1],Y
  3266 04:0C54: 48           	pha
  3267 04:0C55: A0 08 00     	ldy	#$8
  3268 04:0C58: B7 09        	lda	[<L118+pWin_1],Y
  3269 04:0C5A: 48           	pha
  3270 04:0C5B: 22 xx xx xx  	jsl	~~k_vdraw_ui_menu
  3271                        ;
  3272                        ;					k_put_wingadget_
                    point(WINICON_TITLE_BCLOSE,pWin->win_x + 2,pWin->win_y + 2 ,
                    k_getUIGadgetColor());
  3273                        	.line	454
  3274 04:0C5F: 22 xx xx xx  	jsl	~~k_getUIGadgetColor
  3275 04:0C63: 48           	pha
  3276 04:0C64: 18           	clc
  3277 04:0C65: A9 02 00     	lda	#$2
  3278 04:0C68: A0 0A 00     	ldy	#$a
  3279 04:0C6B: 77 09        	adc	[<L118+pWin_1],Y
  3280 04:0C6D: 48           	pha
  3281 04:0C6E: 18           	clc
  3282 04:0C6F: A9 02 00     	lda	#$2
  3283 04:0C72: A0 08 00     	ldy	#$8
  3284 04:0C75: 77 09        	adc	[<L118+pWin_1],Y
  3285 04:0C77: 48           	pha
  3286 04:0C78: F4 06 00     	pea	#<$6
  3287 04:0C7B: 22 xx xx xx  	jsl	~~k_put_wingadget_point
  3288                        ;
  3289                        ;					if(pWin->hMenu &
                    & ((PMENU)pWin->hMenu)->subMenus)
  3290                        	.line	456
  3291                        ;					{
  3292 04:0C7F: A0 50 00     	ldy	#$50
  3293 04:0C82: B7 09        	lda	[<L118+pWin_1],Y
  3294 04:0C84: A0 52 00     	ldy	#$52
  3295 04:0C87: 17 09        	ora	[<L118+pWin_1],Y
  3296 04:0C89: D0 03        	bne	L123
  3297 04:0C8B: 82 31 00     	brl	L10023
  3298                        L123:
  3299 04:0C8E: A0 50 00     	ldy	#$50
  3300 04:0C91: B7 09        	lda	[<L118+pWin_1],Y
  3301 04:0C93: 85 01        	sta	<R0
  3302 04:0C95: A0 52 00     	ldy	#$52
  3303 04:0C98: B7 09        	lda	[<L118+pWin_1],Y
  3304 04:0C9A: 85 03        	sta	<R0+2
  3305 04:0C9C: A0 13 00     	ldy	#$13
  3306 04:0C9F: B7 01        	lda	[<R0],Y
  3307 04:0CA1: A0 15 00     	ldy	#$15
  3308 04:0CA4: 17 01        	ora	[<R0],Y
  3309 04:0CA6: D0 03        	bne	L124
  3310 04:0CA8: 82 14 00     	brl	L10023
  3311                        L124:
  3312                        	.line	457
  3313                        ;						//((PMEN
                    U)pWin->hMenu)->hWndOwner = pWin->pParentWindow; // temp for
                     a test
  3314                        ;						//k_debu
                    g_strings("menuWindowProc::FX_MOUSE_ENTER:hWndOwner:title:",
  Tue Oct  1 2019  1:02                                                Page 66


                     k_getWindowFromHandle(pWin->pParentWindow)->win_title );
  3315                        ;
  3316                        ;
  3317                        ;						_k_user_
                    send_child_message(pWin,FX_SHOW_WINDOW,NULL,0);
  3318                        	.line	462
  3319 04:0CAB: F4 00 00     	pea	#<$0
  3320 04:0CAE: F4 00 00     	pea	#^$0
  3321 04:0CB1: F4 00 00     	pea	#<$0
  3322 04:0CB4: F4 05 FB     	pea	#<$fb05
  3323 04:0CB7: D4 0B        	pei	<L118+pWin_1+2
  3324 04:0CB9: D4 09        	pei	<L118+pWin_1
  3325 04:0CBB: 22 95 29 04  	jsl	~~_k_user_send_child_message
  3326                        ;
  3327                        ;						//fxstr 
                    = k_fxstring_init(128);
  3328                        ;
  3329                        ;						//k_debu
                    g_strings("menuWindowProc::FX_CREATE_WINDOW:fxstr:",fxstr->b
                    uffer);
  3330                        ;						//((PMEN
                    U)pWin->hMenu)->subMenus->listData = fxstr;
  3331                        ;						//k_debu
                    g_strings("menuWindowProc::FX_CREATE_WINDOW:title:",title);
  3332                        ;					}
  3333                        	.line	469
  3334                        ;
  3335                        ;
  3336                        ;				}
  3337                        L10023:
  3338                        	.line	472
  3339                        ;
  3340                        ;
  3341                        ;
  3342                        ;				//k_draw_menu(pWin->hMen
                    u,15,3);
  3343                        ;
  3344                        ;			}
  3345                        L10022:
  3346                        	.line	478
  3347                        ;			//k_debug_string("menuWindowProc
                    ::FX_CREATE_WINDOW:k_vdraw_ui_menu\r\n");
  3348                        ;			break;
  3349                        L10021:
  3350                        	.line	480
  3351 04:0CBF: 82 8C 00     	brl	L10019
  3352                        ;		case FX_REDRAW_WINDOW:
  3353                        	.line	481
  3354                        L10024:
  3355                        ;			k_debug_string("menuWindowProc::
                    FX_REDRAW_WINDOW\r\n");
  3356                        	.line	482
  3357 04:0CC2: F4 xx xx     	pea	#^L116+65
  3358 04:0CC5: F4 xx xx     	pea	#<L116+65
  3359 04:0CC8: 22 xx xx xx  	jsl	~~k_debug_string
  3360                        ;			break;
  3361                        	.line	483
  3362 04:0CCC: 82 7F 00     	brl	L10019
  Tue Oct  1 2019  1:02                                                Page 67


  3363                        ;		case FX_LBUTTON_DOWN:
  3364                        	.line	484
  3365                        L10025:
  3366                        ;			if(pMsg->type!=FX_PROCESS)
  3367                        	.line	485
  3368                        ;			{
  3369 04:0CCF: A0 08 00     	ldy	#$8
  3370 04:0CD2: B7 30        	lda	[<L117+pMsg_0],Y
  3371 04:0CD4: C9 00 FF     	cmp	#<$ff00
  3372 04:0CD7: D0 03        	bne	L125
  3373 04:0CD9: 82 36 00     	brl	L10026
  3374                        L125:
  3375                        	.line	486
  3376                        ;				//k_debug_integer("conso
                    leWindowProc::ProcessId:",p->procId);
  3377                        ;				k_debug_integer("menuWin
                    dowProc::FX_LBUTTON_DOWN:X:", *((INT*)&pMsg->data[1])  );
  3378                        	.line	488
  3379 04:0CDC: A0 17 00     	ldy	#$17
  3380 04:0CDF: B7 30        	lda	[<L117+pMsg_0],Y
  3381 04:0CE1: 48           	pha
  3382 04:0CE2: F4 xx xx     	pea	#^L116+100
  3383 04:0CE5: F4 xx xx     	pea	#<L116+100
  3384 04:0CE8: 22 xx xx xx  	jsl	~~k_debug_integer
  3385                        ;				k_debug_integer("menuWin
                    dowProc::FX_LBUTTON_DOWN:Y:", *((INT*)&pMsg->data[3])  );
  3386                        	.line	489
  3387 04:0CEC: A0 19 00     	ldy	#$19
  3388 04:0CEF: B7 30        	lda	[<L117+pMsg_0],Y
  3389 04:0CF1: 48           	pha
  3390 04:0CF2: F4 xx xx     	pea	#^L116+135
  3391 04:0CF5: F4 xx xx     	pea	#<L116+135
  3392 04:0CF8: 22 xx xx xx  	jsl	~~k_debug_integer
  3393                        ;
  3394                        ;				k_debug_pointer("menuWin
                    dowProc::pChildHitList:",pWin->pChildHitList);
  3395                        	.line	491
  3396 04:0CFC: A0 5A 00     	ldy	#$5a
  3397 04:0CFF: B7 09        	lda	[<L118+pWin_1],Y
  3398 04:0D01: 48           	pha
  3399 04:0D02: A0 58 00     	ldy	#$58
  3400 04:0D05: B7 09        	lda	[<L118+pWin_1],Y
  3401 04:0D07: 48           	pha
  3402 04:0D08: F4 xx xx     	pea	#^L116+170
  3403 04:0D0B: F4 xx xx     	pea	#<L116+170
  3404 04:0D0E: 22 xx xx xx  	jsl	~~k_debug_pointer
  3405                        ;
  3406                        ;				//if(pWin->pChildHitList
                    )
  3407                        ;				//	k_debug_nodelist
                    _with_data( pWin->pChildHitList->listhead, debug_window_node
                     );
  3408                        ;
  3409                        ;
  3410                        ;				//k_shadow_bitblt(0,0, 6
                    40, 480, 1,1);
  3411                        ;
  3412                        ;			}
  Tue Oct  1 2019  1:02                                                Page 68


  3413                        	.line	499
  3414                        ;			break;
  3415                        L10026:
  3416                        	.line	500
  3417 04:0D12: 82 39 00     	brl	L10019
  3418                        ;
  3419                        ;		case FX_MOUSE_ENTER:
  3420                        	.line	502
  3421                        L10027:
  3422                        ;			k_debug_string("menuWindowProc::
                    FX_MOUSE_ENTER\r\n");
  3423                        	.line	503
  3424 04:0D15: F4 xx xx     	pea	#^L116+201
  3425 04:0D18: F4 xx xx     	pea	#<L116+201
  3426 04:0D1B: 22 xx xx xx  	jsl	~~k_debug_string
  3427                        ;
  3428                        ;			/*
  3429                        ;			if(((PMENU)pWin->hMenu)->subMenu
                    s)
  3430                        ;			{
  3431                        ;				k_vdraw_ui_menu(pWin->wi
                    n_x,pWin->win_y,
  3432                        ;							
                    	pWin->win_width,
  3433                        ;							
                    	pWin->win_height,
  3434                        ;							
                    	"", //((PFXSTRING)((PMENU)pWin->hMenu)->subMenus->listDa
                    ta)->buffer,
  3435                        ;							
                    	4,3);
  3436                        ;
  3437                        ;
  3438                        ;				if(pWin->hMenu && ((PMEN
                    U)pWin->hMenu)->subMenus)
  3439                        ;				{
  3440                        ;					//((PMENU)pWin->
                    hMenu)->hWndOwner = pWin->pParentWindow; // temp for a test
  3441                        ;					//k_debug_string
                    s("menuWindowProc::FX_MOUSE_ENTER:hWndOwner:title:", k_getWi
                    ndowFromHandle(pWin->pParentWindow)->win_title );
  3442                        ;
  3443                        ;
  3444                        ;					_k_user_send_chi
                    ld_message(pWin,FX_SHOW_WINDOW,NULL,0);
  3445                        ;
  3446                        ;					//fxstr = k_fxst
                    ring_init(128);
  3447                        ;
  3448                        ;					//k_debug_string
                    s("menuWindowProc::FX_CREATE_WINDOW:fxstr:",fxstr->buffer);
  3449                        ;					//((PMENU)pWin->
                    hMenu)->subMenus->listData = fxstr;
  3450                        ;					//k_debug_string
                    s("menuWindowProc::FX_CREATE_WINDOW:title:",title);
  3451                        ;				}
  3452                        ;
  3453                        ;
  Tue Oct  1 2019  1:02                                                Page 69


  3454                        ;			}
  3455                        ;			*/
  3456                        ;			break;
  3457                        	.line	533
  3458 04:0D1F: 82 2C 00     	brl	L10019
  3459                        ;		case FX_MOUSE_EXIT:
  3460                        	.line	534
  3461                        L10028:
  3462                        ;			k_debug_string("menuWindowProc::
                    FX_MOUSE_EXIT\r\n");
  3463                        	.line	535
  3464 04:0D22: F4 xx xx     	pea	#^L116+234
  3465 04:0D25: F4 xx xx     	pea	#<L116+234
  3466 04:0D28: 22 xx xx xx  	jsl	~~k_debug_string
  3467                        ;			/*
  3468                        ;			k_debug_strings("menuWindowProc:
                    :FX_MOUSE_EXIT:title:",(LPCHAR)((PMENU)pWin->hMenu)->pCaptio
                    n);
  3469                        ;
  3470                        ;			((PMENUANCHOR)pWin->windowData)-
                    >renderLayoutX = 2 + FONTW;
  3471                        ;			((PMENUANCHOR)pWin->windowData)-
                    >renderLayoutY = 2 + FONTW;
  3472                        ;
  3473                        ;			if(((PMENU)pWin->hMenu)->pCaptio
                    n)
  3474                        ;			{
  3475                        ;				_k_user_send_child_messa
                    ge(pWin,FX_HIDE_WINDOW,NULL,0);
  3476                        ;
  3477                        ;				k_mem_deallocate_heap((L
                    PVOID)((PMENU)pWin->hMenu)->pCaption);
  3478                        ;
  3479                        ;				title = k_string_replace
                    (CONST_WB_MENU_TITLE,"%s1", k_strip_padding(k_longtodec(k_ge
                    tZeroPage()->availableHeapMemoryK,localBuffer)) );
  3480                        ;				((PMENU)pWin->hMenu)->pC
                    aption = k_string_replace(title,"%s2", k_strip_padding(k_lon
                    gtodec(k_getZeroPage()->availableHeapMemoryK,localBuffer)));
  3481                        ;
  3482                        ;
  3483                        ;				k_vdraw_ui_menu(pWin->wi
                    n_x,pWin->win_y,
  3484                        ;							
                    	pWin->win_width,
  3485                        ;							
                    	pWin->win_height,
  3486                        ;							
                    	((PMENU)pWin->hMenu)->pCaption,
  3487                        ;							
                    	15,3);
  3488                        ;
  3489                        ;				k_mem_deallocate_heap(ti
                    tle);
  3490                        ;
  3491                        ;			}
  3492                        ;			*/
  3493                        ;			break;
  Tue Oct  1 2019  1:02                                                Page 70


  3494                        	.line	562
  3495 04:0D2C: 82 1F 00     	brl	L10019
  3496                        ;
  3497                        ;		default:
  3498                        	.line	564
  3499                        L10029:
  3500                        ;			break;
  3501                        	.line	565
  3502 04:0D2F: 82 1C 00     	brl	L10019
  3503                        ;		}
  3504                        	.line	566
  3505                        L10018:
  3506                        	xref	~~~swt
  3507 04:0D32: 22 xx xx xx  	jsl	~~~swt
  3508 04:0D36: 05 00        	dw	5
  3509 04:0D38: 01 0F        	dw	3841
  3510 04:0D3A: 14 0D        	dw	L10027-1
  3511 04:0D3C: 02 0F        	dw	3842
  3512 04:0D3E: 21 0D        	dw	L10028-1
  3513 04:0D40: 04 0F        	dw	3844
  3514 04:0D42: CE 0C        	dw	L10025-1
  3515 04:0D44: 07 FB        	dw	64263
  3516 04:0D46: C1 0C        	dw	L10024-1
  3517 04:0D48: 03 FF        	dw	65283
  3518 04:0D4A: 6C 0B        	dw	L10020-1
  3519 04:0D4C: 2E 0D        	dw	L10029-1
  3520                        L10019:
  3521                        ;	}
  3522                        	.line	567
  3523                        ;
  3524                        ;	return TRUE;
  3525                        L10017:
  3526                        	.line	569
  3527 04:0D4E: A9 01 00     	lda	#$1
  3528                        L126:
  3529 04:0D51: A8           	tay
  3530 04:0D52: A5 2E        	lda	<L117+2
  3531 04:0D54: 85 32        	sta	<L117+2+4
  3532 04:0D56: A5 2D        	lda	<L117+1
  3533 04:0D58: 85 31        	sta	<L117+1+4
  3534 04:0D5A: 2B           	pld
  3535 04:0D5B: 3B           	tsc
  3536 04:0D5C: 18           	clc
  3537 04:0D5D: 69 30 00     	adc	#L117+4
  3538 04:0D60: 1B           	tcs
  3539 04:0D61: 98           	tya
  3540 04:0D62: 6B           	rtl
  3541                        ;}
  3542                        	.line	570
  3543                        	.endblock	570
  3544             0000002C   L117	equ	44
  3545             00000009   L118	equ	9
  3546 04:0D63:              	ends
  3547                        	efunc
  3548                        	.endfunc	570,9,44
  3549                        	.line	570
  3550                        	data
  3551                        L116:
  Tue Oct  1 2019  1:02                                                Page 71


  3552 00:02F3: 6D 65 6E 75  	db	$6D,$65,$6E,$75,$57,$69,$6E,$64,$6F,$77,
                    $50,$72,$6F,$63,$3A
       00:02F7: 57 69 6E 64 
       00:02FB: 6F 77 50 72 
       00:02FF: 6F 63 3A 
  3553 00:0302: 3A 46 58 5F  	db	$3A,$46,$58,$5F,$43,$52,$45,$41,$54,$45,
                    $5F,$57,$49,$4E,$44
       00:0306: 43 52 45 41 
       00:030A: 54 45 5F 57 
       00:030E: 49 4E 44 
  3554 00:0311: 4F 57 0D 0A  	db	$4F,$57,$0D,$0A,$00,$6D,$65,$6E,$75,$57,
                    $69,$6E,$64,$6F,$77
       00:0315: 00 6D 65 6E 
       00:0319: 75 57 69 6E 
       00:031D: 64 6F 77 
  3555 00:0320: 50 72 6F 63  	db	$50,$72,$6F,$63,$3A,$3A,$70,$57,$69,$6E,
                    $2D,$3E,$68,$4D,$65
       00:0324: 3A 3A 70 57 
       00:0328: 69 6E 2D 3E 
       00:032C: 68 4D 65 
  3556 00:032F: 6E 75 3A 00  	db	$6E,$75,$3A,$00,$00,$6D,$65,$6E,$75,$57,
                    $69,$6E,$64,$6F,$77
       00:0333: 00 6D 65 6E 
       00:0337: 75 57 69 6E 
       00:033B: 64 6F 77 
  3557 00:033E: 50 72 6F 63  	db	$50,$72,$6F,$63,$3A,$3A,$46,$58,$5F,$52,
                    $45,$44,$52,$41,$57
       00:0342: 3A 3A 46 58 
       00:0346: 5F 52 45 44 
       00:034A: 52 41 57 
  3558 00:034D: 5F 57 49 4E  	db	$5F,$57,$49,$4E,$44,$4F,$57,$0D,$0A,$00,
                    $6D,$65,$6E,$75,$57
       00:0351: 44 4F 57 0D 
       00:0355: 0A 00 6D 65 
       00:0359: 6E 75 57 
  3559 00:035C: 69 6E 64 6F  	db	$69,$6E,$64,$6F,$77,$50,$72,$6F,$63,$3A,
                    $3A,$46,$58,$5F,$4C
       00:0360: 77 50 72 6F 
       00:0364: 63 3A 3A 46 
       00:0368: 58 5F 4C 
  3560 00:036B: 42 55 54 54  	db	$42,$55,$54,$54,$4F,$4E,$5F,$44,$4F,$57,
                    $4E,$3A,$58,$3A,$00
       00:036F: 4F 4E 5F 44 
       00:0373: 4F 57 4E 3A 
       00:0377: 58 3A 00 
  3561 00:037A: 6D 65 6E 75  	db	$6D,$65,$6E,$75,$57,$69,$6E,$64,$6F,$77,
                    $50,$72,$6F,$63,$3A
       00:037E: 57 69 6E 64 
       00:0382: 6F 77 50 72 
       00:0386: 6F 63 3A 
  3562 00:0389: 3A 46 58 5F  	db	$3A,$46,$58,$5F,$4C,$42,$55,$54,$54,$4F,
                    $4E,$5F,$44,$4F,$57
       00:038D: 4C 42 55 54 
       00:0391: 54 4F 4E 5F 
       00:0395: 44 4F 57 
  3563 00:0398: 4E 3A 59 3A  	db	$4E,$3A,$59,$3A,$00,$6D,$65,$6E,$75,$57,
                    $69,$6E,$64,$6F,$77
       00:039C: 00 6D 65 6E 
  Tue Oct  1 2019  1:02                                                Page 72


       00:03A0: 75 57 69 6E 
       00:03A4: 64 6F 77 
  3564 00:03A7: 50 72 6F 63  	db	$50,$72,$6F,$63,$3A,$3A,$70,$43,$68,$69,
                    $6C,$64,$48,$69,$74
       00:03AB: 3A 3A 70 43 
       00:03AF: 68 69 6C 64 
       00:03B3: 48 69 74 
  3565 00:03B6: 4C 69 73 74  	db	$4C,$69,$73,$74,$3A,$00,$6D,$65,$6E,$75,
                    $57,$69,$6E,$64,$6F
       00:03BA: 3A 00 6D 65 
       00:03BE: 6E 75 57 69 
       00:03C2: 6E 64 6F 
  3566 00:03C5: 77 50 72 6F  	db	$77,$50,$72,$6F,$63,$3A,$3A,$46,$58,$5F,
                    $4D,$4F,$55,$53,$45
       00:03C9: 63 3A 3A 46 
       00:03CD: 58 5F 4D 4F 
       00:03D1: 55 53 45 
  3567 00:03D4: 5F 45 4E 54  	db	$5F,$45,$4E,$54,$45,$52,$0D,$0A,$00,$6D,
                    $65,$6E,$75,$57,$69
       00:03D8: 45 52 0D 0A 
       00:03DC: 00 6D 65 6E 
       00:03E0: 75 57 69 
  3568 00:03E3: 6E 64 6F 77  	db	$6E,$64,$6F,$77,$50,$72,$6F,$63,$3A,$3A,
                    $46,$58,$5F,$4D,$4F
       00:03E7: 50 72 6F 63 
       00:03EB: 3A 3A 46 58 
       00:03EF: 5F 4D 4F 
  3569 00:03F2: 55 53 45 5F  	db	$55,$53,$45,$5F,$45,$58,$49,$54,$0D,$0A,
                    $00
       00:03F6: 45 58 49 54 
       00:03FA: 0D 0A 00 
  3570 00:03FD:              	ends
  3571                        ;
  3572                        ;void k_iterate_menus(LPVOID ctx,LPVOID data)
  3573                        ;{
  3574                        	.line	572
  3575                        	.line	573
  3576                        	WINMAN
  3577                        	xdef	~~k_iterate_menus
  3578                        	func
  3579                        	.function	573
  3580                        ~~k_iterate_menus:
  3581                        	longa	on
  3582                        	longi	on
  3583 04:0D63: 3B           	tsc
  3584 04:0D64: 38           	sec
  3585 04:0D65: E9 18 00     	sbc	#L128
  3586 04:0D68: 1B           	tcs
  3587 04:0D69: 0B           	phd
  3588 04:0D6A: 5B           	tcd
  3589             00000004   ctx_0	set	4
  3590             00000008   data_0	set	8
  3591                        	.block	573
  3592                        ;	PWINDOW     pWin = NULL;
  3593                        ;	PMENUANCHOR pMenuAnchor = NULL;
  3594                        ;	PFXSTRING   fxstr = NULL;
  3595                        ;	if(data)
  3596             00000000   pWin_1	set	0
  Tue Oct  1 2019  1:02                                                Page 73


  3597             00000004   pMenuAnchor_1	set	4
  3598             00000008   fxstr_1	set	8
  3599                        	.sym	pWin,0,138,1,32,23
  3600                        	.sym	pMenuAnchor,4,138,1,32,30
  3601                        	.sym	fxstr,8,138,1,32,39
  3602                        	.sym	ctx,4,129,6,32
  3603                        	.sym	data,8,129,6,32
  3604 04:0D6B: 64 0D        	stz	<L129+pWin_1
  3605 04:0D6D: 64 0F        	stz	<L129+pWin_1+2
  3606 04:0D6F: 64 11        	stz	<L129+pMenuAnchor_1
  3607 04:0D71: 64 13        	stz	<L129+pMenuAnchor_1+2
  3608 04:0D73: 64 15        	stz	<L129+fxstr_1
  3609 04:0D75: 64 17        	stz	<L129+fxstr_1+2
  3610                        	.line	577
  3611                        ;	{
  3612 04:0D77: A5 20        	lda	<L128+data_0
  3613 04:0D79: 05 22        	ora	<L128+data_0+2
  3614 04:0D7B: D0 03        	bne	L131
  3615 04:0D7D: 82 E2 00     	brl	L10030
  3616                        L131:
  3617                        	.line	578
  3618                        ;		k_debug_strings("k_iterate_menus:",(LPCH
                    AR)((PMENU)data)->pCaption) ;
  3619                        	.line	579
  3620 04:0D80: A0 11 00     	ldy	#$11
  3621 04:0D83: B7 20        	lda	[<L128+data_0],Y
  3622 04:0D85: 48           	pha
  3623 04:0D86: A0 0F 00     	ldy	#$f
  3624 04:0D89: B7 20        	lda	[<L128+data_0],Y
  3625 04:0D8B: 48           	pha
  3626 04:0D8C: F4 xx xx     	pea	#^L127
  3627 04:0D8F: F4 xx xx     	pea	#<L127
  3628 04:0D92: 22 xx xx xx  	jsl	~~k_debug_strings
  3629                        ;
  3630                        ;		if(ctx)
  3631                        	.line	581
  3632                        ;		{
  3633 04:0D96: A5 1C        	lda	<L128+ctx_0
  3634 04:0D98: 05 1E        	ora	<L128+ctx_0+2
  3635 04:0D9A: D0 03        	bne	L132
  3636 04:0D9C: 82 C3 00     	brl	L10031
  3637                        L132:
  3638                        	.line	582
  3639                        ;			//fxstr = (PFXSTRING)ctx;
  3640                        ;			//k_fxstring_add(fxstr,(LPCHAR)(
                    (PMENU)data)->pCaption);
  3641                        ;			//k_fxstring_add(fxstr,"  ");
  3642                        ;			pWin = (PWINDOW)ctx;
  3643                        	.line	586
  3644 04:0D9F: A5 1C        	lda	<L128+ctx_0
  3645 04:0DA1: 85 0D        	sta	<L129+pWin_1
  3646 04:0DA3: A5 1E        	lda	<L128+ctx_0+2
  3647 04:0DA5: 85 0F        	sta	<L129+pWin_1+2
  3648                        ;			pMenuAnchor = (PMENUANCHOR)pWin-
                    >windowData;
  3649                        	.line	587
  3650 04:0DA7: A0 5D 00     	ldy	#$5d
  3651 04:0DAA: B7 0D        	lda	[<L129+pWin_1],Y
  Tue Oct  1 2019  1:02                                                Page 74


  3652 04:0DAC: 85 11        	sta	<L129+pMenuAnchor_1
  3653 04:0DAE: A0 5F 00     	ldy	#$5f
  3654 04:0DB1: B7 0D        	lda	[<L129+pWin_1],Y
  3655 04:0DB3: 85 13        	sta	<L129+pMenuAnchor_1+2
  3656                        ;
  3657                        ;
  3658                        ;			k_user_CreateMenuAnchor(k_getHan
                    dleFromWindow(pWin),
  3659                        	.line	590
  3660                        ;					                
                    ((PMENU)data)->pCaption,
  3661                        ;							
                    		(PMENU)data,
  3662                        ;							
                    		pMenuAnchor->renderLayoutX,
  3663                        ;							
                    		pMenuAnchor->renderLayoutY,
  3664                        ;							
                    		strlen(((PMENU)data)->pCaption)*FONTW,
  3665                        ;							
                    		FONTH);
  3666 04:0DB5: 22 xx xx xx  	jsl	~~k_font_getFontHeight
  3667 04:0DB9: 48           	pha
  3668 04:0DBA: 22 xx xx xx  	jsl	~~k_font_getFontWidth
  3669 04:0DBE: 85 01        	sta	<R0
  3670 04:0DC0: A0 11 00     	ldy	#$11
  3671 04:0DC3: B7 20        	lda	[<L128+data_0],Y
  3672 04:0DC5: 48           	pha
  3673 04:0DC6: A0 0F 00     	ldy	#$f
  3674 04:0DC9: B7 20        	lda	[<L128+data_0],Y
  3675 04:0DCB: 48           	pha
  3676 04:0DCC: 22 xx xx xx  	jsl	~~strlen
  3677 04:0DD0: 85 05        	sta	<R1
  3678 04:0DD2: A5 05        	lda	<R1
  3679 04:0DD4: A6 01        	ldx	<R0
  3680                        	xref	~~~mul
  3681 04:0DD6: 22 xx xx xx  	jsl	~~~mul
  3682 04:0DDA: 48           	pha
  3683 04:0DDB: A0 06 00     	ldy	#$6
  3684 04:0DDE: B7 11        	lda	[<L129+pMenuAnchor_1],Y
  3685 04:0DE0: 48           	pha
  3686 04:0DE1: A0 04 00     	ldy	#$4
  3687 04:0DE4: B7 11        	lda	[<L129+pMenuAnchor_1],Y
  3688 04:0DE6: 48           	pha
  3689 04:0DE7: D4 22        	pei	<L128+data_0+2
  3690 04:0DE9: D4 20        	pei	<L128+data_0
  3691 04:0DEB: A0 11 00     	ldy	#$11
  3692 04:0DEE: B7 20        	lda	[<L128+data_0],Y
  3693 04:0DF0: 48           	pha
  3694 04:0DF1: A0 0F 00     	ldy	#$f
  3695 04:0DF4: B7 20        	lda	[<L128+data_0],Y
  3696 04:0DF6: 48           	pha
  3697 04:0DF7: D4 0F        	pei	<L129+pWin_1+2
  3698 04:0DF9: D4 0D        	pei	<L129+pWin_1
  3699 04:0DFB: 22 8C 03 04  	jsl	~~k_getHandleFromWindow
  3700 04:0DFF: 85 01        	sta	<R0
  3701 04:0E01: 86 03        	stx	<R0+2
  3702 04:0E03: DA           	phx
  Tue Oct  1 2019  1:02                                                Page 75


  3703 04:0E04: 48           	pha
  3704 04:0E05: 22 62 0F 04  	jsl	~~k_user_CreateMenuAnchor
  3705                        ;
  3706                        ;			pMenuAnchor->renderLayoutX+=strl
                    en(((PMENU)data)->pCaption)*FONTW;
  3707                        	.line	598
  3708 04:0E09: 18           	clc
  3709 04:0E0A: A9 04 00     	lda	#$4
  3710 04:0E0D: 65 11        	adc	<L129+pMenuAnchor_1
  3711 04:0E0F: 85 01        	sta	<R0
  3712 04:0E11: A9 00 00     	lda	#$0
  3713 04:0E14: 65 13        	adc	<L129+pMenuAnchor_1+2
  3714 04:0E16: 85 03        	sta	<R0+2
  3715 04:0E18: 22 xx xx xx  	jsl	~~k_font_getFontWidth
  3716 04:0E1C: 85 05        	sta	<R1
  3717 04:0E1E: A0 11 00     	ldy	#$11
  3718 04:0E21: B7 20        	lda	[<L128+data_0],Y
  3719 04:0E23: 48           	pha
  3720 04:0E24: A0 0F 00     	ldy	#$f
  3721 04:0E27: B7 20        	lda	[<L128+data_0],Y
  3722 04:0E29: 48           	pha
  3723 04:0E2A: 22 xx xx xx  	jsl	~~strlen
  3724 04:0E2E: 85 09        	sta	<R2
  3725 04:0E30: A5 09        	lda	<R2
  3726 04:0E32: A6 05        	ldx	<R1
  3727                        	xref	~~~mul
  3728 04:0E34: 22 xx xx xx  	jsl	~~~mul
  3729 04:0E38: 85 05        	sta	<R1
  3730 04:0E3A: 18           	clc
  3731 04:0E3B: A5 05        	lda	<R1
  3732 04:0E3D: 67 01        	adc	[<R0]
  3733 04:0E3F: 87 01        	sta	[<R0]
  3734                        ;			pMenuAnchor->renderLayoutX+=(2*F
                    ONTW);
  3735                        	.line	599
  3736 04:0E41: 18           	clc
  3737 04:0E42: A9 04 00     	lda	#$4
  3738 04:0E45: 65 11        	adc	<L129+pMenuAnchor_1
  3739 04:0E47: 85 01        	sta	<R0
  3740 04:0E49: A9 00 00     	lda	#$0
  3741 04:0E4C: 65 13        	adc	<L129+pMenuAnchor_1+2
  3742 04:0E4E: 85 03        	sta	<R0+2
  3743 04:0E50: 22 xx xx xx  	jsl	~~k_font_getFontWidth
  3744 04:0E54: 85 09        	sta	<R2
  3745 04:0E56: A5 09        	lda	<R2
  3746 04:0E58: 0A           	asl	A
  3747 04:0E59: 85 05        	sta	<R1
  3748 04:0E5B: 18           	clc
  3749 04:0E5C: A5 05        	lda	<R1
  3750 04:0E5E: 67 01        	adc	[<R0]
  3751 04:0E60: 87 01        	sta	[<R0]
  3752                        ;
  3753                        ;
  3754                        ;
  3755                        ;		}
  3756                        	.line	603
  3757                        ;
  3758                        ;	}
  Tue Oct  1 2019  1:02                                                Page 76


  3759                        L10031:
  3760                        	.line	605
  3761                        ;}
  3762                        L10030:
  3763                        	.line	606
  3764                        L133:
  3765 04:0E62: A5 1A        	lda	<L128+2
  3766 04:0E64: 85 22        	sta	<L128+2+8
  3767 04:0E66: A5 19        	lda	<L128+1
  3768 04:0E68: 85 21        	sta	<L128+1+8
  3769 04:0E6A: 2B           	pld
  3770 04:0E6B: 3B           	tsc
  3771 04:0E6C: 18           	clc
  3772 04:0E6D: 69 20 00     	adc	#L128+8
  3773 04:0E70: 1B           	tcs
  3774 04:0E71: 6B           	rtl
  3775                        	.endblock	606
  3776             00000018   L128	equ	24
  3777             0000000D   L129	equ	13
  3778 04:0E72:              	ends
  3779                        	efunc
  3780                        	.endfunc	606,13,24
  3781                        	.line	606
  3782                        	data
  3783                        L127:
  3784 00:03FD: 6B 5F 69 74  	db	$6B,$5F,$69,$74,$65,$72,$61,$74,$65,$5F,
                    $6D,$65,$6E,$75,$73
       00:0401: 65 72 61 74 
       00:0405: 65 5F 6D 65 
       00:0409: 6E 75 73 
  3785 00:040C: 3A 00        	db	$3A,$00
  3786 00:040E:              	ends
  3787                        ;
  3788                        ;void k_iterate_dropdown_menu_captions(LPVOID ctx,
                    LPVOID data)
  3789                        ;{
  3790                        	.line	608
  3791                        	.line	609
  3792                        	WINMAN
  3793                        	xdef	~~k_iterate_dropdown_menu_captions
  3794                        	func
  3795                        	.function	609
  3796                        ~~k_iterate_dropdown_menu_captions:
  3797                        	longa	on
  3798                        	longi	on
  3799 04:0E72: 3B           	tsc
  3800 04:0E73: 38           	sec
  3801 04:0E74: E9 22 00     	sbc	#L135
  3802 04:0E77: 1B           	tcs
  3803 04:0E78: 0B           	phd
  3804 04:0E79: 5B           	tcd
  3805             00000004   ctx_0	set	4
  3806             00000008   data_0	set	8
  3807                        	.block	609
  3808                        ;	PWINDOW     pWin = NULL;
  3809                        ;	PWINDOW     pItem = NULL;
  3810                        ;	PMENUANCHOR pMenuAnchor = NULL;
  3811                        ;	LPCSTR FAR*	captions;
  Tue Oct  1 2019  1:02                                                Page 77


  3812                        ;	LPCSTR 		caption;
  3813                        ;	UINT		i = 0;
  3814                        ;
  3815                        ;	if(data)
  3816             00000000   pWin_1	set	0
  3817             00000004   pItem_1	set	4
  3818             00000008   pMenuAnchor_1	set	8
  3819             0000000C   captions_1	set	12
  3820             00000010   caption_1	set	16
  3821             00000014   i_1	set	20
  3822                        	.sym	pWin,0,138,1,32,23
  3823                        	.sym	pItem,4,138,1,32,23
  3824                        	.sym	pMenuAnchor,8,138,1,32,30
  3825                        	.sym	captions,12,1166,1,32
  3826                        	.sym	caption,16,142,1,32
  3827                        	.sym	i,20,16,1,16
  3828                        	.sym	ctx,4,129,6,32
  3829                        	.sym	data,8,129,6,32
  3830 04:0E7A: 64 0D        	stz	<L136+pWin_1
  3831 04:0E7C: 64 0F        	stz	<L136+pWin_1+2
  3832 04:0E7E: 64 11        	stz	<L136+pItem_1
  3833 04:0E80: 64 13        	stz	<L136+pItem_1+2
  3834 04:0E82: 64 15        	stz	<L136+pMenuAnchor_1
  3835 04:0E84: 64 17        	stz	<L136+pMenuAnchor_1+2
  3836 04:0E86: 64 21        	stz	<L136+i_1
  3837                        	.line	617
  3838                        ;	{
  3839 04:0E88: A5 2A        	lda	<L135+data_0
  3840 04:0E8A: 05 2C        	ora	<L135+data_0+2
  3841 04:0E8C: D0 03        	bne	L138
  3842 04:0E8E: 82 C1 00     	brl	L10032
  3843                        L138:
  3844                        	.line	618
  3845                        ;		k_debug_strings("k_iterate_dropdown_menu
                    s:",(LPCHAR)((PMENU)data)->pCaption) ;
  3846                        	.line	619
  3847 04:0E91: A0 11 00     	ldy	#$11
  3848 04:0E94: B7 2A        	lda	[<L135+data_0],Y
  3849 04:0E96: 48           	pha
  3850 04:0E97: A0 0F 00     	ldy	#$f
  3851 04:0E9A: B7 2A        	lda	[<L135+data_0],Y
  3852 04:0E9C: 48           	pha
  3853 04:0E9D: F4 xx xx     	pea	#^L134
  3854 04:0EA0: F4 xx xx     	pea	#<L134
  3855 04:0EA3: 22 xx xx xx  	jsl	~~k_debug_strings
  3856                        ;
  3857                        ;		if(ctx)
  3858                        	.line	621
  3859                        ;		{
  3860 04:0EA7: A5 26        	lda	<L135+ctx_0
  3861 04:0EA9: 05 28        	ora	<L135+ctx_0+2
  3862 04:0EAB: D0 03        	bne	L139
  3863 04:0EAD: 82 A2 00     	brl	L10033
  3864                        L139:
  3865                        	.line	622
  3866                        ;			captions = (LPCSTR FAR*)ctx;
  3867                        	.line	623
  3868 04:0EB0: A5 26        	lda	<L135+ctx_0
  Tue Oct  1 2019  1:02                                                Page 78


  3869 04:0EB2: 85 19        	sta	<L136+captions_1
  3870 04:0EB4: A5 28        	lda	<L135+ctx_0+2
  3871 04:0EB6: 85 1B        	sta	<L136+captions_1+2
  3872                        ;
  3873                        ;			while(captions[i])
  3874                        	.line	625
  3875                        L10034:
  3876 04:0EB8: A5 21        	lda	<L136+i_1
  3877 04:0EBA: 85 05        	sta	<R1
  3878 04:0EBC: 64 07        	stz	<R1+2
  3879 04:0EBE: D4 07        	pei	<R1+2
  3880 04:0EC0: D4 05        	pei	<R1
  3881 04:0EC2: A9 02 00     	lda	#$2
  3882                        	xref	~~~lasl
  3883 04:0EC5: 22 xx xx xx  	jsl	~~~lasl
  3884 04:0EC9: 85 01        	sta	<R0
  3885 04:0ECB: 86 03        	stx	<R0+2
  3886 04:0ECD: 18           	clc
  3887 04:0ECE: A5 19        	lda	<L136+captions_1
  3888 04:0ED0: 65 01        	adc	<R0
  3889 04:0ED2: 85 09        	sta	<R2
  3890 04:0ED4: A5 1B        	lda	<L136+captions_1+2
  3891 04:0ED6: 65 03        	adc	<R0+2
  3892 04:0ED8: 85 0B        	sta	<R2+2
  3893 04:0EDA: A7 09        	lda	[<R2]
  3894 04:0EDC: A0 02 00     	ldy	#$2
  3895 04:0EDF: 17 09        	ora	[<R2],Y
  3896 04:0EE1: D0 03        	bne	L140
  3897 04:0EE3: 82 05 00     	brl	L10035
  3898                        L140:
  3899                        ;			{
  3900                        	.line	626
  3901                        ;				i++;
  3902                        	.line	627
  3903 04:0EE6: E6 21        	inc	<L136+i_1
  3904                        ;			}
  3905                        	.line	628
  3906 04:0EE8: 82 CD FF     	brl	L10034
  3907                        L10035:
  3908                        ;
  3909                        ;			captions[i] = (LPCSTR)((PMENU)da
                    ta)->pCaption;
  3910                        	.line	630
  3911 04:0EEB: A5 21        	lda	<L136+i_1
  3912 04:0EED: 85 05        	sta	<R1
  3913 04:0EEF: 64 07        	stz	<R1+2
  3914 04:0EF1: D4 07        	pei	<R1+2
  3915 04:0EF3: D4 05        	pei	<R1
  3916 04:0EF5: A9 02 00     	lda	#$2
  3917                        	xref	~~~lasl
  3918 04:0EF8: 22 xx xx xx  	jsl	~~~lasl
  3919 04:0EFC: 85 01        	sta	<R0
  3920 04:0EFE: 86 03        	stx	<R0+2
  3921 04:0F00: 18           	clc
  3922 04:0F01: A5 19        	lda	<L136+captions_1
  3923 04:0F03: 65 01        	adc	<R0
  3924 04:0F05: 85 09        	sta	<R2
  3925 04:0F07: A5 1B        	lda	<L136+captions_1+2
  Tue Oct  1 2019  1:02                                                Page 79


  3926 04:0F09: 65 03        	adc	<R0+2
  3927 04:0F0B: 85 0B        	sta	<R2+2
  3928 04:0F0D: A0 0F 00     	ldy	#$f
  3929 04:0F10: B7 2A        	lda	[<L135+data_0],Y
  3930 04:0F12: 87 09        	sta	[<R2]
  3931 04:0F14: A0 11 00     	ldy	#$11
  3932 04:0F17: B7 2A        	lda	[<L135+data_0],Y
  3933 04:0F19: A0 02 00     	ldy	#$2
  3934 04:0F1C: 97 09        	sta	[<R2],Y
  3935                        ;			captions[i+1] = NULL;
  3936                        	.line	631
  3937 04:0F1E: A5 21        	lda	<L136+i_1
  3938 04:0F20: 1A           	ina
  3939 04:0F21: 85 05        	sta	<R1
  3940 04:0F23: A5 05        	lda	<R1
  3941 04:0F25: 85 05        	sta	<R1
  3942 04:0F27: 64 07        	stz	<R1+2
  3943 04:0F29: D4 07        	pei	<R1+2
  3944 04:0F2B: D4 05        	pei	<R1
  3945 04:0F2D: A9 02 00     	lda	#$2
  3946                        	xref	~~~lasl
  3947 04:0F30: 22 xx xx xx  	jsl	~~~lasl
  3948 04:0F34: 85 01        	sta	<R0
  3949 04:0F36: 86 03        	stx	<R0+2
  3950 04:0F38: 18           	clc
  3951 04:0F39: A5 19        	lda	<L136+captions_1
  3952 04:0F3B: 65 01        	adc	<R0
  3953 04:0F3D: 85 09        	sta	<R2
  3954 04:0F3F: A5 1B        	lda	<L136+captions_1+2
  3955 04:0F41: 65 03        	adc	<R0+2
  3956 04:0F43: 85 0B        	sta	<R2+2
  3957 04:0F45: A9 00 00     	lda	#$0
  3958 04:0F48: 87 09        	sta	[<R2]
  3959 04:0F4A: A9 00 00     	lda	#$0
  3960 04:0F4D: A0 02 00     	ldy	#$2
  3961 04:0F50: 97 09        	sta	[<R2],Y
  3962                        ;			/*
  3963                        ;			pWin 		= (PWINDOW)ctx;
  3964                        ;			pMenuAnchor = (PMENUANCHOR)pWin-
                    >windowData;
  3965                        ;
  3966                        ;
  3967                        ;
  3968                        ;			pItem = k_user_CreateMenuAnchor(
                    (HWND)ctx,
  3969                        ;					                
                    ((PMENU)data)->pCaption,
  3970                        ;							
                    		(PMENU)data,
  3971                        ;							
                    		pMenuAnchor->renderLayoutX,
  3972                        ;							
                    		pMenuAnchor->renderLayoutY,
  3973                        ;							
                    		strlen(((PMENU)data)->pCaption)*FONTW,
  3974                        ;							
                    		FONTH);
  3975                        ;
  Tue Oct  1 2019  1:02                                                Page 80


  3976                        ;			//pMenuAnchor->renderLayoutX+=st
                    rlen(((PMENU)data)->pCaption)*FONTW;
  3977                        ;			pMenuAnchor->renderLayoutY+=(FON
                    TH + (FONTH/2));
  3978                        ;
  3979                        ;			k_debug_pointer("k_iterate_dropd
                    own_menus:pItem:",pItem) ;
  3980                        ;			k_debug_integer("k_iterate_dropd
                    own_menus:renderLayoutX:",pMenuAnchor->renderLayoutX) ;
  3981                        ;			k_debug_integer("k_iterate_dropd
                    own_menus:renderLayoutY:",pMenuAnchor->renderLayoutY) ;
  3982                        ;
  3983                        ;			_k_user_send_child_message(k_get
                    HandleFromWindow(pItem),FX_SHOW_WINDOW,NULL,0);
  3984                        ;			*/
  3985                        ;		}
  3986                        	.line	655
  3987                        ;
  3988                        ;	}
  3989                        L10033:
  3990                        	.line	657
  3991                        ;}
  3992                        L10032:
  3993                        	.line	658
  3994                        L141:
  3995 04:0F52: A5 24        	lda	<L135+2
  3996 04:0F54: 85 2C        	sta	<L135+2+8
  3997 04:0F56: A5 23        	lda	<L135+1
  3998 04:0F58: 85 2B        	sta	<L135+1+8
  3999 04:0F5A: 2B           	pld
  4000 04:0F5B: 3B           	tsc
  4001 04:0F5C: 18           	clc
  4002 04:0F5D: 69 2A 00     	adc	#L135+8
  4003 04:0F60: 1B           	tcs
  4004 04:0F61: 6B           	rtl
  4005                        	.endblock	658
  4006             00000022   L135	equ	34
  4007             0000000D   L136	equ	13
  4008 04:0F62:              	ends
  4009                        	efunc
  4010                        	.endfunc	658,13,34
  4011                        	.line	658
  4012                        	data
  4013                        L134:
  4014 00:040E: 6B 5F 69 74  	db	$6B,$5F,$69,$74,$65,$72,$61,$74,$65,$5F,
                    $64,$72,$6F,$70,$64
       00:0412: 65 72 61 74 
       00:0416: 65 5F 64 72 
       00:041A: 6F 70 64 
  4015 00:041D: 6F 77 6E 5F  	db	$6F,$77,$6E,$5F,$6D,$65,$6E,$75,$73,$3A,
                    $00
       00:0421: 6D 65 6E 75 
       00:0425: 73 3A 00 
  4016 00:0428:              	ends
  4017                        ;
  4018                        ;
  4019                        ;PWINDOW	k_user_CreateMenuAnchor(HWND hWndParent,
                    LPCSTR caption,HMENU hMenu,int x,int y,int width,int height)
  Tue Oct  1 2019  1:02                                                Page 81


  4020                        ;{
  4021                        	.line	661
  4022                        	.line	662
  4023                        	WINMAN
  4024                        	xdef	~~k_user_CreateMenuAnchor
  4025                        	func
  4026                        	.function	662
  4027                        ~~k_user_CreateMenuAnchor:
  4028                        	longa	on
  4029                        	longi	on
  4030 04:0F62: 3B           	tsc
  4031 04:0F63: 38           	sec
  4032 04:0F64: E9 0C 00     	sbc	#L143
  4033 04:0F67: 1B           	tcs
  4034 04:0F68: 0B           	phd
  4035 04:0F69: 5B           	tcd
  4036             00000004   hWndParent_0	set	4
  4037             00000008   caption_0	set	8
  4038             0000000C   hMenu_0	set	12
  4039             00000010   x_0	set	16
  4040             00000012   y_0	set	18
  4041             00000014   width_0	set	20
  4042             00000016   height_0	set	22
  4043                        	.block	662
  4044                        ;	PWINDOW pWin = NULL;
  4045                        ;
  4046                        ;	//k_debug_strings("k_user_CreateMenuAnchor:","En
                    ter");
  4047                        ;
  4048                        ;	pWin = k_user_CreateWindow(0,
  4049             00000000   pWin_1	set	0
  4050                        	.sym	pWin,0,138,1,32,23
  4051                        	.sym	hWndParent,4,129,6,32
  4052                        	.sym	caption,8,142,6,32
  4053                        	.sym	hMenu,12,129,6,32
  4054                        	.sym	x,16,5,6,16
  4055                        	.sym	y,18,5,6,16
  4056                        	.sym	width,20,5,6,16
  4057                        	.sym	height,22,5,6,16
  4058 04:0F6A: 64 09        	stz	<L144+pWin_1
  4059 04:0F6C: 64 0B        	stz	<L144+pWin_1+2
  4060                        	.line	667
  4061                        ;							
                       "menuAnchorWindowClass",
  4062                        ;							
                        caption,
  4063                        ;							
                    	x,y,
  4064                        ;							
                    	width,height,
  4065                        ;							
                    	hWndParent,
  4066                        ;							
                    	hMenu,
  4067                        ;							
                    	NULL);
  4068 04:0F6E: F4 00 00     	pea	#^$0
  4069 04:0F71: F4 00 00     	pea	#<$0
  Tue Oct  1 2019  1:02                                                Page 82


  4070 04:0F74: D4 1A        	pei	<L143+hMenu_0+2
  4071 04:0F76: D4 18        	pei	<L143+hMenu_0
  4072 04:0F78: D4 12        	pei	<L143+hWndParent_0+2
  4073 04:0F7A: D4 10        	pei	<L143+hWndParent_0
  4074 04:0F7C: D4 22        	pei	<L143+height_0
  4075 04:0F7E: D4 20        	pei	<L143+width_0
  4076 04:0F80: D4 1E        	pei	<L143+y_0
  4077 04:0F82: D4 1C        	pei	<L143+x_0
  4078 04:0F84: D4 16        	pei	<L143+caption_0+2
  4079 04:0F86: D4 14        	pei	<L143+caption_0
  4080 04:0F88: F4 xx xx     	pea	#^L142
  4081 04:0F8B: F4 xx xx     	pea	#<L142
  4082 04:0F8E: F4 00 00     	pea	#^$0
  4083 04:0F91: F4 00 00     	pea	#<$0
  4084 04:0F94: 22 AB 04 04  	jsl	~~k_user_CreateWindow
  4085 04:0F98: 85 09        	sta	<L144+pWin_1
  4086 04:0F9A: 86 0B        	stx	<L144+pWin_1+2
  4087                        ;	if(pWin)
  4088                        	.line	675
  4089                        ;	{
  4090 04:0F9C: A5 09        	lda	<L144+pWin_1
  4091 04:0F9E: 05 0B        	ora	<L144+pWin_1+2
  4092 04:0FA0: D0 03        	bne	L146
  4093 04:0FA2: 82 4F 00     	brl	L10036
  4094                        L146:
  4095                        	.line	676
  4096                        ;		//k_add_child_window(k_getWindowFromHand
                    le(hWndParent),pWin,k_update_hover_location);
  4097                        ;
  4098                        ;		//k_debug_strings("k_user_CreateButton:"
                    ,"k_send_window_message");
  4099                        ;		k_send_window_message(k_getHandleFromWin
                    dow(pWin),FX_CREATE_WINDOW,NULL,0);
  4100                        	.line	680
  4101 04:0FA5: F4 00 00     	pea	#<$0
  4102 04:0FA8: F4 00 00     	pea	#^$0
  4103 04:0FAB: F4 00 00     	pea	#<$0
  4104 04:0FAE: F4 03 FF     	pea	#<$ff03
  4105 04:0FB1: D4 0B        	pei	<L144+pWin_1+2
  4106 04:0FB3: D4 09        	pei	<L144+pWin_1
  4107 04:0FB5: 22 8C 03 04  	jsl	~~k_getHandleFromWindow
  4108 04:0FB9: 85 01        	sta	<R0
  4109 04:0FBB: 86 03        	stx	<R0+2
  4110 04:0FBD: DA           	phx
  4111 04:0FBE: 48           	pha
  4112 04:0FBF: 22 xx xx xx  	jsl	~~k_send_window_message
  4113                        ;		//k_debug_strings("k_user_CreateButton:"
                    ,"k_send_command_message");
  4114                        ;		k_send_command_message(k_getHandleFromWi
                    ndow(pWin),FX_CONTROL_COMMAND,CTL_CMD_CAPTION,0,(ULONG)k_str
                    ing_copy_string(caption),0L);
  4115                        	.line	682
  4116 04:0FC3: F4 00 00     	pea	#^$0
  4117 04:0FC6: F4 00 00     	pea	#<$0
  4118 04:0FC9: D4 16        	pei	<L143+caption_0+2
  4119 04:0FCB: D4 14        	pei	<L143+caption_0
  4120 04:0FCD: 22 xx xx xx  	jsl	~~k_string_copy_string
  4121 04:0FD1: 85 01        	sta	<R0
  Tue Oct  1 2019  1:02                                                Page 83


  4122 04:0FD3: 86 03        	stx	<R0+2
  4123 04:0FD5: D4 03        	pei	<R0+2
  4124 04:0FD7: D4 01        	pei	<R0
  4125 04:0FD9: F4 00 00     	pea	#<$0
  4126 04:0FDC: F4 01 00     	pea	#<$1
  4127 04:0FDF: F4 00 FA     	pea	#<$fa00
  4128 04:0FE2: D4 0B        	pei	<L144+pWin_1+2
  4129 04:0FE4: D4 09        	pei	<L144+pWin_1
  4130 04:0FE6: 22 8C 03 04  	jsl	~~k_getHandleFromWindow
  4131 04:0FEA: 85 05        	sta	<R1
  4132 04:0FEC: 86 07        	stx	<R1+2
  4133 04:0FEE: DA           	phx
  4134 04:0FEF: 48           	pha
  4135 04:0FF0: 22 xx xx xx  	jsl	~~k_send_command_message
  4136                        ;
  4137                        ;	}
  4138                        	.line	684
  4139                        ;
  4140                        ;	//k_debug_strings("k_user_CreateMenuAnchor:","Ex
                    it");
  4141                        ;
  4142                        ;	return pWin;
  4143                        L10036:
  4144                        	.line	688
  4145 04:0FF4: A6 0B        	ldx	<L144+pWin_1+2
  4146 04:0FF6: A5 09        	lda	<L144+pWin_1
  4147                        L147:
  4148 04:0FF8: A8           	tay
  4149 04:0FF9: A5 0E        	lda	<L143+2
  4150 04:0FFB: 85 22        	sta	<L143+2+20
  4151 04:0FFD: A5 0D        	lda	<L143+1
  4152 04:0FFF: 85 21        	sta	<L143+1+20
  4153 04:1001: 2B           	pld
  4154 04:1002: 3B           	tsc
  4155 04:1003: 18           	clc
  4156 04:1004: 69 20 00     	adc	#L143+20
  4157 04:1007: 1B           	tcs
  4158 04:1008: 98           	tya
  4159 04:1009: 6B           	rtl
  4160                        ;}
  4161                        	.line	689
  4162                        	.endblock	689
  4163             0000000C   L143	equ	12
  4164             00000009   L144	equ	9
  4165 04:100A:              	ends
  4166                        	efunc
  4167                        	.endfunc	689,9,12
  4168                        	.line	689
  4169                        	data
  4170                        L142:
  4171 00:0428: 6D 65 6E 75  	db	$6D,$65,$6E,$75,$41,$6E,$63,$68,$6F,$72,
                    $57,$69,$6E,$64,$6F
       00:042C: 41 6E 63 68 
       00:0430: 6F 72 57 69 
       00:0434: 6E 64 6F 
  4172 00:0437: 77 43 6C 61  	db	$77,$43,$6C,$61,$73,$73,$00
       00:043B: 73 73 00 
  4173 00:043E:              	ends
  Tue Oct  1 2019  1:02                                                Page 84


  4174                        ;
  4175                        ;BOOL menuAnchorWindowProc(PFXOSMESSAGE pMsg)
  4176                        ;{
  4177                        	.line	691
  4178                        	.line	692
  4179                        	WINMAN
  4180                        	xdef	~~menuAnchorWindowProc
  4181                        	func
  4182                        	.function	692
  4183                        ~~menuAnchorWindowProc:
  4184                        	longa	on
  4185                        	longi	on
  4186 04:100A: 3B           	tsc
  4187 04:100B: 38           	sec
  4188 04:100C: E9 1A 00     	sbc	#L149
  4189 04:100F: 1B           	tcs
  4190 04:1010: 0B           	phd
  4191 04:1011: 5B           	tcd
  4192             00000004   pMsg_0	set	4
  4193                        	.block	692
  4194                        ;	PFXPROCESS p = NULL;
  4195                        ;	PWINDOW	   pWin = NULL;
  4196                        ;	PBUTTON	   pButton = NULL;
  4197                        ;
  4198                        ;	UINT	   size = 0;
  4199                        ;
  4200                        ;	if(pMsg!=NULL)
  4201             00000000   p_1	set	0
  4202             00000004   pWin_1	set	4
  4203             00000008   pButton_1	set	8
  4204             0000000C   size_1	set	12
  4205                        	.sym	p,0,138,1,32,16
  4206                        	.sym	pWin,4,138,1,32,23
  4207                        	.sym	pButton,8,138,1,32,29
  4208                        	.sym	size,12,16,1,16
  4209                        	.sym	pMsg,4,138,6,32,12
  4210 04:1012: 64 0D        	stz	<L150+p_1
  4211 04:1014: 64 0F        	stz	<L150+p_1+2
  4212 04:1016: 64 11        	stz	<L150+pWin_1
  4213 04:1018: 64 13        	stz	<L150+pWin_1+2
  4214 04:101A: 64 15        	stz	<L150+pButton_1
  4215 04:101C: 64 17        	stz	<L150+pButton_1+2
  4216 04:101E: 64 19        	stz	<L150+size_1
  4217                        	.line	699
  4218                        ;	{
  4219 04:1020: A5 1E        	lda	<L149+pMsg_0
  4220 04:1022: 05 20        	ora	<L149+pMsg_0+2
  4221 04:1024: D0 03        	bne	L152
  4222 04:1026: 82 D8 03     	brl	L10037
  4223                        L152:
  4224                        	.line	700
  4225                        ;		p = k_exec_get_current_process();
  4226                        	.line	701
  4227 04:1029: 22 xx xx xx  	jsl	~~k_exec_get_current_process
  4228 04:102D: 85 0D        	sta	<L150+p_1
  4229 04:102F: 86 0F        	stx	<L150+p_1+2
  4230                        ;		pWin = k_getWindowFromHandle(pMsg->hwnd)
                    ;
  Tue Oct  1 2019  1:02                                                Page 85


  4231                        	.line	702
  4232 04:1031: A0 0C 00     	ldy	#$c
  4233 04:1034: B7 1E        	lda	[<L149+pMsg_0],Y
  4234 04:1036: 48           	pha
  4235 04:1037: A0 0A 00     	ldy	#$a
  4236 04:103A: B7 1E        	lda	[<L149+pMsg_0],Y
  4237 04:103C: 48           	pha
  4238 04:103D: 22 AA 03 04  	jsl	~~k_getWindowFromHandle
  4239 04:1041: 85 11        	sta	<L150+pWin_1
  4240 04:1043: 86 13        	stx	<L150+pWin_1+2
  4241                        ;		pButton = ((PBUTTON)pWin->windowData);
  4242                        	.line	703
  4243 04:1045: A0 5D 00     	ldy	#$5d
  4244 04:1048: B7 11        	lda	[<L150+pWin_1],Y
  4245 04:104A: 85 15        	sta	<L150+pButton_1
  4246 04:104C: A0 5F 00     	ldy	#$5f
  4247 04:104F: B7 11        	lda	[<L150+pWin_1],Y
  4248 04:1051: 85 17        	sta	<L150+pButton_1+2
  4249                        ;		//k_debug_long("consoleWindowProc::Proce
                    ssId:",p->procId);
  4250                        ;
  4251                        ;		switch(pMsg->type)
  4252                        	.line	706
  4253 04:1053: A0 08 00     	ldy	#$8
  4254 04:1056: B7 1E        	lda	[<L149+pMsg_0],Y
  4255 04:1058: 82 76 03     	brl	L10038
  4256                        ;		{
  4257                        	.line	707
  4258                        ;		case FX_CREATE_WINDOW:
  4259                        	.line	708
  4260                        L10040:
  4261                        ;			//k_debug_long("menuAnchorWindow
                    Proc::ProcessId:",p->procId);
  4262                        ;			k_debug_string("menuAnchorWindow
                    Proc::FX_CREATE_WINDOW\r\n");
  4263                        	.line	710
  4264 04:105B: F4 xx xx     	pea	#^L148
  4265 04:105E: F4 xx xx     	pea	#<L148
  4266 04:1061: 22 xx xx xx  	jsl	~~k_debug_string
  4267                        ;
  4268                        ;			//pWin->windowData = k_mem_alloc
                    ate_heap(sizeof(BUTTON));
  4269                        ;			pWin->windowData = k_mem_allocat
                    e_heap(sizeof(MENUANCHOR));
  4270                        	.line	713
  4271 04:1065: F4 0C 00     	pea	#<$c
  4272 04:1068: 22 xx xx xx  	jsl	~~k_mem_allocate_heap
  4273 04:106C: 85 01        	sta	<R0
  4274 04:106E: 86 03        	stx	<R0+2
  4275 04:1070: A5 01        	lda	<R0
  4276 04:1072: A0 5D 00     	ldy	#$5d
  4277 04:1075: 97 11        	sta	[<L150+pWin_1],Y
  4278 04:1077: A5 03        	lda	<R0+2
  4279 04:1079: A0 5F 00     	ldy	#$5f
  4280 04:107C: 97 11        	sta	[<L150+pWin_1],Y
  4281                        ;			((PMENUANCHOR)pWin->windowData)-
                    >renderLayoutX = pWin->win_x + FONTW;
  4282                        	.line	714
  Tue Oct  1 2019  1:02                                                Page 86


  4283 04:107E: A0 5D 00     	ldy	#$5d
  4284 04:1081: B7 11        	lda	[<L150+pWin_1],Y
  4285 04:1083: 85 01        	sta	<R0
  4286 04:1085: A0 5F 00     	ldy	#$5f
  4287 04:1088: B7 11        	lda	[<L150+pWin_1],Y
  4288 04:108A: 85 03        	sta	<R0+2
  4289 04:108C: 22 xx xx xx  	jsl	~~k_font_getFontWidth
  4290 04:1090: 85 05        	sta	<R1
  4291 04:1092: 18           	clc
  4292 04:1093: A5 05        	lda	<R1
  4293 04:1095: A0 08 00     	ldy	#$8
  4294 04:1098: 77 11        	adc	[<L150+pWin_1],Y
  4295 04:109A: A0 04 00     	ldy	#$4
  4296 04:109D: 97 01        	sta	[<R0],Y
  4297                        ;			((PMENUANCHOR)pWin->windowData)-
                    >renderLayoutY = pWin->win_y + FONTH;
  4298                        	.line	715
  4299 04:109F: A0 5D 00     	ldy	#$5d
  4300 04:10A2: B7 11        	lda	[<L150+pWin_1],Y
  4301 04:10A4: 85 01        	sta	<R0
  4302 04:10A6: A0 5F 00     	ldy	#$5f
  4303 04:10A9: B7 11        	lda	[<L150+pWin_1],Y
  4304 04:10AB: 85 03        	sta	<R0+2
  4305 04:10AD: 22 xx xx xx  	jsl	~~k_font_getFontHeight
  4306 04:10B1: 85 05        	sta	<R1
  4307 04:10B3: 18           	clc
  4308 04:10B4: A5 05        	lda	<R1
  4309 04:10B6: A0 0A 00     	ldy	#$a
  4310 04:10B9: 77 11        	adc	[<L150+pWin_1],Y
  4311 04:10BB: A0 06 00     	ldy	#$6
  4312 04:10BE: 97 01        	sta	[<R0],Y
  4313                        ;
  4314                        ;
  4315                        ;			break;
  4316                        	.line	718
  4317 04:10C0: 82 3E 03     	brl	L10039
  4318                        ;		case FX_REDRAW_WINDOW:
  4319                        	.line	719
  4320                        L10041:
  4321                        ;			k_debug_string("menuAnchorWindow
                    Proc::FX_REDRAW_WINDOW\r\n");
  4322                        	.line	720
  4323 04:10C3: F4 xx xx     	pea	#^L148+41
  4324 04:10C6: F4 xx xx     	pea	#<L148+41
  4325 04:10C9: 22 xx xx xx  	jsl	~~k_debug_string
  4326                        ;			break;
  4327                        	.line	721
  4328 04:10CD: 82 31 03     	brl	L10039
  4329                        ;
  4330                        ;		case FX_HIDE_WINDOW:
  4331                        	.line	723
  4332                        L10042:
  4333                        ;			k_debug_string("menuAnchorWindow
                    Proc::FX_HIDE_WINDOW\r\n");
  4334                        	.line	724
  4335 04:10D0: F4 xx xx     	pea	#^L148+82
  4336 04:10D3: F4 xx xx     	pea	#<L148+82
  4337 04:10D6: 22 xx xx xx  	jsl	~~k_debug_string
  Tue Oct  1 2019  1:02                                                Page 87


  4338                        ;
  4339                        ;			pWin->isVisible = FALSE;
  4340                        	.line	726
  4341 04:10DA: E2 20        	sep	#$20
  4342                        	longa	off
  4343 04:10DC: A9 00        	lda	#$0
  4344 04:10DE: A0 5C 00     	ldy	#$5c
  4345 04:10E1: 97 11        	sta	[<L150+pWin_1],Y
  4346 04:10E3: C2 20        	rep	#$20
  4347                        	longa	on
  4348                        ;
  4349                        ;			break;
  4350                        	.line	728
  4351 04:10E5: 82 19 03     	brl	L10039
  4352                        ;		case FX_SHOW_WINDOW:
  4353                        	.line	729
  4354                        L10043:
  4355                        ;			k_debug_string("menuAnchorWindow
                    Proc::FX_SHOW_WINDOW\r\n");
  4356                        	.line	730
  4357 04:10E8: F4 xx xx     	pea	#^L148+121
  4358 04:10EB: F4 xx xx     	pea	#<L148+121
  4359 04:10EE: 22 xx xx xx  	jsl	~~k_debug_string
  4360                        ;
  4361                        ;			pWin->isVisible = TRUE;
  4362                        	.line	732
  4363 04:10F2: E2 20        	sep	#$20
  4364                        	longa	off
  4365 04:10F4: A9 01        	lda	#$1
  4366 04:10F6: A0 5C 00     	ldy	#$5c
  4367 04:10F9: 97 11        	sta	[<L150+pWin_1],Y
  4368 04:10FB: C2 20        	rep	#$20
  4369                        	longa	on
  4370                        ;			k_vdraw_ui_window(FXWS_VISIBLE,
  4371                        	.line	733
  4372                        ;							
                      pWin->win_x ,pWin->win_y,
  4373                        ;							
                      pWin->win_height,pWin->win_width,
  4374                        ;							
                      pWin->win_title,
  4375                        ;							
                      15, k_getUIMenuColor());
  4376 04:10FD: 22 xx xx xx  	jsl	~~k_getUIMenuColor
  4377 04:1101: 48           	pha
  4378 04:1102: F4 0F 00     	pea	#<$f
  4379 04:1105: 18           	clc
  4380 04:1106: A9 14 00     	lda	#$14
  4381 04:1109: 65 11        	adc	<L150+pWin_1
  4382 04:110B: 85 01        	sta	<R0
  4383 04:110D: A9 00 00     	lda	#$0
  4384 04:1110: 65 13        	adc	<L150+pWin_1+2
  4385 04:1112: 85 03        	sta	<R0+2
  4386 04:1114: D4 03        	pei	<R0+2
  4387 04:1116: D4 01        	pei	<R0
  4388 04:1118: A0 0C 00     	ldy	#$c
  4389 04:111B: B7 11        	lda	[<L150+pWin_1],Y
  4390 04:111D: 48           	pha
  Tue Oct  1 2019  1:02                                                Page 88


  4391 04:111E: A0 0E 00     	ldy	#$e
  4392 04:1121: B7 11        	lda	[<L150+pWin_1],Y
  4393 04:1123: 48           	pha
  4394 04:1124: A0 0A 00     	ldy	#$a
  4395 04:1127: B7 11        	lda	[<L150+pWin_1],Y
  4396 04:1129: 48           	pha
  4397 04:112A: A0 08 00     	ldy	#$8
  4398 04:112D: B7 11        	lda	[<L150+pWin_1],Y
  4399 04:112F: 48           	pha
  4400 04:1130: F4 00 10     	pea	#^$10000000
  4401 04:1133: F4 00 00     	pea	#<$10000000
  4402 04:1136: 22 xx xx xx  	jsl	~~k_vdraw_ui_window
  4403                        ;			k_draw_text_point(pButton->pCapt
                    ion,
  4404                        	.line	738
  4405                        ;			          //pWin->win_x + (pWin-
                    >win_width/2)  - (size/2) - 2,
  4406                        ;					  //pWin->win_y 
                    + (pWin->win_height/2) - (4) + 2     ,15) ;
  4407                        ;					  pWin->win_x,
  4408                        ;					  pWin->win_y   
                      ,k_getUIGadgetColor()) ;
  4409 04:113A: 22 xx xx xx  	jsl	~~k_getUIGadgetColor
  4410 04:113E: 48           	pha
  4411 04:113F: A0 0A 00     	ldy	#$a
  4412 04:1142: B7 11        	lda	[<L150+pWin_1],Y
  4413 04:1144: 48           	pha
  4414 04:1145: A0 08 00     	ldy	#$8
  4415 04:1148: B7 11        	lda	[<L150+pWin_1],Y
  4416 04:114A: 48           	pha
  4417 04:114B: A0 02 00     	ldy	#$2
  4418 04:114E: B7 15        	lda	[<L150+pButton_1],Y
  4419 04:1150: 48           	pha
  4420 04:1151: A7 15        	lda	[<L150+pButton_1]
  4421 04:1153: 48           	pha
  4422 04:1154: 22 xx xx xx  	jsl	~~k_draw_text_point
  4423                        ;
  4424                        ;
  4425                        ;			break;
  4426                        	.line	745
  4427 04:1158: 82 A6 02     	brl	L10039
  4428                        ;		case FX_DRAW_WINDOW:
  4429                        	.line	746
  4430                        L10044:
  4431                        ;			k_debug_string("menuAnchorWindow
                    Proc::FX_DRAW_WINDOW\r\n");
  4432                        	.line	747
  4433 04:115B: F4 xx xx     	pea	#^L148+160
  4434 04:115E: F4 xx xx     	pea	#<L148+160
  4435 04:1161: 22 xx xx xx  	jsl	~~k_debug_string
  4436                        ;			if(pWin->isVisible)
  4437                        	.line	748
  4438                        ;			{
  4439 04:1165: A0 5C 00     	ldy	#$5c
  4440 04:1168: B7 11        	lda	[<L150+pWin_1],Y
  4441 04:116A: 29 FF 00     	and	#$ff
  4442 04:116D: D0 03        	bne	L153
  4443 04:116F: 82 5B 00     	brl	L10045
  Tue Oct  1 2019  1:02                                                Page 89


  4444                        L153:
  4445                        	.line	749
  4446                        ;				k_vdraw_ui_window(FXWS_V
                    ISIBLE,
  4447                        	.line	750
  4448                        ;							
                    	  pWin->win_x ,pWin->win_y,
  4449                        ;							
                    	  pWin->win_height,pWin->win_width,
  4450                        ;							
                    	  pWin->win_title,
  4451                        ;							
                    	  15, k_getUIMenuColor());
  4452 04:1172: 22 xx xx xx  	jsl	~~k_getUIMenuColor
  4453 04:1176: 48           	pha
  4454 04:1177: F4 0F 00     	pea	#<$f
  4455 04:117A: 18           	clc
  4456 04:117B: A9 14 00     	lda	#$14
  4457 04:117E: 65 11        	adc	<L150+pWin_1
  4458 04:1180: 85 01        	sta	<R0
  4459 04:1182: A9 00 00     	lda	#$0
  4460 04:1185: 65 13        	adc	<L150+pWin_1+2
  4461 04:1187: 85 03        	sta	<R0+2
  4462 04:1189: D4 03        	pei	<R0+2
  4463 04:118B: D4 01        	pei	<R0
  4464 04:118D: A0 0C 00     	ldy	#$c
  4465 04:1190: B7 11        	lda	[<L150+pWin_1],Y
  4466 04:1192: 48           	pha
  4467 04:1193: A0 0E 00     	ldy	#$e
  4468 04:1196: B7 11        	lda	[<L150+pWin_1],Y
  4469 04:1198: 48           	pha
  4470 04:1199: A0 0A 00     	ldy	#$a
  4471 04:119C: B7 11        	lda	[<L150+pWin_1],Y
  4472 04:119E: 48           	pha
  4473 04:119F: A0 08 00     	ldy	#$8
  4474 04:11A2: B7 11        	lda	[<L150+pWin_1],Y
  4475 04:11A4: 48           	pha
  4476 04:11A5: F4 00 10     	pea	#^$10000000
  4477 04:11A8: F4 00 00     	pea	#<$10000000
  4478 04:11AB: 22 xx xx xx  	jsl	~~k_vdraw_ui_window
  4479                        ;				k_draw_text_point(pButto
                    n->pCaption,
  4480                        	.line	755
  4481                        ;				          //pWin->win_x 
                    + (pWin->win_width/2)  - (size/2) - 2,
  4482                        ;						  //pWin
                    ->win_y + (pWin->win_height/2) - (4) + 2     ,15) ;
  4483                        ;						  pWin->
                    win_x,
  4484                        ;						  pWin->
                    win_y     ,k_getUIGadgetColor()) ;
  4485 04:11AF: 22 xx xx xx  	jsl	~~k_getUIGadgetColor
  4486 04:11B3: 48           	pha
  4487 04:11B4: A0 0A 00     	ldy	#$a
  4488 04:11B7: B7 11        	lda	[<L150+pWin_1],Y
  4489 04:11B9: 48           	pha
  4490 04:11BA: A0 08 00     	ldy	#$8
  4491 04:11BD: B7 11        	lda	[<L150+pWin_1],Y
  Tue Oct  1 2019  1:02                                                Page 90


  4492 04:11BF: 48           	pha
  4493 04:11C0: A0 02 00     	ldy	#$2
  4494 04:11C3: B7 15        	lda	[<L150+pButton_1],Y
  4495 04:11C5: 48           	pha
  4496 04:11C6: A7 15        	lda	[<L150+pButton_1]
  4497 04:11C8: 48           	pha
  4498 04:11C9: 22 xx xx xx  	jsl	~~k_draw_text_point
  4499                        ;			}
  4500                        	.line	760
  4501                        ;
  4502                        ;			break;
  4503                        L10045:
  4504                        	.line	762
  4505 04:11CD: 82 31 02     	brl	L10039
  4506                        ;		case FX_LBUTTON_DOWN:
  4507                        	.line	763
  4508                        L10046:
  4509                        ;			k_debug_string("menuAnchorWindow
                    Proc::FX_LBUTTON_DOWN\r\n");
  4510                        	.line	764
  4511 04:11D0: F4 xx xx     	pea	#^L148+199
  4512 04:11D3: F4 xx xx     	pea	#<L148+199
  4513 04:11D6: 22 xx xx xx  	jsl	~~k_debug_string
  4514                        ;
  4515                        ;
  4516                        ;			k_user_CreateMenuDropDown(k_user
                    _getDesktopWindow(),
  4517                        	.line	767
  4518                        ;							
                    		  ((PMENU)pWin->hMenu)->pCaption,
  4519                        ;							
                    		  (PMENU)pWin->hMenu,
  4520                        ;							
                    		  pWin->win_x,pWin->win_y + pWin->win_height,
  4521                        ;							
                    		  -1,-1);
  4522 04:11DA: F4 FF FF     	pea	#<$ffffffff
  4523 04:11DD: F4 FF FF     	pea	#<$ffffffff
  4524 04:11E0: 18           	clc
  4525 04:11E1: A0 0A 00     	ldy	#$a
  4526 04:11E4: B7 11        	lda	[<L150+pWin_1],Y
  4527 04:11E6: A0 0E 00     	ldy	#$e
  4528 04:11E9: 77 11        	adc	[<L150+pWin_1],Y
  4529 04:11EB: 48           	pha
  4530 04:11EC: A0 08 00     	ldy	#$8
  4531 04:11EF: B7 11        	lda	[<L150+pWin_1],Y
  4532 04:11F1: 48           	pha
  4533 04:11F2: A0 52 00     	ldy	#$52
  4534 04:11F5: B7 11        	lda	[<L150+pWin_1],Y
  4535 04:11F7: 48           	pha
  4536 04:11F8: A0 50 00     	ldy	#$50
  4537 04:11FB: B7 11        	lda	[<L150+pWin_1],Y
  4538 04:11FD: 48           	pha
  4539 04:11FE: A0 50 00     	ldy	#$50
  4540 04:1201: B7 11        	lda	[<L150+pWin_1],Y
  4541 04:1203: 85 01        	sta	<R0
  4542 04:1205: A0 52 00     	ldy	#$52
  4543 04:1208: B7 11        	lda	[<L150+pWin_1],Y
  Tue Oct  1 2019  1:02                                                Page 91


  4544 04:120A: 85 03        	sta	<R0+2
  4545 04:120C: A0 11 00     	ldy	#$11
  4546 04:120F: B7 01        	lda	[<R0],Y
  4547 04:1211: 48           	pha
  4548 04:1212: A0 0F 00     	ldy	#$f
  4549 04:1215: B7 01        	lda	[<R0],Y
  4550 04:1217: 48           	pha
  4551 04:1218: 22 B9 02 04  	jsl	~~k_user_getDesktopWindow
  4552 04:121C: 85 01        	sta	<R0
  4553 04:121E: 86 03        	stx	<R0+2
  4554 04:1220: DA           	phx
  4555 04:1221: 48           	pha
  4556 04:1222: 22 A0 1C 04  	jsl	~~k_user_CreateMenuDropDown
  4557                        ;			/*
  4558                        ;			k_nodelist_foreach_type(((PMENU)
                    pWin->hMenu)->subMenus,
  4559                        ;							
                    		NL_TYPE_WINDOW_MENU,
  4560                        ;							
                    		pMsg->hwnd,
  4561                        ;							
                    		k_iterate_dropdown_menus);
  4562                        ;
  4563                        ;			k_create_context_menu(pWin->win_
                    x ,
  4564                        ;							
                    	  pWin->win_y + pWin->win_height,
  4565                        ;							
                    	  50,
  4566                        ;							
                    	  100,
  4567                        ;							
                    	  NULL,
  4568                        ;							
                    	  captions,
  4569                        ;							
                    	  k_getUIGadgetColor(), k_getUIMenuColor());
  4570                        ;
  4571                        ;
  4572                        ;			*/
  4573                        ;
  4574                        ;			/*
  4575                        ;			k_vdraw_ui_window(FXWS_BORDER | 
                    FXWS_VISIBLE,
  4576                        ;							
                      pWin->win_x ,
  4577                        ;							
                      pWin->win_y + pWin->win_height,
  4578                        ;							
                      50,
  4579                        ;							
                      100,
  4580                        ;							
                      NULL,
  4581                        ;							
                      k_getUIGadgetColor(), k_getUIMenuColor());
  4582                        ;
  4583                        ;
  Tue Oct  1 2019  1:02                                                Page 92


  4584                        ;			k_debug_pointer("menuAnchorWindo
                    wProc::hMenu:",pWin->hMenu);
  4585                        ;			k_debug_pointer("menuAnchorWindo
                    wProc::subMenus:",((PMENU)pWin->hMenu)->subMenus);
  4586                        ;			k_nodelist_foreach_type(((PMENU)
                    pWin->hMenu)->subMenus,
  4587                        ;							
                    		NL_TYPE_WINDOW_MENU,
  4588                        ;							
                    		pMsg->hwnd,
  4589                        ;							
                    		k_iterate_dropdown_menus);
  4590                        ;
  4591                        ;			*/
  4592                        ;
  4593                        ;			/*
  4594                        ;			if(pButton->pCaption && pWin->is
                    Visible )
  4595                        ;			{
  4596                        ;				k_debug_strings("menuAnc
                    horWindowProc::CTL_CMD_CAPTION:", (LPCHAR)pButton->pCaption 
                    );
  4597                        ;
  4598                        ;				k_vdraw_ui_window(FXWS_B
                    ORDER | FXWS_VISIBLE,
  4599                        ;							
                    	  pWin->win_x ,pWin->win_y,
  4600                        ;							
                    	  pWin->win_height,pWin->win_width,
  4601                        ;							
                    	  pWin->win_title,
  4602                        ;							
                    	  15, 4);
  4603                        ;
  4604                        ;				k_draw_line(pWin->win_x 
                    + 1 ,pWin->win_y + 1,
  4605                        ;						    pWin
                    ->win_x + 1,
  4606                        ;							
                    pWin->win_y + pWin->win_height - 1 , 0);
  4607                        ;
  4608                        ;				k_draw_line(pWin->win_x 
                    + 1 ,pWin->win_y + pWin->win_height - 1,
  4609                        ;						    pWin
                    ->win_x + pWin->win_width - 1,pWin->win_y + pWin->win_height
                     - 1 , 0);
  4610                        ;
  4611                        ;
  4612                        ;				size = strlen(pButton->p
                    Caption) * FONTW;
  4613                        ;				k_draw_text_point(pButto
                    n->pCaption,
  4614                        ;						        
                      pWin->win_x + (pWin->win_width/2)  - (size/2) - 2,
  4615                        ;							
                    	  pWin->win_y + (pWin->win_height/2) - (4) + 2     ,15) 
                    ;
  4616                        ;			}
  Tue Oct  1 2019  1:02                                                Page 93


  4617                        ;			*/
  4618                        ;
  4619                        ;
  4620                        ;
  4621                        ;			break;
  4622                        	.line	836
  4623 04:1226: 82 D8 01     	brl	L10039
  4624                        ;		case FX_LBUTTON_UP:
  4625                        	.line	837
  4626                        L10047:
  4627                        ;			k_debug_string("menuAnchorWindow
                    Proc::FX_LBUTTON_UP\r\n");
  4628                        	.line	838
  4629 04:1229: F4 xx xx     	pea	#^L148+239
  4630 04:122C: F4 xx xx     	pea	#<L148+239
  4631 04:122F: 22 xx xx xx  	jsl	~~k_debug_string
  4632                        ;
  4633                        ;			//_k_user_send_child_message(k_u
                    ser_getDesktopWindow(),FX_SHOW_WINDOW,NULL,0);
  4634                        ;
  4635                        ;			/*
  4636                        ;			if(pButton->pCaption && pWin->is
                    Visible )
  4637                        ;			{
  4638                        ;				k_debug_strings("menuAnc
                    horWindowProc::CTL_CMD_CAPTION:", (LPCHAR)pButton->pCaption 
                    );
  4639                        ;
  4640                        ;				k_vdraw_ui_window(FXWS_B
                    ORDER | FXWS_VISIBLE,
  4641                        ;							
                    	  pWin->win_x ,pWin->win_y,
  4642                        ;							
                    	  pWin->win_height,pWin->win_width,
  4643                        ;							
                    	  pWin->win_title,
  4644                        ;							
                    	  15, 4);
  4645                        ;
  4646                        ;				size = strlen(pButton->p
                    Caption) * FONTW;
  4647                        ;				k_draw_text_point(pButto
                    n->pCaption,
  4648                        ;						        
                      pWin->win_x + (pWin->win_width/2)  - (size/2),
  4649                        ;							
                    	  pWin->win_y + (pWin->win_height/2) - (4),15);
  4650                        ;			}
  4651                        ;
  4652                        ;			k_send_command_message(pWin->pPa
                    rentWindow,FX_CONTROL_COMMAND,LOWORD((ULONG)pWin->hMenu),0,0
                    L,0L);
  4653                        ;			*/
  4654                        ;			break;
  4655                        	.line	861
  4656 04:1233: 82 CB 01     	brl	L10039
  4657                        ;		case FX_MOUSE_ENTER:
  4658                        	.line	862
  Tue Oct  1 2019  1:02                                                Page 94


  4659                        L10048:
  4660                        ;			k_debug_string("menuAnchorWindow
                    Proc::FX_MOUSE_ENTER\r\n");
  4661                        	.line	863
  4662 04:1236: F4 xx xx     	pea	#^L148+277
  4663 04:1239: F4 xx xx     	pea	#<L148+277
  4664 04:123C: 22 xx xx xx  	jsl	~~k_debug_string
  4665                        ;
  4666                        ;
  4667                        ;			k_vdraw_ui_window(FXWS_VISIBLE,
  4668                        	.line	866
  4669                        ;							
                      pWin->win_x ,pWin->win_y,
  4670                        ;							
                      pWin->win_height,pWin->win_width,
  4671                        ;							
                      pWin->win_title,
  4672                        ;							
                      15, k_getUIGadgetColor());
  4673 04:1240: 22 xx xx xx  	jsl	~~k_getUIGadgetColor
  4674 04:1244: 48           	pha
  4675 04:1245: F4 0F 00     	pea	#<$f
  4676 04:1248: 18           	clc
  4677 04:1249: A9 14 00     	lda	#$14
  4678 04:124C: 65 11        	adc	<L150+pWin_1
  4679 04:124E: 85 01        	sta	<R0
  4680 04:1250: A9 00 00     	lda	#$0
  4681 04:1253: 65 13        	adc	<L150+pWin_1+2
  4682 04:1255: 85 03        	sta	<R0+2
  4683 04:1257: D4 03        	pei	<R0+2
  4684 04:1259: D4 01        	pei	<R0
  4685 04:125B: A0 0C 00     	ldy	#$c
  4686 04:125E: B7 11        	lda	[<L150+pWin_1],Y
  4687 04:1260: 48           	pha
  4688 04:1261: A0 0E 00     	ldy	#$e
  4689 04:1264: B7 11        	lda	[<L150+pWin_1],Y
  4690 04:1266: 48           	pha
  4691 04:1267: A0 0A 00     	ldy	#$a
  4692 04:126A: B7 11        	lda	[<L150+pWin_1],Y
  4693 04:126C: 48           	pha
  4694 04:126D: A0 08 00     	ldy	#$8
  4695 04:1270: B7 11        	lda	[<L150+pWin_1],Y
  4696 04:1272: 48           	pha
  4697 04:1273: F4 00 10     	pea	#^$10000000
  4698 04:1276: F4 00 00     	pea	#<$10000000
  4699 04:1279: 22 xx xx xx  	jsl	~~k_vdraw_ui_window
  4700                        ;			k_draw_text_point(pButton->pCapt
                    ion,
  4701                        	.line	871
  4702                        ;			          //pWin->win_x + (pWin-
                    >win_width/2)  - (size/2) - 2,
  4703                        ;					  //pWin->win_y 
                    + (pWin->win_height/2) - (4) + 2     ,15) ;
  4704                        ;					  pWin->win_x,
  4705                        ;					  pWin->win_y   
                      ,k_getUIMenuColor()) ;
  4706 04:127D: 22 xx xx xx  	jsl	~~k_getUIMenuColor
  4707 04:1281: 48           	pha
  Tue Oct  1 2019  1:02                                                Page 95


  4708 04:1282: A0 0A 00     	ldy	#$a
  4709 04:1285: B7 11        	lda	[<L150+pWin_1],Y
  4710 04:1287: 48           	pha
  4711 04:1288: A0 08 00     	ldy	#$8
  4712 04:128B: B7 11        	lda	[<L150+pWin_1],Y
  4713 04:128D: 48           	pha
  4714 04:128E: A0 02 00     	ldy	#$2
  4715 04:1291: B7 15        	lda	[<L150+pButton_1],Y
  4716 04:1293: 48           	pha
  4717 04:1294: A7 15        	lda	[<L150+pButton_1]
  4718 04:1296: 48           	pha
  4719 04:1297: 22 xx xx xx  	jsl	~~k_draw_text_point
  4720                        ;
  4721                        ;
  4722                        ;			break;
  4723                        	.line	878
  4724 04:129B: 82 63 01     	brl	L10039
  4725                        ;		case FX_MOUSE_EXIT:
  4726                        	.line	879
  4727                        L10049:
  4728                        ;			k_debug_string("menuAnchorWindow
                    Proc::FX_MOUSE_EXIT\r\n");
  4729                        	.line	880
  4730 04:129E: F4 xx xx     	pea	#^L148+316
  4731 04:12A1: F4 xx xx     	pea	#<L148+316
  4732 04:12A4: 22 xx xx xx  	jsl	~~k_debug_string
  4733                        ;
  4734                        ;			k_vdraw_ui_window(FXWS_VISIBLE,
  4735                        	.line	882
  4736                        ;							
                      pWin->win_x ,pWin->win_y,
  4737                        ;							
                      pWin->win_height,pWin->win_width,
  4738                        ;							
                      pWin->win_title,
  4739                        ;							
                      15, k_getUIMenuColor());
  4740 04:12A8: 22 xx xx xx  	jsl	~~k_getUIMenuColor
  4741 04:12AC: 48           	pha
  4742 04:12AD: F4 0F 00     	pea	#<$f
  4743 04:12B0: 18           	clc
  4744 04:12B1: A9 14 00     	lda	#$14
  4745 04:12B4: 65 11        	adc	<L150+pWin_1
  4746 04:12B6: 85 01        	sta	<R0
  4747 04:12B8: A9 00 00     	lda	#$0
  4748 04:12BB: 65 13        	adc	<L150+pWin_1+2
  4749 04:12BD: 85 03        	sta	<R0+2
  4750 04:12BF: D4 03        	pei	<R0+2
  4751 04:12C1: D4 01        	pei	<R0
  4752 04:12C3: A0 0C 00     	ldy	#$c
  4753 04:12C6: B7 11        	lda	[<L150+pWin_1],Y
  4754 04:12C8: 48           	pha
  4755 04:12C9: A0 0E 00     	ldy	#$e
  4756 04:12CC: B7 11        	lda	[<L150+pWin_1],Y
  4757 04:12CE: 48           	pha
  4758 04:12CF: A0 0A 00     	ldy	#$a
  4759 04:12D2: B7 11        	lda	[<L150+pWin_1],Y
  4760 04:12D4: 48           	pha
  Tue Oct  1 2019  1:02                                                Page 96


  4761 04:12D5: A0 08 00     	ldy	#$8
  4762 04:12D8: B7 11        	lda	[<L150+pWin_1],Y
  4763 04:12DA: 48           	pha
  4764 04:12DB: F4 00 10     	pea	#^$10000000
  4765 04:12DE: F4 00 00     	pea	#<$10000000
  4766 04:12E1: 22 xx xx xx  	jsl	~~k_vdraw_ui_window
  4767                        ;
  4768                        ;			k_draw_text_point(pButton->pCapt
                    ion,
  4769                        	.line	888
  4770                        ;			          //pWin->win_x + (pWin-
                    >win_width/2)  - (size/2) - 2,
  4771                        ;					  //pWin->win_y 
                    + (pWin->win_height/2) - (4) + 2     ,15) ;
  4772                        ;					  pWin->win_x,
  4773                        ;					  pWin->win_y   
                      ,k_getUIGadgetColor()) ;
  4774 04:12E5: 22 xx xx xx  	jsl	~~k_getUIGadgetColor
  4775 04:12E9: 48           	pha
  4776 04:12EA: A0 0A 00     	ldy	#$a
  4777 04:12ED: B7 11        	lda	[<L150+pWin_1],Y
  4778 04:12EF: 48           	pha
  4779 04:12F0: A0 08 00     	ldy	#$8
  4780 04:12F3: B7 11        	lda	[<L150+pWin_1],Y
  4781 04:12F5: 48           	pha
  4782 04:12F6: A0 02 00     	ldy	#$2
  4783 04:12F9: B7 15        	lda	[<L150+pButton_1],Y
  4784 04:12FB: 48           	pha
  4785 04:12FC: A7 15        	lda	[<L150+pButton_1]
  4786 04:12FE: 48           	pha
  4787 04:12FF: 22 xx xx xx  	jsl	~~k_draw_text_point
  4788                        ;
  4789                        ;			break;
  4790                        	.line	894
  4791 04:1303: 82 FB 00     	brl	L10039
  4792                        ;		case FX_CONTROL_COMMAND:
  4793                        	.line	895
  4794                        L10050:
  4795                        ;			k_debug_string("menuAnchorWindow
                    Proc::FX_CONTROL_COMMAND\r\n");
  4796                        	.line	896
  4797 04:1306: F4 xx xx     	pea	#^L148+354
  4798 04:1309: F4 xx xx     	pea	#<L148+354
  4799 04:130C: 22 xx xx xx  	jsl	~~k_debug_string
  4800                        ;
  4801                        ;			if( ((PFXCMDMESSAGE)pMsg)->cmdCI
                    d == CTL_CMD_CAPTION )
  4802                        	.line	898
  4803                        ;			{
  4804 04:1310: A0 16 00     	ldy	#$16
  4805 04:1313: B7 1E        	lda	[<L149+pMsg_0],Y
  4806 04:1315: C9 01 00     	cmp	#<$1
  4807 04:1318: F0 03        	beq	L154
  4808 04:131A: 82 AE 00     	brl	L10051
  4809                        L154:
  4810                        	.line	899
  4811                        ;				pButton->pCaption = (LPC
                    HAR)((PFXCMDMESSAGE)pMsg)->parameter1;
  Tue Oct  1 2019  1:02                                                Page 97


  4812                        	.line	900
  4813 04:131D: A0 1A 00     	ldy	#$1a
  4814 04:1320: B7 1E        	lda	[<L149+pMsg_0],Y
  4815 04:1322: 87 15        	sta	[<L150+pButton_1]
  4816 04:1324: A0 1C 00     	ldy	#$1c
  4817 04:1327: B7 1E        	lda	[<L149+pMsg_0],Y
  4818 04:1329: A0 02 00     	ldy	#$2
  4819 04:132C: 97 15        	sta	[<L150+pButton_1],Y
  4820                        ;
  4821                        ;				if(pButton->pCaption && 
                    pWin->isVisible)
  4822                        	.line	902
  4823                        ;				{
  4824 04:132E: A7 15        	lda	[<L150+pButton_1]
  4825 04:1330: A0 02 00     	ldy	#$2
  4826 04:1333: 17 15        	ora	[<L150+pButton_1],Y
  4827 04:1335: D0 03        	bne	L155
  4828 04:1337: 82 91 00     	brl	L10052
  4829                        L155:
  4830 04:133A: A0 5C 00     	ldy	#$5c
  4831 04:133D: B7 11        	lda	[<L150+pWin_1],Y
  4832 04:133F: 29 FF 00     	and	#$ff
  4833 04:1342: D0 03        	bne	L156
  4834 04:1344: 82 84 00     	brl	L10052
  4835                        L156:
  4836                        	.line	903
  4837                        ;					k_debug_strings(
                    "menuAnchorWindowProc::CTL_CMD_CAPTION:", (LPCHAR)pButton->p
                    Caption );
  4838                        	.line	904
  4839 04:1347: A0 02 00     	ldy	#$2
  4840 04:134A: B7 15        	lda	[<L150+pButton_1],Y
  4841 04:134C: 48           	pha
  4842 04:134D: A7 15        	lda	[<L150+pButton_1]
  4843 04:134F: 48           	pha
  4844 04:1350: F4 xx xx     	pea	#^L148+397
  4845 04:1353: F4 xx xx     	pea	#<L148+397
  4846 04:1356: 22 xx xx xx  	jsl	~~k_debug_strings
  4847                        ;
  4848                        ;					size = strlen(pB
                    utton->pCaption) * FONTW;
  4849                        	.line	906
  4850 04:135A: 22 xx xx xx  	jsl	~~k_font_getFontWidth
  4851 04:135E: 85 01        	sta	<R0
  4852 04:1360: A0 02 00     	ldy	#$2
  4853 04:1363: B7 15        	lda	[<L150+pButton_1],Y
  4854 04:1365: 48           	pha
  4855 04:1366: A7 15        	lda	[<L150+pButton_1]
  4856 04:1368: 48           	pha
  4857 04:1369: 22 xx xx xx  	jsl	~~strlen
  4858 04:136D: 85 05        	sta	<R1
  4859 04:136F: A5 05        	lda	<R1
  4860 04:1371: A6 01        	ldx	<R0
  4861                        	xref	~~~mul
  4862 04:1373: 22 xx xx xx  	jsl	~~~mul
  4863 04:1377: 85 19        	sta	<L150+size_1
  4864                        ;					k_draw_text_poin
                    t(pButton->pCaption,
  Tue Oct  1 2019  1:02                                                Page 98


  4865                        	.line	907
  4866                        ;							
                              pWin->win_x + (pWin->win_width/2)  - (size/2),
  4867                        ;							
                    		  pWin->win_y + (pWin->win_height/2) - (4) + 1,1
                    5);
  4868 04:1379: F4 0F 00     	pea	#<$f
  4869 04:137C: A0 0E 00     	ldy	#$e
  4870 04:137F: B7 11        	lda	[<L150+pWin_1],Y
  4871 04:1381: A2 02 00     	ldx	#<$2
  4872                        	xref	~~~div
  4873 04:1384: 22 xx xx xx  	jsl	~~~div
  4874 04:1388: 85 01        	sta	<R0
  4875 04:138A: 18           	clc
  4876 04:138B: A5 01        	lda	<R0
  4877 04:138D: A0 0A 00     	ldy	#$a
  4878 04:1390: 77 11        	adc	[<L150+pWin_1],Y
  4879 04:1392: 85 05        	sta	<R1
  4880 04:1394: 18           	clc
  4881 04:1395: A9 FD FF     	lda	#$fffd
  4882 04:1398: 65 05        	adc	<R1
  4883 04:139A: 48           	pha
  4884 04:139B: A5 19        	lda	<L150+size_1
  4885 04:139D: 4A           	lsr	A
  4886 04:139E: 85 01        	sta	<R0
  4887 04:13A0: A0 0C 00     	ldy	#$c
  4888 04:13A3: B7 11        	lda	[<L150+pWin_1],Y
  4889 04:13A5: A2 02 00     	ldx	#<$2
  4890                        	xref	~~~div
  4891 04:13A8: 22 xx xx xx  	jsl	~~~div
  4892 04:13AC: 85 05        	sta	<R1
  4893 04:13AE: 18           	clc
  4894 04:13AF: A5 05        	lda	<R1
  4895 04:13B1: A0 08 00     	ldy	#$8
  4896 04:13B4: 77 11        	adc	[<L150+pWin_1],Y
  4897 04:13B6: 85 09        	sta	<R2
  4898 04:13B8: 38           	sec
  4899 04:13B9: A5 09        	lda	<R2
  4900 04:13BB: E5 01        	sbc	<R0
  4901 04:13BD: 48           	pha
  4902 04:13BE: A0 02 00     	ldy	#$2
  4903 04:13C1: B7 15        	lda	[<L150+pButton_1],Y
  4904 04:13C3: 48           	pha
  4905 04:13C4: A7 15        	lda	[<L150+pButton_1]
  4906 04:13C6: 48           	pha
  4907 04:13C7: 22 xx xx xx  	jsl	~~k_draw_text_point
  4908                        ;				}
  4909                        	.line	910
  4910                        ;			}
  4911                        L10052:
  4912                        	.line	911
  4913                        ;
  4914                        ;			break;
  4915                        L10051:
  4916                        	.line	913
  4917 04:13CB: 82 33 00     	brl	L10039
  4918                        ;		default:
  4919                        	.line	914
  Tue Oct  1 2019  1:02                                                Page 99


  4920                        L10053:
  4921                        ;			break;
  4922                        	.line	915
  4923 04:13CE: 82 30 00     	brl	L10039
  4924                        ;		}
  4925                        	.line	916
  4926                        L10038:
  4927                        	xref	~~~swt
  4928 04:13D1: 22 xx xx xx  	jsl	~~~swt
  4929 04:13D5: 0A 00        	dw	10
  4930 04:13D7: 01 0F        	dw	3841
  4931 04:13D9: 35 12        	dw	L10048-1
  4932 04:13DB: 02 0F        	dw	3842
  4933 04:13DD: 9D 12        	dw	L10049-1
  4934 04:13DF: 04 0F        	dw	3844
  4935 04:13E1: CF 11        	dw	L10046-1
  4936 04:13E3: 06 0F        	dw	3846
  4937 04:13E5: 28 12        	dw	L10047-1
  4938 04:13E7: 00 FA        	dw	64000
  4939 04:13E9: 05 13        	dw	L10050-1
  4940 04:13EB: 00 FB        	dw	64256
  4941 04:13ED: 5A 11        	dw	L10044-1
  4942 04:13EF: 05 FB        	dw	64261
  4943 04:13F1: E7 10        	dw	L10043-1
  4944 04:13F3: 06 FB        	dw	64262
  4945 04:13F5: CF 10        	dw	L10042-1
  4946 04:13F7: 07 FB        	dw	64263
  4947 04:13F9: C2 10        	dw	L10041-1
  4948 04:13FB: 03 FF        	dw	65283
  4949 04:13FD: 5A 10        	dw	L10040-1
  4950 04:13FF: CD 13        	dw	L10053-1
  4951                        L10039:
  4952                        ;	}
  4953                        	.line	917
  4954                        ;
  4955                        ;	return TRUE;
  4956                        L10037:
  4957                        	.line	919
  4958 04:1401: A9 01 00     	lda	#$1
  4959                        L157:
  4960 04:1404: A8           	tay
  4961 04:1405: A5 1C        	lda	<L149+2
  4962 04:1407: 85 20        	sta	<L149+2+4
  4963 04:1409: A5 1B        	lda	<L149+1
  4964 04:140B: 85 1F        	sta	<L149+1+4
  4965 04:140D: 2B           	pld
  4966 04:140E: 3B           	tsc
  4967 04:140F: 18           	clc
  4968 04:1410: 69 1E 00     	adc	#L149+4
  4969 04:1413: 1B           	tcs
  4970 04:1414: 98           	tya
  4971 04:1415: 6B           	rtl
  4972                        ;
  4973                        ;}
  4974                        	.line	921
  4975                        	.endblock	921
  4976             0000001A   L149	equ	26
  4977             0000000D   L150	equ	13
  Tue Oct  1 2019  1:02                                                Page 100


  4978 04:1416:              	ends
  4979                        	efunc
  4980                        	.endfunc	921,13,26
  4981                        	.line	921
  4982                        	data
  4983                        L148:
  4984 00:043E: 6D 65 6E 75  	db	$6D,$65,$6E,$75,$41,$6E,$63,$68,$6F,$72,
                    $57,$69,$6E,$64,$6F
       00:0442: 41 6E 63 68 
       00:0446: 6F 72 57 69 
       00:044A: 6E 64 6F 
  4985 00:044D: 77 50 72 6F  	db	$77,$50,$72,$6F,$63,$3A,$3A,$46,$58,$5F,
                    $43,$52,$45,$41,$54
       00:0451: 63 3A 3A 46 
       00:0455: 58 5F 43 52 
       00:0459: 45 41 54 
  4986 00:045C: 45 5F 57 49  	db	$45,$5F,$57,$49,$4E,$44,$4F,$57,$0D,$0A,
                    $00,$6D,$65,$6E,$75
       00:0460: 4E 44 4F 57 
       00:0464: 0D 0A 00 6D 
       00:0468: 65 6E 75 
  4987 00:046B: 41 6E 63 68  	db	$41,$6E,$63,$68,$6F,$72,$57,$69,$6E,$64,
                    $6F,$77,$50,$72,$6F
       00:046F: 6F 72 57 69 
       00:0473: 6E 64 6F 77 
       00:0477: 50 72 6F 
  4988 00:047A: 63 3A 3A 46  	db	$63,$3A,$3A,$46,$58,$5F,$52,$45,$44,$52,
                    $41,$57,$5F,$57,$49
       00:047E: 58 5F 52 45 
       00:0482: 44 52 41 57 
       00:0486: 5F 57 49 
  4989 00:0489: 4E 44 4F 57  	db	$4E,$44,$4F,$57,$0D,$0A,$00,$6D,$65,$6E,
                    $75,$41,$6E,$63,$68
       00:048D: 0D 0A 00 6D 
       00:0491: 65 6E 75 41 
       00:0495: 6E 63 68 
  4990 00:0498: 6F 72 57 69  	db	$6F,$72,$57,$69,$6E,$64,$6F,$77,$50,$72,
                    $6F,$63,$3A,$3A,$46
       00:049C: 6E 64 6F 77 
       00:04A0: 50 72 6F 63 
       00:04A4: 3A 3A 46 
  4991 00:04A7: 58 5F 48 49  	db	$58,$5F,$48,$49,$44,$45,$5F,$57,$49,$4E,
                    $44,$4F,$57,$0D,$0A
       00:04AB: 44 45 5F 57 
       00:04AF: 49 4E 44 4F 
       00:04B3: 57 0D 0A 
  4992 00:04B6: 00 6D 65 6E  	db	$00,$6D,$65,$6E,$75,$41,$6E,$63,$68,$6F,
                    $72,$57,$69,$6E,$64
       00:04BA: 75 41 6E 63 
       00:04BE: 68 6F 72 57 
       00:04C2: 69 6E 64 
  4993 00:04C5: 6F 77 50 72  	db	$6F,$77,$50,$72,$6F,$63,$3A,$3A,$46,$58,
                    $5F,$53,$48,$4F,$57
       00:04C9: 6F 63 3A 3A 
       00:04CD: 46 58 5F 53 
       00:04D1: 48 4F 57 
  4994 00:04D4: 5F 57 49 4E  	db	$5F,$57,$49,$4E,$44,$4F,$57,$0D,$0A,$00,
                    $6D,$65,$6E,$75,$41
  Tue Oct  1 2019  1:02                                                Page 101


       00:04D8: 44 4F 57 0D 
       00:04DC: 0A 00 6D 65 
       00:04E0: 6E 75 41 
  4995 00:04E3: 6E 63 68 6F  	db	$6E,$63,$68,$6F,$72,$57,$69,$6E,$64,$6F,
                    $77,$50,$72,$6F,$63
       00:04E7: 72 57 69 6E 
       00:04EB: 64 6F 77 50 
       00:04EF: 72 6F 63 
  4996 00:04F2: 3A 3A 46 58  	db	$3A,$3A,$46,$58,$5F,$44,$52,$41,$57,$5F,
                    $57,$49,$4E,$44,$4F
       00:04F6: 5F 44 52 41 
       00:04FA: 57 5F 57 49 
       00:04FE: 4E 44 4F 
  4997 00:0501: 57 0D 0A 00  	db	$57,$0D,$0A,$00,$6D,$65,$6E,$75,$41,$6E,
                    $63,$68,$6F,$72,$57
       00:0505: 6D 65 6E 75 
       00:0509: 41 6E 63 68 
       00:050D: 6F 72 57 
  4998 00:0510: 69 6E 64 6F  	db	$69,$6E,$64,$6F,$77,$50,$72,$6F,$63,$3A,
                    $3A,$46,$58,$5F,$4C
       00:0514: 77 50 72 6F 
       00:0518: 63 3A 3A 46 
       00:051C: 58 5F 4C 
  4999 00:051F: 42 55 54 54  	db	$42,$55,$54,$54,$4F,$4E,$5F,$44,$4F,$57,
                    $4E,$0D,$0A,$00,$6D
       00:0523: 4F 4E 5F 44 
       00:0527: 4F 57 4E 0D 
       00:052B: 0A 00 6D 
  5000 00:052E: 65 6E 75 41  	db	$65,$6E,$75,$41,$6E,$63,$68,$6F,$72,$57,
                    $69,$6E,$64,$6F,$77
       00:0532: 6E 63 68 6F 
       00:0536: 72 57 69 6E 
       00:053A: 64 6F 77 
  5001 00:053D: 50 72 6F 63  	db	$50,$72,$6F,$63,$3A,$3A,$46,$58,$5F,$4C,
                    $42,$55,$54,$54,$4F
       00:0541: 3A 3A 46 58 
       00:0545: 5F 4C 42 55 
       00:0549: 54 54 4F 
  5002 00:054C: 4E 5F 55 50  	db	$4E,$5F,$55,$50,$0D,$0A,$00,$6D,$65,$6E,
                    $75,$41,$6E,$63,$68
       00:0550: 0D 0A 00 6D 
       00:0554: 65 6E 75 41 
       00:0558: 6E 63 68 
  5003 00:055B: 6F 72 57 69  	db	$6F,$72,$57,$69,$6E,$64,$6F,$77,$50,$72,
                    $6F,$63,$3A,$3A,$46
       00:055F: 6E 64 6F 77 
       00:0563: 50 72 6F 63 
       00:0567: 3A 3A 46 
  5004 00:056A: 58 5F 4D 4F  	db	$58,$5F,$4D,$4F,$55,$53,$45,$5F,$45,$4E,
                    $54,$45,$52,$0D,$0A
       00:056E: 55 53 45 5F 
       00:0572: 45 4E 54 45 
       00:0576: 52 0D 0A 
  5005 00:0579: 00 6D 65 6E  	db	$00,$6D,$65,$6E,$75,$41,$6E,$63,$68,$6F,
                    $72,$57,$69,$6E,$64
       00:057D: 75 41 6E 63 
       00:0581: 68 6F 72 57 
       00:0585: 69 6E 64 
  Tue Oct  1 2019  1:02                                                Page 102


  5006 00:0588: 6F 77 50 72  	db	$6F,$77,$50,$72,$6F,$63,$3A,$3A,$46,$58,
                    $5F,$4D,$4F,$55,$53
       00:058C: 6F 63 3A 3A 
       00:0590: 46 58 5F 4D 
       00:0594: 4F 55 53 
  5007 00:0597: 45 5F 45 58  	db	$45,$5F,$45,$58,$49,$54,$0D,$0A,$00,$6D,
                    $65,$6E,$75,$41,$6E
       00:059B: 49 54 0D 0A 
       00:059F: 00 6D 65 6E 
       00:05A3: 75 41 6E 
  5008 00:05A6: 63 68 6F 72  	db	$63,$68,$6F,$72,$57,$69,$6E,$64,$6F,$77,
                    $50,$72,$6F,$63,$3A
       00:05AA: 57 69 6E 64 
       00:05AE: 6F 77 50 72 
       00:05B2: 6F 63 3A 
  5009 00:05B5: 3A 46 58 5F  	db	$3A,$46,$58,$5F,$43,$4F,$4E,$54,$52,$4F,
                    $4C,$5F,$43,$4F,$4D
       00:05B9: 43 4F 4E 54 
       00:05BD: 52 4F 4C 5F 
       00:05C1: 43 4F 4D 
  5010 00:05C4: 4D 41 4E 44  	db	$4D,$41,$4E,$44,$0D,$0A,$00,$6D,$65,$6E,
                    $75,$41,$6E,$63,$68
       00:05C8: 0D 0A 00 6D 
       00:05CC: 65 6E 75 41 
       00:05D0: 6E 63 68 
  5011 00:05D3: 6F 72 57 69  	db	$6F,$72,$57,$69,$6E,$64,$6F,$77,$50,$72,
                    $6F,$63,$3A,$3A,$43
       00:05D7: 6E 64 6F 77 
       00:05DB: 50 72 6F 63 
       00:05DF: 3A 3A 43 
  5012 00:05E2: 54 4C 5F 43  	db	$54,$4C,$5F,$43,$4D,$44,$5F,$43,$41,$50,
                    $54,$49,$4F,$4E,$3A
       00:05E6: 4D 44 5F 43 
       00:05EA: 41 50 54 49 
       00:05EE: 4F 4E 3A 
  5013 00:05F1: 00           	db	$00
  5014 00:05F2:              	ends
  5015                        ;
  5016                        ;
  5017                        ;PWINDOW	k_user_CreateButton(HWND hWndParent,LPCS
                    TR caption,UINT buttonId,int x,int y,int width,int height)
  5018                        ;{
  5019                        	.line	924
  5020                        	.line	925
  5021                        	WINMAN
  5022                        	xdef	~~k_user_CreateButton
  5023                        	func
  5024                        	.function	925
  5025                        ~~k_user_CreateButton:
  5026                        	longa	on
  5027                        	longi	on
  5028 04:1416: 3B           	tsc
  5029 04:1417: 38           	sec
  5030 04:1418: E9 10 00     	sbc	#L159
  5031 04:141B: 1B           	tcs
  5032 04:141C: 0B           	phd
  5033 04:141D: 5B           	tcd
  5034             00000004   hWndParent_0	set	4
  Tue Oct  1 2019  1:02                                                Page 103


  5035             00000008   caption_0	set	8
  5036             0000000C   buttonId_0	set	12
  5037             0000000E   x_0	set	14
  5038             00000010   y_0	set	16
  5039             00000012   width_0	set	18
  5040             00000014   height_0	set	20
  5041                        	.block	925
  5042                        ;	PWINDOW pWin = NULL;
  5043                        ;
  5044                        ;	//k_debug_strings("k_user_CreateButton:","Enter"
                    );
  5045                        ;
  5046                        ;	if(width < 0)
  5047             00000000   pWin_1	set	0
  5048                        	.sym	pWin,0,138,1,32,23
  5049                        	.sym	hWndParent,4,129,6,32
  5050                        	.sym	caption,8,142,6,32
  5051                        	.sym	buttonId,12,16,6,16
  5052                        	.sym	x,14,5,6,16
  5053                        	.sym	y,16,5,6,16
  5054                        	.sym	width,18,5,6,16
  5055                        	.sym	height,20,5,6,16
  5056 04:141E: 64 0D        	stz	<L160+pWin_1
  5057 04:1420: 64 0F        	stz	<L160+pWin_1+2
  5058                        	.line	930
  5059                        ;		width = (FONTW * strlen(caption)) + (2 *
                     FONTW);
  5060 04:1422: A5 22        	lda	<L159+width_0
  5061 04:1424: 30 03        	bmi	L162
  5062 04:1426: 82 2C 00     	brl	L10054
  5063                        L162:
  5064                        	.line	931
  5065 04:1429: 22 xx xx xx  	jsl	~~k_font_getFontWidth
  5066 04:142D: 85 05        	sta	<R1
  5067 04:142F: A5 05        	lda	<R1
  5068 04:1431: 0A           	asl	A
  5069 04:1432: 85 01        	sta	<R0
  5070 04:1434: D4 1A        	pei	<L159+caption_0+2
  5071 04:1436: D4 18        	pei	<L159+caption_0
  5072 04:1438: 22 xx xx xx  	jsl	~~strlen
  5073 04:143C: 85 05        	sta	<R1
  5074 04:143E: 22 xx xx xx  	jsl	~~k_font_getFontWidth
  5075 04:1442: 85 09        	sta	<R2
  5076 04:1444: A5 09        	lda	<R2
  5077 04:1446: A6 05        	ldx	<R1
  5078                        	xref	~~~mul
  5079 04:1448: 22 xx xx xx  	jsl	~~~mul
  5080 04:144C: 85 05        	sta	<R1
  5081 04:144E: 18           	clc
  5082 04:144F: A5 05        	lda	<R1
  5083 04:1451: 65 01        	adc	<R0
  5084 04:1453: 85 22        	sta	<L159+width_0
  5085                        ;	if(height < 0)
  5086                        L10054:
  5087                        	.line	932
  5088                        ;		height = FONTH * 3;
  5089 04:1455: A5 24        	lda	<L159+height_0
  5090 04:1457: 30 03        	bmi	L163
  Tue Oct  1 2019  1:02                                                Page 104


  5091 04:1459: 82 0D 00     	brl	L10055
  5092                        L163:
  5093                        	.line	933
  5094 04:145C: 22 xx xx xx  	jsl	~~k_font_getFontHeight
  5095 04:1460: 85 01        	sta	<R0
  5096 04:1462: A5 01        	lda	<R0
  5097 04:1464: 0A           	asl	A
  5098 04:1465: 65 01        	adc	<R0
  5099 04:1467: 85 24        	sta	<L159+height_0
  5100                        ;
  5101                        ;	pWin = k_user_CreateWindow(FXWS_BORDER | FXWS_VI
                    SIBLE,
  5102                        L10055:
  5103                        	.line	935
  5104                        ;							
                       "buttonWindowClass",
  5105                        ;							
                    	caption,
  5106                        ;							
                    	x,y,
  5107                        ;							
                    	width,height,
  5108                        ;							
                    	hWndParent,
  5109                        ;							
                    	(HMENU)buttonId,
  5110                        ;							
                    	NULL);
  5111 04:1469: F4 00 00     	pea	#^$0
  5112 04:146C: F4 00 00     	pea	#<$0
  5113 04:146F: A0 00 00     	ldy	#$0
  5114 04:1472: A5 1C        	lda	<L159+buttonId_0
  5115 04:1474: 10 01        	bpl	L164
  5116 04:1476: 88           	dey
  5117                        L164:
  5118 04:1477: 85 01        	sta	<R0
  5119 04:1479: 84 03        	sty	<R0+2
  5120 04:147B: D4 03        	pei	<R0+2
  5121 04:147D: D4 01        	pei	<R0
  5122 04:147F: D4 16        	pei	<L159+hWndParent_0+2
  5123 04:1481: D4 14        	pei	<L159+hWndParent_0
  5124 04:1483: D4 24        	pei	<L159+height_0
  5125 04:1485: D4 22        	pei	<L159+width_0
  5126 04:1487: D4 20        	pei	<L159+y_0
  5127 04:1489: D4 1E        	pei	<L159+x_0
  5128 04:148B: D4 1A        	pei	<L159+caption_0+2
  5129 04:148D: D4 18        	pei	<L159+caption_0
  5130 04:148F: F4 xx xx     	pea	#^L158
  5131 04:1492: F4 xx xx     	pea	#<L158
  5132 04:1495: F4 80 10     	pea	#^$10800000
  5133 04:1498: F4 00 00     	pea	#<$10800000
  5134 04:149B: 22 AB 04 04  	jsl	~~k_user_CreateWindow
  5135 04:149F: 85 0D        	sta	<L160+pWin_1
  5136 04:14A1: 86 0F        	stx	<L160+pWin_1+2
  5137                        ;	if(pWin)
  5138                        	.line	943
  5139                        ;	{
  5140 04:14A3: A5 0D        	lda	<L160+pWin_1
  Tue Oct  1 2019  1:02                                                Page 105


  5141 04:14A5: 05 0F        	ora	<L160+pWin_1+2
  5142 04:14A7: D0 03        	bne	L165
  5143 04:14A9: 82 4F 00     	brl	L10056
  5144                        L165:
  5145                        	.line	944
  5146                        ;		//k_add_child_window(k_getWindowFromHand
                    le(hWndParent),pWin,k_update_hover_location);//k_buttonHitDe
                    tected);
  5147                        ;
  5148                        ;		//k_debug_strings("k_user_CreateButton:"
                    ,"k_send_window_message");
  5149                        ;		k_send_window_message(k_getHandleFromWin
                    dow(pWin),FX_CREATE_WINDOW,NULL,0);
  5150                        	.line	948
  5151 04:14AC: F4 00 00     	pea	#<$0
  5152 04:14AF: F4 00 00     	pea	#^$0
  5153 04:14B2: F4 00 00     	pea	#<$0
  5154 04:14B5: F4 03 FF     	pea	#<$ff03
  5155 04:14B8: D4 0F        	pei	<L160+pWin_1+2
  5156 04:14BA: D4 0D        	pei	<L160+pWin_1
  5157 04:14BC: 22 8C 03 04  	jsl	~~k_getHandleFromWindow
  5158 04:14C0: 85 01        	sta	<R0
  5159 04:14C2: 86 03        	stx	<R0+2
  5160 04:14C4: DA           	phx
  5161 04:14C5: 48           	pha
  5162 04:14C6: 22 xx xx xx  	jsl	~~k_send_window_message
  5163                        ;		//k_debug_strings("k_user_CreateButton:"
                    ,"k_send_command_message");
  5164                        ;		k_send_command_message(k_getHandleFromWi
                    ndow(pWin),FX_CONTROL_COMMAND,CTL_CMD_CAPTION,0,(ULONG)k_str
                    ing_copy_string(caption),0L);
  5165                        	.line	950
  5166 04:14CA: F4 00 00     	pea	#^$0
  5167 04:14CD: F4 00 00     	pea	#<$0
  5168 04:14D0: D4 1A        	pei	<L159+caption_0+2
  5169 04:14D2: D4 18        	pei	<L159+caption_0
  5170 04:14D4: 22 xx xx xx  	jsl	~~k_string_copy_string
  5171 04:14D8: 85 01        	sta	<R0
  5172 04:14DA: 86 03        	stx	<R0+2
  5173 04:14DC: D4 03        	pei	<R0+2
  5174 04:14DE: D4 01        	pei	<R0
  5175 04:14E0: F4 00 00     	pea	#<$0
  5176 04:14E3: F4 01 00     	pea	#<$1
  5177 04:14E6: F4 00 FA     	pea	#<$fa00
  5178 04:14E9: D4 0F        	pei	<L160+pWin_1+2
  5179 04:14EB: D4 0D        	pei	<L160+pWin_1
  5180 04:14ED: 22 8C 03 04  	jsl	~~k_getHandleFromWindow
  5181 04:14F1: 85 05        	sta	<R1
  5182 04:14F3: 86 07        	stx	<R1+2
  5183 04:14F5: DA           	phx
  5184 04:14F6: 48           	pha
  5185 04:14F7: 22 xx xx xx  	jsl	~~k_send_command_message
  5186                        ;
  5187                        ;	}
  5188                        	.line	952
  5189                        ;
  5190                        ;	//k_debug_strings("k_user_CreateButton:","Exit")
                    ;
  Tue Oct  1 2019  1:02                                                Page 106


  5191                        ;
  5192                        ;	return pWin;
  5193                        L10056:
  5194                        	.line	956
  5195 04:14FB: A6 0F        	ldx	<L160+pWin_1+2
  5196 04:14FD: A5 0D        	lda	<L160+pWin_1
  5197                        L166:
  5198 04:14FF: A8           	tay
  5199 04:1500: A5 12        	lda	<L159+2
  5200 04:1502: 85 24        	sta	<L159+2+18
  5201 04:1504: A5 11        	lda	<L159+1
  5202 04:1506: 85 23        	sta	<L159+1+18
  5203 04:1508: 2B           	pld
  5204 04:1509: 3B           	tsc
  5205 04:150A: 18           	clc
  5206 04:150B: 69 22 00     	adc	#L159+18
  5207 04:150E: 1B           	tcs
  5208 04:150F: 98           	tya
  5209 04:1510: 6B           	rtl
  5210                        ;}
  5211                        	.line	957
  5212                        	.endblock	957
  5213             00000010   L159	equ	16
  5214             0000000D   L160	equ	13
  5215 04:1511:              	ends
  5216                        	efunc
  5217                        	.endfunc	957,13,16
  5218                        	.line	957
  5219                        	data
  5220                        L158:
  5221 00:05F2: 62 75 74 74  	db	$62,$75,$74,$74,$6F,$6E,$57,$69,$6E,$64,
                    $6F,$77,$43,$6C,$61
       00:05F6: 6F 6E 57 69 
       00:05FA: 6E 64 6F 77 
       00:05FE: 43 6C 61 
  5222 00:0601: 73 73 00     	db	$73,$73,$00
  5223 00:0604:              	ends
  5224                        ;
  5225                        ;BOOL buttonWindowProc(PFXOSMESSAGE pMsg)
  5226                        ;{
  5227                        	.line	959
  5228                        	.line	960
  5229                        	WINMAN
  5230                        	xdef	~~buttonWindowProc
  5231                        	func
  5232                        	.function	960
  5233                        ~~buttonWindowProc:
  5234                        	longa	on
  5235                        	longi	on
  5236 04:1511: 3B           	tsc
  5237 04:1512: 38           	sec
  5238 04:1513: E9 1A 00     	sbc	#L168
  5239 04:1516: 1B           	tcs
  5240 04:1517: 0B           	phd
  5241 04:1518: 5B           	tcd
  5242             00000004   pMsg_0	set	4
  5243                        	.block	960
  5244                        ;	PFXPROCESS p = NULL;
  Tue Oct  1 2019  1:02                                                Page 107


  5245                        ;	PWINDOW	   pWin = NULL;
  5246                        ;	PBUTTON	   pButton = NULL;
  5247                        ;
  5248                        ;	UINT	   size = 0;
  5249                        ;
  5250                        ;	if(pMsg!=NULL)
  5251             00000000   p_1	set	0
  5252             00000004   pWin_1	set	4
  5253             00000008   pButton_1	set	8
  5254             0000000C   size_1	set	12
  5255                        	.sym	p,0,138,1,32,16
  5256                        	.sym	pWin,4,138,1,32,23
  5257                        	.sym	pButton,8,138,1,32,29
  5258                        	.sym	size,12,16,1,16
  5259                        	.sym	pMsg,4,138,6,32,12
  5260 04:1519: 64 0D        	stz	<L169+p_1
  5261 04:151B: 64 0F        	stz	<L169+p_1+2
  5262 04:151D: 64 11        	stz	<L169+pWin_1
  5263 04:151F: 64 13        	stz	<L169+pWin_1+2
  5264 04:1521: 64 15        	stz	<L169+pButton_1
  5265 04:1523: 64 17        	stz	<L169+pButton_1+2
  5266 04:1525: 64 19        	stz	<L169+size_1
  5267                        	.line	967
  5268                        ;	{
  5269 04:1527: A5 1E        	lda	<L168+pMsg_0
  5270 04:1529: 05 20        	ora	<L168+pMsg_0+2
  5271 04:152B: D0 03        	bne	L171
  5272 04:152D: 82 3B 04     	brl	L10057
  5273                        L171:
  5274                        	.line	968
  5275                        ;		p = k_exec_get_current_process();
  5276                        	.line	969
  5277 04:1530: 22 xx xx xx  	jsl	~~k_exec_get_current_process
  5278 04:1534: 85 0D        	sta	<L169+p_1
  5279 04:1536: 86 0F        	stx	<L169+p_1+2
  5280                        ;		pWin = k_getWindowFromHandle(pMsg->hwnd)
                    ;
  5281                        	.line	970
  5282 04:1538: A0 0C 00     	ldy	#$c
  5283 04:153B: B7 1E        	lda	[<L168+pMsg_0],Y
  5284 04:153D: 48           	pha
  5285 04:153E: A0 0A 00     	ldy	#$a
  5286 04:1541: B7 1E        	lda	[<L168+pMsg_0],Y
  5287 04:1543: 48           	pha
  5288 04:1544: 22 AA 03 04  	jsl	~~k_getWindowFromHandle
  5289 04:1548: 85 11        	sta	<L169+pWin_1
  5290 04:154A: 86 13        	stx	<L169+pWin_1+2
  5291                        ;		pButton = ((PBUTTON)pWin->windowData);
  5292                        	.line	971
  5293 04:154C: A0 5D 00     	ldy	#$5d
  5294 04:154F: B7 11        	lda	[<L169+pWin_1],Y
  5295 04:1551: 85 15        	sta	<L169+pButton_1
  5296 04:1553: A0 5F 00     	ldy	#$5f
  5297 04:1556: B7 11        	lda	[<L169+pWin_1],Y
  5298 04:1558: 85 17        	sta	<L169+pButton_1+2
  5299                        ;		//k_debug_long("consoleWindowProc::Proce
                    ssId:",p->procId);
  5300                        ;
  Tue Oct  1 2019  1:02                                                Page 108


  5301                        ;		switch(pMsg->type)
  5302                        	.line	974
  5303 04:155A: A0 08 00     	ldy	#$8
  5304 04:155D: B7 1E        	lda	[<L168+pMsg_0],Y
  5305 04:155F: 82 E5 03     	brl	L10058
  5306                        ;		{
  5307                        	.line	975
  5308                        ;		case FX_CREATE_WINDOW:
  5309                        	.line	976
  5310                        L10060:
  5311                        ;			//k_debug_long("buttonWindowProc
                    ::ProcessId:",p->procId);
  5312                        ;			//k_debug_string("buttonWindowPr
                    oc::FX_CREATE_WINDOW\r\n");
  5313                        ;
  5314                        ;			pWin->windowData = k_mem_allocat
                    e_heap(sizeof(BUTTON));
  5315                        	.line	980
  5316 04:1562: F4 08 00     	pea	#<$8
  5317 04:1565: 22 xx xx xx  	jsl	~~k_mem_allocate_heap
  5318 04:1569: 85 01        	sta	<R0
  5319 04:156B: 86 03        	stx	<R0+2
  5320 04:156D: A5 01        	lda	<R0
  5321 04:156F: A0 5D 00     	ldy	#$5d
  5322 04:1572: 97 11        	sta	[<L169+pWin_1],Y
  5323 04:1574: A5 03        	lda	<R0+2
  5324 04:1576: A0 5F 00     	ldy	#$5f
  5325 04:1579: 97 11        	sta	[<L169+pWin_1],Y
  5326                        ;
  5327                        ;
  5328                        ;			k_vdraw_ui_window(FXWS_BORDER | 
                    FXWS_VISIBLE,
  5329                        	.line	983
  5330                        ;							
                      pWin->win_x ,pWin->win_y,
  5331                        ;							
                      pWin->win_height,pWin->win_width,
  5332                        ;							
                      pWin->win_title,
  5333                        ;							
                      k_getUIGadgetColor(), k_getUIMenuColor());
  5334 04:157B: 22 xx xx xx  	jsl	~~k_getUIMenuColor
  5335 04:157F: 48           	pha
  5336 04:1580: 22 xx xx xx  	jsl	~~k_getUIGadgetColor
  5337 04:1584: 48           	pha
  5338 04:1585: 18           	clc
  5339 04:1586: A9 14 00     	lda	#$14
  5340 04:1589: 65 11        	adc	<L169+pWin_1
  5341 04:158B: 85 01        	sta	<R0
  5342 04:158D: A9 00 00     	lda	#$0
  5343 04:1590: 65 13        	adc	<L169+pWin_1+2
  5344 04:1592: 85 03        	sta	<R0+2
  5345 04:1594: D4 03        	pei	<R0+2
  5346 04:1596: D4 01        	pei	<R0
  5347 04:1598: A0 0C 00     	ldy	#$c
  5348 04:159B: B7 11        	lda	[<L169+pWin_1],Y
  5349 04:159D: 48           	pha
  5350 04:159E: A0 0E 00     	ldy	#$e
  Tue Oct  1 2019  1:02                                                Page 109


  5351 04:15A1: B7 11        	lda	[<L169+pWin_1],Y
  5352 04:15A3: 48           	pha
  5353 04:15A4: A0 0A 00     	ldy	#$a
  5354 04:15A7: B7 11        	lda	[<L169+pWin_1],Y
  5355 04:15A9: 48           	pha
  5356 04:15AA: A0 08 00     	ldy	#$8
  5357 04:15AD: B7 11        	lda	[<L169+pWin_1],Y
  5358 04:15AF: 48           	pha
  5359 04:15B0: F4 80 10     	pea	#^$10800000
  5360 04:15B3: F4 00 00     	pea	#<$10800000
  5361 04:15B6: 22 xx xx xx  	jsl	~~k_vdraw_ui_window
  5362                        ;
  5363                        ;
  5364                        ;			break;
  5365                        	.line	990
  5366 04:15BA: 82 AE 03     	brl	L10059
  5367                        ;		case FX_REDRAW_WINDOW:
  5368                        	.line	991
  5369                        L10061:
  5370                        ;			k_debug_string("buttonWindowProc
                    ::FX_REDRAW_WINDOW\r\n");
  5371                        	.line	992
  5372 04:15BD: F4 xx xx     	pea	#^L167
  5373 04:15C0: F4 xx xx     	pea	#<L167
  5374 04:15C3: 22 xx xx xx  	jsl	~~k_debug_string
  5375                        ;			break;
  5376                        	.line	993
  5377 04:15C7: 82 A1 03     	brl	L10059
  5378                        ;
  5379                        ;		case FX_LBUTTON_DOWN:
  5380                        	.line	995
  5381                        L10062:
  5382                        ;			k_debug_string("buttonWindowProc
                    ::FX_LBUTTON_DOWN\r\n");
  5383                        	.line	996
  5384 04:15CA: F4 xx xx     	pea	#^L167+37
  5385 04:15CD: F4 xx xx     	pea	#<L167+37
  5386 04:15D0: 22 xx xx xx  	jsl	~~k_debug_string
  5387                        ;
  5388                        ;
  5389                        ;			if(pButton->pCaption)
  5390                        	.line	999
  5391                        ;			{
  5392 04:15D4: A7 15        	lda	[<L169+pButton_1]
  5393 04:15D6: A0 02 00     	ldy	#$2
  5394 04:15D9: 17 15        	ora	[<L169+pButton_1],Y
  5395 04:15DB: D0 03        	bne	L172
  5396 04:15DD: 82 B4 01     	brl	L10063
  5397                        L172:
  5398                        	.line	1000
  5399                        ;				//k_debug_strings("butto
                    nWindowProc::CTL_CMD_CAPTION:", (LPCHAR)pButton->pCaption );
  5400                        ;
  5401                        ;				k_vdraw_ui_window(FXWS_B
                    ORDER | FXWS_VISIBLE,
  5402                        	.line	1003
  5403                        ;							
                    	  pWin->win_x ,pWin->win_y,
  Tue Oct  1 2019  1:02                                                Page 110


  5404                        ;							
                    	  pWin->win_height,pWin->win_width,
  5405                        ;							
                    	  pWin->win_title,
  5406                        ;							
                    	  k_getUIGadgetColor(), k_getUIMenuColor());
  5407 04:15E0: 22 xx xx xx  	jsl	~~k_getUIMenuColor
  5408 04:15E4: 48           	pha
  5409 04:15E5: 22 xx xx xx  	jsl	~~k_getUIGadgetColor
  5410 04:15E9: 48           	pha
  5411 04:15EA: 18           	clc
  5412 04:15EB: A9 14 00     	lda	#$14
  5413 04:15EE: 65 11        	adc	<L169+pWin_1
  5414 04:15F0: 85 01        	sta	<R0
  5415 04:15F2: A9 00 00     	lda	#$0
  5416 04:15F5: 65 13        	adc	<L169+pWin_1+2
  5417 04:15F7: 85 03        	sta	<R0+2
  5418 04:15F9: D4 03        	pei	<R0+2
  5419 04:15FB: D4 01        	pei	<R0
  5420 04:15FD: A0 0C 00     	ldy	#$c
  5421 04:1600: B7 11        	lda	[<L169+pWin_1],Y
  5422 04:1602: 48           	pha
  5423 04:1603: A0 0E 00     	ldy	#$e
  5424 04:1606: B7 11        	lda	[<L169+pWin_1],Y
  5425 04:1608: 48           	pha
  5426 04:1609: A0 0A 00     	ldy	#$a
  5427 04:160C: B7 11        	lda	[<L169+pWin_1],Y
  5428 04:160E: 48           	pha
  5429 04:160F: A0 08 00     	ldy	#$8
  5430 04:1612: B7 11        	lda	[<L169+pWin_1],Y
  5431 04:1614: 48           	pha
  5432 04:1615: F4 80 10     	pea	#^$10800000
  5433 04:1618: F4 00 00     	pea	#<$10800000
  5434 04:161B: 22 xx xx xx  	jsl	~~k_vdraw_ui_window
  5435                        ;
  5436                        ;				/*
  5437                        ;				k_draw_line(pWin->win_x 
                    + 1 ,pWin->win_y + 1,
  5438                        ;						    pWin
                    ->win_x + 1,
  5439                        ;							
                    pWin->win_y + pWin->win_height - 1 , 0);
  5440                        ;
  5441                        ;				k_draw_line(pWin->win_x 
                    + 1 ,pWin->win_y + pWin->win_height - 1,
  5442                        ;						    pWin
                    ->win_x + pWin->win_width - 1,pWin->win_y + pWin->win_height
                     - 1 , 0);
  5443                        ;
  5444                        ;				*/
  5445                        ;
  5446                        ;				k_draw_line(pWin->win_x 
                    + 1 ,
  5447                        	.line	1019
  5448                        ;							
                    pWin->win_y + 1,
  5449                        ;						    pWin
                    ->win_x + pWin->win_width - 1,
  Tue Oct  1 2019  1:02                                                Page 111


  5450                        ;							
                    pWin->win_y + 1,
  5451                        ;							
                    0);
  5452 04:161F: F4 00 00     	pea	#<$0
  5453 04:1622: A0 0A 00     	ldy	#$a
  5454 04:1625: B7 11        	lda	[<L169+pWin_1],Y
  5455 04:1627: 1A           	ina
  5456 04:1628: 48           	pha
  5457 04:1629: 18           	clc
  5458 04:162A: A0 08 00     	ldy	#$8
  5459 04:162D: B7 11        	lda	[<L169+pWin_1],Y
  5460 04:162F: A0 0C 00     	ldy	#$c
  5461 04:1632: 77 11        	adc	[<L169+pWin_1],Y
  5462 04:1634: 85 01        	sta	<R0
  5463 04:1636: 18           	clc
  5464 04:1637: A9 FF FF     	lda	#$ffff
  5465 04:163A: 65 01        	adc	<R0
  5466 04:163C: 48           	pha
  5467 04:163D: A0 0A 00     	ldy	#$a
  5468 04:1640: B7 11        	lda	[<L169+pWin_1],Y
  5469 04:1642: 1A           	ina
  5470 04:1643: 48           	pha
  5471 04:1644: A0 08 00     	ldy	#$8
  5472 04:1647: B7 11        	lda	[<L169+pWin_1],Y
  5473 04:1649: 1A           	ina
  5474 04:164A: 48           	pha
  5475 04:164B: 22 xx xx xx  	jsl	~~k_draw_line
  5476                        ;
  5477                        ;				k_draw_line(pWin->win_x 
                    + 1 ,
  5478                        	.line	1025
  5479                        ;							
                    pWin->win_y + 2,
  5480                        ;						    pWin
                    ->win_x + pWin->win_width - 1,
  5481                        ;							
                    pWin->win_y + 2,
  5482                        ;							
                    0);
  5483 04:164F: F4 00 00     	pea	#<$0
  5484 04:1652: 18           	clc
  5485 04:1653: A9 02 00     	lda	#$2
  5486 04:1656: A0 0A 00     	ldy	#$a
  5487 04:1659: 77 11        	adc	[<L169+pWin_1],Y
  5488 04:165B: 48           	pha
  5489 04:165C: 18           	clc
  5490 04:165D: A0 08 00     	ldy	#$8
  5491 04:1660: B7 11        	lda	[<L169+pWin_1],Y
  5492 04:1662: A0 0C 00     	ldy	#$c
  5493 04:1665: 77 11        	adc	[<L169+pWin_1],Y
  5494 04:1667: 85 01        	sta	<R0
  5495 04:1669: 18           	clc
  5496 04:166A: A9 FF FF     	lda	#$ffff
  5497 04:166D: 65 01        	adc	<R0
  5498 04:166F: 48           	pha
  5499 04:1670: 18           	clc
  5500 04:1671: A9 02 00     	lda	#$2
  Tue Oct  1 2019  1:02                                                Page 112


  5501 04:1674: A0 0A 00     	ldy	#$a
  5502 04:1677: 77 11        	adc	[<L169+pWin_1],Y
  5503 04:1679: 48           	pha
  5504 04:167A: A0 08 00     	ldy	#$8
  5505 04:167D: B7 11        	lda	[<L169+pWin_1],Y
  5506 04:167F: 1A           	ina
  5507 04:1680: 48           	pha
  5508 04:1681: 22 xx xx xx  	jsl	~~k_draw_line
  5509                        ;
  5510                        ;
  5511                        ;				k_draw_line(pWin->win_x 
                    + pWin->win_width  - 1,
  5512                        	.line	1032
  5513                        ;							
                    pWin->win_y + 1 ,
  5514                        ;						    pWin
                    ->win_x + pWin->win_width  - 1,
  5515                        ;							
                    pWin->win_y + pWin->win_height - 1,
  5516                        ;							
                    0);
  5517 04:1685: F4 00 00     	pea	#<$0
  5518 04:1688: 18           	clc
  5519 04:1689: A0 0A 00     	ldy	#$a
  5520 04:168C: B7 11        	lda	[<L169+pWin_1],Y
  5521 04:168E: A0 0E 00     	ldy	#$e
  5522 04:1691: 77 11        	adc	[<L169+pWin_1],Y
  5523 04:1693: 85 01        	sta	<R0
  5524 04:1695: 18           	clc
  5525 04:1696: A9 FF FF     	lda	#$ffff
  5526 04:1699: 65 01        	adc	<R0
  5527 04:169B: 48           	pha
  5528 04:169C: 18           	clc
  5529 04:169D: A0 08 00     	ldy	#$8
  5530 04:16A0: B7 11        	lda	[<L169+pWin_1],Y
  5531 04:16A2: A0 0C 00     	ldy	#$c
  5532 04:16A5: 77 11        	adc	[<L169+pWin_1],Y
  5533 04:16A7: 85 01        	sta	<R0
  5534 04:16A9: 18           	clc
  5535 04:16AA: A9 FF FF     	lda	#$ffff
  5536 04:16AD: 65 01        	adc	<R0
  5537 04:16AF: 48           	pha
  5538 04:16B0: A0 0A 00     	ldy	#$a
  5539 04:16B3: B7 11        	lda	[<L169+pWin_1],Y
  5540 04:16B5: 1A           	ina
  5541 04:16B6: 48           	pha
  5542 04:16B7: 18           	clc
  5543 04:16B8: A0 08 00     	ldy	#$8
  5544 04:16BB: B7 11        	lda	[<L169+pWin_1],Y
  5545 04:16BD: A0 0C 00     	ldy	#$c
  5546 04:16C0: 77 11        	adc	[<L169+pWin_1],Y
  5547 04:16C2: 85 01        	sta	<R0
  5548 04:16C4: 18           	clc
  5549 04:16C5: A9 FF FF     	lda	#$ffff
  5550 04:16C8: 65 01        	adc	<R0
  5551 04:16CA: 48           	pha
  5552 04:16CB: 22 xx xx xx  	jsl	~~k_draw_line
  5553                        ;
  Tue Oct  1 2019  1:02                                                Page 113


  5554                        ;				k_draw_line(pWin->win_x 
                    + pWin->win_width  - 2,
  5555                        	.line	1038
  5556                        ;							
                    pWin->win_y + 1,
  5557                        ;						    pWin
                    ->win_x + pWin->win_width  - 2,
  5558                        ;							
                    pWin->win_y + pWin->win_height - 1,
  5559                        ;							
                    0);
  5560 04:16CF: F4 00 00     	pea	#<$0
  5561 04:16D2: 18           	clc
  5562 04:16D3: A0 0A 00     	ldy	#$a
  5563 04:16D6: B7 11        	lda	[<L169+pWin_1],Y
  5564 04:16D8: A0 0E 00     	ldy	#$e
  5565 04:16DB: 77 11        	adc	[<L169+pWin_1],Y
  5566 04:16DD: 85 01        	sta	<R0
  5567 04:16DF: 18           	clc
  5568 04:16E0: A9 FF FF     	lda	#$ffff
  5569 04:16E3: 65 01        	adc	<R0
  5570 04:16E5: 48           	pha
  5571 04:16E6: 18           	clc
  5572 04:16E7: A0 08 00     	ldy	#$8
  5573 04:16EA: B7 11        	lda	[<L169+pWin_1],Y
  5574 04:16EC: A0 0C 00     	ldy	#$c
  5575 04:16EF: 77 11        	adc	[<L169+pWin_1],Y
  5576 04:16F1: 85 01        	sta	<R0
  5577 04:16F3: 18           	clc
  5578 04:16F4: A9 FE FF     	lda	#$fffe
  5579 04:16F7: 65 01        	adc	<R0
  5580 04:16F9: 48           	pha
  5581 04:16FA: A0 0A 00     	ldy	#$a
  5582 04:16FD: B7 11        	lda	[<L169+pWin_1],Y
  5583 04:16FF: 1A           	ina
  5584 04:1700: 48           	pha
  5585 04:1701: 18           	clc
  5586 04:1702: A0 08 00     	ldy	#$8
  5587 04:1705: B7 11        	lda	[<L169+pWin_1],Y
  5588 04:1707: A0 0C 00     	ldy	#$c
  5589 04:170A: 77 11        	adc	[<L169+pWin_1],Y
  5590 04:170C: 85 01        	sta	<R0
  5591 04:170E: 18           	clc
  5592 04:170F: A9 FE FF     	lda	#$fffe
  5593 04:1712: 65 01        	adc	<R0
  5594 04:1714: 48           	pha
  5595 04:1715: 22 xx xx xx  	jsl	~~k_draw_line
  5596                        ;
  5597                        ;
  5598                        ;
  5599                        ;				size = strlen(pButton->p
                    Caption) * FONTW;
  5600                        	.line	1046
  5601 04:1719: 22 xx xx xx  	jsl	~~k_font_getFontWidth
  5602 04:171D: 85 01        	sta	<R0
  5603 04:171F: A0 02 00     	ldy	#$2
  5604 04:1722: B7 15        	lda	[<L169+pButton_1],Y
  5605 04:1724: 48           	pha
  Tue Oct  1 2019  1:02                                                Page 114


  5606 04:1725: A7 15        	lda	[<L169+pButton_1]
  5607 04:1727: 48           	pha
  5608 04:1728: 22 xx xx xx  	jsl	~~strlen
  5609 04:172C: 85 05        	sta	<R1
  5610 04:172E: A5 05        	lda	<R1
  5611 04:1730: A6 01        	ldx	<R0
  5612                        	xref	~~~mul
  5613 04:1732: 22 xx xx xx  	jsl	~~~mul
  5614 04:1736: 85 19        	sta	<L169+size_1
  5615                        ;				k_draw_text_point(pButto
                    n->pCaption,
  5616                        	.line	1047
  5617                        ;						        
                      pWin->win_x + (pWin->win_width/2)  - (size/2) - 2,
  5618                        ;							
                    	  pWin->win_y + (pWin->win_height/2) - (4) + 2     , k_g
                    etUIGadgetColor()) ;
  5619 04:1738: 22 xx xx xx  	jsl	~~k_getUIGadgetColor
  5620 04:173C: 48           	pha
  5621 04:173D: A0 0E 00     	ldy	#$e
  5622 04:1740: B7 11        	lda	[<L169+pWin_1],Y
  5623 04:1742: A2 02 00     	ldx	#<$2
  5624                        	xref	~~~div
  5625 04:1745: 22 xx xx xx  	jsl	~~~div
  5626 04:1749: 85 01        	sta	<R0
  5627 04:174B: 18           	clc
  5628 04:174C: A5 01        	lda	<R0
  5629 04:174E: A0 0A 00     	ldy	#$a
  5630 04:1751: 77 11        	adc	[<L169+pWin_1],Y
  5631 04:1753: 85 05        	sta	<R1
  5632 04:1755: 18           	clc
  5633 04:1756: A9 FE FF     	lda	#$fffe
  5634 04:1759: 65 05        	adc	<R1
  5635 04:175B: 48           	pha
  5636 04:175C: A5 19        	lda	<L169+size_1
  5637 04:175E: 4A           	lsr	A
  5638 04:175F: 85 01        	sta	<R0
  5639 04:1761: A0 0C 00     	ldy	#$c
  5640 04:1764: B7 11        	lda	[<L169+pWin_1],Y
  5641 04:1766: A2 02 00     	ldx	#<$2
  5642                        	xref	~~~div
  5643 04:1769: 22 xx xx xx  	jsl	~~~div
  5644 04:176D: 85 05        	sta	<R1
  5645 04:176F: 18           	clc
  5646 04:1770: A5 05        	lda	<R1
  5647 04:1772: A0 08 00     	ldy	#$8
  5648 04:1775: 77 11        	adc	[<L169+pWin_1],Y
  5649 04:1777: 85 09        	sta	<R2
  5650 04:1779: 38           	sec
  5651 04:177A: A5 09        	lda	<R2
  5652 04:177C: E5 01        	sbc	<R0
  5653 04:177E: 85 05        	sta	<R1
  5654 04:1780: 18           	clc
  5655 04:1781: A9 FE FF     	lda	#$fffe
  5656 04:1784: 65 05        	adc	<R1
  5657 04:1786: 48           	pha
  5658 04:1787: A0 02 00     	ldy	#$2
  5659 04:178A: B7 15        	lda	[<L169+pButton_1],Y
  Tue Oct  1 2019  1:02                                                Page 115


  5660 04:178C: 48           	pha
  5661 04:178D: A7 15        	lda	[<L169+pButton_1]
  5662 04:178F: 48           	pha
  5663 04:1790: 22 xx xx xx  	jsl	~~k_draw_text_point
  5664                        ;			}
  5665                        	.line	1050
  5666                        ;
  5667                        ;
  5668                        ;			break;
  5669                        L10063:
  5670                        	.line	1053
  5671 04:1794: 82 D4 01     	brl	L10059
  5672                        ;
  5673                        ;		case FX_LBUTTON_UP:
  5674                        	.line	1055
  5675                        L10064:
  5676                        ;			k_debug_string("buttonWindowProc
                    ::FX_LBUTTON_UP\r\n");
  5677                        	.line	1056
  5678 04:1797: F4 xx xx     	pea	#^L167+73
  5679 04:179A: F4 xx xx     	pea	#<L167+73
  5680 04:179D: 22 xx xx xx  	jsl	~~k_debug_string
  5681                        ;			if(pButton->pCaption)
  5682                        	.line	1057
  5683                        ;			{
  5684 04:17A1: A7 15        	lda	[<L169+pButton_1]
  5685 04:17A3: A0 02 00     	ldy	#$2
  5686 04:17A6: 17 15        	ora	[<L169+pButton_1],Y
  5687 04:17A8: D0 03        	bne	L173
  5688 04:17AA: 82 B2 00     	brl	L10065
  5689                        L173:
  5690                        	.line	1058
  5691                        ;				//k_debug_strings("butto
                    nWindowProc::CTL_CMD_CAPTION:", (LPCHAR)pButton->pCaption );
  5692                        ;
  5693                        ;				k_vdraw_ui_window(FXWS_B
                    ORDER | FXWS_VISIBLE,
  5694                        	.line	1061
  5695                        ;							
                    	  pWin->win_x ,pWin->win_y,
  5696                        ;							
                    	  pWin->win_height,pWin->win_width,
  5697                        ;							
                    	  pWin->win_title,
  5698                        ;							
                    	  k_getUIGadgetColor(), k_getUIMenuColor());
  5699 04:17AD: 22 xx xx xx  	jsl	~~k_getUIMenuColor
  5700 04:17B1: 48           	pha
  5701 04:17B2: 22 xx xx xx  	jsl	~~k_getUIGadgetColor
  5702 04:17B6: 48           	pha
  5703 04:17B7: 18           	clc
  5704 04:17B8: A9 14 00     	lda	#$14
  5705 04:17BB: 65 11        	adc	<L169+pWin_1
  5706 04:17BD: 85 01        	sta	<R0
  5707 04:17BF: A9 00 00     	lda	#$0
  5708 04:17C2: 65 13        	adc	<L169+pWin_1+2
  5709 04:17C4: 85 03        	sta	<R0+2
  5710 04:17C6: D4 03        	pei	<R0+2
  Tue Oct  1 2019  1:02                                                Page 116


  5711 04:17C8: D4 01        	pei	<R0
  5712 04:17CA: A0 0C 00     	ldy	#$c
  5713 04:17CD: B7 11        	lda	[<L169+pWin_1],Y
  5714 04:17CF: 48           	pha
  5715 04:17D0: A0 0E 00     	ldy	#$e
  5716 04:17D3: B7 11        	lda	[<L169+pWin_1],Y
  5717 04:17D5: 48           	pha
  5718 04:17D6: A0 0A 00     	ldy	#$a
  5719 04:17D9: B7 11        	lda	[<L169+pWin_1],Y
  5720 04:17DB: 48           	pha
  5721 04:17DC: A0 08 00     	ldy	#$8
  5722 04:17DF: B7 11        	lda	[<L169+pWin_1],Y
  5723 04:17E1: 48           	pha
  5724 04:17E2: F4 80 10     	pea	#^$10800000
  5725 04:17E5: F4 00 00     	pea	#<$10800000
  5726 04:17E8: 22 xx xx xx  	jsl	~~k_vdraw_ui_window
  5727                        ;
  5728                        ;				size = strlen(pButton->p
                    Caption) * FONTW;
  5729                        	.line	1067
  5730 04:17EC: 22 xx xx xx  	jsl	~~k_font_getFontWidth
  5731 04:17F0: 85 01        	sta	<R0
  5732 04:17F2: A0 02 00     	ldy	#$2
  5733 04:17F5: B7 15        	lda	[<L169+pButton_1],Y
  5734 04:17F7: 48           	pha
  5735 04:17F8: A7 15        	lda	[<L169+pButton_1]
  5736 04:17FA: 48           	pha
  5737 04:17FB: 22 xx xx xx  	jsl	~~strlen
  5738 04:17FF: 85 05        	sta	<R1
  5739 04:1801: A5 05        	lda	<R1
  5740 04:1803: A6 01        	ldx	<R0
  5741                        	xref	~~~mul
  5742 04:1805: 22 xx xx xx  	jsl	~~~mul
  5743 04:1809: 85 19        	sta	<L169+size_1
  5744                        ;				k_draw_text_point(pButto
                    n->pCaption,
  5745                        	.line	1068
  5746                        ;						        
                      pWin->win_x + (pWin->win_width/2)  - (size/2),
  5747                        ;							
                    	  pWin->win_y + (pWin->win_height/2) - (4),k_getUIGadget
                    Color());
  5748 04:180B: 22 xx xx xx  	jsl	~~k_getUIGadgetColor
  5749 04:180F: 48           	pha
  5750 04:1810: A0 0E 00     	ldy	#$e
  5751 04:1813: B7 11        	lda	[<L169+pWin_1],Y
  5752 04:1815: A2 02 00     	ldx	#<$2
  5753                        	xref	~~~div
  5754 04:1818: 22 xx xx xx  	jsl	~~~div
  5755 04:181C: 85 01        	sta	<R0
  5756 04:181E: 18           	clc
  5757 04:181F: A5 01        	lda	<R0
  5758 04:1821: A0 0A 00     	ldy	#$a
  5759 04:1824: 77 11        	adc	[<L169+pWin_1],Y
  5760 04:1826: 85 05        	sta	<R1
  5761 04:1828: 18           	clc
  5762 04:1829: A9 FC FF     	lda	#$fffc
  5763 04:182C: 65 05        	adc	<R1
  Tue Oct  1 2019  1:02                                                Page 117


  5764 04:182E: 48           	pha
  5765 04:182F: A5 19        	lda	<L169+size_1
  5766 04:1831: 4A           	lsr	A
  5767 04:1832: 85 01        	sta	<R0
  5768 04:1834: A0 0C 00     	ldy	#$c
  5769 04:1837: B7 11        	lda	[<L169+pWin_1],Y
  5770 04:1839: A2 02 00     	ldx	#<$2
  5771                        	xref	~~~div
  5772 04:183C: 22 xx xx xx  	jsl	~~~div
  5773 04:1840: 85 05        	sta	<R1
  5774 04:1842: 18           	clc
  5775 04:1843: A5 05        	lda	<R1
  5776 04:1845: A0 08 00     	ldy	#$8
  5777 04:1848: 77 11        	adc	[<L169+pWin_1],Y
  5778 04:184A: 85 09        	sta	<R2
  5779 04:184C: 38           	sec
  5780 04:184D: A5 09        	lda	<R2
  5781 04:184F: E5 01        	sbc	<R0
  5782 04:1851: 48           	pha
  5783 04:1852: A0 02 00     	ldy	#$2
  5784 04:1855: B7 15        	lda	[<L169+pButton_1],Y
  5785 04:1857: 48           	pha
  5786 04:1858: A7 15        	lda	[<L169+pButton_1]
  5787 04:185A: 48           	pha
  5788 04:185B: 22 xx xx xx  	jsl	~~k_draw_text_point
  5789                        ;			}
  5790                        	.line	1071
  5791                        ;
  5792                        ;			k_send_command_message(pWin->pPa
                    rentWindow,FX_CONTROL_COMMAND,LOWORD((ULONG)pWin->hMenu),0,0
                    L,0L);
  5793                        L10065:
  5794                        	.line	1073
  5795 04:185F: F4 00 00     	pea	#^$0
  5796 04:1862: F4 00 00     	pea	#<$0
  5797 04:1865: F4 00 00     	pea	#^$0
  5798 04:1868: F4 00 00     	pea	#<$0
  5799 04:186B: F4 00 00     	pea	#<$0
  5800 04:186E: A0 50 00     	ldy	#$50
  5801 04:1871: B7 11        	lda	[<L169+pWin_1],Y
  5802 04:1873: 48           	pha
  5803 04:1874: F4 00 FA     	pea	#<$fa00
  5804 04:1877: A0 4E 00     	ldy	#$4e
  5805 04:187A: B7 11        	lda	[<L169+pWin_1],Y
  5806 04:187C: 48           	pha
  5807 04:187D: A0 4C 00     	ldy	#$4c
  5808 04:1880: B7 11        	lda	[<L169+pWin_1],Y
  5809 04:1882: 48           	pha
  5810 04:1883: 22 xx xx xx  	jsl	~~k_send_command_message
  5811                        ;
  5812                        ;
  5813                        ;			break;
  5814                        	.line	1076
  5815 04:1887: 82 E1 00     	brl	L10059
  5816                        ;		case FX_MOUSE_ENTER:
  5817                        	.line	1077
  5818                        L10066:
  5819                        ;			k_debug_string("buttonWindowProc
  Tue Oct  1 2019  1:02                                                Page 118


                    ::FX_MOUSE_ENTER\r\n");
  5820                        	.line	1078
  5821 04:188A: F4 xx xx     	pea	#^L167+107
  5822 04:188D: F4 xx xx     	pea	#<L167+107
  5823 04:1890: 22 xx xx xx  	jsl	~~k_debug_string
  5824                        ;
  5825                        ;			break;
  5826                        	.line	1080
  5827 04:1894: 82 D4 00     	brl	L10059
  5828                        ;		case FX_MOUSE_EXIT:
  5829                        	.line	1081
  5830                        L10067:
  5831                        ;			k_debug_string("buttonWindowProc
                    ::FX_MOUSE_EXIT\r\n");
  5832                        	.line	1082
  5833 04:1897: F4 xx xx     	pea	#^L167+142
  5834 04:189A: F4 xx xx     	pea	#<L167+142
  5835 04:189D: 22 xx xx xx  	jsl	~~k_debug_string
  5836                        ;
  5837                        ;			break;
  5838                        	.line	1084
  5839 04:18A1: 82 C7 00     	brl	L10059
  5840                        ;
  5841                        ;		case FX_CONTROL_COMMAND:
  5842                        	.line	1086
  5843                        L10068:
  5844                        ;			//k_debug_string("buttonWindowPr
                    oc::FX_CONTROL_COMMAND\r\n");
  5845                        ;
  5846                        ;
  5847                        ;
  5848                        ;			if( ((PFXCMDMESSAGE)pMsg)->cmdCI
                    d == CTL_CMD_CAPTION )
  5849                        	.line	1091
  5850                        ;			{
  5851 04:18A4: A0 16 00     	ldy	#$16
  5852 04:18A7: B7 1E        	lda	[<L168+pMsg_0],Y
  5853 04:18A9: C9 01 00     	cmp	#<$1
  5854 04:18AC: F0 03        	beq	L174
  5855 04:18AE: 82 90 00     	brl	L10069
  5856                        L174:
  5857                        	.line	1092
  5858                        ;				pButton->pCaption = (LPC
                    HAR)((PFXCMDMESSAGE)pMsg)->parameter1;
  5859                        	.line	1093
  5860 04:18B1: A0 1A 00     	ldy	#$1a
  5861 04:18B4: B7 1E        	lda	[<L168+pMsg_0],Y
  5862 04:18B6: 87 15        	sta	[<L169+pButton_1]
  5863 04:18B8: A0 1C 00     	ldy	#$1c
  5864 04:18BB: B7 1E        	lda	[<L168+pMsg_0],Y
  5865 04:18BD: A0 02 00     	ldy	#$2
  5866 04:18C0: 97 15        	sta	[<L169+pButton_1],Y
  5867                        ;
  5868                        ;				if(pButton->pCaption)
  5869                        	.line	1095
  5870                        ;				{
  5871 04:18C2: A7 15        	lda	[<L169+pButton_1]
  5872 04:18C4: A0 02 00     	ldy	#$2
  Tue Oct  1 2019  1:02                                                Page 119


  5873 04:18C7: 17 15        	ora	[<L169+pButton_1],Y
  5874 04:18C9: D0 03        	bne	L175
  5875 04:18CB: 82 73 00     	brl	L10070
  5876                        L175:
  5877                        	.line	1096
  5878                        ;					//k_debug_string
                    s("buttonWindowProc::CTL_CMD_CAPTION:", (LPCHAR)pButton->pCa
                    ption );
  5879                        ;
  5880                        ;					size = strlen(pB
                    utton->pCaption) * FONTW;
  5881                        	.line	1099
  5882 04:18CE: 22 xx xx xx  	jsl	~~k_font_getFontWidth
  5883 04:18D2: 85 01        	sta	<R0
  5884 04:18D4: A0 02 00     	ldy	#$2
  5885 04:18D7: B7 15        	lda	[<L169+pButton_1],Y
  5886 04:18D9: 48           	pha
  5887 04:18DA: A7 15        	lda	[<L169+pButton_1]
  5888 04:18DC: 48           	pha
  5889 04:18DD: 22 xx xx xx  	jsl	~~strlen
  5890 04:18E1: 85 05        	sta	<R1
  5891 04:18E3: A5 05        	lda	<R1
  5892 04:18E5: A6 01        	ldx	<R0
  5893                        	xref	~~~mul
  5894 04:18E7: 22 xx xx xx  	jsl	~~~mul
  5895 04:18EB: 85 19        	sta	<L169+size_1
  5896                        ;					k_draw_text_poin
                    t(pButton->pCaption,
  5897                        	.line	1100
  5898                        ;							
                              pWin->win_x + (pWin->win_width/2)  - (size/2),
  5899                        ;							
                    		  pWin->win_y + (pWin->win_height/2) - (4),k_get
                    UIGadgetColor());
  5900 04:18ED: 22 xx xx xx  	jsl	~~k_getUIGadgetColor
  5901 04:18F1: 48           	pha
  5902 04:18F2: A0 0E 00     	ldy	#$e
  5903 04:18F5: B7 11        	lda	[<L169+pWin_1],Y
  5904 04:18F7: A2 02 00     	ldx	#<$2
  5905                        	xref	~~~div
  5906 04:18FA: 22 xx xx xx  	jsl	~~~div
  5907 04:18FE: 85 01        	sta	<R0
  5908 04:1900: 18           	clc
  5909 04:1901: A5 01        	lda	<R0
  5910 04:1903: A0 0A 00     	ldy	#$a
  5911 04:1906: 77 11        	adc	[<L169+pWin_1],Y
  5912 04:1908: 85 05        	sta	<R1
  5913 04:190A: 18           	clc
  5914 04:190B: A9 FC FF     	lda	#$fffc
  5915 04:190E: 65 05        	adc	<R1
  5916 04:1910: 48           	pha
  5917 04:1911: A5 19        	lda	<L169+size_1
  5918 04:1913: 4A           	lsr	A
  5919 04:1914: 85 01        	sta	<R0
  5920 04:1916: A0 0C 00     	ldy	#$c
  5921 04:1919: B7 11        	lda	[<L169+pWin_1],Y
  5922 04:191B: A2 02 00     	ldx	#<$2
  5923                        	xref	~~~div
  Tue Oct  1 2019  1:02                                                Page 120


  5924 04:191E: 22 xx xx xx  	jsl	~~~div
  5925 04:1922: 85 05        	sta	<R1
  5926 04:1924: 18           	clc
  5927 04:1925: A5 05        	lda	<R1
  5928 04:1927: A0 08 00     	ldy	#$8
  5929 04:192A: 77 11        	adc	[<L169+pWin_1],Y
  5930 04:192C: 85 09        	sta	<R2
  5931 04:192E: 38           	sec
  5932 04:192F: A5 09        	lda	<R2
  5933 04:1931: E5 01        	sbc	<R0
  5934 04:1933: 48           	pha
  5935 04:1934: A0 02 00     	ldy	#$2
  5936 04:1937: B7 15        	lda	[<L169+pButton_1],Y
  5937 04:1939: 48           	pha
  5938 04:193A: A7 15        	lda	[<L169+pButton_1]
  5939 04:193C: 48           	pha
  5940 04:193D: 22 xx xx xx  	jsl	~~k_draw_text_point
  5941                        ;				}
  5942                        	.line	1103
  5943                        ;			}
  5944                        L10070:
  5945                        	.line	1104
  5946                        ;
  5947                        ;			break;
  5948                        L10069:
  5949                        	.line	1106
  5950 04:1941: 82 27 00     	brl	L10059
  5951                        ;		default:
  5952                        	.line	1107
  5953                        L10071:
  5954                        ;			break;
  5955                        	.line	1108
  5956 04:1944: 82 24 00     	brl	L10059
  5957                        ;		}
  5958                        	.line	1109
  5959                        L10058:
  5960                        	xref	~~~swt
  5961 04:1947: 22 xx xx xx  	jsl	~~~swt
  5962 04:194B: 07 00        	dw	7
  5963 04:194D: 01 0F        	dw	3841
  5964 04:194F: 89 18        	dw	L10066-1
  5965 04:1951: 02 0F        	dw	3842
  5966 04:1953: 96 18        	dw	L10067-1
  5967 04:1955: 04 0F        	dw	3844
  5968 04:1957: C9 15        	dw	L10062-1
  5969 04:1959: 06 0F        	dw	3846
  5970 04:195B: 96 17        	dw	L10064-1
  5971 04:195D: 00 FA        	dw	64000
  5972 04:195F: A3 18        	dw	L10068-1
  5973 04:1961: 07 FB        	dw	64263
  5974 04:1963: BC 15        	dw	L10061-1
  5975 04:1965: 03 FF        	dw	65283
  5976 04:1967: 61 15        	dw	L10060-1
  5977 04:1969: 43 19        	dw	L10071-1
  5978                        L10059:
  5979                        ;	}
  5980                        	.line	1110
  5981                        ;
  Tue Oct  1 2019  1:02                                                Page 121


  5982                        ;	return TRUE;
  5983                        L10057:
  5984                        	.line	1112
  5985 04:196B: A9 01 00     	lda	#$1
  5986                        L176:
  5987 04:196E: A8           	tay
  5988 04:196F: A5 1C        	lda	<L168+2
  5989 04:1971: 85 20        	sta	<L168+2+4
  5990 04:1973: A5 1B        	lda	<L168+1
  5991 04:1975: 85 1F        	sta	<L168+1+4
  5992 04:1977: 2B           	pld
  5993 04:1978: 3B           	tsc
  5994 04:1979: 18           	clc
  5995 04:197A: 69 1E 00     	adc	#L168+4
  5996 04:197D: 1B           	tcs
  5997 04:197E: 98           	tya
  5998 04:197F: 6B           	rtl
  5999                        ;
  6000                        ;}
  6001                        	.line	1114
  6002                        	.endblock	1114
  6003             0000001A   L168	equ	26
  6004             0000000D   L169	equ	13
  6005 04:1980:              	ends
  6006                        	efunc
  6007                        	.endfunc	1114,13,26
  6008                        	.line	1114
  6009                        	data
  6010                        L167:
  6011 00:0604: 62 75 74 74  	db	$62,$75,$74,$74,$6F,$6E,$57,$69,$6E,$64,
                    $6F,$77,$50,$72,$6F
       00:0608: 6F 6E 57 69 
       00:060C: 6E 64 6F 77 
       00:0610: 50 72 6F 
  6012 00:0613: 63 3A 3A 46  	db	$63,$3A,$3A,$46,$58,$5F,$52,$45,$44,$52,
                    $41,$57,$5F,$57,$49
       00:0617: 58 5F 52 45 
       00:061B: 44 52 41 57 
       00:061F: 5F 57 49 
  6013 00:0622: 4E 44 4F 57  	db	$4E,$44,$4F,$57,$0D,$0A,$00,$62,$75,$74,
                    $74,$6F,$6E,$57,$69
       00:0626: 0D 0A 00 62 
       00:062A: 75 74 74 6F 
       00:062E: 6E 57 69 
  6014 00:0631: 6E 64 6F 77  	db	$6E,$64,$6F,$77,$50,$72,$6F,$63,$3A,$3A,
                    $46,$58,$5F,$4C,$42
       00:0635: 50 72 6F 63 
       00:0639: 3A 3A 46 58 
       00:063D: 5F 4C 42 
  6015 00:0640: 55 54 54 4F  	db	$55,$54,$54,$4F,$4E,$5F,$44,$4F,$57,$4E,
                    $0D,$0A,$00,$62,$75
       00:0644: 4E 5F 44 4F 
       00:0648: 57 4E 0D 0A 
       00:064C: 00 62 75 
  6016 00:064F: 74 74 6F 6E  	db	$74,$74,$6F,$6E,$57,$69,$6E,$64,$6F,$77,
                    $50,$72,$6F,$63,$3A
       00:0653: 57 69 6E 64 
       00:0657: 6F 77 50 72 
  Tue Oct  1 2019  1:02                                                Page 122


       00:065B: 6F 63 3A 
  6017 00:065E: 3A 46 58 5F  	db	$3A,$46,$58,$5F,$4C,$42,$55,$54,$54,$4F,
                    $4E,$5F,$55,$50,$0D
       00:0662: 4C 42 55 54 
       00:0666: 54 4F 4E 5F 
       00:066A: 55 50 0D 
  6018 00:066D: 0A 00 62 75  	db	$0A,$00,$62,$75,$74,$74,$6F,$6E,$57,$69,
                    $6E,$64,$6F,$77,$50
       00:0671: 74 74 6F 6E 
       00:0675: 57 69 6E 64 
       00:0679: 6F 77 50 
  6019 00:067C: 72 6F 63 3A  	db	$72,$6F,$63,$3A,$3A,$46,$58,$5F,$4D,$4F,
                    $55,$53,$45,$5F,$45
       00:0680: 3A 46 58 5F 
       00:0684: 4D 4F 55 53 
       00:0688: 45 5F 45 
  6020 00:068B: 4E 54 45 52  	db	$4E,$54,$45,$52,$0D,$0A,$00,$62,$75,$74,
                    $74,$6F,$6E,$57,$69
       00:068F: 0D 0A 00 62 
       00:0693: 75 74 74 6F 
       00:0697: 6E 57 69 
  6021 00:069A: 6E 64 6F 77  	db	$6E,$64,$6F,$77,$50,$72,$6F,$63,$3A,$3A,
                    $46,$58,$5F,$4D,$4F
       00:069E: 50 72 6F 63 
       00:06A2: 3A 3A 46 58 
       00:06A6: 5F 4D 4F 
  6022 00:06A9: 55 53 45 5F  	db	$55,$53,$45,$5F,$45,$58,$49,$54,$0D,$0A,
                    $00
       00:06AD: 45 58 49 54 
       00:06B1: 0D 0A 00 
  6023 00:06B4:              	ends
  6024                        ;
  6025                        ;void k_size_dropdown_menus(LPVOID ctx,LPVOID data
                    )
  6026                        ;{
  6027                        	.line	1116
  6028                        	.line	1117
  6029                        	WINMAN
  6030                        	xdef	~~k_size_dropdown_menus
  6031                        	func
  6032                        	.function	1117
  6033                        ~~k_size_dropdown_menus:
  6034                        	longa	on
  6035                        	longi	on
  6036 04:1980: 3B           	tsc
  6037 04:1981: 38           	sec
  6038 04:1982: E9 20 00     	sbc	#L178
  6039 04:1985: 1B           	tcs
  6040 04:1986: 0B           	phd
  6041 04:1987: 5B           	tcd
  6042             00000004   ctx_0	set	4
  6043             00000008   data_0	set	8
  6044                        	.block	1117
  6045                        ;	int i = 0;
  6046                        ;	//PRECT prect = ctx;
  6047                        ;	PWINDOW pMenuItem = NULL;
  6048                        ;	PMENUDROPDOWNDATA pmdd = (PMENUDROPDOWNDATA)ctx;
  6049                        ;	PMENU pMenu = data;
  Tue Oct  1 2019  1:02                                                Page 123


  6050                        ;	UINT  size = 0;
  6051                        ;
  6052                        ;	//k_debug_strings("k_size_dropdown_menus:","Ente
                    r");
  6053                        ;
  6054                        ;	if(pMenu->pCaption)
  6055             00000000   i_1	set	0
  6056             00000002   pMenuItem_1	set	2
  6057             00000006   pmdd_1	set	6
  6058             0000000A   pMenu_1	set	10
  6059             0000000E   size_1	set	14
  6060                        	.sym	i,0,5,1,16
  6061                        	.sym	pMenuItem,2,138,1,32,23
  6062                        	.sym	pmdd,6,138,1,32,28
  6063                        	.sym	pMenu,10,138,1,32,27
  6064                        	.sym	size,14,16,1,16
  6065                        	.sym	ctx,4,129,6,32
  6066                        	.sym	data,8,129,6,32
  6067 04:1988: 64 11        	stz	<L179+i_1
  6068 04:198A: 64 13        	stz	<L179+pMenuItem_1
  6069 04:198C: 64 15        	stz	<L179+pMenuItem_1+2
  6070 04:198E: A5 24        	lda	<L178+ctx_0
  6071 04:1990: 85 17        	sta	<L179+pmdd_1
  6072 04:1992: A5 26        	lda	<L178+ctx_0+2
  6073 04:1994: 85 19        	sta	<L179+pmdd_1+2
  6074 04:1996: A5 28        	lda	<L178+data_0
  6075 04:1998: 85 1B        	sta	<L179+pMenu_1
  6076 04:199A: A5 2A        	lda	<L178+data_0+2
  6077 04:199C: 85 1D        	sta	<L179+pMenu_1+2
  6078 04:199E: 64 1F        	stz	<L179+size_1
  6079                        	.line	1127
  6080                        ;	{
  6081 04:19A0: A0 0F 00     	ldy	#$f
  6082 04:19A3: B7 1B        	lda	[<L179+pMenu_1],Y
  6083 04:19A5: A0 11 00     	ldy	#$11
  6084 04:19A8: 17 1B        	ora	[<L179+pMenu_1],Y
  6085 04:19AA: D0 03        	bne	L181
  6086 04:19AC: 82 44 01     	brl	L10072
  6087                        L181:
  6088                        	.line	1128
  6089                        ;		//k_debug_integer("k_size_dropdown_menus
                    :height:",pmdd->rect.height);
  6090                        ;		//k_debug_strings("k_size_dropdown_menus
                    :",(LPCHAR)pMenu->pCaption);
  6091                        ;		while(pmdd->captions[i])
  6092                        	.line	1131
  6093                        L10073:
  6094 04:19AF: A0 00 00     	ldy	#$0
  6095 04:19B2: A5 11        	lda	<L179+i_1
  6096 04:19B4: 10 01        	bpl	L182
  6097 04:19B6: 88           	dey
  6098                        L182:
  6099 04:19B7: 85 05        	sta	<R1
  6100 04:19B9: 84 07        	sty	<R1+2
  6101 04:19BB: D4 07        	pei	<R1+2
  6102 04:19BD: D4 05        	pei	<R1
  6103 04:19BF: A9 02 00     	lda	#$2
  6104                        	xref	~~~lasl
  Tue Oct  1 2019  1:02                                                Page 124


  6105 04:19C2: 22 xx xx xx  	jsl	~~~lasl
  6106 04:19C6: 85 01        	sta	<R0
  6107 04:19C8: 86 03        	stx	<R0+2
  6108 04:19CA: 18           	clc
  6109 04:19CB: A9 0C 00     	lda	#$c
  6110 04:19CE: 65 17        	adc	<L179+pmdd_1
  6111 04:19D0: 85 09        	sta	<R2
  6112 04:19D2: A9 00 00     	lda	#$0
  6113 04:19D5: 65 19        	adc	<L179+pmdd_1+2
  6114 04:19D7: 85 0B        	sta	<R2+2
  6115 04:19D9: 18           	clc
  6116 04:19DA: A5 09        	lda	<R2
  6117 04:19DC: 65 01        	adc	<R0
  6118 04:19DE: 85 0D        	sta	<R3
  6119 04:19E0: A5 0B        	lda	<R2+2
  6120 04:19E2: 65 03        	adc	<R0+2
  6121 04:19E4: 85 0F        	sta	<R3+2
  6122 04:19E6: A7 0D        	lda	[<R3]
  6123 04:19E8: A0 02 00     	ldy	#$2
  6124 04:19EB: 17 0D        	ora	[<R3],Y
  6125 04:19ED: D0 03        	bne	L183
  6126 04:19EF: 82 05 00     	brl	L10074
  6127                        L183:
  6128                        ;		{
  6129                        	.line	1132
  6130                        ;			i++;
  6131                        	.line	1133
  6132 04:19F2: E6 11        	inc	<L179+i_1
  6133                        ;		}
  6134                        	.line	1134
  6135 04:19F4: 82 B8 FF     	brl	L10073
  6136                        L10074:
  6137                        ;
  6138                        ;		pmdd->captions[i] = (LPCSTR)((PMENU)data
                    )->pCaption;
  6139                        	.line	1136
  6140 04:19F7: A0 00 00     	ldy	#$0
  6141 04:19FA: A5 11        	lda	<L179+i_1
  6142 04:19FC: 10 01        	bpl	L184
  6143 04:19FE: 88           	dey
  6144                        L184:
  6145 04:19FF: 85 05        	sta	<R1
  6146 04:1A01: 84 07        	sty	<R1+2
  6147 04:1A03: D4 07        	pei	<R1+2
  6148 04:1A05: D4 05        	pei	<R1
  6149 04:1A07: A9 02 00     	lda	#$2
  6150                        	xref	~~~lasl
  6151 04:1A0A: 22 xx xx xx  	jsl	~~~lasl
  6152 04:1A0E: 85 01        	sta	<R0
  6153 04:1A10: 86 03        	stx	<R0+2
  6154 04:1A12: 18           	clc
  6155 04:1A13: A9 0C 00     	lda	#$c
  6156 04:1A16: 65 17        	adc	<L179+pmdd_1
  6157 04:1A18: 85 09        	sta	<R2
  6158 04:1A1A: A9 00 00     	lda	#$0
  6159 04:1A1D: 65 19        	adc	<L179+pmdd_1+2
  6160 04:1A1F: 85 0B        	sta	<R2+2
  6161 04:1A21: 18           	clc
  Tue Oct  1 2019  1:02                                                Page 125


  6162 04:1A22: A5 09        	lda	<R2
  6163 04:1A24: 65 01        	adc	<R0
  6164 04:1A26: 85 0D        	sta	<R3
  6165 04:1A28: A5 0B        	lda	<R2+2
  6166 04:1A2A: 65 03        	adc	<R0+2
  6167 04:1A2C: 85 0F        	sta	<R3+2
  6168 04:1A2E: A0 0F 00     	ldy	#$f
  6169 04:1A31: B7 28        	lda	[<L178+data_0],Y
  6170 04:1A33: 87 0D        	sta	[<R3]
  6171 04:1A35: A0 11 00     	ldy	#$11
  6172 04:1A38: B7 28        	lda	[<L178+data_0],Y
  6173 04:1A3A: A0 02 00     	ldy	#$2
  6174 04:1A3D: 97 0D        	sta	[<R3],Y
  6175                        ;		pmdd->captions[i+1] = NULL;
  6176                        	.line	1137
  6177 04:1A3F: A5 11        	lda	<L179+i_1
  6178 04:1A41: 1A           	ina
  6179 04:1A42: 85 05        	sta	<R1
  6180 04:1A44: A0 00 00     	ldy	#$0
  6181 04:1A47: A5 05        	lda	<R1
  6182 04:1A49: 10 01        	bpl	L185
  6183 04:1A4B: 88           	dey
  6184                        L185:
  6185 04:1A4C: 85 05        	sta	<R1
  6186 04:1A4E: 84 07        	sty	<R1+2
  6187 04:1A50: D4 07        	pei	<R1+2
  6188 04:1A52: D4 05        	pei	<R1
  6189 04:1A54: A9 02 00     	lda	#$2
  6190                        	xref	~~~lasl
  6191 04:1A57: 22 xx xx xx  	jsl	~~~lasl
  6192 04:1A5B: 85 01        	sta	<R0
  6193 04:1A5D: 86 03        	stx	<R0+2
  6194 04:1A5F: 18           	clc
  6195 04:1A60: A9 0C 00     	lda	#$c
  6196 04:1A63: 65 17        	adc	<L179+pmdd_1
  6197 04:1A65: 85 09        	sta	<R2
  6198 04:1A67: A9 00 00     	lda	#$0
  6199 04:1A6A: 65 19        	adc	<L179+pmdd_1+2
  6200 04:1A6C: 85 0B        	sta	<R2+2
  6201 04:1A6E: 18           	clc
  6202 04:1A6F: A5 09        	lda	<R2
  6203 04:1A71: 65 01        	adc	<R0
  6204 04:1A73: 85 0D        	sta	<R3
  6205 04:1A75: A5 0B        	lda	<R2+2
  6206 04:1A77: 65 03        	adc	<R0+2
  6207 04:1A79: 85 0F        	sta	<R3+2
  6208 04:1A7B: A9 00 00     	lda	#$0
  6209 04:1A7E: 87 0D        	sta	[<R3]
  6210 04:1A80: A9 00 00     	lda	#$0
  6211 04:1A83: A0 02 00     	ldy	#$2
  6212 04:1A86: 97 0D        	sta	[<R3],Y
  6213                        ;
  6214                        ;
  6215                        ;		size = (strlen(pMenu->pCaption) + 2)* FO
                    NTW;
  6216                        	.line	1140
  6217 04:1A88: 22 xx xx xx  	jsl	~~k_font_getFontWidth
  6218 04:1A8C: 85 01        	sta	<R0
  Tue Oct  1 2019  1:02                                                Page 126


  6219 04:1A8E: A0 11 00     	ldy	#$11
  6220 04:1A91: B7 1B        	lda	[<L179+pMenu_1],Y
  6221 04:1A93: 48           	pha
  6222 04:1A94: A0 0F 00     	ldy	#$f
  6223 04:1A97: B7 1B        	lda	[<L179+pMenu_1],Y
  6224 04:1A99: 48           	pha
  6225 04:1A9A: 22 xx xx xx  	jsl	~~strlen
  6226 04:1A9E: 85 05        	sta	<R1
  6227 04:1AA0: 18           	clc
  6228 04:1AA1: A9 02 00     	lda	#$2
  6229 04:1AA4: 65 05        	adc	<R1
  6230 04:1AA6: 85 09        	sta	<R2
  6231 04:1AA8: A5 09        	lda	<R2
  6232 04:1AAA: A6 01        	ldx	<R0
  6233                        	xref	~~~mul
  6234 04:1AAC: 22 xx xx xx  	jsl	~~~mul
  6235 04:1AB0: 85 1F        	sta	<L179+size_1
  6236                        ;		//k_debug_integer("k_size_dropdown_menus
                    :size:",size);
  6237                        ;
  6238                        ;		if(size > pmdd->rect.width)
  6239                        	.line	1143
  6240                        ;			pmdd->rect.width = size;
  6241 04:1AB2: A0 08 00     	ldy	#$8
  6242 04:1AB5: B7 17        	lda	[<L179+pmdd_1],Y
  6243 04:1AB7: C5 1F        	cmp	<L179+size_1
  6244 04:1AB9: 90 03        	bcc	L186
  6245 04:1ABB: 82 07 00     	brl	L10075
  6246                        L186:
  6247                        	.line	1144
  6248 04:1ABE: A5 1F        	lda	<L179+size_1
  6249 04:1AC0: A0 08 00     	ldy	#$8
  6250 04:1AC3: 97 17        	sta	[<L179+pmdd_1],Y
  6251                        ;
  6252                        ;		//k_debug_integer("k_size_dropdown_menus
                    :pmdd->rect.width:",pmdd->rect.width);
  6253                        ;
  6254                        ;		//pMenuItem = k_user_CreateMenuDropItem(
                    pmdd->pParent,pmdd->captions[i],(HMENU)pMenu,pmdd->pParent->
                    win_x,pmdd->rect.height,size,(FONTH + FONTH/2));
  6255                        ;
  6256                        ;
  6257                        ;
  6258                        ;
  6259                        ;		pmdd->rect.height+=(FONTH + FONTH/2);
  6260                        L10075:
  6261                        	.line	1153
  6262 04:1AC5: 18           	clc
  6263 04:1AC6: A9 0A 00     	lda	#$a
  6264 04:1AC9: 65 17        	adc	<L179+pmdd_1
  6265 04:1ACB: 85 01        	sta	<R0
  6266 04:1ACD: A9 00 00     	lda	#$0
  6267 04:1AD0: 65 19        	adc	<L179+pmdd_1+2
  6268 04:1AD2: 85 03        	sta	<R0+2
  6269 04:1AD4: 22 xx xx xx  	jsl	~~k_font_getFontHeight
  6270 04:1AD8: 85 05        	sta	<R1
  6271 04:1ADA: 22 xx xx xx  	jsl	~~k_font_getFontHeight
  6272 04:1ADE: 85 0D        	sta	<R3
  Tue Oct  1 2019  1:02                                                Page 127


  6273 04:1AE0: A5 0D        	lda	<R3
  6274 04:1AE2: 4A           	lsr	A
  6275 04:1AE3: 85 09        	sta	<R2
  6276 04:1AE5: 18           	clc
  6277 04:1AE6: A5 09        	lda	<R2
  6278 04:1AE8: 65 05        	adc	<R1
  6279 04:1AEA: 85 0D        	sta	<R3
  6280 04:1AEC: 18           	clc
  6281 04:1AED: A5 0D        	lda	<R3
  6282 04:1AEF: 67 01        	adc	[<R0]
  6283 04:1AF1: 87 01        	sta	[<R0]
  6284                        ;	}
  6285                        	.line	1154
  6286                        ;	/*
  6287                        ;	if(pMenu->pCaption)
  6288                        ;	{
  6289                        ;		//k_debug_integer("k_size_dropdown_menus
                    :height:",prect->height);
  6290                        ;		//k_debug_strings("k_size_dropdown_menus
                    :",(LPCHAR)pMenu->pCaption);
  6291                        ;
  6292                        ;
  6293                        ;		size = (strlen(pMenu->pCaption) + 3)* FO
                    NTW;
  6294                        ;
  6295                        ;		if(size > prect->width)
  6296                        ;			prect->width = size;
  6297                        ;
  6298                        ;		prect->height+=(FONTH + FONTH/2);
  6299                        ;
  6300                        ;	}
  6301                        ;	*/
  6302                        ;
  6303                        ;
  6304                        ;}
  6305                        L10072:
  6306                        	.line	1173
  6307                        L187:
  6308 04:1AF3: A5 22        	lda	<L178+2
  6309 04:1AF5: 85 2A        	sta	<L178+2+8
  6310 04:1AF7: A5 21        	lda	<L178+1
  6311 04:1AF9: 85 29        	sta	<L178+1+8
  6312 04:1AFB: 2B           	pld
  6313 04:1AFC: 3B           	tsc
  6314 04:1AFD: 18           	clc
  6315 04:1AFE: 69 28 00     	adc	#L178+8
  6316 04:1B01: 1B           	tcs
  6317 04:1B02: 6B           	rtl
  6318                        	.endblock	1173
  6319             00000020   L178	equ	32
  6320             00000011   L179	equ	17
  6321 04:1B03:              	ends
  6322                        	efunc
  6323                        	.endfunc	1173,17,32
  6324                        	.line	1173
  6325                        ;
  6326                        ;
  6327                        ;PWINDOW	k_user_CreateMenuDropItem(HWND hWndParen
  Tue Oct  1 2019  1:02                                                Page 128


                    t,LPCSTR caption,HMENU hMenu,int x,int y,int width,int heigh
                    t)
  6328                        ;{
  6329                        	.line	1176
  6330                        	.line	1177
  6331                        	WINMAN
  6332                        	xdef	~~k_user_CreateMenuDropItem
  6333                        	func
  6334                        	.function	1177
  6335                        ~~k_user_CreateMenuDropItem:
  6336                        	longa	on
  6337                        	longi	on
  6338 04:1B03: 3B           	tsc
  6339 04:1B04: 38           	sec
  6340 04:1B05: E9 0C 00     	sbc	#L188
  6341 04:1B08: 1B           	tcs
  6342 04:1B09: 0B           	phd
  6343 04:1B0A: 5B           	tcd
  6344             00000004   hWndParent_0	set	4
  6345             00000008   caption_0	set	8
  6346             0000000C   hMenu_0	set	12
  6347             00000010   x_0	set	16
  6348             00000012   y_0	set	18
  6349             00000014   width_0	set	20
  6350             00000016   height_0	set	22
  6351                        	.block	1177
  6352                        ;	PWINDOW pWin = NULL;
  6353                        ;
  6354                        ;	k_debug_strings("k_user_CreateMenuDropItem:","En
                    ter");
  6355             00000000   pWin_1	set	0
  6356                        	.sym	pWin,0,138,1,32,23
  6357                        	.sym	hWndParent,4,129,6,32
  6358                        	.sym	caption,8,142,6,32
  6359                        	.sym	hMenu,12,129,6,32
  6360                        	.sym	x,16,5,6,16
  6361                        	.sym	y,18,5,6,16
  6362                        	.sym	width,20,5,6,16
  6363                        	.sym	height,22,5,6,16
  6364 04:1B0B: 64 09        	stz	<L189+pWin_1
  6365 04:1B0D: 64 0B        	stz	<L189+pWin_1+2
  6366                        	.line	1180
  6367 04:1B0F: F4 xx xx     	pea	#^L177+27
  6368 04:1B12: F4 xx xx     	pea	#<L177+27
  6369 04:1B15: F4 xx xx     	pea	#^L177
  6370 04:1B18: F4 xx xx     	pea	#<L177
  6371 04:1B1B: 22 xx xx xx  	jsl	~~k_debug_strings
  6372                        ;
  6373                        ;	pWin = k_user_CreateWindow(0,
  6374                        	.line	1182
  6375                        ;							
                       "menuItemWindowClass",
  6376                        ;							
                        caption,
  6377                        ;							
                    	x,y,
  6378                        ;							
                    	width,height,
  Tue Oct  1 2019  1:02                                                Page 129


  6379                        ;							
                    	hWndParent,
  6380                        ;							
                    	hMenu,
  6381                        ;							
                    	NULL);
  6382 04:1B1F: F4 00 00     	pea	#^$0
  6383 04:1B22: F4 00 00     	pea	#<$0
  6384 04:1B25: D4 1A        	pei	<L188+hMenu_0+2
  6385 04:1B27: D4 18        	pei	<L188+hMenu_0
  6386 04:1B29: D4 12        	pei	<L188+hWndParent_0+2
  6387 04:1B2B: D4 10        	pei	<L188+hWndParent_0
  6388 04:1B2D: D4 22        	pei	<L188+height_0
  6389 04:1B2F: D4 20        	pei	<L188+width_0
  6390 04:1B31: D4 1E        	pei	<L188+y_0
  6391 04:1B33: D4 1C        	pei	<L188+x_0
  6392 04:1B35: D4 16        	pei	<L188+caption_0+2
  6393 04:1B37: D4 14        	pei	<L188+caption_0
  6394 04:1B39: F4 xx xx     	pea	#^L177+33
  6395 04:1B3C: F4 xx xx     	pea	#<L177+33
  6396 04:1B3F: F4 00 00     	pea	#^$0
  6397 04:1B42: F4 00 00     	pea	#<$0
  6398 04:1B45: 22 AB 04 04  	jsl	~~k_user_CreateWindow
  6399 04:1B49: 85 09        	sta	<L189+pWin_1
  6400 04:1B4B: 86 0B        	stx	<L189+pWin_1+2
  6401                        ;	if(pWin)
  6402                        	.line	1190
  6403                        ;	{
  6404 04:1B4D: A5 09        	lda	<L189+pWin_1
  6405 04:1B4F: 05 0B        	ora	<L189+pWin_1+2
  6406 04:1B51: D0 03        	bne	L191
  6407 04:1B53: 82 4F 00     	brl	L10076
  6408                        L191:
  6409                        	.line	1191
  6410                        ;		//k_add_child_window(k_getWindowFromHand
                    le(hWndParent),pWin,k_update_hover_location);
  6411                        ;		//k_debug_strings("k_user_CreateButton:"
                    ,"k_send_window_message");
  6412                        ;		k_send_window_message(k_getHandleFromWin
                    dow(pWin),FX_CREATE_WINDOW,NULL,0);
  6413                        	.line	1194
  6414 04:1B56: F4 00 00     	pea	#<$0
  6415 04:1B59: F4 00 00     	pea	#^$0
  6416 04:1B5C: F4 00 00     	pea	#<$0
  6417 04:1B5F: F4 03 FF     	pea	#<$ff03
  6418 04:1B62: D4 0B        	pei	<L189+pWin_1+2
  6419 04:1B64: D4 09        	pei	<L189+pWin_1
  6420 04:1B66: 22 8C 03 04  	jsl	~~k_getHandleFromWindow
  6421 04:1B6A: 85 01        	sta	<R0
  6422 04:1B6C: 86 03        	stx	<R0+2
  6423 04:1B6E: DA           	phx
  6424 04:1B6F: 48           	pha
  6425 04:1B70: 22 xx xx xx  	jsl	~~k_send_window_message
  6426                        ;		k_send_command_message(k_getHandleFromWi
                    ndow(pWin),FX_CONTROL_COMMAND,CTL_CMD_CAPTION,0,(ULONG)k_str
                    ing_copy_string(caption),0L);
  6427                        	.line	1195
  6428 04:1B74: F4 00 00     	pea	#^$0
  Tue Oct  1 2019  1:02                                                Page 130


  6429 04:1B77: F4 00 00     	pea	#<$0
  6430 04:1B7A: D4 16        	pei	<L188+caption_0+2
  6431 04:1B7C: D4 14        	pei	<L188+caption_0
  6432 04:1B7E: 22 xx xx xx  	jsl	~~k_string_copy_string
  6433 04:1B82: 85 01        	sta	<R0
  6434 04:1B84: 86 03        	stx	<R0+2
  6435 04:1B86: D4 03        	pei	<R0+2
  6436 04:1B88: D4 01        	pei	<R0
  6437 04:1B8A: F4 00 00     	pea	#<$0
  6438 04:1B8D: F4 01 00     	pea	#<$1
  6439 04:1B90: F4 00 FA     	pea	#<$fa00
  6440 04:1B93: D4 0B        	pei	<L189+pWin_1+2
  6441 04:1B95: D4 09        	pei	<L189+pWin_1
  6442 04:1B97: 22 8C 03 04  	jsl	~~k_getHandleFromWindow
  6443 04:1B9B: 85 05        	sta	<R1
  6444 04:1B9D: 86 07        	stx	<R1+2
  6445 04:1B9F: DA           	phx
  6446 04:1BA0: 48           	pha
  6447 04:1BA1: 22 xx xx xx  	jsl	~~k_send_command_message
  6448                        ;	}
  6449                        	.line	1196
  6450                        ;
  6451                        ;	//k_debug_strings("k_user_CreateMenuAnchor:","Ex
                    it");
  6452                        ;
  6453                        ;	return pWin;
  6454                        L10076:
  6455                        	.line	1200
  6456 04:1BA5: A6 0B        	ldx	<L189+pWin_1+2
  6457 04:1BA7: A5 09        	lda	<L189+pWin_1
  6458                        L192:
  6459 04:1BA9: A8           	tay
  6460 04:1BAA: A5 0E        	lda	<L188+2
  6461 04:1BAC: 85 22        	sta	<L188+2+20
  6462 04:1BAE: A5 0D        	lda	<L188+1
  6463 04:1BB0: 85 21        	sta	<L188+1+20
  6464 04:1BB2: 2B           	pld
  6465 04:1BB3: 3B           	tsc
  6466 04:1BB4: 18           	clc
  6467 04:1BB5: 69 20 00     	adc	#L188+20
  6468 04:1BB8: 1B           	tcs
  6469 04:1BB9: 98           	tya
  6470 04:1BBA: 6B           	rtl
  6471                        ;}
  6472                        	.line	1201
  6473                        	.endblock	1201
  6474             0000000C   L188	equ	12
  6475             00000009   L189	equ	9
  6476 04:1BBB:              	ends
  6477                        	efunc
  6478                        	.endfunc	1201,9,12
  6479                        	.line	1201
  6480                        	data
  6481                        L177:
  6482 00:06B4: 6B 5F 75 73  	db	$6B,$5F,$75,$73,$65,$72,$5F,$43,$72,$65,
                    $61,$74,$65,$4D,$65
       00:06B8: 65 72 5F 43 
       00:06BC: 72 65 61 74 
  Tue Oct  1 2019  1:02                                                Page 131


       00:06C0: 65 4D 65 
  6483 00:06C3: 6E 75 44 72  	db	$6E,$75,$44,$72,$6F,$70,$49,$74,$65,$6D,
                    $3A,$00,$45,$6E,$74
       00:06C7: 6F 70 49 74 
       00:06CB: 65 6D 3A 00 
       00:06CF: 45 6E 74 
  6484 00:06D2: 65 72 00 6D  	db	$65,$72,$00,$6D,$65,$6E,$75,$49,$74,$65,
                    $6D,$57,$69,$6E,$64
       00:06D6: 65 6E 75 49 
       00:06DA: 74 65 6D 57 
       00:06DE: 69 6E 64 
  6485 00:06E1: 6F 77 43 6C  	db	$6F,$77,$43,$6C,$61,$73,$73,$00
       00:06E5: 61 73 73 00 
  6486 00:06E9:              	ends
  6487                        ;
  6488                        ;BOOL menuItemWindowProc(PFXOSMESSAGE pMsg)
  6489                        ;{
  6490                        	.line	1203
  6491                        	.line	1204
  6492                        	WINMAN
  6493                        	xdef	~~menuItemWindowProc
  6494                        	func
  6495                        	.function	1204
  6496                        ~~menuItemWindowProc:
  6497                        	longa	on
  6498                        	longi	on
  6499 04:1BBB: 3B           	tsc
  6500 04:1BBC: 38           	sec
  6501 04:1BBD: E9 7E 00     	sbc	#L194
  6502 04:1BC0: 1B           	tcs
  6503 04:1BC1: 0B           	phd
  6504 04:1BC2: 5B           	tcd
  6505             00000004   pMsg_0	set	4
  6506                        	.block	1204
  6507                        ;	PFXPROCESS p = NULL;
  6508                        ;	PWINDOW	   pWin = NULL;
  6509                        ;	PBUTTON	   pButton = NULL;
  6510                        ;	//LPCSTR	   captions[] = {"About FX/OS...
                    ",NULL};
  6511                        ;	LPCSTR	   captions[25];
  6512                        ;	UINT	   size = 0;
  6513                        ;	PMENU	   pMenu = NULL;
  6514                        ;	PMENUDROPDOWNDATA pddmData = NULL;
  6515                        ;
  6516                        ;	if(pMsg!=NULL)
  6517             00000000   p_1	set	0
  6518             00000004   pWin_1	set	4
  6519             00000008   pButton_1	set	8
  6520             0000000C   captions_1	set	12
  6521             00000070   size_1	set	112
  6522             00000072   pMenu_1	set	114
  6523             00000076   pddmData_1	set	118
  6524                        	.sym	p,0,138,1,32,16
  6525                        	.sym	pWin,4,138,1,32,23
  6526                        	.sym	pButton,8,138,1,32,29
  6527                        	.sym	captions,12,1134,1,32,25
  6528                        	.sym	size,112,16,1,16
  6529                        	.sym	pMenu,114,138,1,32,27
  Tue Oct  1 2019  1:02                                                Page 132


  6530                        	.sym	pddmData,118,138,1,32,28
  6531                        	.sym	pMsg,4,138,6,32,12
  6532 04:1BC3: 64 05        	stz	<L195+p_1
  6533 04:1BC5: 64 07        	stz	<L195+p_1+2
  6534 04:1BC7: 64 09        	stz	<L195+pWin_1
  6535 04:1BC9: 64 0B        	stz	<L195+pWin_1+2
  6536 04:1BCB: 64 0D        	stz	<L195+pButton_1
  6537 04:1BCD: 64 0F        	stz	<L195+pButton_1+2
  6538 04:1BCF: 64 75        	stz	<L195+size_1
  6539 04:1BD1: 64 77        	stz	<L195+pMenu_1
  6540 04:1BD3: 64 79        	stz	<L195+pMenu_1+2
  6541 04:1BD5: 64 7B        	stz	<L195+pddmData_1
  6542 04:1BD7: 64 7D        	stz	<L195+pddmData_1+2
  6543                        	.line	1214
  6544                        ;	{
  6545 04:1BD9: A5 82        	lda	<L194+pMsg_0
  6546 04:1BDB: 05 84        	ora	<L194+pMsg_0+2
  6547 04:1BDD: D0 03        	bne	L197
  6548 04:1BDF: 82 A9 00     	brl	L10077
  6549                        L197:
  6550                        	.line	1215
  6551                        ;		p = k_exec_get_current_process();
  6552                        	.line	1216
  6553 04:1BE2: 22 xx xx xx  	jsl	~~k_exec_get_current_process
  6554 04:1BE6: 85 05        	sta	<L195+p_1
  6555 04:1BE8: 86 07        	stx	<L195+p_1+2
  6556                        ;		pWin = k_getWindowFromHandle(pMsg->hwnd)
                    ;
  6557                        	.line	1217
  6558 04:1BEA: A0 0C 00     	ldy	#$c
  6559 04:1BED: B7 82        	lda	[<L194+pMsg_0],Y
  6560 04:1BEF: 48           	pha
  6561 04:1BF0: A0 0A 00     	ldy	#$a
  6562 04:1BF3: B7 82        	lda	[<L194+pMsg_0],Y
  6563 04:1BF5: 48           	pha
  6564 04:1BF6: 22 AA 03 04  	jsl	~~k_getWindowFromHandle
  6565 04:1BFA: 85 09        	sta	<L195+pWin_1
  6566 04:1BFC: 86 0B        	stx	<L195+pWin_1+2
  6567                        ;		//pButton = ((PBUTTON)pWin->windowData);
  6568                        ;		//k_debug_long("consoleWindowProc::Proce
                    ssId:",p->procId);
  6569                        ;
  6570                        ;		switch(pMsg->type)
  6571                        	.line	1221
  6572 04:1BFE: A0 08 00     	ldy	#$8
  6573 04:1C01: B7 82        	lda	[<L194+pMsg_0],Y
  6574 04:1C03: 82 69 00     	brl	L10078
  6575                        ;		{
  6576                        	.line	1222
  6577                        ;		case FX_CREATE_WINDOW:
  6578                        	.line	1223
  6579                        L10080:
  6580                        ;			//k_debug_long("menuDropDownWind
                    owProc::ProcessId:",p->procId);
  6581                        ;			k_debug_strings("menuItemWindowP
                    roc::FX_CREATE_WINDOW:",pWin->win_title);
  6582                        	.line	1225
  6583 04:1C06: 18           	clc
  Tue Oct  1 2019  1:02                                                Page 133


  6584 04:1C07: A9 14 00     	lda	#$14
  6585 04:1C0A: 65 09        	adc	<L195+pWin_1
  6586 04:1C0C: 85 01        	sta	<R0
  6587 04:1C0E: A9 00 00     	lda	#$0
  6588 04:1C11: 65 0B        	adc	<L195+pWin_1+2
  6589 04:1C13: 85 03        	sta	<R0+2
  6590 04:1C15: D4 03        	pei	<R0+2
  6591 04:1C17: D4 01        	pei	<R0
  6592 04:1C19: F4 xx xx     	pea	#^L193
  6593 04:1C1C: F4 xx xx     	pea	#<L193
  6594 04:1C1F: 22 xx xx xx  	jsl	~~k_debug_strings
  6595                        ;			break;
  6596                        	.line	1226
  6597 04:1C23: 82 65 00     	brl	L10079
  6598                        ;		case FX_MOUSE_ENTER:
  6599                        	.line	1227
  6600                        L10081:
  6601                        ;			//k_debug_long("menuDropDownWind
                    owProc::ProcessId:",p->procId);
  6602                        ;			k_debug_strings("menuItemWindowP
                    roc::FX_MOUSE_ENTER:",pWin->win_title);
  6603                        	.line	1229
  6604 04:1C26: 18           	clc
  6605 04:1C27: A9 14 00     	lda	#$14
  6606 04:1C2A: 65 09        	adc	<L195+pWin_1
  6607 04:1C2C: 85 01        	sta	<R0
  6608 04:1C2E: A9 00 00     	lda	#$0
  6609 04:1C31: 65 0B        	adc	<L195+pWin_1+2
  6610 04:1C33: 85 03        	sta	<R0+2
  6611 04:1C35: D4 03        	pei	<R0+2
  6612 04:1C37: D4 01        	pei	<R0
  6613 04:1C39: F4 xx xx     	pea	#^L193+38
  6614 04:1C3C: F4 xx xx     	pea	#<L193+38
  6615 04:1C3F: 22 xx xx xx  	jsl	~~k_debug_strings
  6616                        ;
  6617                        ;			//k_vdma_fill_rect(pWin->win_x,p
                    Win->win_y,pWin->win_width,pWin->win_height,k_getUIGadgetCol
                    or());
  6618                        ;			//k_draw_text_point(pWin->win_ti
                    tle,pWin->win_x,pWin->win_y,k_getUIMenuColor());
  6619                        ;
  6620                        ;
  6621                        ;			break;
  6622                        	.line	1235
  6623 04:1C43: 82 45 00     	brl	L10079
  6624                        ;		case FX_MOUSE_EXIT:
  6625                        	.line	1236
  6626                        L10082:
  6627                        ;			//k_debug_long("menuDropDownWind
                    owProc::ProcessId:",p->procId);
  6628                        ;			k_debug_strings("menuItemWindowP
                    roc::FX_MOUSE_EXIT:",pWin->win_title);
  6629                        	.line	1238
  6630 04:1C46: 18           	clc
  6631 04:1C47: A9 14 00     	lda	#$14
  6632 04:1C4A: 65 09        	adc	<L195+pWin_1
  6633 04:1C4C: 85 01        	sta	<R0
  6634 04:1C4E: A9 00 00     	lda	#$0
  Tue Oct  1 2019  1:02                                                Page 134


  6635 04:1C51: 65 0B        	adc	<L195+pWin_1+2
  6636 04:1C53: 85 03        	sta	<R0+2
  6637 04:1C55: D4 03        	pei	<R0+2
  6638 04:1C57: D4 01        	pei	<R0
  6639 04:1C59: F4 xx xx     	pea	#^L193+74
  6640 04:1C5C: F4 xx xx     	pea	#<L193+74
  6641 04:1C5F: 22 xx xx xx  	jsl	~~k_debug_strings
  6642                        ;
  6643                        ;			//k_vdma_fill_rect(pWin->win_x,p
                    Win->win_y,pWin->win_width,pWin->win_height,k_getUIMenuColor
                    ());
  6644                        ;			//k_draw_text_point(pWin->win_ti
                    tle,pWin->win_x,pWin->win_y,k_getUIGadgetColor());
  6645                        ;			break;
  6646                        	.line	1242
  6647 04:1C63: 82 25 00     	brl	L10079
  6648                        ;		case FX_DRAW_WINDOW:
  6649                        	.line	1243
  6650                        L10083:
  6651                        ;			/*
  6652                        ;			size = strlen(pButton->pCaption)
                     * FONTW;
  6653                        ;			k_draw_text_point(pButton->pCapt
                    ion,
  6654                        ;					          pWin->
                    win_x + (pWin->win_width/2)  - (size/2) - 2,
  6655                        ;							
                      pWin->win_y + (pWin->win_height/2) - (4) + 2     , k_getUI
                    GadgetColor()) ;
  6656                        ;							
                      */
  6657                        ;			break;
  6658                        	.line	1250
  6659 04:1C66: 82 22 00     	brl	L10079
  6660                        ;		case FX_CONTROL_COMMAND:
  6661                        	.line	1251
  6662                        L10084:
  6663                        ;			/*
  6664                        ;			k_debug_string("menuItemWindowPr
                    oc::FX_CONTROL_COMMAND\r\n");
  6665                        ;			if( ((PFXCMDMESSAGE)pMsg)->cmdCI
                    d == CTL_CMD_CAPTION )
  6666                        ;			{
  6667                        ;				pButton->pCaption = (LPC
                    HAR)((PFXCMDMESSAGE)pMsg)->parameter1;
  6668                        ;
  6669                        ;				if(pButton->pCaption)
  6670                        ;				{
  6671                        ;					//k_debug_string
                    s("buttonWindowProc::CTL_CMD_CAPTION:", (LPCHAR)pButton->pCa
                    ption );
  6672                        ;
  6673                        ;					size = strlen(pB
                    utton->pCaption) * FONTW;
  6674                        ;					k_draw_text_poin
                    t(pButton->pCaption,
  6675                        ;							
                              pWin->win_x + (pWin->win_width/2)  - (size/2),
  Tue Oct  1 2019  1:02                                                Page 135


  6676                        ;							
                    		  pWin->win_y + (pWin->win_height/2) - (4),k_get
                    UIGadgetColor());
  6677                        ;				}
  6678                        ;			}
  6679                        ;			*/
  6680                        ;			break;
  6681                        	.line	1269
  6682 04:1C69: 82 1F 00     	brl	L10079
  6683                        ;
  6684                        ;		default:
  6685                        	.line	1271
  6686                        L10085:
  6687                        ;			break;
  6688                        	.line	1272
  6689 04:1C6C: 82 1C 00     	brl	L10079
  6690                        ;		}
  6691                        	.line	1273
  6692                        L10078:
  6693                        	xref	~~~swt
  6694 04:1C6F: 22 xx xx xx  	jsl	~~~swt
  6695 04:1C73: 05 00        	dw	5
  6696 04:1C75: 01 0F        	dw	3841
  6697 04:1C77: 25 1C        	dw	L10081-1
  6698 04:1C79: 02 0F        	dw	3842
  6699 04:1C7B: 45 1C        	dw	L10082-1
  6700 04:1C7D: 00 FA        	dw	64000
  6701 04:1C7F: 68 1C        	dw	L10084-1
  6702 04:1C81: 00 FB        	dw	64256
  6703 04:1C83: 65 1C        	dw	L10083-1
  6704 04:1C85: 03 FF        	dw	65283
  6705 04:1C87: 05 1C        	dw	L10080-1
  6706 04:1C89: 6B 1C        	dw	L10085-1
  6707                        L10079:
  6708                        ;	}
  6709                        	.line	1274
  6710                        ;	return TRUE;
  6711                        L10077:
  6712                        	.line	1275
  6713 04:1C8B: A9 01 00     	lda	#$1
  6714                        L198:
  6715 04:1C8E: A8           	tay
  6716 04:1C8F: A5 80        	lda	<L194+2
  6717 04:1C91: 85 84        	sta	<L194+2+4
  6718 04:1C93: A5 7F        	lda	<L194+1
  6719 04:1C95: 85 83        	sta	<L194+1+4
  6720 04:1C97: 2B           	pld
  6721 04:1C98: 3B           	tsc
  6722 04:1C99: 18           	clc
  6723 04:1C9A: 69 82 00     	adc	#L194+4
  6724 04:1C9D: 1B           	tcs
  6725 04:1C9E: 98           	tya
  6726 04:1C9F: 6B           	rtl
  6727                        ;}
  6728                        	.line	1276
  6729                        	.endblock	1276
  6730             0000007E   L194	equ	126
  6731             00000005   L195	equ	5
  Tue Oct  1 2019  1:02                                                Page 136


  6732 04:1CA0:              	ends
  6733                        	efunc
  6734                        	.endfunc	1276,5,126
  6735                        	.line	1276
  6736                        	data
  6737                        L193:
  6738 00:06E9: 6D 65 6E 75  	db	$6D,$65,$6E,$75,$49,$74,$65,$6D,$57,$69,
                    $6E,$64,$6F,$77,$50
       00:06ED: 49 74 65 6D 
       00:06F1: 57 69 6E 64 
       00:06F5: 6F 77 50 
  6739 00:06F8: 72 6F 63 3A  	db	$72,$6F,$63,$3A,$3A,$46,$58,$5F,$43,$52,
                    $45,$41,$54,$45,$5F
       00:06FC: 3A 46 58 5F 
       00:0700: 43 52 45 41 
       00:0704: 54 45 5F 
  6740 00:0707: 57 49 4E 44  	db	$57,$49,$4E,$44,$4F,$57,$3A,$00,$6D,$65,
                    $6E,$75,$49,$74,$65
       00:070B: 4F 57 3A 00 
       00:070F: 6D 65 6E 75 
       00:0713: 49 74 65 
  6741 00:0716: 6D 57 69 6E  	db	$6D,$57,$69,$6E,$64,$6F,$77,$50,$72,$6F,
                    $63,$3A,$3A,$46,$58
       00:071A: 64 6F 77 50 
       00:071E: 72 6F 63 3A 
       00:0722: 3A 46 58 
  6742 00:0725: 5F 4D 4F 55  	db	$5F,$4D,$4F,$55,$53,$45,$5F,$45,$4E,$54,
                    $45,$52,$3A,$00,$6D
       00:0729: 53 45 5F 45 
       00:072D: 4E 54 45 52 
       00:0731: 3A 00 6D 
  6743 00:0734: 65 6E 75 49  	db	$65,$6E,$75,$49,$74,$65,$6D,$57,$69,$6E,
                    $64,$6F,$77,$50,$72
       00:0738: 74 65 6D 57 
       00:073C: 69 6E 64 6F 
       00:0740: 77 50 72 
  6744 00:0743: 6F 63 3A 3A  	db	$6F,$63,$3A,$3A,$46,$58,$5F,$4D,$4F,$55,
                    $53,$45,$5F,$45,$58
       00:0747: 46 58 5F 4D 
       00:074B: 4F 55 53 45 
       00:074F: 5F 45 58 
  6745 00:0752: 49 54 3A 00  	db	$49,$54,$3A,$00
  6746 00:0756:              	ends
  6747                        ;
  6748                        ;
  6749                        ;
  6750                        ;PWINDOW	k_user_CreateMenuDropDown(HWND hWndParen
                    t,LPCSTR caption,HMENU hMenu,int x,int y,int width,int heigh
                    t)
  6751                        ;{
  6752                        	.line	1280
  6753                        	.line	1281
  6754                        	WINMAN
  6755                        	xdef	~~k_user_CreateMenuDropDown
  6756                        	func
  6757                        	.function	1281
  6758                        ~~k_user_CreateMenuDropDown:
  6759                        	longa	on
  Tue Oct  1 2019  1:02                                                Page 137


  6760                        	longi	on
  6761 04:1CA0: 3B           	tsc
  6762 04:1CA1: 38           	sec
  6763 04:1CA2: E9 18 00     	sbc	#L200
  6764 04:1CA5: 1B           	tcs
  6765 04:1CA6: 0B           	phd
  6766 04:1CA7: 5B           	tcd
  6767             00000004   hWndParent_0	set	4
  6768             00000008   caption_0	set	8
  6769             0000000C   hMenu_0	set	12
  6770             00000010   x_0	set	16
  6771             00000012   y_0	set	18
  6772             00000014   width_0	set	20
  6773             00000016   height_0	set	22
  6774                        	.block	1281
  6775                        ;	PWINDOW pWin  = NULL;
  6776                        ;	PMENU   pMenu = NULL;
  6777                        ;	PMENUDROPDOWNDATA pddmData = NULL;
  6778                        ;	RECT rect;
  6779                        ;
  6780                        ;	k_debug_strings("k_user_CreateMenuDropDown:","En
                    ter");
  6781             00000000   pWin_1	set	0
  6782             00000004   pMenu_1	set	4
  6783             00000008   pddmData_1	set	8
  6784             0000000C   rect_1	set	12
  6785                        	.sym	pWin,0,138,1,32,23
  6786                        	.sym	pMenu,4,138,1,32,27
  6787                        	.sym	pddmData,8,138,1,32,28
  6788                        	.sym	rect,12,10,1,64,21
  6789                        	.sym	hWndParent,4,129,6,32
  6790                        	.sym	caption,8,142,6,32
  6791                        	.sym	hMenu,12,129,6,32
  6792                        	.sym	x,16,5,6,16
  6793                        	.sym	y,18,5,6,16
  6794                        	.sym	width,20,5,6,16
  6795                        	.sym	height,22,5,6,16
  6796 04:1CA8: 64 05        	stz	<L201+pWin_1
  6797 04:1CAA: 64 07        	stz	<L201+pWin_1+2
  6798 04:1CAC: 64 09        	stz	<L201+pMenu_1
  6799 04:1CAE: 64 0B        	stz	<L201+pMenu_1+2
  6800 04:1CB0: 64 0D        	stz	<L201+pddmData_1
  6801 04:1CB2: 64 0F        	stz	<L201+pddmData_1+2
  6802                        	.line	1287
  6803 04:1CB4: F4 xx xx     	pea	#^L199+27
  6804 04:1CB7: F4 xx xx     	pea	#<L199+27
  6805 04:1CBA: F4 xx xx     	pea	#^L199
  6806 04:1CBD: F4 xx xx     	pea	#<L199
  6807 04:1CC0: 22 xx xx xx  	jsl	~~k_debug_strings
  6808                        ;
  6809                        ;
  6810                        ;	if(hMenu)
  6811                        	.line	1290
  6812                        ;	{
  6813 04:1CC4: A5 24        	lda	<L200+hMenu_0
  6814 04:1CC6: 05 26        	ora	<L200+hMenu_0+2
  6815 04:1CC8: D0 03        	bne	L203
  6816 04:1CCA: 82 18 01     	brl	L10086
  Tue Oct  1 2019  1:02                                                Page 138


  6817                        L203:
  6818                        	.line	1291
  6819                        ;		rect.x = 0;
  6820                        	.line	1292
  6821 04:1CCD: 64 11        	stz	<L201+rect_1
  6822                        ;		rect.y = 0;
  6823                        	.line	1293
  6824 04:1CCF: 64 13        	stz	<L201+rect_1+2
  6825                        ;		rect.height = 0;
  6826                        	.line	1294
  6827 04:1CD1: 64 17        	stz	<L201+rect_1+6
  6828                        ;		rect.width = 0;
  6829                        	.line	1295
  6830 04:1CD3: 64 15        	stz	<L201+rect_1+4
  6831                        ;
  6832                        ;		/*
  6833                        ;		pMenu = (PMENU)hMenu;
  6834                        ;
  6835                        ;		k_nodelist_foreach_type(pMenu->subMenus,
  6836                        ;							
                    	NL_TYPE_WINDOW_MENU,
  6837                        ;							
                    	&rect,
  6838                        ;							
                    	k_size_dropdown_menus);
  6839                        ;		*/
  6840                        ;
  6841                        ;		pMenu = (PMENU)hMenu;
  6842                        	.line	1306
  6843 04:1CD5: A5 24        	lda	<L200+hMenu_0
  6844 04:1CD7: 85 09        	sta	<L201+pMenu_1
  6845 04:1CD9: A5 26        	lda	<L200+hMenu_0+2
  6846 04:1CDB: 85 0B        	sta	<L201+pMenu_1+2
  6847                        ;
  6848                        ;		pddmData = (PMENUDROPDOWNDATA)k_mem_allo
                    cate_heap(sizeof(MENUDROPDOWNDATA));
  6849                        	.line	1308
  6850 04:1CDD: F4 6A 01     	pea	#<$16a
  6851 04:1CE0: 22 xx xx xx  	jsl	~~k_mem_allocate_heap
  6852 04:1CE4: 85 0D        	sta	<L201+pddmData_1
  6853 04:1CE6: 86 0F        	stx	<L201+pddmData_1+2
  6854                        ;
  6855                        ;		memset(pddmData,0,sizeof(MENUDROPDOWNDAT
                    A));
  6856                        	.line	1310
  6857 04:1CE8: F4 6A 01     	pea	#<$16a
  6858 04:1CEB: F4 00 00     	pea	#<$0
  6859 04:1CEE: D4 0F        	pei	<L201+pddmData_1+2
  6860 04:1CF0: D4 0D        	pei	<L201+pddmData_1
  6861 04:1CF2: 22 xx xx xx  	jsl	~~memset
  6862                        ;
  6863                        ;		/*
  6864                        ;		k_nodelist_foreach_type(pMenu->subMenus,
  6865                        ;							
                    	NL_TYPE_WINDOW_MENU,
  6866                        ;							
                    	pddmData,
  6867                        ;							
  Tue Oct  1 2019  1:02                                                Page 139


                    	k_size_dropdown_menus);
  6868                        ;		*/
  6869                        ;
  6870                        ;		k_debug_pointer("k_user_CreateMenuDropDo
                    wn:pMenu:",pMenu);
  6871                        	.line	1319
  6872 04:1CF6: D4 0B        	pei	<L201+pMenu_1+2
  6873 04:1CF8: D4 09        	pei	<L201+pMenu_1
  6874 04:1CFA: F4 xx xx     	pea	#^L199+33
  6875 04:1CFD: F4 xx xx     	pea	#<L199+33
  6876 04:1D00: 22 xx xx xx  	jsl	~~k_debug_pointer
  6877                        ;
  6878                        ;		k_nodelist_foreach_type(pMenu->subMenus,
  6879                        	.line	1321
  6880                        ;							
                    	NL_TYPE_WINDOW_MENU,
  6881                        ;							
                    	pddmData,
  6882                        ;							
                    	k_size_dropdown_menus);
  6883 04:1D04: F4 04 00     	pea	#^~~k_size_dropdown_menus
  6884 04:1D07: F4 80 19     	pea	#<~~k_size_dropdown_menus
  6885 04:1D0A: D4 0F        	pei	<L201+pddmData_1+2
  6886 04:1D0C: D4 0D        	pei	<L201+pddmData_1
  6887 04:1D0E: F4 03 00     	pea	#<$3
  6888 04:1D11: A0 15 00     	ldy	#$15
  6889 04:1D14: B7 09        	lda	[<L201+pMenu_1],Y
  6890 04:1D16: 48           	pha
  6891 04:1D17: A0 13 00     	ldy	#$13
  6892 04:1D1A: B7 09        	lda	[<L201+pMenu_1],Y
  6893 04:1D1C: 48           	pha
  6894 04:1D1D: 22 xx xx xx  	jsl	~~k_nodelist_foreach_type
  6895                        ;
  6896                        ;
  6897                        ;		pWin = k_user_CreateWindow(FXWS_VISIBLE 
                    | FXWS_BORDER,
  6898                        	.line	1327
  6899                        ;							
                    	   "menuDropDownWindowClass",
  6900                        ;							
                    		caption,
  6901                        ;							
                    		x,y,
  6902                        ;							
                    		pddmData->rect.width,
  6903                        ;							
                    		pddmData->rect.height,
  6904                        ;							
                    		k_user_getDesktopWindow(),
  6905                        ;							
                    		(HMENU)hMenu,
  6906                        ;							
                    		NULL);
  6907 04:1D21: F4 00 00     	pea	#^$0
  6908 04:1D24: F4 00 00     	pea	#<$0
  6909 04:1D27: D4 26        	pei	<L200+hMenu_0+2
  6910 04:1D29: D4 24        	pei	<L200+hMenu_0
  6911 04:1D2B: 22 B9 02 04  	jsl	~~k_user_getDesktopWindow
  Tue Oct  1 2019  1:02                                                Page 140


  6912 04:1D2F: 85 01        	sta	<R0
  6913 04:1D31: 86 03        	stx	<R0+2
  6914 04:1D33: DA           	phx
  6915 04:1D34: 48           	pha
  6916 04:1D35: A0 0A 00     	ldy	#$a
  6917 04:1D38: B7 0D        	lda	[<L201+pddmData_1],Y
  6918 04:1D3A: 48           	pha
  6919 04:1D3B: A0 08 00     	ldy	#$8
  6920 04:1D3E: B7 0D        	lda	[<L201+pddmData_1],Y
  6921 04:1D40: 48           	pha
  6922 04:1D41: D4 2A        	pei	<L200+y_0
  6923 04:1D43: D4 28        	pei	<L200+x_0
  6924 04:1D45: D4 22        	pei	<L200+caption_0+2
  6925 04:1D47: D4 20        	pei	<L200+caption_0
  6926 04:1D49: F4 xx xx     	pea	#^L199+66
  6927 04:1D4C: F4 xx xx     	pea	#<L199+66
  6928 04:1D4F: F4 80 10     	pea	#^$10800000
  6929 04:1D52: F4 00 00     	pea	#<$10800000
  6930 04:1D55: 22 AB 04 04  	jsl	~~k_user_CreateWindow
  6931 04:1D59: 85 05        	sta	<L201+pWin_1
  6932 04:1D5B: 86 07        	stx	<L201+pWin_1+2
  6933                        ;
  6934                        ;		//k_debug_pointer("k_user_CreateMenuDrop
                    Down:pWin:",pWin);
  6935                        ;		if(pWin)
  6936                        	.line	1338
  6937                        ;		{
  6938 04:1D5D: A5 05        	lda	<L201+pWin_1
  6939 04:1D5F: 05 07        	ora	<L201+pWin_1+2
  6940 04:1D61: D0 03        	bne	L204
  6941 04:1D63: 82 7F 00     	brl	L10087
  6942                        L204:
  6943                        	.line	1339
  6944                        ;			pWin->windowData = pddmData;
  6945                        	.line	1340
  6946 04:1D66: A5 0D        	lda	<L201+pddmData_1
  6947 04:1D68: A0 5D 00     	ldy	#$5d
  6948 04:1D6B: 97 05        	sta	[<L201+pWin_1],Y
  6949 04:1D6D: A5 0F        	lda	<L201+pddmData_1+2
  6950 04:1D6F: A0 5F 00     	ldy	#$5f
  6951 04:1D72: 97 05        	sta	[<L201+pWin_1],Y
  6952                        ;
  6953                        ;			pddmData->pParent = pWin;
  6954                        	.line	1342
  6955 04:1D74: A5 05        	lda	<L201+pWin_1
  6956 04:1D76: 87 0D        	sta	[<L201+pddmData_1]
  6957 04:1D78: A5 07        	lda	<L201+pWin_1+2
  6958 04:1D7A: A0 02 00     	ldy	#$2
  6959 04:1D7D: 97 0D        	sta	[<L201+pddmData_1],Y
  6960                        ;
  6961                        ;			/*
  6962                        ;			k_nodelist_foreach_type(pMenu->s
                    ubMenus,
  6963                        ;							
                    		NL_TYPE_WINDOW_MENU,
  6964                        ;							
                    		pddmData,
  6965                        ;							
  Tue Oct  1 2019  1:02                                                Page 141


                    		k_size_dropdown_menus);
  6966                        ;
  6967                        ;
  6968                        ;			//pWin->win_width  = pddmData->r
                    ect.width;
  6969                        ;			//pWin->win_height = pddmData->r
                    ect.height;
  6970                        ;
  6971                        ;			//((PCLICKABLE)pWin->clickable)-
                    >area.width  = pWin->win_width;
  6972                        ;			//((PCLICKABLE)pWin->clickable)-
                    >area.height = pWin->win_height;
  6973                        ;			*/
  6974                        ;
  6975                        ;			k_debug_integer("k_user_CreateMe
                    nuDropDown::win_x:", pWin->win_x);
  6976                        	.line	1358
  6977 04:1D7F: A0 08 00     	ldy	#$8
  6978 04:1D82: B7 05        	lda	[<L201+pWin_1],Y
  6979 04:1D84: 48           	pha
  6980 04:1D85: F4 xx xx     	pea	#^L199+90
  6981 04:1D88: F4 xx xx     	pea	#<L199+90
  6982 04:1D8B: 22 xx xx xx  	jsl	~~k_debug_integer
  6983                        ;			k_debug_integer("k_user_CreateMe
                    nuDropDown::win_y:", pWin->win_y);
  6984                        	.line	1359
  6985 04:1D8F: A0 0A 00     	ldy	#$a
  6986 04:1D92: B7 05        	lda	[<L201+pWin_1],Y
  6987 04:1D94: 48           	pha
  6988 04:1D95: F4 xx xx     	pea	#^L199+124
  6989 04:1D98: F4 xx xx     	pea	#<L199+124
  6990 04:1D9B: 22 xx xx xx  	jsl	~~k_debug_integer
  6991                        ;			k_debug_integer("k_user_CreateMe
                    nuDropDown::rect.width:", pddmData->rect.width);
  6992                        	.line	1360
  6993 04:1D9F: A0 08 00     	ldy	#$8
  6994 04:1DA2: B7 0D        	lda	[<L201+pddmData_1],Y
  6995 04:1DA4: 48           	pha
  6996 04:1DA5: F4 xx xx     	pea	#^L199+158
  6997 04:1DA8: F4 xx xx     	pea	#<L199+158
  6998 04:1DAB: 22 xx xx xx  	jsl	~~k_debug_integer
  6999                        ;			k_debug_integer("k_user_CreateMe
                    nuDropDown::rect.height:", pddmData->rect.height);
  7000                        	.line	1361
  7001 04:1DAF: A0 0A 00     	ldy	#$a
  7002 04:1DB2: B7 0D        	lda	[<L201+pddmData_1],Y
  7003 04:1DB4: 48           	pha
  7004 04:1DB5: F4 xx xx     	pea	#^L199+197
  7005 04:1DB8: F4 xx xx     	pea	#<L199+197
  7006 04:1DBB: 22 xx xx xx  	jsl	~~k_debug_integer
  7007                        ;
  7008                        ;
  7009                        ;			k_debug_pointer("k_user_CreateMe
                    nuDropDown:pWin:",pWin);
  7010                        	.line	1364
  7011 04:1DBF: D4 07        	pei	<L201+pWin_1+2
  7012 04:1DC1: D4 05        	pei	<L201+pWin_1
  7013 04:1DC3: F4 xx xx     	pea	#^L199+237
  Tue Oct  1 2019  1:02                                                Page 142


  7014 04:1DC6: F4 xx xx     	pea	#<L199+237
  7015 04:1DC9: 22 xx xx xx  	jsl	~~k_debug_pointer
  7016                        ;			k_debug_pointer("k_user_CreateMe
                    nuDropDown:ParentWin:",k_getWindowFromHandle(hWndParent));
  7017                        	.line	1365
  7018 04:1DCD: D4 1E        	pei	<L200+hWndParent_0+2
  7019 04:1DCF: D4 1C        	pei	<L200+hWndParent_0
  7020 04:1DD1: 22 AA 03 04  	jsl	~~k_getWindowFromHandle
  7021 04:1DD5: 85 01        	sta	<R0
  7022 04:1DD7: 86 03        	stx	<R0+2
  7023 04:1DD9: DA           	phx
  7024 04:1DDA: 48           	pha
  7025 04:1DDB: F4 xx xx     	pea	#^L199+269
  7026 04:1DDE: F4 xx xx     	pea	#<L199+269
  7027 04:1DE1: 22 xx xx xx  	jsl	~~k_debug_pointer
  7028                        ;
  7029                        ;			//k_add_child_window(k_getWindow
                    FromHandle(hWndParent),pWin,k_update_hover_location);
  7030                        ;
  7031                        ;			//k_debug_strings("k_user_Create
                    Button:","k_send_window_message");
  7032                        ;			//k_send_window_message(k_getHan
                    dleFromWindow(pWin),FX_CREATE_WINDOW,NULL,0);
  7033                        ;			//k_debug_strings("k_user_Create
                    Button:","k_send_command_message");
  7034                        ;			//k_send_command_message(k_getHa
                    ndleFromWindow(pWin),FX_CONTROL_COMMAND,CTL_CMD_CAPTION,0,(U
                    LONG)k_string_copy_string(caption),0L);
  7035                        ;		}
  7036                        	.line	1373
  7037                        ;
  7038                        ;	}
  7039                        L10087:
  7040                        	.line	1375
  7041                        ;
  7042                        ;	k_debug_strings("k_user_CreateMenuDropDown:","Ex
                    it");
  7043                        L10086:
  7044                        	.line	1377
  7045 04:1DE5: F4 xx xx     	pea	#^L199+333
  7046 04:1DE8: F4 xx xx     	pea	#<L199+333
  7047 04:1DEB: F4 xx xx     	pea	#^L199+306
  7048 04:1DEE: F4 xx xx     	pea	#<L199+306
  7049 04:1DF1: 22 xx xx xx  	jsl	~~k_debug_strings
  7050                        ;
  7051                        ;	return pWin;
  7052                        	.line	1379
  7053 04:1DF5: A6 07        	ldx	<L201+pWin_1+2
  7054 04:1DF7: A5 05        	lda	<L201+pWin_1
  7055                        L205:
  7056 04:1DF9: A8           	tay
  7057 04:1DFA: A5 1A        	lda	<L200+2
  7058 04:1DFC: 85 2E        	sta	<L200+2+20
  7059 04:1DFE: A5 19        	lda	<L200+1
  7060 04:1E00: 85 2D        	sta	<L200+1+20
  7061 04:1E02: 2B           	pld
  7062 04:1E03: 3B           	tsc
  7063 04:1E04: 18           	clc
  Tue Oct  1 2019  1:02                                                Page 143


  7064 04:1E05: 69 2C 00     	adc	#L200+20
  7065 04:1E08: 1B           	tcs
  7066 04:1E09: 98           	tya
  7067 04:1E0A: 6B           	rtl
  7068                        ;}
  7069                        	.line	1380
  7070                        	.endblock	1380
  7071             00000018   L200	equ	24
  7072             00000005   L201	equ	5
  7073 04:1E0B:              	ends
  7074                        	efunc
  7075                        	.endfunc	1380,5,24
  7076                        	.line	1380
  7077                        	data
  7078                        L199:
  7079 00:0756: 6B 5F 75 73  	db	$6B,$5F,$75,$73,$65,$72,$5F,$43,$72,$65,
                    $61,$74,$65,$4D,$65
       00:075A: 65 72 5F 43 
       00:075E: 72 65 61 74 
       00:0762: 65 4D 65 
  7080 00:0765: 6E 75 44 72  	db	$6E,$75,$44,$72,$6F,$70,$44,$6F,$77,$6E,
                    $3A,$00,$45,$6E,$74
       00:0769: 6F 70 44 6F 
       00:076D: 77 6E 3A 00 
       00:0771: 45 6E 74 
  7081 00:0774: 65 72 00 6B  	db	$65,$72,$00,$6B,$5F,$75,$73,$65,$72,$5F,
                    $43,$72,$65,$61,$74
       00:0778: 5F 75 73 65 
       00:077C: 72 5F 43 72 
       00:0780: 65 61 74 
  7082 00:0783: 65 4D 65 6E  	db	$65,$4D,$65,$6E,$75,$44,$72,$6F,$70,$44,
                    $6F,$77,$6E,$3A,$70
       00:0787: 75 44 72 6F 
       00:078B: 70 44 6F 77 
       00:078F: 6E 3A 70 
  7083 00:0792: 4D 65 6E 75  	db	$4D,$65,$6E,$75,$3A,$00,$6D,$65,$6E,$75,
                    $44,$72,$6F,$70,$44
       00:0796: 3A 00 6D 65 
       00:079A: 6E 75 44 72 
       00:079E: 6F 70 44 
  7084 00:07A1: 6F 77 6E 57  	db	$6F,$77,$6E,$57,$69,$6E,$64,$6F,$77,$43,
                    $6C,$61,$73,$73,$00
       00:07A5: 69 6E 64 6F 
       00:07A9: 77 43 6C 61 
       00:07AD: 73 73 00 
  7085 00:07B0: 6B 5F 75 73  	db	$6B,$5F,$75,$73,$65,$72,$5F,$43,$72,$65,
                    $61,$74,$65,$4D,$65
       00:07B4: 65 72 5F 43 
       00:07B8: 72 65 61 74 
       00:07BC: 65 4D 65 
  7086 00:07BF: 6E 75 44 72  	db	$6E,$75,$44,$72,$6F,$70,$44,$6F,$77,$6E,
                    $3A,$3A,$77,$69,$6E
       00:07C3: 6F 70 44 6F 
       00:07C7: 77 6E 3A 3A 
       00:07CB: 77 69 6E 
  7087 00:07CE: 5F 78 3A 00  	db	$5F,$78,$3A,$00,$6B,$5F,$75,$73,$65,$72,
                    $5F,$43,$72,$65,$61
       00:07D2: 6B 5F 75 73 
  Tue Oct  1 2019  1:02                                                Page 144


       00:07D6: 65 72 5F 43 
       00:07DA: 72 65 61 
  7088 00:07DD: 74 65 4D 65  	db	$74,$65,$4D,$65,$6E,$75,$44,$72,$6F,$70,
                    $44,$6F,$77,$6E,$3A
       00:07E1: 6E 75 44 72 
       00:07E5: 6F 70 44 6F 
       00:07E9: 77 6E 3A 
  7089 00:07EC: 3A 77 69 6E  	db	$3A,$77,$69,$6E,$5F,$79,$3A,$00,$6B,$5F,
                    $75,$73,$65,$72,$5F
       00:07F0: 5F 79 3A 00 
       00:07F4: 6B 5F 75 73 
       00:07F8: 65 72 5F 
  7090 00:07FB: 43 72 65 61  	db	$43,$72,$65,$61,$74,$65,$4D,$65,$6E,$75,
                    $44,$72,$6F,$70,$44
       00:07FF: 74 65 4D 65 
       00:0803: 6E 75 44 72 
       00:0807: 6F 70 44 
  7091 00:080A: 6F 77 6E 3A  	db	$6F,$77,$6E,$3A,$3A,$72,$65,$63,$74,$2E,
                    $77,$69,$64,$74,$68
       00:080E: 3A 72 65 63 
       00:0812: 74 2E 77 69 
       00:0816: 64 74 68 
  7092 00:0819: 3A 00 6B 5F  	db	$3A,$00,$6B,$5F,$75,$73,$65,$72,$5F,$43,
                    $72,$65,$61,$74,$65
       00:081D: 75 73 65 72 
       00:0821: 5F 43 72 65 
       00:0825: 61 74 65 
  7093 00:0828: 4D 65 6E 75  	db	$4D,$65,$6E,$75,$44,$72,$6F,$70,$44,$6F,
                    $77,$6E,$3A,$3A,$72
       00:082C: 44 72 6F 70 
       00:0830: 44 6F 77 6E 
       00:0834: 3A 3A 72 
  7094 00:0837: 65 63 74 2E  	db	$65,$63,$74,$2E,$68,$65,$69,$67,$68,$74,
                    $3A,$00,$6B,$5F,$75
       00:083B: 68 65 69 67 
       00:083F: 68 74 3A 00 
       00:0843: 6B 5F 75 
  7095 00:0846: 73 65 72 5F  	db	$73,$65,$72,$5F,$43,$72,$65,$61,$74,$65,
                    $4D,$65,$6E,$75,$44
       00:084A: 43 72 65 61 
       00:084E: 74 65 4D 65 
       00:0852: 6E 75 44 
  7096 00:0855: 72 6F 70 44  	db	$72,$6F,$70,$44,$6F,$77,$6E,$3A,$70,$57,
                    $69,$6E,$3A,$00,$6B
       00:0859: 6F 77 6E 3A 
       00:085D: 70 57 69 6E 
       00:0861: 3A 00 6B 
  7097 00:0864: 5F 75 73 65  	db	$5F,$75,$73,$65,$72,$5F,$43,$72,$65,$61,
                    $74,$65,$4D,$65,$6E
       00:0868: 72 5F 43 72 
       00:086C: 65 61 74 65 
       00:0870: 4D 65 6E 
  7098 00:0873: 75 44 72 6F  	db	$75,$44,$72,$6F,$70,$44,$6F,$77,$6E,$3A,
                    $50,$61,$72,$65,$6E
       00:0877: 70 44 6F 77 
       00:087B: 6E 3A 50 61 
       00:087F: 72 65 6E 
  7099 00:0882: 74 57 69 6E  	db	$74,$57,$69,$6E,$3A,$00,$6B,$5F,$75,$73,
  Tue Oct  1 2019  1:02                                                Page 145


                    $65,$72,$5F,$43,$72
       00:0886: 3A 00 6B 5F 
       00:088A: 75 73 65 72 
       00:088E: 5F 43 72 
  7100 00:0891: 65 61 74 65  	db	$65,$61,$74,$65,$4D,$65,$6E,$75,$44,$72,
                    $6F,$70,$44,$6F,$77
       00:0895: 4D 65 6E 75 
       00:0899: 44 72 6F 70 
       00:089D: 44 6F 77 
  7101 00:08A0: 6E 3A 00 45  	db	$6E,$3A,$00,$45,$78,$69,$74,$00
       00:08A4: 78 69 74 00 
  7102 00:08A8:              	ends
  7103                        ;
  7104                        ;
  7105                        ;BOOL menuDropDownWindowProc(PFXOSMESSAGE pMsg)
  7106                        ;{
  7107                        	.line	1383
  7108                        	.line	1384
  7109                        	WINMAN
  7110                        	xdef	~~menuDropDownWindowProc
  7111                        	func
  7112                        	.function	1384
  7113                        ~~menuDropDownWindowProc:
  7114                        	longa	on
  7115                        	longi	on
  7116 04:1E0B: 3B           	tsc
  7117 04:1E0C: 38           	sec
  7118 04:1E0D: E9 7A 00     	sbc	#L207
  7119 04:1E10: 1B           	tcs
  7120 04:1E11: 0B           	phd
  7121 04:1E12: 5B           	tcd
  7122             00000004   pMsg_0	set	4
  7123                        	.block	1384
  7124                        ;	PFXPROCESS p = NULL;
  7125                        ;	PWINDOW	   pWin = NULL;
  7126                        ;	PBUTTON	   pButton = NULL;
  7127                        ;	//LPCSTR	   captions[] = {"About FX/OS...
                    ",NULL};
  7128                        ;	LPCSTR	   captions[25];
  7129                        ;	UINT	   size = 0;
  7130                        ;	PMENU	   pMenu = NULL;
  7131                        ;	PMENUDROPDOWNDATA pddmData = NULL;
  7132                        ;
  7133                        ;	if(pMsg!=NULL)
  7134             00000000   p_1	set	0
  7135             00000004   pWin_1	set	4
  7136             00000008   pButton_1	set	8
  7137             0000000C   captions_1	set	12
  7138             00000070   size_1	set	112
  7139             00000072   pMenu_1	set	114
  7140             00000076   pddmData_1	set	118
  7141                        	.sym	p,0,138,1,32,16
  7142                        	.sym	pWin,4,138,1,32,23
  7143                        	.sym	pButton,8,138,1,32,29
  7144                        	.sym	captions,12,1134,1,32,25
  7145                        	.sym	size,112,16,1,16
  7146                        	.sym	pMenu,114,138,1,32,27
  7147                        	.sym	pddmData,118,138,1,32,28
  Tue Oct  1 2019  1:02                                                Page 146


  7148                        	.sym	pMsg,4,138,6,32,12
  7149 04:1E13: 64 01        	stz	<L208+p_1
  7150 04:1E15: 64 03        	stz	<L208+p_1+2
  7151 04:1E17: 64 05        	stz	<L208+pWin_1
  7152 04:1E19: 64 07        	stz	<L208+pWin_1+2
  7153 04:1E1B: 64 09        	stz	<L208+pButton_1
  7154 04:1E1D: 64 0B        	stz	<L208+pButton_1+2
  7155 04:1E1F: 64 71        	stz	<L208+size_1
  7156 04:1E21: 64 73        	stz	<L208+pMenu_1
  7157 04:1E23: 64 75        	stz	<L208+pMenu_1+2
  7158 04:1E25: 64 77        	stz	<L208+pddmData_1
  7159 04:1E27: 64 79        	stz	<L208+pddmData_1+2
  7160                        	.line	1394
  7161                        ;	{
  7162 04:1E29: A5 7E        	lda	<L207+pMsg_0
  7163 04:1E2B: 05 80        	ora	<L207+pMsg_0+2
  7164 04:1E2D: D0 03        	bne	L210
  7165 04:1E2F: 82 F2 00     	brl	L10088
  7166                        L210:
  7167                        	.line	1395
  7168                        ;		p = k_exec_get_current_process();
  7169                        	.line	1396
  7170 04:1E32: 22 xx xx xx  	jsl	~~k_exec_get_current_process
  7171 04:1E36: 85 01        	sta	<L208+p_1
  7172 04:1E38: 86 03        	stx	<L208+p_1+2
  7173                        ;		pWin = k_getWindowFromHandle(pMsg->hwnd)
                    ;
  7174                        	.line	1397
  7175 04:1E3A: A0 0C 00     	ldy	#$c
  7176 04:1E3D: B7 7E        	lda	[<L207+pMsg_0],Y
  7177 04:1E3F: 48           	pha
  7178 04:1E40: A0 0A 00     	ldy	#$a
  7179 04:1E43: B7 7E        	lda	[<L207+pMsg_0],Y
  7180 04:1E45: 48           	pha
  7181 04:1E46: 22 AA 03 04  	jsl	~~k_getWindowFromHandle
  7182 04:1E4A: 85 05        	sta	<L208+pWin_1
  7183 04:1E4C: 86 07        	stx	<L208+pWin_1+2
  7184                        ;		//pButton = ((PBUTTON)pWin->windowData);
  7185                        ;		//k_debug_long("consoleWindowProc::Proce
                    ssId:",p->procId);
  7186                        ;
  7187                        ;		switch(pMsg->type)
  7188                        	.line	1401
  7189 04:1E4E: A0 08 00     	ldy	#$8
  7190 04:1E51: B7 7E        	lda	[<L207+pMsg_0],Y
  7191 04:1E53: 82 AA 00     	brl	L10089
  7192                        ;		{
  7193                        	.line	1402
  7194                        ;		case FX_CREATE_WINDOW:
  7195                        	.line	1403
  7196                        L10091:
  7197                        ;			//k_debug_long("menuDropDownWind
                    owProc::ProcessId:",p->procId);
  7198                        ;			k_debug_string("menuDropDownWind
                    owProc::FX_CREATE_WINDOW\r\n");
  7199                        	.line	1405
  7200 04:1E56: F4 xx xx     	pea	#^L206
  7201 04:1E59: F4 xx xx     	pea	#<L206
  Tue Oct  1 2019  1:02                                                Page 147


  7202 04:1E5C: 22 xx xx xx  	jsl	~~k_debug_string
  7203                        ;
  7204                        ;			/*
  7205                        ;			pWin->windowData = (PMENUDROPDOW
                    NDATA)k_mem_allocate_heap(sizeof(MENUDROPDOWNDATA));
  7206                        ;			if(pWin->windowData)
  7207                        ;			{
  7208                        ;				pddmData = (PMENUDROPDOW
                    NDATA)pWin->windowData;
  7209                        ;				if(pWin->hMenu)
  7210                        ;				{
  7211                        ;					memset(pddmData,
                    0,sizeof(MENUDROPDOWNDATA));
  7212                        ;
  7213                        ;					pMenu = (PMENU)p
                    Win->hMenu;
  7214                        ;
  7215                        ;
  7216                        ;
  7217                        ;					k_nodelist_forea
                    ch_type(pMenu->subMenus,
  7218                        ;							
                    				NL_TYPE_WINDOW_MENU,
  7219                        ;							
                    				pddmData,
  7220                        ;							
                    				k_size_dropdown_menus);
  7221                        ;
  7222                        ;
  7223                        ;
  7224                        ;					//pWin->win_x 	
                    	= pddmData->rect.x;
  7225                        ;					//pWin->win_y 	
                    	= pddmData->rect.y;
  7226                        ;					pWin->win_width 
                    	= pddmData->rect.width;
  7227                        ;					pWin->win_height
                     	= pddmData->rect.height;
  7228                        ;
  7229                        ;					pWin->isVisible 
                    = TRUE;
  7230                        ;
  7231                        ;					k_create_context
                    _menu(pWin->win_x,
  7232                        ;							
                    			  pWin->win_y,
  7233                        ;							
                    			  pWin->win_width,
  7234                        ;							
                    			  pWin->win_height,
  7235                        ;							
                    			  pddmData->captions,
  7236                        ;							
                    			  k_getUIGadgetColor(),
  7237                        ;							
                    			  k_getUIMenuColor());
  7238                        ;
  7239                        ;
  Tue Oct  1 2019  1:02                                                Page 148


  7240                        ;				}
  7241                        ;			}
  7242                        ;			*/
  7243                        ;
  7244                        ;			/*
  7245                        ;			size = 0;
  7246                        ;			while(captions[size])
  7247                        ;			{
  7248                        ;				k_debug_strings("       
                                     caption:",(LPCHAR)captions[size]);
  7249                        ;				size++;
  7250                        ;			}
  7251                        ;			*/
  7252                        ;			pWin->isVisible = TRUE;
  7253                        	.line	1455
  7254 04:1E60: E2 20        	sep	#$20
  7255                        	longa	off
  7256 04:1E62: A9 01        	lda	#$1
  7257 04:1E64: A0 5C 00     	ldy	#$5c
  7258 04:1E67: 97 05        	sta	[<L208+pWin_1],Y
  7259 04:1E69: C2 20        	rep	#$20
  7260                        	longa	on
  7261                        ;
  7262                        ;			/*
  7263                        ;			pddmData = (PMENUDROPDOWNDATA)pW
                    in->windowData;
  7264                        ;			if(pddmData)
  7265                        ;			{
  7266                        ;				k_create_context_menu(pW
                    in->win_x,
  7267                        ;							
                    		  pWin->win_y,
  7268                        ;							
                    		  pWin->win_width,
  7269                        ;							
                    		  pWin->win_height,
  7270                        ;							
                    		  pddmData->captions,
  7271                        ;							
                    		  k_getUIGadgetColor(),
  7272                        ;							
                    		  k_getUIMenuColor());
  7273                        ;			}
  7274                        ;			*/
  7275                        ;
  7276                        ;			break;
  7277                        	.line	1471
  7278 04:1E6B: 82 B6 00     	brl	L10090
  7279                        ;		case FX_DRAW_WINDOW:
  7280                        	.line	1472
  7281                        L10092:
  7282                        ;			k_debug_string("menuDropDownWind
                    owProc::FX_DRAW_WINDOW\r\n");
  7283                        	.line	1473
  7284 04:1E6E: F4 xx xx     	pea	#^L206+43
  7285 04:1E71: F4 xx xx     	pea	#<L206+43
  7286 04:1E74: 22 xx xx xx  	jsl	~~k_debug_string
  7287                        ;
  Tue Oct  1 2019  1:02                                                Page 149


  7288                        ;			pddmData = (PMENUDROPDOWNDATA)pW
                    in->windowData;
  7289                        	.line	1475
  7290 04:1E78: A0 5D 00     	ldy	#$5d
  7291 04:1E7B: B7 05        	lda	[<L208+pWin_1],Y
  7292 04:1E7D: 85 77        	sta	<L208+pddmData_1
  7293 04:1E7F: A0 5F 00     	ldy	#$5f
  7294 04:1E82: B7 05        	lda	[<L208+pWin_1],Y
  7295 04:1E84: 85 79        	sta	<L208+pddmData_1+2
  7296                        ;			if(pddmData)
  7297                        	.line	1476
  7298                        ;			{
  7299 04:1E86: A5 77        	lda	<L208+pddmData_1
  7300 04:1E88: 05 79        	ora	<L208+pddmData_1+2
  7301 04:1E8A: D0 03        	bne	L211
  7302 04:1E8C: 82 00 00     	brl	L10093
  7303                        L211:
  7304                        	.line	1477
  7305                        ;				/*
  7306                        ;				k_create_context_menu(pW
                    in->win_x,
  7307                        ;							
                    		  pWin->win_y,
  7308                        ;							
                    		  pWin->win_width,
  7309                        ;							
                    		  pWin->win_height,
  7310                        ;							
                    		  pddmData->captions,
  7311                        ;							
                    		  k_getUIGadgetColor(),
  7312                        ;							
                    		  k_getUIMenuColor());
  7313                        ;							
                    		  */
  7314                        ;			}
  7315                        	.line	1487
  7316                        ;
  7317                        ;			break;
  7318                        L10093:
  7319                        	.line	1489
  7320 04:1E8F: 82 92 00     	brl	L10090
  7321                        ;		case FX_LBUTTON_DOWN:
  7322                        	.line	1490
  7323                        L10094:
  7324                        ;			k_debug_string("menuDropDownWind
                    owProc::FX_LBUTTON_DOWN\r\n");
  7325                        	.line	1491
  7326 04:1E92: F4 xx xx     	pea	#^L206+84
  7327 04:1E95: F4 xx xx     	pea	#<L206+84
  7328 04:1E98: 22 xx xx xx  	jsl	~~k_debug_string
  7329                        ;
  7330                        ;			break;
  7331                        	.line	1493
  7332 04:1E9C: 82 85 00     	brl	L10090
  7333                        ;
  7334                        ;		case FX_LBUTTON_UP:
  7335                        	.line	1495
  Tue Oct  1 2019  1:02                                                Page 150


  7336                        L10095:
  7337                        ;			k_debug_string("menuDropDownWind
                    owProc::FX_LBUTTON_UP\r\n");
  7338                        	.line	1496
  7339 04:1E9F: F4 xx xx     	pea	#^L206+126
  7340 04:1EA2: F4 xx xx     	pea	#<L206+126
  7341 04:1EA5: 22 xx xx xx  	jsl	~~k_debug_string
  7342                        ;			break;
  7343                        	.line	1497
  7344 04:1EA9: 82 78 00     	brl	L10090
  7345                        ;		case FX_MOUSE_ENTER:
  7346                        	.line	1498
  7347                        L10096:
  7348                        ;			k_debug_string("menuDropDownWind
                    owProc::FX_MOUSE_ENTER\r\n");
  7349                        	.line	1499
  7350 04:1EAC: F4 xx xx     	pea	#^L206+166
  7351 04:1EAF: F4 xx xx     	pea	#<L206+166
  7352 04:1EB2: 22 xx xx xx  	jsl	~~k_debug_string
  7353                        ;
  7354                        ;			break;
  7355                        	.line	1501
  7356 04:1EB6: 82 6B 00     	brl	L10090
  7357                        ;		case FX_MOUSE_MOVE:
  7358                        	.line	1502
  7359                        L10097:
  7360                        ;			k_debug_string("menuDropDownWind
                    owProc::FX_MOUSE_MOVE\r\n");
  7361                        	.line	1503
  7362 04:1EB9: F4 xx xx     	pea	#^L206+207
  7363 04:1EBC: F4 xx xx     	pea	#<L206+207
  7364 04:1EBF: 22 xx xx xx  	jsl	~~k_debug_string
  7365                        ;			break;
  7366                        	.line	1504
  7367 04:1EC3: 82 5E 00     	brl	L10090
  7368                        ;
  7369                        ;		case FX_MOUSE_EXIT:
  7370                        	.line	1506
  7371                        L10098:
  7372                        ;			k_debug_string("menuDropDownWind
                    owProc::FX_MOUSE_EXIT\r\n");
  7373                        	.line	1507
  7374 04:1EC6: F4 xx xx     	pea	#^L206+247
  7375 04:1EC9: F4 xx xx     	pea	#<L206+247
  7376 04:1ECC: 22 xx xx xx  	jsl	~~k_debug_string
  7377                        ;
  7378                        ;
  7379                        ;			/*
  7380                        ;			if(k_user_IsChildWindow(k_getHan
                    dleFromWindow(pWin),k_user_getFocusWindow()))
  7381                        ;			{
  7382                        ;				k_debug_string("menuDrop
                    DownWindowProc::FX_MOUSE_EXIT:*** IS MENU CHILD ***\r\n");
  7383                        ;			}
  7384                        ;			*/
  7385                        ;
  7386                        ;			k_scratch_restore_bitblt(0,0,
  7387                        	.line	1517
  Tue Oct  1 2019  1:02                                                Page 151


  7388                        ;							
                    		 pWin->win_width,
  7389                        ;							
                    		 pWin->win_height,
  7390                        ;							
                    		 pWin->win_x,
  7391                        ;							
                    		 pWin->win_y);
  7392 04:1ED0: A0 0A 00     	ldy	#$a
  7393 04:1ED3: B7 05        	lda	[<L208+pWin_1],Y
  7394 04:1ED5: 48           	pha
  7395 04:1ED6: A0 08 00     	ldy	#$8
  7396 04:1ED9: B7 05        	lda	[<L208+pWin_1],Y
  7397 04:1EDB: 48           	pha
  7398 04:1EDC: A0 0E 00     	ldy	#$e
  7399 04:1EDF: B7 05        	lda	[<L208+pWin_1],Y
  7400 04:1EE1: 48           	pha
  7401 04:1EE2: A0 0C 00     	ldy	#$c
  7402 04:1EE5: B7 05        	lda	[<L208+pWin_1],Y
  7403 04:1EE7: 48           	pha
  7404 04:1EE8: F4 00 00     	pea	#<$0
  7405 04:1EEB: F4 00 00     	pea	#<$0
  7406 04:1EEE: 22 xx xx xx  	jsl	~~k_scratch_restore_bitblt
  7407                        ;
  7408                        ;			/*
  7409                        ;			k_vdma_fill_rect(100,100,100,50,
                    15);
  7410                        ;			k_scratch_save_bitblt(100,100, 1
                    00,50, 0,0);
  7411                        ;			k_scratch_restore_bitblt(0,0, 10
                    0,50, 100,151);
  7412                        ;
  7413                        ;			//k_shadow_fill_rect_address(BIT
                    MAP_BANK_0,201, 100, 100, 50, 15);
  7414                        ;			k_shadow_fill_rect_address(SHADO
                    W_BANK_0,201, 100, 100, 50, 15);
  7415                        ;			k_scratch_save_bitblt(201,100, 1
                    00,50, 0,0);
  7416                        ;			k_scratch_restore_bitblt(0,0, 10
                    0,50, 201,151);
  7417                        ;			*/
  7418                        ;			//k_send_window_message(k_user_g
                    etDesktopWindow(),FX_DRAW_WINDOW,NULL,0);
  7419                        ;
  7420                        ;			break;
  7421                        	.line	1535
  7422 04:1EF2: 82 2F 00     	brl	L10090
  7423                        ;		default:
  7424                        	.line	1536
  7425                        L10099:
  7426                        ;			DefWindowProc(pMsg);
  7427                        	.line	1537
  7428 04:1EF5: D4 80        	pei	<L207+pMsg_0+2
  7429 04:1EF7: D4 7E        	pei	<L207+pMsg_0
  7430 04:1EF9: 22 40 2B 04  	jsl	~~DefWindowProc
  7431                        ;			break;
  7432                        	.line	1538
  7433 04:1EFD: 82 24 00     	brl	L10090
  Tue Oct  1 2019  1:02                                                Page 152


  7434                        ;		}
  7435                        	.line	1539
  7436                        L10089:
  7437                        	xref	~~~swt
  7438 04:1F00: 22 xx xx xx  	jsl	~~~swt
  7439 04:1F04: 07 00        	dw	7
  7440 04:1F06: 01 0F        	dw	3841
  7441 04:1F08: AB 1E        	dw	L10096-1
  7442 04:1F0A: 02 0F        	dw	3842
  7443 04:1F0C: C5 1E        	dw	L10098-1
  7444 04:1F0E: 03 0F        	dw	3843
  7445 04:1F10: B8 1E        	dw	L10097-1
  7446 04:1F12: 04 0F        	dw	3844
  7447 04:1F14: 91 1E        	dw	L10094-1
  7448 04:1F16: 06 0F        	dw	3846
  7449 04:1F18: 9E 1E        	dw	L10095-1
  7450 04:1F1A: 00 FB        	dw	64256
  7451 04:1F1C: 6D 1E        	dw	L10092-1
  7452 04:1F1E: 03 FF        	dw	65283
  7453 04:1F20: 55 1E        	dw	L10091-1
  7454 04:1F22: F4 1E        	dw	L10099-1
  7455                        L10090:
  7456                        ;	}
  7457                        	.line	1540
  7458                        ;
  7459                        ;	return TRUE;
  7460                        L10088:
  7461                        	.line	1542
  7462 04:1F24: A9 01 00     	lda	#$1
  7463                        L212:
  7464 04:1F27: A8           	tay
  7465 04:1F28: A5 7C        	lda	<L207+2
  7466 04:1F2A: 85 80        	sta	<L207+2+4
  7467 04:1F2C: A5 7B        	lda	<L207+1
  7468 04:1F2E: 85 7F        	sta	<L207+1+4
  7469 04:1F30: 2B           	pld
  7470 04:1F31: 3B           	tsc
  7471 04:1F32: 18           	clc
  7472 04:1F33: 69 7E 00     	adc	#L207+4
  7473 04:1F36: 1B           	tcs
  7474 04:1F37: 98           	tya
  7475 04:1F38: 6B           	rtl
  7476                        ;
  7477                        ;}
  7478                        	.line	1544
  7479                        	.endblock	1544
  7480             0000007A   L207	equ	122
  7481             00000001   L208	equ	1
  7482 04:1F39:              	ends
  7483                        	efunc
  7484                        	.endfunc	1544,1,122
  7485                        	.line	1544
  7486                        	data
  7487                        L206:
  7488 00:08A8: 6D 65 6E 75  	db	$6D,$65,$6E,$75,$44,$72,$6F,$70,$44,$6F,
                    $77,$6E,$57,$69,$6E
       00:08AC: 44 72 6F 70 
       00:08B0: 44 6F 77 6E 
  Tue Oct  1 2019  1:02                                                Page 153


       00:08B4: 57 69 6E 
  7489 00:08B7: 64 6F 77 50  	db	$64,$6F,$77,$50,$72,$6F,$63,$3A,$3A,$46,
                    $58,$5F,$43,$52,$45
       00:08BB: 72 6F 63 3A 
       00:08BF: 3A 46 58 5F 
       00:08C3: 43 52 45 
  7490 00:08C6: 41 54 45 5F  	db	$41,$54,$45,$5F,$57,$49,$4E,$44,$4F,$57,
                    $0D,$0A,$00,$6D,$65
       00:08CA: 57 49 4E 44 
       00:08CE: 4F 57 0D 0A 
       00:08D2: 00 6D 65 
  7491 00:08D5: 6E 75 44 72  	db	$6E,$75,$44,$72,$6F,$70,$44,$6F,$77,$6E,
                    $57,$69,$6E,$64,$6F
       00:08D9: 6F 70 44 6F 
       00:08DD: 77 6E 57 69 
       00:08E1: 6E 64 6F 
  7492 00:08E4: 77 50 72 6F  	db	$77,$50,$72,$6F,$63,$3A,$3A,$46,$58,$5F,
                    $44,$52,$41,$57,$5F
       00:08E8: 63 3A 3A 46 
       00:08EC: 58 5F 44 52 
       00:08F0: 41 57 5F 
  7493 00:08F3: 57 49 4E 44  	db	$57,$49,$4E,$44,$4F,$57,$0D,$0A,$00,$6D,
                    $65,$6E,$75,$44,$72
       00:08F7: 4F 57 0D 0A 
       00:08FB: 00 6D 65 6E 
       00:08FF: 75 44 72 
  7494 00:0902: 6F 70 44 6F  	db	$6F,$70,$44,$6F,$77,$6E,$57,$69,$6E,$64,
                    $6F,$77,$50,$72,$6F
       00:0906: 77 6E 57 69 
       00:090A: 6E 64 6F 77 
       00:090E: 50 72 6F 
  7495 00:0911: 63 3A 3A 46  	db	$63,$3A,$3A,$46,$58,$5F,$4C,$42,$55,$54,
                    $54,$4F,$4E,$5F,$44
       00:0915: 58 5F 4C 42 
       00:0919: 55 54 54 4F 
       00:091D: 4E 5F 44 
  7496 00:0920: 4F 57 4E 0D  	db	$4F,$57,$4E,$0D,$0A,$00,$6D,$65,$6E,$75,
                    $44,$72,$6F,$70,$44
       00:0924: 0A 00 6D 65 
       00:0928: 6E 75 44 72 
       00:092C: 6F 70 44 
  7497 00:092F: 6F 77 6E 57  	db	$6F,$77,$6E,$57,$69,$6E,$64,$6F,$77,$50,
                    $72,$6F,$63,$3A,$3A
       00:0933: 69 6E 64 6F 
       00:0937: 77 50 72 6F 
       00:093B: 63 3A 3A 
  7498 00:093E: 46 58 5F 4C  	db	$46,$58,$5F,$4C,$42,$55,$54,$54,$4F,$4E,
                    $5F,$55,$50,$0D,$0A
       00:0942: 42 55 54 54 
       00:0946: 4F 4E 5F 55 
       00:094A: 50 0D 0A 
  7499 00:094D: 00 6D 65 6E  	db	$00,$6D,$65,$6E,$75,$44,$72,$6F,$70,$44,
                    $6F,$77,$6E,$57,$69
       00:0951: 75 44 72 6F 
       00:0955: 70 44 6F 77 
       00:0959: 6E 57 69 
  7500 00:095C: 6E 64 6F 77  	db	$6E,$64,$6F,$77,$50,$72,$6F,$63,$3A,$3A,
                    $46,$58,$5F,$4D,$4F
  Tue Oct  1 2019  1:02                                                Page 154


       00:0960: 50 72 6F 63 
       00:0964: 3A 3A 46 58 
       00:0968: 5F 4D 4F 
  7501 00:096B: 55 53 45 5F  	db	$55,$53,$45,$5F,$45,$4E,$54,$45,$52,$0D,
                    $0A,$00,$6D,$65,$6E
       00:096F: 45 4E 54 45 
       00:0973: 52 0D 0A 00 
       00:0977: 6D 65 6E 
  7502 00:097A: 75 44 72 6F  	db	$75,$44,$72,$6F,$70,$44,$6F,$77,$6E,$57,
                    $69,$6E,$64,$6F,$77
       00:097E: 70 44 6F 77 
       00:0982: 6E 57 69 6E 
       00:0986: 64 6F 77 
  7503 00:0989: 50 72 6F 63  	db	$50,$72,$6F,$63,$3A,$3A,$46,$58,$5F,$4D,
                    $4F,$55,$53,$45,$5F
       00:098D: 3A 3A 46 58 
       00:0991: 5F 4D 4F 55 
       00:0995: 53 45 5F 
  7504 00:0998: 4D 4F 56 45  	db	$4D,$4F,$56,$45,$0D,$0A,$00,$6D,$65,$6E,
                    $75,$44,$72,$6F,$70
       00:099C: 0D 0A 00 6D 
       00:09A0: 65 6E 75 44 
       00:09A4: 72 6F 70 
  7505 00:09A7: 44 6F 77 6E  	db	$44,$6F,$77,$6E,$57,$69,$6E,$64,$6F,$77,
                    $50,$72,$6F,$63,$3A
       00:09AB: 57 69 6E 64 
       00:09AF: 6F 77 50 72 
       00:09B3: 6F 63 3A 
  7506 00:09B6: 3A 46 58 5F  	db	$3A,$46,$58,$5F,$4D,$4F,$55,$53,$45,$5F,
                    $45,$58,$49,$54,$0D
       00:09BA: 4D 4F 55 53 
       00:09BE: 45 5F 45 58 
       00:09C2: 49 54 0D 
  7507 00:09C5: 0A 00        	db	$0A,$00
  7508 00:09C7:              	ends
  7509                        ;
  7510                        ;
  7511                        ;
  7512                        ;BOOL k_add_child_window(PWINDOW pParent,PWINDOW p
                    Child,OBJECTCLICKED objclickCallback)
  7513                        ;{
  7514                        	.line	1548
  7515                        	.line	1549
  7516                        	WINMAN
  7517                        	xdef	~~k_add_child_window
  7518                        	func
  7519                        	.function	1549
  7520                        ~~k_add_child_window:
  7521                        	longa	on
  7522                        	longi	on
  7523 04:1F39: 3B           	tsc
  7524 04:1F3A: 38           	sec
  7525 04:1F3B: E9 09 00     	sbc	#L214
  7526 04:1F3E: 1B           	tcs
  7527 04:1F3F: 0B           	phd
  7528 04:1F40: 5B           	tcd
  7529             00000004   pParent_0	set	4
  7530             00000008   pChild_0	set	8
  Tue Oct  1 2019  1:02                                                Page 155


  7531             0000000C   objclickCallback_0	set	12
  7532                        	.block	1549
  7533                        ;	BOOL bRet = FALSE;
  7534                        ;
  7535                        ;	PFXNODE new = NULL;
  7536                        ;
  7537                        ;	if(pParent && pChild)
  7538             00000000   bRet_1	set	0
  7539             00000001   new_1	set	1
  7540                        	.sym	bRet,0,14,1,8
  7541                        	.sym	new,1,138,1,32,2
  7542                        	.sym	pParent,4,138,6,32,23
  7543                        	.sym	pChild,8,138,6,32,23
  7544                        	.sym	objclickCallback,12,641,6,32
  7545 04:1F41: E2 20        	sep	#$20
  7546                        	longa	off
  7547 04:1F43: 64 05        	stz	<L215+bRet_1
  7548 04:1F45: C2 20        	rep	#$20
  7549                        	longa	on
  7550 04:1F47: 64 06        	stz	<L215+new_1
  7551 04:1F49: 64 08        	stz	<L215+new_1+2
  7552                        	.line	1554
  7553                        ;	{
  7554 04:1F4B: A5 0D        	lda	<L214+pParent_0
  7555 04:1F4D: 05 0F        	ora	<L214+pParent_0+2
  7556 04:1F4F: D0 03        	bne	L217
  7557 04:1F51: 82 13 01     	brl	L10100
  7558                        L217:
  7559 04:1F54: A5 11        	lda	<L214+pChild_0
  7560 04:1F56: 05 13        	ora	<L214+pChild_0+2
  7561 04:1F58: D0 03        	bne	L218
  7562 04:1F5A: 82 0A 01     	brl	L10100
  7563                        L218:
  7564                        	.line	1555
  7565                        ;		new = k_nodelist_ncreate(NL_TYPE_WINDOW_
                    OBJ,(ULONG)k_getHandleFromWindow(pChild),pChild,NULL,NULL);
  7566                        	.line	1556
  7567 04:1F5D: F4 00 00     	pea	#^$0
  7568 04:1F60: F4 00 00     	pea	#<$0
  7569 04:1F63: F4 00 00     	pea	#^$0
  7570 04:1F66: F4 00 00     	pea	#<$0
  7571 04:1F69: D4 13        	pei	<L214+pChild_0+2
  7572 04:1F6B: D4 11        	pei	<L214+pChild_0
  7573 04:1F6D: D4 13        	pei	<L214+pChild_0+2
  7574 04:1F6F: D4 11        	pei	<L214+pChild_0
  7575 04:1F71: 22 8C 03 04  	jsl	~~k_getHandleFromWindow
  7576 04:1F75: 85 01        	sta	<R0
  7577 04:1F77: 86 03        	stx	<R0+2
  7578 04:1F79: D4 03        	pei	<R0+2
  7579 04:1F7B: D4 01        	pei	<R0
  7580 04:1F7D: F4 02 00     	pea	#<$2
  7581 04:1F80: 22 xx xx xx  	jsl	~~k_nodelist_ncreate
  7582 04:1F84: 85 06        	sta	<L215+new_1
  7583 04:1F86: 86 08        	stx	<L215+new_1+2
  7584                        ;		k_debug_strings("Created Child node:",pC
                    hild->win_title);
  7585                        	.line	1557
  7586 04:1F88: 18           	clc
  Tue Oct  1 2019  1:02                                                Page 156


  7587 04:1F89: A9 14 00     	lda	#$14
  7588 04:1F8C: 65 11        	adc	<L214+pChild_0
  7589 04:1F8E: 85 01        	sta	<R0
  7590 04:1F90: A9 00 00     	lda	#$0
  7591 04:1F93: 65 13        	adc	<L214+pChild_0+2
  7592 04:1F95: 85 03        	sta	<R0+2
  7593 04:1F97: D4 03        	pei	<R0+2
  7594 04:1F99: D4 01        	pei	<R0
  7595 04:1F9B: F4 xx xx     	pea	#^L213
  7596 04:1F9E: F4 xx xx     	pea	#<L213
  7597 04:1FA1: 22 xx xx xx  	jsl	~~k_debug_strings
  7598                        ;
  7599                        ;		if(!pParent->pChildWindows)
  7600                        	.line	1559
  7601                        ;		{
  7602 04:1FA5: A0 54 00     	ldy	#$54
  7603 04:1FA8: B7 0D        	lda	[<L214+pParent_0],Y
  7604 04:1FAA: A0 56 00     	ldy	#$56
  7605 04:1FAD: 17 0D        	ora	[<L214+pParent_0],Y
  7606 04:1FAF: F0 03        	beq	L219
  7607 04:1FB1: 82 38 00     	brl	L10101
  7608                        L219:
  7609                        	.line	1560
  7610                        ;			pParent->pChildWindows = k_nodel
                    ist_allocate_list("_child_window_class_list" ,k_deallocate_w
                    indow_class);
  7611                        	.line	1561
  7612 04:1FB4: F4 04 00     	pea	#^~~k_deallocate_window_class
  7613 04:1FB7: F4 00 00     	pea	#<~~k_deallocate_window_class
  7614 04:1FBA: F4 xx xx     	pea	#^L213+20
  7615 04:1FBD: F4 xx xx     	pea	#<L213+20
  7616 04:1FC0: 22 xx xx xx  	jsl	~~k_nodelist_allocate_list
  7617 04:1FC4: 85 01        	sta	<R0
  7618 04:1FC6: 86 03        	stx	<R0+2
  7619 04:1FC8: A5 01        	lda	<R0
  7620 04:1FCA: A0 54 00     	ldy	#$54
  7621 04:1FCD: 97 0D        	sta	[<L214+pParent_0],Y
  7622 04:1FCF: A5 03        	lda	<R0+2
  7623 04:1FD1: A0 56 00     	ldy	#$56
  7624 04:1FD4: 97 0D        	sta	[<L214+pParent_0],Y
  7625                        ;			k_debug_pointer("k_add_child_win
                    dow:pChildWindows created:",pParent->pChildWindows);
  7626                        	.line	1562
  7627 04:1FD6: A0 56 00     	ldy	#$56
  7628 04:1FD9: B7 0D        	lda	[<L214+pParent_0],Y
  7629 04:1FDB: 48           	pha
  7630 04:1FDC: A0 54 00     	ldy	#$54
  7631 04:1FDF: B7 0D        	lda	[<L214+pParent_0],Y
  7632 04:1FE1: 48           	pha
  7633 04:1FE2: F4 xx xx     	pea	#^L213+45
  7634 04:1FE5: F4 xx xx     	pea	#<L213+45
  7635 04:1FE8: 22 xx xx xx  	jsl	~~k_debug_pointer
  7636                        ;		}
  7637                        	.line	1563
  7638                        ;
  7639                        ;		if(!pParent->pChildHitList)
  7640                        L10101:
  7641                        	.line	1565
  Tue Oct  1 2019  1:02                                                Page 157


  7642                        ;		{
  7643 04:1FEC: A0 58 00     	ldy	#$58
  7644 04:1FEF: B7 0D        	lda	[<L214+pParent_0],Y
  7645 04:1FF1: A0 5A 00     	ldy	#$5a
  7646 04:1FF4: 17 0D        	ora	[<L214+pParent_0],Y
  7647 04:1FF6: F0 03        	beq	L220
  7648 04:1FF8: 82 38 00     	brl	L10102
  7649                        L220:
  7650                        	.line	1566
  7651                        ;			pParent->pChildHitList = k_nodel
                    ist_allocate_list("_child_hit_list" ,k_deallocate_hit_class)
                    ;
  7652                        	.line	1567
  7653 04:1FFB: F4 04 00     	pea	#^~~k_deallocate_hit_class
  7654 04:1FFE: F4 60 00     	pea	#<~~k_deallocate_hit_class
  7655 04:2001: F4 xx xx     	pea	#^L213+87
  7656 04:2004: F4 xx xx     	pea	#<L213+87
  7657 04:2007: 22 xx xx xx  	jsl	~~k_nodelist_allocate_list
  7658 04:200B: 85 01        	sta	<R0
  7659 04:200D: 86 03        	stx	<R0+2
  7660 04:200F: A5 01        	lda	<R0
  7661 04:2011: A0 58 00     	ldy	#$58
  7662 04:2014: 97 0D        	sta	[<L214+pParent_0],Y
  7663 04:2016: A5 03        	lda	<R0+2
  7664 04:2018: A0 5A 00     	ldy	#$5a
  7665 04:201B: 97 0D        	sta	[<L214+pParent_0],Y
  7666                        ;			k_debug_pointer("k_add_child_win
                    dow:pChildHitList created:",pParent->pChildHitList);
  7667                        	.line	1568
  7668 04:201D: A0 5A 00     	ldy	#$5a
  7669 04:2020: B7 0D        	lda	[<L214+pParent_0],Y
  7670 04:2022: 48           	pha
  7671 04:2023: A0 58 00     	ldy	#$58
  7672 04:2026: B7 0D        	lda	[<L214+pParent_0],Y
  7673 04:2028: 48           	pha
  7674 04:2029: F4 xx xx     	pea	#^L213+103
  7675 04:202C: F4 xx xx     	pea	#<L213+103
  7676 04:202F: 22 xx xx xx  	jsl	~~k_debug_pointer
  7677                        ;		}
  7678                        	.line	1569
  7679                        ;
  7680                        ;		//k_debug_pointer("k_add_child_window:pC
                    hildWindows:",pParent->pChildWindows);
  7681                        ;		//k_debug_pointer("k_add_child_window:pC
                    hildHitList:",pParent->pChildHitList);
  7682                        ;
  7683                        ;		k_nodelist_addnodetolist(pParent->pChild
                    Windows,new);
  7684                        L10102:
  7685                        	.line	1574
  7686 04:2033: D4 08        	pei	<L215+new_1+2
  7687 04:2035: D4 06        	pei	<L215+new_1
  7688 04:2037: A0 56 00     	ldy	#$56
  7689 04:203A: B7 0D        	lda	[<L214+pParent_0],Y
  7690 04:203C: 48           	pha
  7691 04:203D: A0 54 00     	ldy	#$54
  7692 04:2040: B7 0D        	lda	[<L214+pParent_0],Y
  7693 04:2042: 48           	pha
  Tue Oct  1 2019  1:02                                                Page 158


  7694 04:2043: 22 xx xx xx  	jsl	~~k_nodelist_addnodetolist
  7695                        ;
  7696                        ;		//k_debug_strings("Node List for:",pPare
                    nt->win_title);
  7697                        ;		//k_debug_nodelist(pParent->pChildWindow
                    s->listhead->next);
  7698                        ;		k_attach_mouse_detection_local(pParent->
                    pChildHitList,pChild,objclickCallback);
  7699                        	.line	1578
  7700 04:2047: D4 17        	pei	<L214+objclickCallback_0+2
  7701 04:2049: D4 15        	pei	<L214+objclickCallback_0
  7702 04:204B: D4 13        	pei	<L214+pChild_0+2
  7703 04:204D: D4 11        	pei	<L214+pChild_0
  7704 04:204F: A0 5A 00     	ldy	#$5a
  7705 04:2052: B7 0D        	lda	[<L214+pParent_0],Y
  7706 04:2054: 48           	pha
  7707 04:2055: A0 58 00     	ldy	#$58
  7708 04:2058: B7 0D        	lda	[<L214+pParent_0],Y
  7709 04:205A: 48           	pha
  7710 04:205B: 22 0D 23 04  	jsl	~~k_attach_mouse_detection_local
  7711                        ;
  7712                        ;		bRet = TRUE;
  7713                        	.line	1580
  7714 04:205F: E2 20        	sep	#$20
  7715                        	longa	off
  7716 04:2061: A9 01        	lda	#$1
  7717 04:2063: 85 05        	sta	<L215+bRet_1
  7718 04:2065: C2 20        	rep	#$20
  7719                        	longa	on
  7720                        ;	}
  7721                        	.line	1581
  7722                        ;
  7723                        ;	return bRet;
  7724                        L10100:
  7725                        	.line	1583
  7726 04:2067: A5 05        	lda	<L215+bRet_1
  7727 04:2069: 29 FF 00     	and	#$ff
  7728                        L221:
  7729 04:206C: A8           	tay
  7730 04:206D: A5 0B        	lda	<L214+2
  7731 04:206F: 85 17        	sta	<L214+2+12
  7732 04:2071: A5 0A        	lda	<L214+1
  7733 04:2073: 85 16        	sta	<L214+1+12
  7734 04:2075: 2B           	pld
  7735 04:2076: 3B           	tsc
  7736 04:2077: 18           	clc
  7737 04:2078: 69 15 00     	adc	#L214+12
  7738 04:207B: 1B           	tcs
  7739 04:207C: 98           	tya
  7740 04:207D: 6B           	rtl
  7741                        ;}
  7742                        	.line	1584
  7743                        	.endblock	1584
  7744             00000009   L214	equ	9
  7745             00000005   L215	equ	5
  7746 04:207E:              	ends
  7747                        	efunc
  7748                        	.endfunc	1584,5,9
  Tue Oct  1 2019  1:02                                                Page 159


  7749                        	.line	1584
  7750                        	data
  7751                        L213:
  7752 00:09C7: 43 72 65 61  	db	$43,$72,$65,$61,$74,$65,$64,$20,$43,$68,
                    $69,$6C,$64,$20,$6E
       00:09CB: 74 65 64 20 
       00:09CF: 43 68 69 6C 
       00:09D3: 64 20 6E 
  7753 00:09D6: 6F 64 65 3A  	db	$6F,$64,$65,$3A,$00,$5F,$63,$68,$69,$6C,
                    $64,$5F,$77,$69,$6E
       00:09DA: 00 5F 63 68 
       00:09DE: 69 6C 64 5F 
       00:09E2: 77 69 6E 
  7754 00:09E5: 64 6F 77 5F  	db	$64,$6F,$77,$5F,$63,$6C,$61,$73,$73,$5F,
                    $6C,$69,$73,$74,$00
       00:09E9: 63 6C 61 73 
       00:09ED: 73 5F 6C 69 
       00:09F1: 73 74 00 
  7755 00:09F4: 6B 5F 61 64  	db	$6B,$5F,$61,$64,$64,$5F,$63,$68,$69,$6C,
                    $64,$5F,$77,$69,$6E
       00:09F8: 64 5F 63 68 
       00:09FC: 69 6C 64 5F 
       00:0A00: 77 69 6E 
  7756 00:0A03: 64 6F 77 3A  	db	$64,$6F,$77,$3A,$70,$43,$68,$69,$6C,$64,
                    $57,$69,$6E,$64,$6F
       00:0A07: 70 43 68 69 
       00:0A0B: 6C 64 57 69 
       00:0A0F: 6E 64 6F 
  7757 00:0A12: 77 73 20 63  	db	$77,$73,$20,$63,$72,$65,$61,$74,$65,$64,
                    $3A,$00,$5F,$63,$68
       00:0A16: 72 65 61 74 
       00:0A1A: 65 64 3A 00 
       00:0A1E: 5F 63 68 
  7758 00:0A21: 69 6C 64 5F  	db	$69,$6C,$64,$5F,$68,$69,$74,$5F,$6C,$69,
                    $73,$74,$00,$6B,$5F
       00:0A25: 68 69 74 5F 
       00:0A29: 6C 69 73 74 
       00:0A2D: 00 6B 5F 
  7759 00:0A30: 61 64 64 5F  	db	$61,$64,$64,$5F,$63,$68,$69,$6C,$64,$5F,
                    $77,$69,$6E,$64,$6F
       00:0A34: 63 68 69 6C 
       00:0A38: 64 5F 77 69 
       00:0A3C: 6E 64 6F 
  7760 00:0A3F: 77 3A 70 43  	db	$77,$3A,$70,$43,$68,$69,$6C,$64,$48,$69,
                    $74,$4C,$69,$73,$74
       00:0A43: 68 69 6C 64 
       00:0A47: 48 69 74 4C 
       00:0A4B: 69 73 74 
  7761 00:0A4E: 20 63 72 65  	db	$20,$63,$72,$65,$61,$74,$65,$64,$3A,$00
       00:0A52: 61 74 65 64 
       00:0A56: 3A 00 
  7762 00:0A58:              	ends
  7763                        ;
  7764                        ;void k_update_hover_location(PWINDOW pWin)
  7765                        ;{
  7766                        	.line	1586
  7767                        	.line	1587
  7768                        	WINMAN
  Tue Oct  1 2019  1:02                                                Page 160


  7769                        	xdef	~~k_update_hover_location
  7770                        	func
  7771                        	.function	1587
  7772                        ~~k_update_hover_location:
  7773                        	longa	on
  7774                        	longi	on
  7775 04:207E: 3B           	tsc
  7776 04:207F: 38           	sec
  7777 04:2080: E9 08 00     	sbc	#L223
  7778 04:2083: 1B           	tcs
  7779 04:2084: 0B           	phd
  7780 04:2085: 5B           	tcd
  7781             00000004   pWin_0	set	4
  7782                        	.block	1587
  7783                        ;	PWINDOW pOld = NULL;
  7784                        ;
  7785                        ;	k_debug_strings("k_menuHitDetected::pWin:",pWin-
                    >win_title);
  7786             00000000   pOld_1	set	0
  7787                        	.sym	pOld,0,138,1,32,23
  7788                        	.sym	pWin,4,138,6,32,23
  7789 04:2086: 64 05        	stz	<L224+pOld_1
  7790 04:2088: 64 07        	stz	<L224+pOld_1+2
  7791                        	.line	1590
  7792 04:208A: 18           	clc
  7793 04:208B: A9 14 00     	lda	#$14
  7794 04:208E: 65 0C        	adc	<L223+pWin_0
  7795 04:2090: 85 01        	sta	<R0
  7796 04:2092: A9 00 00     	lda	#$0
  7797 04:2095: 65 0E        	adc	<L223+pWin_0+2
  7798 04:2097: 85 03        	sta	<R0+2
  7799 04:2099: D4 03        	pei	<R0+2
  7800 04:209B: D4 01        	pei	<R0
  7801 04:209D: F4 xx xx     	pea	#^L222
  7802 04:20A0: F4 xx xx     	pea	#<L222
  7803 04:20A3: 22 xx xx xx  	jsl	~~k_debug_strings
  7804                        ;
  7805                        ;	//k_debug_strings("k_menuHitDetected::pWin:",pWi
                    n->win_title);
  7806                        ;
  7807                        ;	if(_k_windowManager_WindowObjectList->listData!=
                    pWin)
  7808                        	.line	1594
  7809                        ;	{
  7810 04:20A7: AD xx xx     	lda	|~~_k_windowManager_WindowObjectList
  7811 04:20AA: 85 01        	sta	<R0
  7812 04:20AC: AD xx xx     	lda	|~~_k_windowManager_WindowObjectList+2
  7813 04:20AF: 85 03        	sta	<R0+2
  7814 04:20B1: A0 04 00     	ldy	#$4
  7815 04:20B4: B7 01        	lda	[<R0],Y
  7816 04:20B6: C5 0C        	cmp	<L223+pWin_0
  7817 04:20B8: D0 07        	bne	L226
  7818 04:20BA: A0 06 00     	ldy	#$6
  7819 04:20BD: B7 01        	lda	[<R0],Y
  7820 04:20BF: C5 0E        	cmp	<L223+pWin_0+2
  7821                        L226:
  7822 04:20C1: D0 03        	bne	L227
  7823 04:20C3: 82 8E 00     	brl	L10103
  Tue Oct  1 2019  1:02                                                Page 161


  7824                        L227:
  7825                        	.line	1595
  7826                        ;		if(_k_windowManager_WindowObjectList->li
                    stData != NULL)
  7827                        	.line	1596
  7828                        ;		{
  7829 04:20C6: AD xx xx     	lda	|~~_k_windowManager_WindowObjectList
  7830 04:20C9: 85 01        	sta	<R0
  7831 04:20CB: AD xx xx     	lda	|~~_k_windowManager_WindowObjectList+2
  7832 04:20CE: 85 03        	sta	<R0+2
  7833 04:20D0: A0 04 00     	ldy	#$4
  7834 04:20D3: B7 01        	lda	[<R0],Y
  7835 04:20D5: A0 06 00     	ldy	#$6
  7836 04:20D8: 17 01        	ora	[<R0],Y
  7837 04:20DA: D0 03        	bne	L228
  7838 04:20DC: 82 18 00     	brl	L10104
  7839                        L228:
  7840                        	.line	1597
  7841                        ;			pOld = _k_windowManager_WindowOb
                    jectList->listData;
  7842                        	.line	1598
  7843 04:20DF: AD xx xx     	lda	|~~_k_windowManager_WindowObjectList
  7844 04:20E2: 85 01        	sta	<R0
  7845 04:20E4: AD xx xx     	lda	|~~_k_windowManager_WindowObjectList+2
  7846 04:20E7: 85 03        	sta	<R0+2
  7847 04:20E9: A0 04 00     	ldy	#$4
  7848 04:20EC: B7 01        	lda	[<R0],Y
  7849 04:20EE: 85 05        	sta	<L224+pOld_1
  7850 04:20F0: A0 06 00     	ldy	#$6
  7851 04:20F3: B7 01        	lda	[<R0],Y
  7852 04:20F5: 85 07        	sta	<L224+pOld_1+2
  7853                        ;			//k_debug_strings("k_menuHitDete
                    cted::pOld:",pOld->win_title);
  7854                        ;			/*
  7855                        ;			k_vdraw_ui_window(FXWS_OVERLAPPE
                    D,
  7856                        ;							
                      pWin->win_x ,pWin->win_y,
  7857                        ;							
                      pWin->win_height,pWin->win_width,
  7858                        ;							
                      (LPCHAR)pWin->win_title,
  7859                        ;							
                      15, 3);*/
  7860                        ;		}
  7861                        	.line	1606
  7862                        ;		_k_windowManager_WindowObjectList->listD
                    ata=pWin;
  7863                        L10104:
  7864                        	.line	1607
  7865 04:20F7: AD xx xx     	lda	|~~_k_windowManager_WindowObjectList
  7866 04:20FA: 85 01        	sta	<R0
  7867 04:20FC: AD xx xx     	lda	|~~_k_windowManager_WindowObjectList+2
  7868 04:20FF: 85 03        	sta	<R0+2
  7869 04:2101: A5 0C        	lda	<L223+pWin_0
  7870 04:2103: A0 04 00     	ldy	#$4
  7871 04:2106: 97 01        	sta	[<R0],Y
  7872 04:2108: A5 0E        	lda	<L223+pWin_0+2
  Tue Oct  1 2019  1:02                                                Page 162


  7873 04:210A: A0 06 00     	ldy	#$6
  7874 04:210D: 97 01        	sta	[<R0],Y
  7875                        ;
  7876                        ;		k_send_window_message(k_getHandleFromWin
                    dow(pWin),FX_MOUSE_ENTER,NULL,0);
  7877                        	.line	1609
  7878 04:210F: F4 00 00     	pea	#<$0
  7879 04:2112: F4 00 00     	pea	#^$0
  7880 04:2115: F4 00 00     	pea	#<$0
  7881 04:2118: F4 01 0F     	pea	#<$f01
  7882 04:211B: D4 0E        	pei	<L223+pWin_0+2
  7883 04:211D: D4 0C        	pei	<L223+pWin_0
  7884 04:211F: 22 8C 03 04  	jsl	~~k_getHandleFromWindow
  7885 04:2123: 85 01        	sta	<R0
  7886 04:2125: 86 03        	stx	<R0+2
  7887 04:2127: DA           	phx
  7888 04:2128: 48           	pha
  7889 04:2129: 22 xx xx xx  	jsl	~~k_send_window_message
  7890                        ;		if(pOld)
  7891                        	.line	1610
  7892                        ;		{
  7893 04:212D: A5 05        	lda	<L224+pOld_1
  7894 04:212F: 05 07        	ora	<L224+pOld_1+2
  7895 04:2131: D0 03        	bne	L229
  7896 04:2133: 82 1E 00     	brl	L10105
  7897                        L229:
  7898                        	.line	1611
  7899                        ;			k_send_window_message(k_getHandl
                    eFromWindow(pOld),FX_MOUSE_EXIT,NULL,0);
  7900                        	.line	1612
  7901 04:2136: F4 00 00     	pea	#<$0
  7902 04:2139: F4 00 00     	pea	#^$0
  7903 04:213C: F4 00 00     	pea	#<$0
  7904 04:213F: F4 02 0F     	pea	#<$f02
  7905 04:2142: D4 07        	pei	<L224+pOld_1+2
  7906 04:2144: D4 05        	pei	<L224+pOld_1
  7907 04:2146: 22 8C 03 04  	jsl	~~k_getHandleFromWindow
  7908 04:214A: 85 01        	sta	<R0
  7909 04:214C: 86 03        	stx	<R0+2
  7910 04:214E: DA           	phx
  7911 04:214F: 48           	pha
  7912 04:2150: 22 xx xx xx  	jsl	~~k_send_window_message
  7913                        ;		}
  7914                        	.line	1613
  7915                        ;		//k_send_window_message(k_getHandleFromW
                    indow(pWin),FX_MOUSE_ENTER,NULL,0);
  7916                        ;	}
  7917                        L10105:
  7918                        	.line	1615
  7919                        ;
  7920                        ;}
  7921                        L10103:
  7922                        	.line	1617
  7923                        L230:
  7924 04:2154: A5 0A        	lda	<L223+2
  7925 04:2156: 85 0E        	sta	<L223+2+4
  7926 04:2158: A5 09        	lda	<L223+1
  7927 04:215A: 85 0D        	sta	<L223+1+4
  Tue Oct  1 2019  1:02                                                Page 163


  7928 04:215C: 2B           	pld
  7929 04:215D: 3B           	tsc
  7930 04:215E: 18           	clc
  7931 04:215F: 69 0C 00     	adc	#L223+4
  7932 04:2162: 1B           	tcs
  7933 04:2163: 6B           	rtl
  7934                        	.endblock	1617
  7935             00000008   L223	equ	8
  7936             00000005   L224	equ	5
  7937 04:2164:              	ends
  7938                        	efunc
  7939                        	.endfunc	1617,5,8
  7940                        	.line	1617
  7941                        	data
  7942                        L222:
  7943 00:0A58: 6B 5F 6D 65  	db	$6B,$5F,$6D,$65,$6E,$75,$48,$69,$74,$44,
                    $65,$74,$65,$63,$74
       00:0A5C: 6E 75 48 69 
       00:0A60: 74 44 65 74 
       00:0A64: 65 63 74 
  7944 00:0A67: 65 64 3A 3A  	db	$65,$64,$3A,$3A,$70,$57,$69,$6E,$3A,$00
       00:0A6B: 70 57 69 6E 
       00:0A6F: 3A 00 
  7945 00:0A71:              	ends
  7946                        ;
  7947                        ;HWND k_user_getFocusWindow()
  7948                        ;{
  7949                        	.line	1619
  7950                        	.line	1620
  7951                        	WINMAN
  7952                        	xdef	~~k_user_getFocusWindow
  7953                        	func
  7954                        	.function	1620
  7955                        ~~k_user_getFocusWindow:
  7956                        	longa	on
  7957                        	longi	on
  7958 04:2164: 3B           	tsc
  7959 04:2165: 38           	sec
  7960 04:2166: E9 04 00     	sbc	#L232
  7961 04:2169: 1B           	tcs
  7962 04:216A: 0B           	phd
  7963 04:216B: 5B           	tcd
  7964                        	.block	1620
  7965                        ;	return k_getHandleFromWindow((PWINDOW) _k_window
                    Manager_WindowObjectList->listData);
  7966                        	.line	1621
  7967 04:216C: AD xx xx     	lda	|~~_k_windowManager_WindowObjectList
  7968 04:216F: 85 01        	sta	<R0
  7969 04:2171: AD xx xx     	lda	|~~_k_windowManager_WindowObjectList+2
  7970 04:2174: 85 03        	sta	<R0+2
  7971 04:2176: A0 06 00     	ldy	#$6
  7972 04:2179: B7 01        	lda	[<R0],Y
  7973 04:217B: 48           	pha
  7974 04:217C: A0 04 00     	ldy	#$4
  7975 04:217F: B7 01        	lda	[<R0],Y
  7976 04:2181: 48           	pha
  7977 04:2182: 22 8C 03 04  	jsl	~~k_getHandleFromWindow
  7978 04:2186: 85 01        	sta	<R0
  Tue Oct  1 2019  1:02                                                Page 164


  7979 04:2188: 86 03        	stx	<R0+2
  7980 04:218A: A6 03        	ldx	<R0+2
  7981 04:218C: A5 01        	lda	<R0
  7982                        L235:
  7983 04:218E: A8           	tay
  7984 04:218F: 2B           	pld
  7985 04:2190: 3B           	tsc
  7986 04:2191: 18           	clc
  7987 04:2192: 69 04 00     	adc	#L232
  7988 04:2195: 1B           	tcs
  7989 04:2196: 98           	tya
  7990 04:2197: 6B           	rtl
  7991                        ;}
  7992                        	.line	1622
  7993                        	.endblock	1622
  7994             00000004   L232	equ	4
  7995             00000005   L233	equ	5
  7996 04:2198:              	ends
  7997                        	efunc
  7998                        	.endfunc	1622,5,4
  7999                        	.line	1622
  8000                        ;
  8001                        ;BOOL find_child_window(LPVOID ctx,LPVOID data)
  8002                        ;{
  8003                        	.line	1624
  8004                        	.line	1625
  8005                        	WINMAN
  8006                        	xdef	~~find_child_window
  8007                        	func
  8008                        	.function	1625
  8009                        ~~find_child_window:
  8010                        	longa	on
  8011                        	longi	on
  8012 04:2198: 3B           	tsc
  8013 04:2199: 38           	sec
  8014 04:219A: E9 08 00     	sbc	#L236
  8015 04:219D: 1B           	tcs
  8016 04:219E: 0B           	phd
  8017 04:219F: 5B           	tcd
  8018             00000004   ctx_0	set	4
  8019             00000008   data_0	set	8
  8020                        	.block	1625
  8021                        ;	PWINDOW pChild = (PWINDOW)ctx;
  8022                        ;
  8023                        ;	if(ctx && data)
  8024             00000000   pChild_1	set	0
  8025                        	.sym	pChild,0,138,1,32,23
  8026                        	.sym	ctx,4,129,6,32
  8027                        	.sym	data,8,129,6,32
  8028 04:21A0: A5 0C        	lda	<L236+ctx_0
  8029 04:21A2: 85 05        	sta	<L237+pChild_1
  8030 04:21A4: A5 0E        	lda	<L236+ctx_0+2
  8031 04:21A6: 85 07        	sta	<L237+pChild_1+2
  8032                        	.line	1628
  8033                        ;	{
  8034 04:21A8: A5 0C        	lda	<L236+ctx_0
  8035 04:21AA: 05 0E        	ora	<L236+ctx_0+2
  8036 04:21AC: D0 03        	bne	L239
  Tue Oct  1 2019  1:02                                                Page 165


  8037 04:21AE: 82 33 00     	brl	L10106
  8038                        L239:
  8039 04:21B1: A5 10        	lda	<L236+data_0
  8040 04:21B3: 05 12        	ora	<L236+data_0+2
  8041 04:21B5: D0 03        	bne	L240
  8042 04:21B7: 82 2A 00     	brl	L10106
  8043                        L240:
  8044                        	.line	1629
  8045                        ;		return (pChild == data);
  8046                        	.line	1630
  8047 04:21BA: 64 01        	stz	<R0
  8048 04:21BC: A5 05        	lda	<L237+pChild_1
  8049 04:21BE: C5 10        	cmp	<L236+data_0
  8050 04:21C0: D0 04        	bne	L242
  8051 04:21C2: A5 07        	lda	<L237+pChild_1+2
  8052 04:21C4: C5 12        	cmp	<L236+data_0+2
  8053                        L242:
  8054 04:21C6: F0 03        	beq	L243
  8055 04:21C8: 82 02 00     	brl	L241
  8056                        L243:
  8057 04:21CB: E6 01        	inc	<R0
  8058                        L241:
  8059 04:21CD: A5 01        	lda	<R0
  8060 04:21CF: 29 FF 00     	and	#$ff
  8061                        L244:
  8062 04:21D2: A8           	tay
  8063 04:21D3: A5 0A        	lda	<L236+2
  8064 04:21D5: 85 12        	sta	<L236+2+8
  8065 04:21D7: A5 09        	lda	<L236+1
  8066 04:21D9: 85 11        	sta	<L236+1+8
  8067 04:21DB: 2B           	pld
  8068 04:21DC: 3B           	tsc
  8069 04:21DD: 18           	clc
  8070 04:21DE: 69 10 00     	adc	#L236+8
  8071 04:21E1: 1B           	tcs
  8072 04:21E2: 98           	tya
  8073 04:21E3: 6B           	rtl
  8074                        ;	}
  8075                        	.line	1631
  8076                        ;
  8077                        ;	return FALSE;
  8078                        L10106:
  8079                        	.line	1633
  8080 04:21E4: A9 00 00     	lda	#$0
  8081 04:21E7: 82 E8 FF     	brl	L244
  8082                        ;}
  8083                        	.line	1634
  8084                        	.endblock	1634
  8085             00000008   L236	equ	8
  8086             00000005   L237	equ	5
  8087 04:21EA:              	ends
  8088                        	efunc
  8089                        	.endfunc	1634,5,8
  8090                        	.line	1634
  8091                        ;
  8092                        ;BOOL k_user_IsChildWindow(HWND hWndParent,HWND hW
                    ndChild)
  8093                        ;{
  Tue Oct  1 2019  1:02                                                Page 166


  8094                        	.line	1636
  8095                        	.line	1637
  8096                        	WINMAN
  8097                        	xdef	~~k_user_IsChildWindow
  8098                        	func
  8099                        	.function	1637
  8100                        ~~k_user_IsChildWindow:
  8101                        	longa	on
  8102                        	longi	on
  8103 04:21EA: 3B           	tsc
  8104 04:21EB: 38           	sec
  8105 04:21EC: E9 09 00     	sbc	#L245
  8106 04:21EF: 1B           	tcs
  8107 04:21F0: 0B           	phd
  8108 04:21F1: 5B           	tcd
  8109             00000004   hWndParent_0	set	4
  8110             00000008   hWndChild_0	set	8
  8111                        	.block	1637
  8112                        ;	BOOL bRet = FALSE;
  8113                        ;
  8114                        ;	PWINDOW pWin = NULL;
  8115                        ;
  8116                        ;	if(hWndParent && hWndChild)
  8117             00000000   bRet_1	set	0
  8118             00000001   pWin_1	set	1
  8119                        	.sym	bRet,0,14,1,8
  8120                        	.sym	pWin,1,138,1,32,23
  8121                        	.sym	hWndParent,4,129,6,32
  8122                        	.sym	hWndChild,8,129,6,32
  8123 04:21F2: E2 20        	sep	#$20
  8124                        	longa	off
  8125 04:21F4: 64 05        	stz	<L246+bRet_1
  8126 04:21F6: C2 20        	rep	#$20
  8127                        	longa	on
  8128 04:21F8: 64 06        	stz	<L246+pWin_1
  8129 04:21FA: 64 08        	stz	<L246+pWin_1+2
  8130                        	.line	1642
  8131                        ;	{
  8132 04:21FC: A5 0D        	lda	<L245+hWndParent_0
  8133 04:21FE: 05 0F        	ora	<L245+hWndParent_0+2
  8134 04:2200: D0 03        	bne	L248
  8135 04:2202: 82 51 00     	brl	L10107
  8136                        L248:
  8137 04:2205: A5 11        	lda	<L245+hWndChild_0
  8138 04:2207: 05 13        	ora	<L245+hWndChild_0+2
  8139 04:2209: D0 03        	bne	L249
  8140 04:220B: 82 48 00     	brl	L10107
  8141                        L249:
  8142                        	.line	1643
  8143                        ;		pWin = k_getWindowFromHandle(hWndParent)
                    ;
  8144                        	.line	1644
  8145 04:220E: D4 0F        	pei	<L245+hWndParent_0+2
  8146 04:2210: D4 0D        	pei	<L245+hWndParent_0
  8147 04:2212: 22 AA 03 04  	jsl	~~k_getWindowFromHandle
  8148 04:2216: 85 06        	sta	<L246+pWin_1
  8149 04:2218: 86 08        	stx	<L246+pWin_1+2
  8150                        ;		if(pWin && pWin->pChildWindows)
  Tue Oct  1 2019  1:02                                                Page 167


  8151                        	.line	1645
  8152                        ;		{
  8153 04:221A: A5 06        	lda	<L246+pWin_1
  8154 04:221C: 05 08        	ora	<L246+pWin_1+2
  8155 04:221E: D0 03        	bne	L250
  8156 04:2220: 82 33 00     	brl	L10108
  8157                        L250:
  8158 04:2223: A0 54 00     	ldy	#$54
  8159 04:2226: B7 06        	lda	[<L246+pWin_1],Y
  8160 04:2228: A0 56 00     	ldy	#$56
  8161 04:222B: 17 06        	ora	[<L246+pWin_1],Y
  8162 04:222D: D0 03        	bne	L251
  8163 04:222F: 82 24 00     	brl	L10108
  8164                        L251:
  8165                        	.line	1646
  8166                        ;			k_nodelist_foreach_until_listdat
                    a(pWin->pChildWindows,k_getWindowFromHandle(hWndChild),find_
                    child_window);
  8167                        	.line	1647
  8168 04:2232: F4 04 00     	pea	#^~~find_child_window
  8169 04:2235: F4 98 21     	pea	#<~~find_child_window
  8170 04:2238: D4 13        	pei	<L245+hWndChild_0+2
  8171 04:223A: D4 11        	pei	<L245+hWndChild_0
  8172 04:223C: 22 AA 03 04  	jsl	~~k_getWindowFromHandle
  8173 04:2240: 85 01        	sta	<R0
  8174 04:2242: 86 03        	stx	<R0+2
  8175 04:2244: DA           	phx
  8176 04:2245: 48           	pha
  8177 04:2246: A0 56 00     	ldy	#$56
  8178 04:2249: B7 06        	lda	[<L246+pWin_1],Y
  8179 04:224B: 48           	pha
  8180 04:224C: A0 54 00     	ldy	#$54
  8181 04:224F: B7 06        	lda	[<L246+pWin_1],Y
  8182 04:2251: 48           	pha
  8183 04:2252: 22 xx xx xx  	jsl	~~k_nodelist_foreach_until_listdata
  8184                        ;		}
  8185                        	.line	1648
  8186                        ;	}
  8187                        L10108:
  8188                        	.line	1649
  8189                        ;
  8190                        ;	return bRet;
  8191                        L10107:
  8192                        	.line	1651
  8193 04:2256: A5 05        	lda	<L246+bRet_1
  8194 04:2258: 29 FF 00     	and	#$ff
  8195                        L252:
  8196 04:225B: A8           	tay
  8197 04:225C: A5 0B        	lda	<L245+2
  8198 04:225E: 85 13        	sta	<L245+2+8
  8199 04:2260: A5 0A        	lda	<L245+1
  8200 04:2262: 85 12        	sta	<L245+1+8
  8201 04:2264: 2B           	pld
  8202 04:2265: 3B           	tsc
  8203 04:2266: 18           	clc
  8204 04:2267: 69 11 00     	adc	#L245+8
  8205 04:226A: 1B           	tcs
  8206 04:226B: 98           	tya
  Tue Oct  1 2019  1:02                                                Page 168


  8207 04:226C: 6B           	rtl
  8208                        ;}
  8209                        	.line	1652
  8210                        	.endblock	1652
  8211             00000009   L245	equ	9
  8212             00000005   L246	equ	5
  8213 04:226D:              	ends
  8214                        	efunc
  8215                        	.endfunc	1652,5,9
  8216                        	.line	1652
  8217                        ;
  8218                        ;/*
  8219                        ;void k_buttonHitDetected(PWINDOW pWin)
  8220                        ;{
  8221                        ;	k_update_hover_location(pWin);
  8222                        ;}
  8223                        ;
  8224                        ;void k_menuHitDetected(PWINDOW pWin)
  8225                        ;{
  8226                        ;	k_update_hover_location(pWin);
  8227                        ;}
  8228                        ;
  8229                        ;
  8230                        ;void k_windowHitDetected(PWINDOW pWin)
  8231                        ;{
  8232                        ;	k_update_hover_location(pWin);
  8233                        ;}
  8234                        ;*/
  8235                        ;int k_attach_mouse_detection(PWINDOW pWin,OBJECTC
                    LICKED objclickCallback)
  8236                        ;{
  8237                        	.line	1671
  8238                        	.line	1672
  8239                        	WINMAN
  8240                        	xdef	~~k_attach_mouse_detection
  8241                        	func
  8242                        	.function	1672
  8243                        ~~k_attach_mouse_detection:
  8244                        	longa	on
  8245                        	longi	on
  8246 04:226D: 3B           	tsc
  8247 04:226E: 38           	sec
  8248 04:226F: E9 06 00     	sbc	#L253
  8249 04:2272: 1B           	tcs
  8250 04:2273: 0B           	phd
  8251 04:2274: 5B           	tcd
  8252             00000004   pWin_0	set	4
  8253             00000008   objclickCallback_0	set	8
  8254                        	.block	1672
  8255                        ;	PCLICKDETECTED pcd = NULL;
  8256                        ;
  8257                        ;	int retCode = 0;
  8258                        ;
  8259                        ;	if(pWin)
  8260             00000000   pcd_1	set	0
  8261             00000004   retCode_1	set	4
  8262                        	.sym	pcd,0,138,1,32,50
  8263                        	.sym	retCode,4,5,1,16
  Tue Oct  1 2019  1:02                                                Page 169


  8264                        	.sym	pWin,4,138,6,32,23
  8265                        	.sym	objclickCallback,8,641,6,32
  8266 04:2275: 64 01        	stz	<L254+pcd_1
  8267 04:2277: 64 03        	stz	<L254+pcd_1+2
  8268 04:2279: 64 05        	stz	<L254+retCode_1
  8269                        	.line	1677
  8270                        ;	{
  8271 04:227B: A5 0A        	lda	<L253+pWin_0
  8272 04:227D: 05 0C        	ora	<L253+pWin_0+2
  8273 04:227F: D0 03        	bne	L256
  8274 04:2281: 82 35 00     	brl	L10109
  8275                        L256:
  8276                        	.line	1678
  8277                        ;		pcd = k_mem_allocate_heap(sizeof(CLICKDE
                    TECTED));
  8278                        	.line	1679
  8279 04:2284: F4 08 00     	pea	#<$8
  8280 04:2287: 22 xx xx xx  	jsl	~~k_mem_allocate_heap
  8281 04:228B: 85 01        	sta	<L254+pcd_1
  8282 04:228D: 86 03        	stx	<L254+pcd_1+2
  8283                        ;		if(pcd)
  8284                        	.line	1680
  8285                        ;		{
  8286 04:228F: A5 01        	lda	<L254+pcd_1
  8287 04:2291: 05 03        	ora	<L254+pcd_1+2
  8288 04:2293: D0 03        	bne	L257
  8289 04:2295: 82 21 00     	brl	L10110
  8290                        L257:
  8291                        	.line	1681
  8292                        ;			pcd->window  = pWin;
  8293                        	.line	1682
  8294 04:2298: A5 0A        	lda	<L253+pWin_0
  8295 04:229A: 87 01        	sta	[<L254+pcd_1]
  8296 04:229C: A5 0C        	lda	<L253+pWin_0+2
  8297 04:229E: A0 02 00     	ldy	#$2
  8298 04:22A1: 97 01        	sta	[<L254+pcd_1],Y
  8299                        ;			pcd->handler = objclickCallback;
  8300                        	.line	1683
  8301 04:22A3: A5 0E        	lda	<L253+objclickCallback_0
  8302 04:22A5: A0 04 00     	ldy	#$4
  8303 04:22A8: 97 01        	sta	[<L254+pcd_1],Y
  8304 04:22AA: A5 10        	lda	<L253+objclickCallback_0+2
  8305 04:22AC: A0 06 00     	ldy	#$6
  8306 04:22AF: 97 01        	sta	[<L254+pcd_1],Y
  8307                        ;			k_add_object_hit_node(pcd);
  8308                        	.line	1684
  8309 04:22B1: D4 03        	pei	<L254+pcd_1+2
  8310 04:22B3: D4 01        	pei	<L254+pcd_1
  8311 04:22B5: 22 CD 22 04  	jsl	~~k_add_object_hit_node
  8312                        ;		}
  8313                        	.line	1685
  8314                        ;	}
  8315                        L10110:
  8316                        	.line	1686
  8317                        ;
  8318                        ;	return retCode;
  8319                        L10109:
  8320                        	.line	1688
  Tue Oct  1 2019  1:02                                                Page 170


  8321 04:22B9: A5 05        	lda	<L254+retCode_1
  8322                        L258:
  8323 04:22BB: A8           	tay
  8324 04:22BC: A5 08        	lda	<L253+2
  8325 04:22BE: 85 10        	sta	<L253+2+8
  8326 04:22C0: A5 07        	lda	<L253+1
  8327 04:22C2: 85 0F        	sta	<L253+1+8
  8328 04:22C4: 2B           	pld
  8329 04:22C5: 3B           	tsc
  8330 04:22C6: 18           	clc
  8331 04:22C7: 69 0E 00     	adc	#L253+8
  8332 04:22CA: 1B           	tcs
  8333 04:22CB: 98           	tya
  8334 04:22CC: 6B           	rtl
  8335                        ;}
  8336                        	.line	1689
  8337                        	.endblock	1689
  8338             00000006   L253	equ	6
  8339             00000001   L254	equ	1
  8340 04:22CD:              	ends
  8341                        	efunc
  8342                        	.endfunc	1689,1,6
  8343                        	.line	1689
  8344                        ;
  8345                        ;void k_add_object_hit_node(PCLICKDETECTED pcd)
  8346                        ;{
  8347                        	.line	1691
  8348                        	.line	1692
  8349                        	WINMAN
  8350                        	xdef	~~k_add_object_hit_node
  8351                        	func
  8352                        	.function	1692
  8353                        ~~k_add_object_hit_node:
  8354                        	longa	on
  8355                        	longi	on
  8356 04:22CD: 3B           	tsc
  8357 04:22CE: 38           	sec
  8358 04:22CF: E9 04 00     	sbc	#L259
  8359 04:22D2: 1B           	tcs
  8360 04:22D3: 0B           	phd
  8361 04:22D4: 5B           	tcd
  8362             00000004   pcd_0	set	4
  8363                        	.block	1692
  8364                        ;	//k_debug_pointer("k_add_object_hit_node:",pcd);
  8365                        ;	//k_nodelist_addtolist(_k_windowManager_ObjectHi
                    tList,1,pcd->window->win_title,pcd);
  8366                        ;	k_nodelist_naddtolist(_k_windowManager_ObjectHit
                    List,1,(ULONG)k_getHandleFromWindow(pcd->window),pcd);
  8367                        	.sym	pcd,4,138,6,32,50
  8368                        	.line	1695
  8369 04:22D5: D4 0A        	pei	<L259+pcd_0+2
  8370 04:22D7: D4 08        	pei	<L259+pcd_0
  8371 04:22D9: A0 02 00     	ldy	#$2
  8372 04:22DC: B7 08        	lda	[<L259+pcd_0],Y
  8373 04:22DE: 48           	pha
  8374 04:22DF: A7 08        	lda	[<L259+pcd_0]
  8375 04:22E1: 48           	pha
  8376 04:22E2: 22 8C 03 04  	jsl	~~k_getHandleFromWindow
  Tue Oct  1 2019  1:02                                                Page 171


  8377 04:22E6: 85 01        	sta	<R0
  8378 04:22E8: 86 03        	stx	<R0+2
  8379 04:22EA: D4 03        	pei	<R0+2
  8380 04:22EC: D4 01        	pei	<R0
  8381 04:22EE: F4 01 00     	pea	#<$1
  8382 04:22F1: AD xx xx     	lda	|~~_k_windowManager_ObjectHitList+2
  8383 04:22F4: 48           	pha
  8384 04:22F5: AD xx xx     	lda	|~~_k_windowManager_ObjectHitList
  8385 04:22F8: 48           	pha
  8386 04:22F9: 22 xx xx xx  	jsl	~~k_nodelist_naddtolist
  8387                        ;}
  8388                        	.line	1696
  8389                        L262:
  8390 04:22FD: A5 06        	lda	<L259+2
  8391 04:22FF: 85 0A        	sta	<L259+2+4
  8392 04:2301: A5 05        	lda	<L259+1
  8393 04:2303: 85 09        	sta	<L259+1+4
  8394 04:2305: 2B           	pld
  8395 04:2306: 3B           	tsc
  8396 04:2307: 18           	clc
  8397 04:2308: 69 08 00     	adc	#L259+4
  8398 04:230B: 1B           	tcs
  8399 04:230C: 6B           	rtl
  8400                        	.endblock	1696
  8401             00000004   L259	equ	4
  8402             00000005   L260	equ	5
  8403 04:230D:              	ends
  8404                        	efunc
  8405                        	.endfunc	1696,5,4
  8406                        	.line	1696
  8407                        ;
  8408                        ;int k_attach_mouse_detection_local(PFXNODELIST li
                    st,PWINDOW pWin,OBJECTCLICKED objclickCallback)
  8409                        ;{
  8410                        	.line	1698
  8411                        	.line	1699
  8412                        	WINMAN
  8413                        	xdef	~~k_attach_mouse_detection_local
  8414                        	func
  8415                        	.function	1699
  8416                        ~~k_attach_mouse_detection_local:
  8417                        	longa	on
  8418                        	longi	on
  8419 04:230D: 3B           	tsc
  8420 04:230E: 38           	sec
  8421 04:230F: E9 06 00     	sbc	#L263
  8422 04:2312: 1B           	tcs
  8423 04:2313: 0B           	phd
  8424 04:2314: 5B           	tcd
  8425             00000004   list_0	set	4
  8426             00000008   pWin_0	set	8
  8427             0000000C   objclickCallback_0	set	12
  8428                        	.block	1699
  8429                        ;	PCLICKDETECTED pcd = NULL;
  8430                        ;
  8431                        ;	int retCode = 0;
  8432                        ;
  8433                        ;	//k_debug_pointer("k_attach_mouse_detection_loca
  Tue Oct  1 2019  1:02                                                Page 172


                    l:",pWin);
  8434                        ;
  8435                        ;	if(pWin)
  8436             00000000   pcd_1	set	0
  8437             00000004   retCode_1	set	4
  8438                        	.sym	pcd,0,138,1,32,50
  8439                        	.sym	retCode,4,5,1,16
  8440                        	.sym	list,4,138,6,32,3
  8441                        	.sym	pWin,8,138,6,32,23
  8442                        	.sym	objclickCallback,12,641,6,32
  8443 04:2315: 64 01        	stz	<L264+pcd_1
  8444 04:2317: 64 03        	stz	<L264+pcd_1+2
  8445 04:2319: 64 05        	stz	<L264+retCode_1
  8446                        	.line	1706
  8447                        ;	{
  8448 04:231B: A5 0E        	lda	<L263+pWin_0
  8449 04:231D: 05 10        	ora	<L263+pWin_0+2
  8450 04:231F: D0 03        	bne	L266
  8451 04:2321: 82 39 00     	brl	L10111
  8452                        L266:
  8453                        	.line	1707
  8454                        ;		pcd = k_mem_allocate_heap(sizeof(CLICKDE
                    TECTED));
  8455                        	.line	1708
  8456 04:2324: F4 08 00     	pea	#<$8
  8457 04:2327: 22 xx xx xx  	jsl	~~k_mem_allocate_heap
  8458 04:232B: 85 01        	sta	<L264+pcd_1
  8459 04:232D: 86 03        	stx	<L264+pcd_1+2
  8460                        ;		if(pcd)
  8461                        	.line	1709
  8462                        ;		{
  8463 04:232F: A5 01        	lda	<L264+pcd_1
  8464 04:2331: 05 03        	ora	<L264+pcd_1+2
  8465 04:2333: D0 03        	bne	L267
  8466 04:2335: 82 25 00     	brl	L10112
  8467                        L267:
  8468                        	.line	1710
  8469                        ;			pcd->window  = pWin;
  8470                        	.line	1711
  8471 04:2338: A5 0E        	lda	<L263+pWin_0
  8472 04:233A: 87 01        	sta	[<L264+pcd_1]
  8473 04:233C: A5 10        	lda	<L263+pWin_0+2
  8474 04:233E: A0 02 00     	ldy	#$2
  8475 04:2341: 97 01        	sta	[<L264+pcd_1],Y
  8476                        ;			pcd->handler = objclickCallback;
  8477                        	.line	1712
  8478 04:2343: A5 12        	lda	<L263+objclickCallback_0
  8479 04:2345: A0 04 00     	ldy	#$4
  8480 04:2348: 97 01        	sta	[<L264+pcd_1],Y
  8481 04:234A: A5 14        	lda	<L263+objclickCallback_0+2
  8482 04:234C: A0 06 00     	ldy	#$6
  8483 04:234F: 97 01        	sta	[<L264+pcd_1],Y
  8484                        ;			k_add_object_hit_node_local(list
                    ,pcd);
  8485                        	.line	1713
  8486 04:2351: D4 03        	pei	<L264+pcd_1+2
  8487 04:2353: D4 01        	pei	<L264+pcd_1
  8488 04:2355: D4 0C        	pei	<L263+list_0+2
  Tue Oct  1 2019  1:02                                                Page 173


  8489 04:2357: D4 0A        	pei	<L263+list_0
  8490 04:2359: 22 71 23 04  	jsl	~~k_add_object_hit_node_local
  8491                        ;		}
  8492                        	.line	1714
  8493                        ;	}
  8494                        L10112:
  8495                        	.line	1715
  8496                        ;
  8497                        ;	return retCode;
  8498                        L10111:
  8499                        	.line	1717
  8500 04:235D: A5 05        	lda	<L264+retCode_1
  8501                        L268:
  8502 04:235F: A8           	tay
  8503 04:2360: A5 08        	lda	<L263+2
  8504 04:2362: 85 14        	sta	<L263+2+12
  8505 04:2364: A5 07        	lda	<L263+1
  8506 04:2366: 85 13        	sta	<L263+1+12
  8507 04:2368: 2B           	pld
  8508 04:2369: 3B           	tsc
  8509 04:236A: 18           	clc
  8510 04:236B: 69 12 00     	adc	#L263+12
  8511 04:236E: 1B           	tcs
  8512 04:236F: 98           	tya
  8513 04:2370: 6B           	rtl
  8514                        ;}
  8515                        	.line	1718
  8516                        	.endblock	1718
  8517             00000006   L263	equ	6
  8518             00000001   L264	equ	1
  8519 04:2371:              	ends
  8520                        	efunc
  8521                        	.endfunc	1718,1,6
  8522                        	.line	1718
  8523                        ;
  8524                        ;
  8525                        ;void k_add_object_hit_node_local(PFXNODELIST list
                    ,PCLICKDETECTED pcd)
  8526                        ;{
  8527                        	.line	1721
  8528                        	.line	1722
  8529                        	WINMAN
  8530                        	xdef	~~k_add_object_hit_node_local
  8531                        	func
  8532                        	.function	1722
  8533                        ~~k_add_object_hit_node_local:
  8534                        	longa	on
  8535                        	longi	on
  8536 04:2371: 3B           	tsc
  8537 04:2372: 38           	sec
  8538 04:2373: E9 04 00     	sbc	#L269
  8539 04:2376: 1B           	tcs
  8540 04:2377: 0B           	phd
  8541 04:2378: 5B           	tcd
  8542             00000004   list_0	set	4
  8543             00000008   pcd_0	set	8
  8544                        	.block	1722
  8545                        ;	//k_debug_pointer("k_add_object_hit_node_local:"
  Tue Oct  1 2019  1:02                                                Page 174


                    ,pcd);
  8546                        ;	//k_nodelist_naddtolist(list,1,pcd->window->win_
                    title,pcd);
  8547                        ;	k_nodelist_naddtolist(list,1,(ULONG)k_getHandleF
                    romWindow(pcd->window),pcd);
  8548                        	.sym	list,4,138,6,32,3
  8549                        	.sym	pcd,8,138,6,32,50
  8550                        	.line	1725
  8551 04:2379: D4 0E        	pei	<L269+pcd_0+2
  8552 04:237B: D4 0C        	pei	<L269+pcd_0
  8553 04:237D: A0 02 00     	ldy	#$2
  8554 04:2380: B7 0C        	lda	[<L269+pcd_0],Y
  8555 04:2382: 48           	pha
  8556 04:2383: A7 0C        	lda	[<L269+pcd_0]
  8557 04:2385: 48           	pha
  8558 04:2386: 22 8C 03 04  	jsl	~~k_getHandleFromWindow
  8559 04:238A: 85 01        	sta	<R0
  8560 04:238C: 86 03        	stx	<R0+2
  8561 04:238E: D4 03        	pei	<R0+2
  8562 04:2390: D4 01        	pei	<R0
  8563 04:2392: F4 01 00     	pea	#<$1
  8564 04:2395: D4 0A        	pei	<L269+list_0+2
  8565 04:2397: D4 08        	pei	<L269+list_0
  8566 04:2399: 22 xx xx xx  	jsl	~~k_nodelist_naddtolist
  8567                        ;}
  8568                        	.line	1726
  8569                        L272:
  8570 04:239D: A5 06        	lda	<L269+2
  8571 04:239F: 85 0E        	sta	<L269+2+8
  8572 04:23A1: A5 05        	lda	<L269+1
  8573 04:23A3: 85 0D        	sta	<L269+1+8
  8574 04:23A5: 2B           	pld
  8575 04:23A6: 3B           	tsc
  8576 04:23A7: 18           	clc
  8577 04:23A8: 69 0C 00     	adc	#L269+8
  8578 04:23AB: 1B           	tcs
  8579 04:23AC: 6B           	rtl
  8580                        	.endblock	1726
  8581             00000004   L269	equ	4
  8582             00000005   L270	equ	5
  8583 04:23AD:              	ends
  8584                        	efunc
  8585                        	.endfunc	1726,5,4
  8586                        	.line	1726
  8587                        ;
  8588                        ;/*
  8589                        ;PFXNODE k_point_in_nodeslist(int x,int y)
  8590                        ;{
  8591                        ;	PFXNODE found = NULL;
  8592                        ;	LPCHAR ctx = "";
  8593                        ;	PFXNODE ptr = NULL;
  8594                        ;
  8595                        ;	RECT r;
  8596                        ;	int i = 0;
  8597                        ;	int index = -1;
  8598                        ;
  8599                        ;	//k_debug_string("k_point_in_nodes\r\n");
  8600                        ;
  Tue Oct  1 2019  1:02                                                Page 175


  8601                        ;	if(_k_windowManager_ObjectHitList!=NULL)
  8602                        ;	{
  8603                        ;		r = ((PCLICKABLE)((PCLICKDETECTED)((PFXN
                    ODE)_k_windowManager_ObjectHitList->listData)->data)->window
                    ->clickable)->area;
  8604                        ;		if(x >=r.x && x<(r.x+r.width))
  8605                        ;		{
  8606                        ;			if(y >=r.y && y<(r.y+r.height))
  8607                        ;			{
  8608                        ;				//k_debug_pointer("CURRE
                    NT ACTIVE OBJECT:",_k_windowManager_ObjectHitList->listData)
                    ;
  8609                        ;				return (PFXNODE)_k_windo
                    wManager_ObjectHitList->listData;
  8610                        ;			}
  8611                        ;		}
  8612                        ;
  8613                        ;
  8614                        ;		ptr = k_nodelist_getfirstnode(_k_windowM
                    anager_ObjectHitList);
  8615                        ;		while(ptr!=NULL)
  8616                        ;		{
  8617                        ;			//k_debug_pointer("FOUND HIT ITE
                    M:",ptr);
  8618                        ;			r = ((PCLICKABLE)((PCLICKDETECTE
                    D)ptr->data)->window->clickable)->area;
  8619                        ;			if(x >=r.x && x<(r.x+r.width))
  8620                        ;			{
  8621                        ;				if(y >=r.y && y<(r.y+r.h
                    eight))
  8622                        ;				{
  8623                        ;					found = ptr;
  8624                        ;					_k_windowManager
                    _ObjectHitList->listData = found;
  8625                        ;					break;
  8626                        ;				}
  8627                        ;			}
  8628                        ;			ptr = ptr->next;
  8629                        ;		}
  8630                        ;	}
  8631                        ;
  8632                        ;	return found;
  8633                        ;}
  8634                        ;*/
  8635                        ;PFXNODE k_point_in_nodeslist(int x,int y)
  8636                        ;{
  8637                        	.line	1775
  8638                        	.line	1776
  8639                        	WINMAN
  8640                        	xdef	~~k_point_in_nodeslist
  8641                        	func
  8642                        	.function	1776
  8643                        ~~k_point_in_nodeslist:
  8644                        	longa	on
  8645                        	longi	on
  8646 04:23AD: 3B           	tsc
  8647 04:23AE: 38           	sec
  8648 04:23AF: E9 04 00     	sbc	#L273
  Tue Oct  1 2019  1:02                                                Page 176


  8649 04:23B2: 1B           	tcs
  8650 04:23B3: 0B           	phd
  8651 04:23B4: 5B           	tcd
  8652             00000004   x_0	set	4
  8653             00000006   y_0	set	6
  8654                        	.block	1776
  8655                        ;	return k_point_in_any_nodeslist(_k_windowManager
                    _ObjectHitList,x,y);
  8656                        	.sym	x,4,5,6,16
  8657                        	.sym	y,6,5,6,16
  8658                        	.line	1777
  8659 04:23B5: D4 0A        	pei	<L273+y_0
  8660 04:23B7: D4 08        	pei	<L273+x_0
  8661 04:23B9: AD xx xx     	lda	|~~_k_windowManager_ObjectHitList+2
  8662 04:23BC: 48           	pha
  8663 04:23BD: AD xx xx     	lda	|~~_k_windowManager_ObjectHitList
  8664 04:23C0: 48           	pha
  8665 04:23C1: 22 DF 23 04  	jsl	~~k_point_in_any_nodeslist
  8666 04:23C5: 85 01        	sta	<R0
  8667 04:23C7: 86 03        	stx	<R0+2
  8668 04:23C9: A6 03        	ldx	<R0+2
  8669 04:23CB: A5 01        	lda	<R0
  8670                        L276:
  8671 04:23CD: A8           	tay
  8672 04:23CE: A5 06        	lda	<L273+2
  8673 04:23D0: 85 0A        	sta	<L273+2+4
  8674 04:23D2: A5 05        	lda	<L273+1
  8675 04:23D4: 85 09        	sta	<L273+1+4
  8676 04:23D6: 2B           	pld
  8677 04:23D7: 3B           	tsc
  8678 04:23D8: 18           	clc
  8679 04:23D9: 69 08 00     	adc	#L273+4
  8680 04:23DC: 1B           	tcs
  8681 04:23DD: 98           	tya
  8682 04:23DE: 6B           	rtl
  8683                        ;}
  8684                        	.line	1778
  8685                        	.endblock	1778
  8686             00000004   L273	equ	4
  8687             00000005   L274	equ	5
  8688 04:23DF:              	ends
  8689                        	efunc
  8690                        	.endfunc	1778,5,4
  8691                        	.line	1778
  8692                        ;
  8693                        ;PFXNODE k_point_in_any_nodeslist(PFXNODELIST hitL
                    ist,int x,int y)
  8694                        ;{
  8695                        	.line	1780
  8696                        	.line	1781
  8697                        	WINMAN
  8698                        	xdef	~~k_point_in_any_nodeslist
  8699                        	func
  8700                        	.function	1781
  8701                        ~~k_point_in_any_nodeslist:
  8702                        	longa	on
  8703                        	longi	on
  8704 04:23DF: 3B           	tsc
  Tue Oct  1 2019  1:02                                                Page 177


  8705 04:23E0: 38           	sec
  8706 04:23E1: E9 20 00     	sbc	#L277
  8707 04:23E4: 1B           	tcs
  8708 04:23E5: 0B           	phd
  8709 04:23E6: 5B           	tcd
  8710             00000004   hitList_0	set	4
  8711             00000008   x_0	set	8
  8712             0000000A   y_0	set	10
  8713                        	.block	1781
  8714                        ;	PFXNODE found = NULL;
  8715                        ;	LPCHAR ctx = "";
  8716                        ;	PFXNODE ptr = NULL;
  8717                        ;
  8718                        ;	RECT r;
  8719                        ;	int i = 0;
  8720                        ;	int index = -1;
  8721                        ;
  8722                        ;	//k_debug_pointer("k_point_in_any_nodeslist:",hi
                    tList);
  8723                        ;
  8724                        ;	if(hitList!=NULL)
  8725             00000000   found_1	set	0
  8726             00000004   ctx_1	set	4
  8727             00000008   ptr_1	set	8
  8728             0000000C   r_1	set	12
  8729             00000014   i_1	set	20
  8730             00000016   index_1	set	22
  8731                        	.sym	found,0,138,1,32,2
  8732                        	.sym	ctx,4,142,1,32
  8733                        	.sym	ptr,8,138,1,32,2
  8734                        	.sym	r,12,10,1,64,21
  8735                        	.sym	i,20,5,1,16
  8736                        	.sym	index,22,5,1,16
  8737                        	.sym	hitList,4,138,6,32,3
  8738                        	.sym	x,8,5,6,16
  8739                        	.sym	y,10,5,6,16
  8740 04:23E7: 64 09        	stz	<L278+found_1
  8741 04:23E9: 64 0B        	stz	<L278+found_1+2
  8742 04:23EB: A9 xx xx     	lda	#<L231
  8743 04:23EE: 85 0D        	sta	<L278+ctx_1
  8744 04:23F0: A9 xx xx     	lda	#^L231
  8745 04:23F3: 85 0F        	sta	<L278+ctx_1+2
  8746 04:23F5: 64 11        	stz	<L278+ptr_1
  8747 04:23F7: 64 13        	stz	<L278+ptr_1+2
  8748 04:23F9: 64 1D        	stz	<L278+i_1
  8749 04:23FB: A9 FF FF     	lda	#$ffff
  8750 04:23FE: 85 1F        	sta	<L278+index_1
  8751                        	.line	1792
  8752                        ;	{
  8753 04:2400: A5 24        	lda	<L277+hitList_0
  8754 04:2402: 05 26        	ora	<L277+hitList_0+2
  8755 04:2404: D0 03        	bne	L280
  8756 04:2406: 82 2D 03     	brl	L10113
  8757                        L280:
  8758                        	.line	1793
  8759                        ;		k_debug_pointer("k_point_in_any_nodeslis
                    t:data:",((PFXNODE)hitList->listData)->data);
  8760                        	.line	1794
  Tue Oct  1 2019  1:02                                                Page 178


  8761 04:2409: A0 04 00     	ldy	#$4
  8762 04:240C: B7 24        	lda	[<L277+hitList_0],Y
  8763 04:240E: 85 01        	sta	<R0
  8764 04:2410: A0 06 00     	ldy	#$6
  8765 04:2413: B7 24        	lda	[<L277+hitList_0],Y
  8766 04:2415: 85 03        	sta	<R0+2
  8767 04:2417: A0 04 00     	ldy	#$4
  8768 04:241A: B7 01        	lda	[<R0],Y
  8769 04:241C: 48           	pha
  8770 04:241D: A0 02 00     	ldy	#$2
  8771 04:2420: B7 01        	lda	[<R0],Y
  8772 04:2422: 48           	pha
  8773 04:2423: F4 xx xx     	pea	#^L231+1
  8774 04:2426: F4 xx xx     	pea	#<L231+1
  8775 04:2429: 22 xx xx xx  	jsl	~~k_debug_pointer
  8776                        ;		k_debug_pointer("k_point_in_any_nodeslis
                    t:window:",((PCLICKDETECTED)((PFXNODE)hitList->listData)->da
                    ta)->window);
  8777                        	.line	1795
  8778 04:242D: A0 04 00     	ldy	#$4
  8779 04:2430: B7 24        	lda	[<L277+hitList_0],Y
  8780 04:2432: 85 01        	sta	<R0
  8781 04:2434: A0 06 00     	ldy	#$6
  8782 04:2437: B7 24        	lda	[<L277+hitList_0],Y
  8783 04:2439: 85 03        	sta	<R0+2
  8784 04:243B: A0 02 00     	ldy	#$2
  8785 04:243E: B7 01        	lda	[<R0],Y
  8786 04:2440: 85 05        	sta	<R1
  8787 04:2442: A0 04 00     	ldy	#$4
  8788 04:2445: B7 01        	lda	[<R0],Y
  8789 04:2447: 85 07        	sta	<R1+2
  8790 04:2449: A0 02 00     	ldy	#$2
  8791 04:244C: B7 05        	lda	[<R1],Y
  8792 04:244E: 48           	pha
  8793 04:244F: A7 05        	lda	[<R1]
  8794 04:2451: 48           	pha
  8795 04:2452: F4 xx xx     	pea	#^L231+32
  8796 04:2455: F4 xx xx     	pea	#<L231+32
  8797 04:2458: 22 xx xx xx  	jsl	~~k_debug_pointer
  8798                        ;		k_debug_pointer("k_point_in_any_nodeslis
                    t:clickable:",((PCLICKDETECTED)((PFXNODE)hitList->listData)-
                    >data)->window->clickable);
  8799                        	.line	1796
  8800 04:245C: A0 04 00     	ldy	#$4
  8801 04:245F: B7 24        	lda	[<L277+hitList_0],Y
  8802 04:2461: 85 01        	sta	<R0
  8803 04:2463: A0 06 00     	ldy	#$6
  8804 04:2466: B7 24        	lda	[<L277+hitList_0],Y
  8805 04:2468: 85 03        	sta	<R0+2
  8806 04:246A: A0 02 00     	ldy	#$2
  8807 04:246D: B7 01        	lda	[<R0],Y
  8808 04:246F: 85 05        	sta	<R1
  8809 04:2471: A0 04 00     	ldy	#$4
  8810 04:2474: B7 01        	lda	[<R0],Y
  8811 04:2476: 85 07        	sta	<R1+2
  8812 04:2478: A7 05        	lda	[<R1]
  8813 04:247A: 85 01        	sta	<R0
  8814 04:247C: A0 02 00     	ldy	#$2
  Tue Oct  1 2019  1:02                                                Page 179


  8815 04:247F: B7 05        	lda	[<R1],Y
  8816 04:2481: 85 03        	sta	<R0+2
  8817 04:2483: A0 12 00     	ldy	#$12
  8818 04:2486: B7 01        	lda	[<R0],Y
  8819 04:2488: 48           	pha
  8820 04:2489: A0 10 00     	ldy	#$10
  8821 04:248C: B7 01        	lda	[<R0],Y
  8822 04:248E: 48           	pha
  8823 04:248F: F4 xx xx     	pea	#^L231+65
  8824 04:2492: F4 xx xx     	pea	#<L231+65
  8825 04:2495: 22 xx xx xx  	jsl	~~k_debug_pointer
  8826                        ;
  8827                        ;		if(((PFXNODE)hitList->listData)->data &&
                     ((PCLICKDETECTED)((PFXNODE)hitList->listData)->data)->windo
                    w && ((PCLICKDETECTED)((PFXNODE)hitList->listData)->data)->w
                    indow->clickable)
  8828                        	.line	1798
  8829                        ;		{
  8830 04:2499: A0 04 00     	ldy	#$4
  8831 04:249C: B7 24        	lda	[<L277+hitList_0],Y
  8832 04:249E: 85 01        	sta	<R0
  8833 04:24A0: A0 06 00     	ldy	#$6
  8834 04:24A3: B7 24        	lda	[<L277+hitList_0],Y
  8835 04:24A5: 85 03        	sta	<R0+2
  8836 04:24A7: A0 02 00     	ldy	#$2
  8837 04:24AA: B7 01        	lda	[<R0],Y
  8838 04:24AC: A0 04 00     	ldy	#$4
  8839 04:24AF: 17 01        	ora	[<R0],Y
  8840 04:24B1: D0 03        	bne	L281
  8841 04:24B3: 82 5E 01     	brl	L10114
  8842                        L281:
  8843 04:24B6: A0 04 00     	ldy	#$4
  8844 04:24B9: B7 24        	lda	[<L277+hitList_0],Y
  8845 04:24BB: 85 01        	sta	<R0
  8846 04:24BD: A0 06 00     	ldy	#$6
  8847 04:24C0: B7 24        	lda	[<L277+hitList_0],Y
  8848 04:24C2: 85 03        	sta	<R0+2
  8849 04:24C4: A0 02 00     	ldy	#$2
  8850 04:24C7: B7 01        	lda	[<R0],Y
  8851 04:24C9: 85 05        	sta	<R1
  8852 04:24CB: A0 04 00     	ldy	#$4
  8853 04:24CE: B7 01        	lda	[<R0],Y
  8854 04:24D0: 85 07        	sta	<R1+2
  8855 04:24D2: A7 05        	lda	[<R1]
  8856 04:24D4: A0 02 00     	ldy	#$2
  8857 04:24D7: 17 05        	ora	[<R1],Y
  8858 04:24D9: D0 03        	bne	L282
  8859 04:24DB: 82 36 01     	brl	L10114
  8860                        L282:
  8861 04:24DE: A0 04 00     	ldy	#$4
  8862 04:24E1: B7 24        	lda	[<L277+hitList_0],Y
  8863 04:24E3: 85 01        	sta	<R0
  8864 04:24E5: A0 06 00     	ldy	#$6
  8865 04:24E8: B7 24        	lda	[<L277+hitList_0],Y
  8866 04:24EA: 85 03        	sta	<R0+2
  8867 04:24EC: A0 02 00     	ldy	#$2
  8868 04:24EF: B7 01        	lda	[<R0],Y
  8869 04:24F1: 85 05        	sta	<R1
  Tue Oct  1 2019  1:02                                                Page 180


  8870 04:24F3: A0 04 00     	ldy	#$4
  8871 04:24F6: B7 01        	lda	[<R0],Y
  8872 04:24F8: 85 07        	sta	<R1+2
  8873 04:24FA: A7 05        	lda	[<R1]
  8874 04:24FC: 85 01        	sta	<R0
  8875 04:24FE: A0 02 00     	ldy	#$2
  8876 04:2501: B7 05        	lda	[<R1],Y
  8877 04:2503: 85 03        	sta	<R0+2
  8878 04:2505: A0 10 00     	ldy	#$10
  8879 04:2508: B7 01        	lda	[<R0],Y
  8880 04:250A: A0 12 00     	ldy	#$12
  8881 04:250D: 17 01        	ora	[<R0],Y
  8882 04:250F: D0 03        	bne	L283
  8883 04:2511: 82 00 01     	brl	L10114
  8884                        L283:
  8885                        	.line	1799
  8886                        ;			r = ((PCLICKABLE)((PCLICKDETECTE
                    D)((PFXNODE)hitList->listData)->data)->window->clickable)->a
                    rea;
  8887                        	.line	1800
  8888 04:2514: A0 04 00     	ldy	#$4
  8889 04:2517: B7 24        	lda	[<L277+hitList_0],Y
  8890 04:2519: 85 01        	sta	<R0
  8891 04:251B: A0 06 00     	ldy	#$6
  8892 04:251E: B7 24        	lda	[<L277+hitList_0],Y
  8893 04:2520: 85 03        	sta	<R0+2
  8894 04:2522: A0 02 00     	ldy	#$2
  8895 04:2525: B7 01        	lda	[<R0],Y
  8896 04:2527: 85 05        	sta	<R1
  8897 04:2529: A0 04 00     	ldy	#$4
  8898 04:252C: B7 01        	lda	[<R0],Y
  8899 04:252E: 85 07        	sta	<R1+2
  8900 04:2530: A7 05        	lda	[<R1]
  8901 04:2532: 85 01        	sta	<R0
  8902 04:2534: A0 02 00     	ldy	#$2
  8903 04:2537: B7 05        	lda	[<R1],Y
  8904 04:2539: 85 03        	sta	<R0+2
  8905 04:253B: A0 12 00     	ldy	#$12
  8906 04:253E: B7 01        	lda	[<R0],Y
  8907 04:2540: 48           	pha
  8908 04:2541: A0 10 00     	ldy	#$10
  8909 04:2544: B7 01        	lda	[<R0],Y
  8910 04:2546: 48           	pha
  8911 04:2547: 18           	clc
  8912 04:2548: 7B           	tdc
  8913 04:2549: 69 15 00     	adc	#<L278+r_1
  8914 04:254C: 85 01        	sta	<R0
  8915 04:254E: A9 00 00     	lda	#$0
  8916 04:2551: 85 03        	sta	<R0+2
  8917 04:2553: D4 03        	pei	<R0+2
  8918 04:2555: D4 01        	pei	<R0
  8919 04:2557: A9 08 00     	lda	#$8
  8920                        	xref	~~~fmov
  8921 04:255A: 22 xx xx xx  	jsl	~~~fmov
  8922                        ;			if(x >=r.x && x<(r.x+r.width))
  8923                        	.line	1801
  8924                        ;			{
  8925 04:255E: 38           	sec
  Tue Oct  1 2019  1:02                                                Page 181


  8926 04:255F: A5 28        	lda	<L277+x_0
  8927 04:2561: E5 15        	sbc	<L278+r_1
  8928 04:2563: 70 03        	bvs	L284
  8929 04:2565: 49 00 80     	eor	#$8000
  8930                        L284:
  8931 04:2568: 30 03        	bmi	L285
  8932 04:256A: 82 A7 00     	brl	L10115
  8933                        L285:
  8934 04:256D: 18           	clc
  8935 04:256E: A5 15        	lda	<L278+r_1
  8936 04:2570: 65 19        	adc	<L278+r_1+4
  8937 04:2572: 85 01        	sta	<R0
  8938 04:2574: 38           	sec
  8939 04:2575: A5 28        	lda	<L277+x_0
  8940 04:2577: E5 01        	sbc	<R0
  8941 04:2579: 70 03        	bvs	L286
  8942 04:257B: 49 00 80     	eor	#$8000
  8943                        L286:
  8944 04:257E: 10 03        	bpl	L287
  8945 04:2580: 82 91 00     	brl	L10115
  8946                        L287:
  8947                        	.line	1802
  8948                        ;				if(y >=r.y && y<(r.y+r.h
                    eight))
  8949                        	.line	1803
  8950                        ;				{
  8951 04:2583: 38           	sec
  8952 04:2584: A5 2A        	lda	<L277+y_0
  8953 04:2586: E5 17        	sbc	<L278+r_1+2
  8954 04:2588: 70 03        	bvs	L288
  8955 04:258A: 49 00 80     	eor	#$8000
  8956                        L288:
  8957 04:258D: 30 03        	bmi	L289
  8958 04:258F: 82 82 00     	brl	L10116
  8959                        L289:
  8960 04:2592: 18           	clc
  8961 04:2593: A5 17        	lda	<L278+r_1+2
  8962 04:2595: 65 1B        	adc	<L278+r_1+6
  8963 04:2597: 85 01        	sta	<R0
  8964 04:2599: 38           	sec
  8965 04:259A: A5 2A        	lda	<L277+y_0
  8966 04:259C: E5 01        	sbc	<R0
  8967 04:259E: 70 03        	bvs	L290
  8968 04:25A0: 49 00 80     	eor	#$8000
  8969                        L290:
  8970 04:25A3: 10 03        	bpl	L291
  8971 04:25A5: 82 6C 00     	brl	L10116
  8972                        L291:
  8973                        	.line	1804
  8974                        ;					//k_debug_pointe
                    r("CURRENT ACTIVE OBJECT:",_k_windowManager_ObjectHitList->l
                    istData);
  8975                        ;					found = k_point_
                    in_any_nodeslist(  ((PCLICKDETECTED)((PFXNODE)hitList->listD
                    ata)->data)->window->pChildHitList,x,y);
  8976                        	.line	1806
  8977 04:25A8: D4 2A        	pei	<L277+y_0
  8978 04:25AA: D4 28        	pei	<L277+x_0
  Tue Oct  1 2019  1:02                                                Page 182


  8979 04:25AC: A0 04 00     	ldy	#$4
  8980 04:25AF: B7 24        	lda	[<L277+hitList_0],Y
  8981 04:25B1: 85 01        	sta	<R0
  8982 04:25B3: A0 06 00     	ldy	#$6
  8983 04:25B6: B7 24        	lda	[<L277+hitList_0],Y
  8984 04:25B8: 85 03        	sta	<R0+2
  8985 04:25BA: A0 02 00     	ldy	#$2
  8986 04:25BD: B7 01        	lda	[<R0],Y
  8987 04:25BF: 85 05        	sta	<R1
  8988 04:25C1: A0 04 00     	ldy	#$4
  8989 04:25C4: B7 01        	lda	[<R0],Y
  8990 04:25C6: 85 07        	sta	<R1+2
  8991 04:25C8: A7 05        	lda	[<R1]
  8992 04:25CA: 85 01        	sta	<R0
  8993 04:25CC: A0 02 00     	ldy	#$2
  8994 04:25CF: B7 05        	lda	[<R1],Y
  8995 04:25D1: 85 03        	sta	<R0+2
  8996 04:25D3: A0 5A 00     	ldy	#$5a
  8997 04:25D6: B7 01        	lda	[<R0],Y
  8998 04:25D8: 48           	pha
  8999 04:25D9: A0 58 00     	ldy	#$58
  9000 04:25DC: B7 01        	lda	[<R0],Y
  9001 04:25DE: 48           	pha
  9002 04:25DF: 22 DF 23 04  	jsl	~~k_point_in_any_nodeslist
  9003 04:25E3: 85 09        	sta	<L278+found_1
  9004 04:25E5: 86 0B        	stx	<L278+found_1+2
  9005                        ;					if(found)
  9006                        	.line	1807
  9007                        ;						return f
                    ound;
  9008 04:25E7: A5 09        	lda	<L278+found_1
  9009 04:25E9: 05 0B        	ora	<L278+found_1+2
  9010 04:25EB: D0 03        	bne	L292
  9011 04:25ED: 82 16 00     	brl	L10117
  9012                        L292:
  9013                        	.line	1808
  9014 04:25F0: A6 0B        	ldx	<L278+found_1+2
  9015 04:25F2: A5 09        	lda	<L278+found_1
  9016                        L293:
  9017 04:25F4: A8           	tay
  9018 04:25F5: A5 22        	lda	<L277+2
  9019 04:25F7: 85 2A        	sta	<L277+2+8
  9020 04:25F9: A5 21        	lda	<L277+1
  9021 04:25FB: 85 29        	sta	<L277+1+8
  9022 04:25FD: 2B           	pld
  9023 04:25FE: 3B           	tsc
  9024 04:25FF: 18           	clc
  9025 04:2600: 69 28 00     	adc	#L277+8
  9026 04:2603: 1B           	tcs
  9027 04:2604: 98           	tya
  9028 04:2605: 6B           	rtl
  9029                        ;
  9030                        ;					return (PFXNODE)
                    hitList->listData;
  9031                        L10117:
  9032                        	.line	1810
  9033 04:2606: A0 06 00     	ldy	#$6
  9034 04:2609: B7 24        	lda	[<L277+hitList_0],Y
  Tue Oct  1 2019  1:02                                                Page 183


  9035 04:260B: AA           	tax
  9036 04:260C: A0 04 00     	ldy	#$4
  9037 04:260F: B7 24        	lda	[<L277+hitList_0],Y
  9038 04:2611: 82 E0 FF     	brl	L293
  9039                        ;				}
  9040                        	.line	1811
  9041                        ;			}
  9042                        L10116:
  9043                        	.line	1812
  9044                        ;		}
  9045                        L10115:
  9046                        	.line	1813
  9047                        ;
  9048                        ;		ptr = k_nodelist_getfirstnode(hitList);
  9049                        L10114:
  9050                        	.line	1815
  9051 04:2614: D4 26        	pei	<L277+hitList_0+2
  9052 04:2616: D4 24        	pei	<L277+hitList_0
  9053 04:2618: 22 xx xx xx  	jsl	~~k_nodelist_getfirstnode
  9054 04:261C: 85 11        	sta	<L278+ptr_1
  9055 04:261E: 86 13        	stx	<L278+ptr_1+2
  9056                        ;		while(ptr!=NULL)
  9057                        	.line	1816
  9058                        L10118:
  9059 04:2620: A5 11        	lda	<L278+ptr_1
  9060 04:2622: 05 13        	ora	<L278+ptr_1+2
  9061 04:2624: D0 03        	bne	L294
  9062 04:2626: 82 0D 01     	brl	L10119
  9063                        L294:
  9064                        ;		{
  9065                        	.line	1817
  9066                        ;			//k_debug_pointer("FOUND HIT CHE
                    CK ITEM:",ptr);
  9067                        ;			found = k_point_in_any_nodeslist
                    (NULL,x,y); //k_point_in_any_nodeslist(((PCLICKDETECTED)ptr-
                    >data)->window->pChildHitList,x,y);
  9068                        	.line	1819
  9069 04:2629: D4 2A        	pei	<L277+y_0
  9070 04:262B: D4 28        	pei	<L277+x_0
  9071 04:262D: F4 00 00     	pea	#^$0
  9072 04:2630: F4 00 00     	pea	#<$0
  9073 04:2633: 22 DF 23 04  	jsl	~~k_point_in_any_nodeslist
  9074 04:2637: 85 09        	sta	<L278+found_1
  9075 04:2639: 86 0B        	stx	<L278+found_1+2
  9076                        ;			if(!found)
  9077                        	.line	1820
  9078                        ;			{
  9079 04:263B: A5 09        	lda	<L278+found_1
  9080 04:263D: 05 0B        	ora	<L278+found_1+2
  9081 04:263F: F0 03        	beq	L295
  9082 04:2641: 82 EF 00     	brl	L10120
  9083                        L295:
  9084                        	.line	1821
  9085                        ;				r = ((PCLICKABLE)((PCLIC
                    KDETECTED)ptr->data)->window->clickable)->area;
  9086                        	.line	1822
  9087 04:2644: A0 02 00     	ldy	#$2
  9088 04:2647: B7 11        	lda	[<L278+ptr_1],Y
  Tue Oct  1 2019  1:02                                                Page 184


  9089 04:2649: 85 01        	sta	<R0
  9090 04:264B: A0 04 00     	ldy	#$4
  9091 04:264E: B7 11        	lda	[<L278+ptr_1],Y
  9092 04:2650: 85 03        	sta	<R0+2
  9093 04:2652: A7 01        	lda	[<R0]
  9094 04:2654: 85 05        	sta	<R1
  9095 04:2656: A0 02 00     	ldy	#$2
  9096 04:2659: B7 01        	lda	[<R0],Y
  9097 04:265B: 85 07        	sta	<R1+2
  9098 04:265D: A0 12 00     	ldy	#$12
  9099 04:2660: B7 05        	lda	[<R1],Y
  9100 04:2662: 48           	pha
  9101 04:2663: A0 10 00     	ldy	#$10
  9102 04:2666: B7 05        	lda	[<R1],Y
  9103 04:2668: 48           	pha
  9104 04:2669: 18           	clc
  9105 04:266A: 7B           	tdc
  9106 04:266B: 69 15 00     	adc	#<L278+r_1
  9107 04:266E: 85 01        	sta	<R0
  9108 04:2670: A9 00 00     	lda	#$0
  9109 04:2673: 85 03        	sta	<R0+2
  9110 04:2675: D4 03        	pei	<R0+2
  9111 04:2677: D4 01        	pei	<R0
  9112 04:2679: A9 08 00     	lda	#$8
  9113                        	xref	~~~fmov
  9114 04:267C: 22 xx xx xx  	jsl	~~~fmov
  9115                        ;				if(x >=r.x && x<(r.x+r.w
                    idth))
  9116                        	.line	1823
  9117                        ;				{
  9118 04:2680: 38           	sec
  9119 04:2681: A5 28        	lda	<L277+x_0
  9120 04:2683: E5 15        	sbc	<L278+r_1
  9121 04:2685: 70 03        	bvs	L296
  9122 04:2687: 49 00 80     	eor	#$8000
  9123                        L296:
  9124 04:268A: 30 03        	bmi	L297
  9125 04:268C: 82 8E 00     	brl	L10121
  9126                        L297:
  9127 04:268F: 18           	clc
  9128 04:2690: A5 15        	lda	<L278+r_1
  9129 04:2692: 65 19        	adc	<L278+r_1+4
  9130 04:2694: 85 01        	sta	<R0
  9131 04:2696: 38           	sec
  9132 04:2697: A5 28        	lda	<L277+x_0
  9133 04:2699: E5 01        	sbc	<R0
  9134 04:269B: 70 03        	bvs	L298
  9135 04:269D: 49 00 80     	eor	#$8000
  9136                        L298:
  9137 04:26A0: 10 03        	bpl	L299
  9138 04:26A2: 82 78 00     	brl	L10121
  9139                        L299:
  9140                        	.line	1824
  9141                        ;					if(y >=r.y && y<
                    (r.y+r.height))
  9142                        	.line	1825
  9143                        ;					{
  9144 04:26A5: 38           	sec
  Tue Oct  1 2019  1:02                                                Page 185


  9145 04:26A6: A5 2A        	lda	<L277+y_0
  9146 04:26A8: E5 17        	sbc	<L278+r_1+2
  9147 04:26AA: 70 03        	bvs	L300
  9148 04:26AC: 49 00 80     	eor	#$8000
  9149                        L300:
  9150 04:26AF: 30 03        	bmi	L301
  9151 04:26B1: 82 69 00     	brl	L10122
  9152                        L301:
  9153 04:26B4: 18           	clc
  9154 04:26B5: A5 17        	lda	<L278+r_1+2
  9155 04:26B7: 65 1B        	adc	<L278+r_1+6
  9156 04:26B9: 85 01        	sta	<R0
  9157 04:26BB: 38           	sec
  9158 04:26BC: A5 2A        	lda	<L277+y_0
  9159 04:26BE: E5 01        	sbc	<R0
  9160 04:26C0: 70 03        	bvs	L302
  9161 04:26C2: 49 00 80     	eor	#$8000
  9162                        L302:
  9163 04:26C5: 10 03        	bpl	L303
  9164 04:26C7: 82 53 00     	brl	L10122
  9165                        L303:
  9166                        	.line	1826
  9167                        ;						//found 
                    = ptr;
  9168                        ;
  9169                        ;						found = 
                     k_point_in_any_nodeslist( ((PCLICKDETECTED)ptr->data)->wind
                    ow->pChildHitList   ,x,y); // k_point_in_any_nodeslist(((PCL
                    ICKDETECTED)ptr->data)->window->pChildHitList,x,y);
  9170                        	.line	1829
  9171 04:26CA: D4 2A        	pei	<L277+y_0
  9172 04:26CC: D4 28        	pei	<L277+x_0
  9173 04:26CE: A0 02 00     	ldy	#$2
  9174 04:26D1: B7 11        	lda	[<L278+ptr_1],Y
  9175 04:26D3: 85 01        	sta	<R0
  9176 04:26D5: A0 04 00     	ldy	#$4
  9177 04:26D8: B7 11        	lda	[<L278+ptr_1],Y
  9178 04:26DA: 85 03        	sta	<R0+2
  9179 04:26DC: A7 01        	lda	[<R0]
  9180 04:26DE: 85 05        	sta	<R1
  9181 04:26E0: A0 02 00     	ldy	#$2
  9182 04:26E3: B7 01        	lda	[<R0],Y
  9183 04:26E5: 85 07        	sta	<R1+2
  9184 04:26E7: A0 5A 00     	ldy	#$5a
  9185 04:26EA: B7 05        	lda	[<R1],Y
  9186 04:26EC: 48           	pha
  9187 04:26ED: A0 58 00     	ldy	#$58
  9188 04:26F0: B7 05        	lda	[<R1],Y
  9189 04:26F2: 48           	pha
  9190 04:26F3: 22 DF 23 04  	jsl	~~k_point_in_any_nodeslist
  9191 04:26F7: 85 09        	sta	<L278+found_1
  9192 04:26F9: 86 0B        	stx	<L278+found_1+2
  9193                        ;						if(!foun
                    d)
  9194                        	.line	1830
  9195                        ;						{
  9196 04:26FB: A5 09        	lda	<L278+found_1
  9197 04:26FD: 05 0B        	ora	<L278+found_1+2
  Tue Oct  1 2019  1:02                                                Page 186


  9198 04:26FF: F0 03        	beq	L304
  9199 04:2701: 82 08 00     	brl	L10123
  9200                        L304:
  9201                        	.line	1831
  9202                        ;							
                    found = ptr;
  9203                        	.line	1832
  9204 04:2704: A5 11        	lda	<L278+ptr_1
  9205 04:2706: 85 09        	sta	<L278+found_1
  9206 04:2708: A5 13        	lda	<L278+ptr_1+2
  9207 04:270A: 85 0B        	sta	<L278+found_1+2
  9208                        ;						}
  9209                        	.line	1833
  9210                        ;
  9211                        ;						hitList-
                    >listData = found;
  9212                        L10123:
  9213                        	.line	1835
  9214 04:270C: A5 09        	lda	<L278+found_1
  9215 04:270E: A0 04 00     	ldy	#$4
  9216 04:2711: 97 24        	sta	[<L277+hitList_0],Y
  9217 04:2713: A5 0B        	lda	<L278+found_1+2
  9218 04:2715: A0 06 00     	ldy	#$6
  9219 04:2718: 97 24        	sta	[<L277+hitList_0],Y
  9220                        ;						break;
  9221                        	.line	1836
  9222 04:271A: 82 19 00     	brl	L10119
  9223                        ;					}
  9224                        	.line	1837
  9225                        ;				}
  9226                        L10122:
  9227                        	.line	1838
  9228                        ;				ptr = ptr->next;
  9229                        L10121:
  9230                        	.line	1839
  9231 04:271D: A0 0A 00     	ldy	#$a
  9232 04:2720: B7 11        	lda	[<L278+ptr_1],Y
  9233 04:2722: 85 01        	sta	<R0
  9234 04:2724: A0 0C 00     	ldy	#$c
  9235 04:2727: B7 11        	lda	[<L278+ptr_1],Y
  9236 04:2729: 85 03        	sta	<R0+2
  9237 04:272B: A5 01        	lda	<R0
  9238 04:272D: 85 11        	sta	<L278+ptr_1
  9239 04:272F: A5 03        	lda	<R0+2
  9240 04:2731: 85 13        	sta	<L278+ptr_1+2
  9241                        ;			}
  9242                        	.line	1840
  9243                        ;		}
  9244                        L10120:
  9245                        	.line	1841
  9246 04:2733: 82 EA FE     	brl	L10118
  9247                        L10119:
  9248                        ;	}
  9249                        	.line	1842
  9250                        ;
  9251                        ;	//k_debug_pointer("k_point_in_any_nodeslist:",fo
                    und);
  9252                        ;
  Tue Oct  1 2019  1:02                                                Page 187


  9253                        ;	return found;
  9254                        L10113:
  9255                        	.line	1846
  9256 04:2736: A6 0B        	ldx	<L278+found_1+2
  9257 04:2738: A5 09        	lda	<L278+found_1
  9258 04:273A: 82 B7 FE     	brl	L293
  9259                        ;}
  9260                        	.line	1847
  9261                        	.endblock	1847
  9262             00000020   L277	equ	32
  9263             00000009   L278	equ	9
  9264 04:273D:              	ends
  9265                        	efunc
  9266                        	.endfunc	1847,9,32
  9267                        	.line	1847
  9268                        	data
  9269                        L231:
  9270 00:0A71: 00 6B 5F 70  	db	$00,$6B,$5F,$70,$6F,$69,$6E,$74,$5F,$69,
                    $6E,$5F,$61,$6E,$79
       00:0A75: 6F 69 6E 74 
       00:0A79: 5F 69 6E 5F 
       00:0A7D: 61 6E 79 
  9271 00:0A80: 5F 6E 6F 64  	db	$5F,$6E,$6F,$64,$65,$73,$6C,$69,$73,$74,
                    $3A,$64,$61,$74,$61
       00:0A84: 65 73 6C 69 
       00:0A88: 73 74 3A 64 
       00:0A8C: 61 74 61 
  9272 00:0A8F: 3A 00 6B 5F  	db	$3A,$00,$6B,$5F,$70,$6F,$69,$6E,$74,$5F,
                    $69,$6E,$5F,$61,$6E
       00:0A93: 70 6F 69 6E 
       00:0A97: 74 5F 69 6E 
       00:0A9B: 5F 61 6E 
  9273 00:0A9E: 79 5F 6E 6F  	db	$79,$5F,$6E,$6F,$64,$65,$73,$6C,$69,$73,
                    $74,$3A,$77,$69,$6E
       00:0AA2: 64 65 73 6C 
       00:0AA6: 69 73 74 3A 
       00:0AAA: 77 69 6E 
  9274 00:0AAD: 64 6F 77 3A  	db	$64,$6F,$77,$3A,$00,$6B,$5F,$70,$6F,$69,
                    $6E,$74,$5F,$69,$6E
       00:0AB1: 00 6B 5F 70 
       00:0AB5: 6F 69 6E 74 
       00:0AB9: 5F 69 6E 
  9275 00:0ABC: 5F 61 6E 79  	db	$5F,$61,$6E,$79,$5F,$6E,$6F,$64,$65,$73,
                    $6C,$69,$73,$74,$3A
       00:0AC0: 5F 6E 6F 64 
       00:0AC4: 65 73 6C 69 
       00:0AC8: 73 74 3A 
  9276 00:0ACB: 63 6C 69 63  	db	$63,$6C,$69,$63,$6B,$61,$62,$6C,$65,$3A,
                    $00
       00:0ACF: 6B 61 62 6C 
       00:0AD3: 65 3A 00 
  9277 00:0AD6:              	ends
  9278                        ;
  9279                        ;
  9280                        ;
  9281                        ;
  9282                        ;BOOL k_user_ShowWindow(HWND hWnd,UINT showFlag)
  9283                        ;{
  Tue Oct  1 2019  1:02                                                Page 188


  9284                        	.line	1852
  9285                        	.line	1853
  9286                        	WINMAN
  9287                        	xdef	~~k_user_ShowWindow
  9288                        	func
  9289                        	.function	1853
  9290                        ~~k_user_ShowWindow:
  9291                        	longa	on
  9292                        	longi	on
  9293 04:273D: 3B           	tsc
  9294 04:273E: 38           	sec
  9295 04:273F: E9 00 00     	sbc	#L306
  9296 04:2742: 1B           	tcs
  9297 04:2743: 0B           	phd
  9298 04:2744: 5B           	tcd
  9299             00000004   hWnd_0	set	4
  9300             00000008   showFlag_0	set	8
  9301                        	.block	1853
  9302                        ;	return FALSE;
  9303                        	.sym	hWnd,4,129,6,32
  9304                        	.sym	showFlag,8,16,6,16
  9305                        	.line	1854
  9306 04:2745: A9 00 00     	lda	#$0
  9307                        L309:
  9308 04:2748: A8           	tay
  9309 04:2749: A5 02        	lda	<L306+2
  9310 04:274B: 85 08        	sta	<L306+2+6
  9311 04:274D: A5 01        	lda	<L306+1
  9312 04:274F: 85 07        	sta	<L306+1+6
  9313 04:2751: 2B           	pld
  9314 04:2752: 3B           	tsc
  9315 04:2753: 18           	clc
  9316 04:2754: 69 06 00     	adc	#L306+6
  9317 04:2757: 1B           	tcs
  9318 04:2758: 98           	tya
  9319 04:2759: 6B           	rtl
  9320                        ;}
  9321                        	.line	1855
  9322                        	.endblock	1855
  9323             00000000   L306	equ	0
  9324             00000001   L307	equ	1
  9325 04:275A:              	ends
  9326                        	efunc
  9327                        	.endfunc	1855,1,0
  9328                        	.line	1855
  9329                        ;
  9330                        ;
  9331                        ;PPOINT k_user_ClientToGlobalCoordinates(PPOINT po
                    int)
  9332                        ;{
  9333                        	.line	1858
  9334                        	.line	1859
  9335                        	WINMAN
  9336                        	xdef	~~k_user_ClientToGlobalCoordinates
  9337                        	func
  9338                        	.function	1859
  9339                        ~~k_user_ClientToGlobalCoordinates:
  9340                        	longa	on
  Tue Oct  1 2019  1:02                                                Page 189


  9341                        	longi	on
  9342 04:275A: 3B           	tsc
  9343 04:275B: 38           	sec
  9344 04:275C: E9 00 00     	sbc	#L310
  9345 04:275F: 1B           	tcs
  9346 04:2760: 0B           	phd
  9347 04:2761: 5B           	tcd
  9348             00000004   point_0	set	4
  9349                        	.block	1859
  9350                        ;	return NULL;
  9351                        	.sym	point,4,138,6,32,20
  9352                        	.line	1860
  9353 04:2762: A9 00 00     	lda	#$0
  9354 04:2765: AA           	tax
  9355 04:2766: A9 00 00     	lda	#$0
  9356                        L313:
  9357 04:2769: A8           	tay
  9358 04:276A: A5 02        	lda	<L310+2
  9359 04:276C: 85 06        	sta	<L310+2+4
  9360 04:276E: A5 01        	lda	<L310+1
  9361 04:2770: 85 05        	sta	<L310+1+4
  9362 04:2772: 2B           	pld
  9363 04:2773: 3B           	tsc
  9364 04:2774: 18           	clc
  9365 04:2775: 69 04 00     	adc	#L310+4
  9366 04:2778: 1B           	tcs
  9367 04:2779: 98           	tya
  9368 04:277A: 6B           	rtl
  9369                        ;}
  9370                        	.line	1861
  9371                        	.endblock	1861
  9372             00000000   L310	equ	0
  9373             00000001   L311	equ	1
  9374 04:277B:              	ends
  9375                        	efunc
  9376                        	.endfunc	1861,1,0
  9377                        	.line	1861
  9378                        ;
  9379                        ;
  9380                        ;PPOINT k_user_GlobalToClientCoordinates(HWND hWnd
                    ,PPOINT point)
  9381                        ;{
  9382                        	.line	1864
  9383                        	.line	1865
  9384                        	WINMAN
  9385                        	xdef	~~k_user_GlobalToClientCoordinates
  9386                        	func
  9387                        	.function	1865
  9388                        ~~k_user_GlobalToClientCoordinates:
  9389                        	longa	on
  9390                        	longi	on
  9391 04:277B: 3B           	tsc
  9392 04:277C: 38           	sec
  9393 04:277D: E9 00 00     	sbc	#L314
  9394 04:2780: 1B           	tcs
  9395 04:2781: 0B           	phd
  9396 04:2782: 5B           	tcd
  9397             00000004   hWnd_0	set	4
  Tue Oct  1 2019  1:02                                                Page 190


  9398             00000008   point_0	set	8
  9399                        	.block	1865
  9400                        ;	return NULL;
  9401                        	.sym	hWnd,4,129,6,32
  9402                        	.sym	point,8,138,6,32,20
  9403                        	.line	1866
  9404 04:2783: A9 00 00     	lda	#$0
  9405 04:2786: AA           	tax
  9406 04:2787: A9 00 00     	lda	#$0
  9407                        L317:
  9408 04:278A: A8           	tay
  9409 04:278B: A5 02        	lda	<L314+2
  9410 04:278D: 85 0A        	sta	<L314+2+8
  9411 04:278F: A5 01        	lda	<L314+1
  9412 04:2791: 85 09        	sta	<L314+1+8
  9413 04:2793: 2B           	pld
  9414 04:2794: 3B           	tsc
  9415 04:2795: 18           	clc
  9416 04:2796: 69 08 00     	adc	#L314+8
  9417 04:2799: 1B           	tcs
  9418 04:279A: 98           	tya
  9419 04:279B: 6B           	rtl
  9420                        ;}
  9421                        	.line	1867
  9422                        	.endblock	1867
  9423             00000000   L314	equ	0
  9424             00000001   L315	equ	1
  9425 04:279C:              	ends
  9426                        	efunc
  9427                        	.endfunc	1867,1,0
  9428                        	.line	1867
  9429                        ;
  9430                        ;
  9431                        ;BOOL gadgetWindowProc(PFXOSMESSAGE pMsg)
  9432                        ;{
  9433                        	.line	1870
  9434                        	.line	1871
  9435                        	WINMAN
  9436                        	xdef	~~gadgetWindowProc
  9437                        	func
  9438                        	.function	1871
  9439                        ~~gadgetWindowProc:
  9440                        	longa	on
  9441                        	longi	on
  9442 04:279C: 3B           	tsc
  9443 04:279D: 38           	sec
  9444 04:279E: E9 04 00     	sbc	#L318
  9445 04:27A1: 1B           	tcs
  9446 04:27A2: 0B           	phd
  9447 04:27A3: 5B           	tcd
  9448             00000004   pMsg_0	set	4
  9449                        	.block	1871
  9450                        ;	PFXPROCESS p = NULL;
  9451                        ;
  9452                        ;	if(pMsg!=NULL)
  9453             00000000   p_1	set	0
  9454                        	.sym	p,0,138,1,32,16
  9455                        	.sym	pMsg,4,138,6,32,12
  Tue Oct  1 2019  1:02                                                Page 191


  9456 04:27A4: 64 01        	stz	<L319+p_1
  9457 04:27A6: 64 03        	stz	<L319+p_1+2
  9458                        	.line	1874
  9459                        ;	{
  9460 04:27A8: A5 08        	lda	<L318+pMsg_0
  9461 04:27AA: 05 0A        	ora	<L318+pMsg_0+2
  9462 04:27AC: D0 03        	bne	L321
  9463 04:27AE: 82 66 00     	brl	L10124
  9464                        L321:
  9465                        	.line	1875
  9466                        ;		p = k_exec_get_current_process();
  9467                        	.line	1876
  9468 04:27B1: 22 xx xx xx  	jsl	~~k_exec_get_current_process
  9469 04:27B5: 85 01        	sta	<L319+p_1
  9470 04:27B7: 86 03        	stx	<L319+p_1+2
  9471                        ;
  9472                        ;		//k_debug_long("consoleWindowProc::Proce
                    ssId:",p->procId);
  9473                        ;
  9474                        ;		switch(pMsg->type)
  9475                        	.line	1880
  9476 04:27B9: A0 08 00     	ldy	#$8
  9477 04:27BC: B7 08        	lda	[<L318+pMsg_0],Y
  9478 04:27BE: 82 46 00     	brl	L10125
  9479                        ;		{
  9480                        	.line	1881
  9481                        ;		case FX_CREATE_WINDOW:
  9482                        	.line	1882
  9483                        L10127:
  9484                        ;			k_debug_long("gadgetWindowProc::
                    ProcessId:",p->procId);
  9485                        	.line	1883
  9486 04:27C1: A0 04 00     	ldy	#$4
  9487 04:27C4: B7 01        	lda	[<L319+p_1],Y
  9488 04:27C6: 48           	pha
  9489 04:27C7: A0 02 00     	ldy	#$2
  9490 04:27CA: B7 01        	lda	[<L319+p_1],Y
  9491 04:27CC: 48           	pha
  9492 04:27CD: F4 xx xx     	pea	#^L305
  9493 04:27D0: F4 xx xx     	pea	#<L305
  9494 04:27D3: 22 xx xx xx  	jsl	~~k_debug_long
  9495                        ;			k_debug_integer("gadgetWindowPro
                    c::MessageId:",pMsg->type);
  9496                        	.line	1884
  9497 04:27D7: A0 08 00     	ldy	#$8
  9498 04:27DA: B7 08        	lda	[<L318+pMsg_0],Y
  9499 04:27DC: 48           	pha
  9500 04:27DD: F4 xx xx     	pea	#^L305+29
  9501 04:27E0: F4 xx xx     	pea	#<L305+29
  9502 04:27E3: 22 xx xx xx  	jsl	~~k_debug_integer
  9503                        ;			break;
  9504                        	.line	1885
  9505 04:27E7: 82 2D 00     	brl	L10126
  9506                        ;		case FX_LBUTTON_DOWN:
  9507                        	.line	1886
  9508                        L10128:
  9509                        ;			if(pMsg->type!=FX_PROCESS)
  9510                        	.line	1887
  Tue Oct  1 2019  1:02                                                Page 192


  9511                        ;			{
  9512 04:27EA: A0 08 00     	ldy	#$8
  9513 04:27ED: B7 08        	lda	[<L318+pMsg_0],Y
  9514 04:27EF: C9 00 FF     	cmp	#<$ff00
  9515 04:27F2: D0 03        	bne	L322
  9516 04:27F4: 82 0A 00     	brl	L10129
  9517                        L322:
  9518                        	.line	1888
  9519                        ;				//k_debug_integer("conso
                    leWindowProc::ProcessId:",p->procId);
  9520                        ;				k_debug_string("gadgetWi
                    ndowProc::FX_MBUTTON_DOWN\r\n");
  9521                        	.line	1890
  9522 04:27F7: F4 xx xx     	pea	#^L305+58
  9523 04:27FA: F4 xx xx     	pea	#<L305+58
  9524 04:27FD: 22 xx xx xx  	jsl	~~k_debug_string
  9525                        ;			}
  9526                        	.line	1891
  9527                        ;
  9528                        ;			break;
  9529                        L10129:
  9530                        	.line	1893
  9531 04:2801: 82 13 00     	brl	L10126
  9532                        ;		default:
  9533                        	.line	1894
  9534                        L10130:
  9535                        ;			break;
  9536                        	.line	1895
  9537 04:2804: 82 10 00     	brl	L10126
  9538                        ;		}
  9539                        	.line	1896
  9540                        L10125:
  9541                        	xref	~~~swt
  9542 04:2807: 22 xx xx xx  	jsl	~~~swt
  9543 04:280B: 02 00        	dw	2
  9544 04:280D: 04 0F        	dw	3844
  9545 04:280F: E9 27        	dw	L10128-1
  9546 04:2811: 03 FF        	dw	65283
  9547 04:2813: C0 27        	dw	L10127-1
  9548 04:2815: 03 28        	dw	L10130-1
  9549                        L10126:
  9550                        ;	}
  9551                        	.line	1897
  9552                        ;
  9553                        ;	return TRUE;
  9554                        L10124:
  9555                        	.line	1899
  9556 04:2817: A9 01 00     	lda	#$1
  9557                        L323:
  9558 04:281A: A8           	tay
  9559 04:281B: A5 06        	lda	<L318+2
  9560 04:281D: 85 0A        	sta	<L318+2+4
  9561 04:281F: A5 05        	lda	<L318+1
  9562 04:2821: 85 09        	sta	<L318+1+4
  9563 04:2823: 2B           	pld
  9564 04:2824: 3B           	tsc
  9565 04:2825: 18           	clc
  9566 04:2826: 69 08 00     	adc	#L318+4
  Tue Oct  1 2019  1:02                                                Page 193


  9567 04:2829: 1B           	tcs
  9568 04:282A: 98           	tya
  9569 04:282B: 6B           	rtl
  9570                        ;}
  9571                        	.line	1900
  9572                        	.endblock	1900
  9573             00000004   L318	equ	4
  9574             00000001   L319	equ	1
  9575 04:282C:              	ends
  9576                        	efunc
  9577                        	.endfunc	1900,1,4
  9578                        	.line	1900
  9579                        	data
  9580                        L305:
  9581 00:0AD6: 67 61 64 67  	db	$67,$61,$64,$67,$65,$74,$57,$69,$6E,$64,
                    $6F,$77,$50,$72,$6F
       00:0ADA: 65 74 57 69 
       00:0ADE: 6E 64 6F 77 
       00:0AE2: 50 72 6F 
  9582 00:0AE5: 63 3A 3A 50  	db	$63,$3A,$3A,$50,$72,$6F,$63,$65,$73,$73,
                    $49,$64,$3A,$00,$67
       00:0AE9: 72 6F 63 65 
       00:0AED: 73 73 49 64 
       00:0AF1: 3A 00 67 
  9583 00:0AF4: 61 64 67 65  	db	$61,$64,$67,$65,$74,$57,$69,$6E,$64,$6F,
                    $77,$50,$72,$6F,$63
       00:0AF8: 74 57 69 6E 
       00:0AFC: 64 6F 77 50 
       00:0B00: 72 6F 63 
  9584 00:0B03: 3A 3A 4D 65  	db	$3A,$3A,$4D,$65,$73,$73,$61,$67,$65,$49,
                    $64,$3A,$00,$67,$61
       00:0B07: 73 73 61 67 
       00:0B0B: 65 49 64 3A 
       00:0B0F: 00 67 61 
  9585 00:0B12: 64 67 65 74  	db	$64,$67,$65,$74,$57,$69,$6E,$64,$6F,$77,
                    $50,$72,$6F,$63,$3A
       00:0B16: 57 69 6E 64 
       00:0B1A: 6F 77 50 72 
       00:0B1E: 6F 63 3A 
  9586 00:0B21: 3A 46 58 5F  	db	$3A,$46,$58,$5F,$4D,$42,$55,$54,$54,$4F,
                    $4E,$5F,$44,$4F,$57
       00:0B25: 4D 42 55 54 
       00:0B29: 54 4F 4E 5F 
       00:0B2D: 44 4F 57 
  9587 00:0B30: 4E 0D 0A 00  	db	$4E,$0D,$0A,$00
  9588 00:0B34:              	ends
  9589                        ;
  9590                        ;int k_user_getSystemMetric(UINT flag)
  9591                        ;{
  9592                        	.line	1902
  9593                        	.line	1903
  9594                        	WINMAN
  9595                        	xdef	~~k_user_getSystemMetric
  9596                        	func
  9597                        	.function	1903
  9598                        ~~k_user_getSystemMetric:
  9599                        	longa	on
  9600                        	longi	on
  Tue Oct  1 2019  1:02                                                Page 194


  9601 04:282C: 3B           	tsc
  9602 04:282D: 38           	sec
  9603 04:282E: E9 0A 00     	sbc	#L325
  9604 04:2831: 1B           	tcs
  9605 04:2832: 0B           	phd
  9606 04:2833: 5B           	tcd
  9607             00000004   flag_0	set	4
  9608                        	.block	1903
  9609                        ;	FONTMETRIC fm;
  9610                        ;
  9611                        ;	int metric = -1;
  9612                        ;
  9613                        ;
  9614                        ;	switch(flag)
  9615             00000000   fm_1	set	0
  9616             00000004   metric_1	set	4
  9617                        	.sym	fm,0,10,1,32,24
  9618                        	.sym	metric,4,5,1,16
  9619                        	.sym	flag,4,16,6,16
  9620 04:2834: A9 FF FF     	lda	#$ffff
  9621 04:2837: 85 09        	sta	<L326+metric_1
  9622                        	.line	1909
  9623 04:2839: A5 0E        	lda	<L325+flag_0
  9624 04:283B: 82 2A 00     	brl	L10131
  9625                        ;	{
  9626                        	.line	1910
  9627                        ;	case SM_CYMENUSIZE:
  9628                        	.line	1911
  9629                        L10133:
  9630                        ;		k_get_font_metrics(&fm);
  9631                        	.line	1912
  9632 04:283E: F4 00 00     	pea	#0
  9633 04:2841: 18           	clc
  9634 04:2842: 7B           	tdc
  9635 04:2843: 69 05 00     	adc	#<L326+fm_1
  9636 04:2846: 48           	pha
  9637 04:2847: 22 xx xx xx  	jsl	~~k_get_font_metrics
  9638                        ;
  9639                        ;		metric = fm.height + (int)(fm.width/4);
  9640                        	.line	1914
  9641 04:284B: A5 05        	lda	<L326+fm_1
  9642 04:284D: A2 04 00     	ldx	#<$4
  9643                        	xref	~~~div
  9644 04:2850: 22 xx xx xx  	jsl	~~~div
  9645 04:2854: 85 01        	sta	<R0
  9646 04:2856: 18           	clc
  9647 04:2857: A5 01        	lda	<R0
  9648 04:2859: 65 07        	adc	<L326+fm_1+2
  9649 04:285B: 85 09        	sta	<L326+metric_1
  9650                        ;
  9651                        ;		break;
  9652                        	.line	1916
  9653 04:285D: 82 18 00     	brl	L10132
  9654                        ;	case SM_CXMENUSIZE:
  9655                        	.line	1917
  9656                        L10134:
  9657                        ;
  9658                        ;		metric = 640;
  Tue Oct  1 2019  1:02                                                Page 195


  9659                        	.line	1919
  9660 04:2860: A9 80 02     	lda	#$280
  9661 04:2863: 85 09        	sta	<L326+metric_1
  9662                        ;
  9663                        ;		break;
  9664                        	.line	1921
  9665 04:2865: 82 10 00     	brl	L10132
  9666                        ;	}
  9667                        	.line	1922
  9668                        L10131:
  9669                        	xref	~~~swt
  9670 04:2868: 22 xx xx xx  	jsl	~~~swt
  9671 04:286C: 02 00        	dw	2
  9672 04:286E: 36 00        	dw	54
  9673 04:2870: 5F 28        	dw	L10134-1
  9674 04:2872: 37 00        	dw	55
  9675 04:2874: 3D 28        	dw	L10133-1
  9676 04:2876: 77 28        	dw	L10132-1
  9677                        L10132:
  9678                        ;
  9679                        ;	return metric;
  9680                        	.line	1924
  9681 04:2878: A5 09        	lda	<L326+metric_1
  9682                        L328:
  9683 04:287A: A8           	tay
  9684 04:287B: A5 0C        	lda	<L325+2
  9685 04:287D: 85 0E        	sta	<L325+2+2
  9686 04:287F: A5 0B        	lda	<L325+1
  9687 04:2881: 85 0D        	sta	<L325+1+2
  9688 04:2883: 2B           	pld
  9689 04:2884: 3B           	tsc
  9690 04:2885: 18           	clc
  9691 04:2886: 69 0C 00     	adc	#L325+2
  9692 04:2889: 1B           	tcs
  9693 04:288A: 98           	tya
  9694 04:288B: 6B           	rtl
  9695                        ;}
  9696                        	.line	1925
  9697                        	.endblock	1925
  9698             0000000A   L325	equ	10
  9699             00000005   L326	equ	5
  9700 04:288C:              	ends
  9701                        	efunc
  9702                        	.endfunc	1925,5,10
  9703                        	.line	1925
  9704                        ;
  9705                        ;void k_text_callback(PWINDOW textWindow)
  9706                        ;{
  9707                        	.line	1927
  9708                        	.line	1928
  9709                        	WINMAN
  9710                        	xdef	~~k_text_callback
  9711                        	func
  9712                        	.function	1928
  9713                        ~~k_text_callback:
  9714                        	longa	on
  9715                        	longi	on
  9716 04:288C: 3B           	tsc
  Tue Oct  1 2019  1:02                                                Page 196


  9717 04:288D: 38           	sec
  9718 04:288E: E9 04 00     	sbc	#L329
  9719 04:2891: 1B           	tcs
  9720 04:2892: 0B           	phd
  9721 04:2893: 5B           	tcd
  9722             00000004   textWindow_0	set	4
  9723                        	.block	1928
  9724                        ;	k_debug_message("k_text_callback:clicked:",textW
                    indow->win_class);
  9725                        	.sym	textWindow,4,138,6,32,23
  9726                        	.line	1929
  9727 04:2894: 18           	clc
  9728 04:2895: A9 34 00     	lda	#$34
  9729 04:2898: 65 08        	adc	<L329+textWindow_0
  9730 04:289A: 85 01        	sta	<R0
  9731 04:289C: A9 00 00     	lda	#$0
  9732 04:289F: 65 0A        	adc	<L329+textWindow_0+2
  9733 04:28A1: 85 03        	sta	<R0+2
  9734 04:28A3: D4 03        	pei	<R0+2
  9735 04:28A5: D4 01        	pei	<R0
  9736 04:28A7: F4 xx xx     	pea	#^L324
  9737 04:28AA: F4 xx xx     	pea	#<L324
  9738 04:28AD: 22 xx xx xx  	jsl	~~k_debug_message
  9739                        ;	//k_send_message(NULL,FX_WINDOW_TOFRONT,NULL,0);
  9740                        ;	return;
  9741                        	.line	1931
  9742                        L332:
  9743 04:28B1: A5 06        	lda	<L329+2
  9744 04:28B3: 85 0A        	sta	<L329+2+4
  9745 04:28B5: A5 05        	lda	<L329+1
  9746 04:28B7: 85 09        	sta	<L329+1+4
  9747 04:28B9: 2B           	pld
  9748 04:28BA: 3B           	tsc
  9749 04:28BB: 18           	clc
  9750 04:28BC: 69 08 00     	adc	#L329+4
  9751 04:28BF: 1B           	tcs
  9752 04:28C0: 6B           	rtl
  9753                        ;}
  9754                        	.line	1932
  9755                        	.endblock	1932
  9756             00000004   L329	equ	4
  9757             00000005   L330	equ	5
  9758 04:28C1:              	ends
  9759                        	efunc
  9760                        	.endfunc	1932,5,4
  9761                        	.line	1932
  9762                        	data
  9763                        L324:
  9764 00:0B34: 6B 5F 74 65  	db	$6B,$5F,$74,$65,$78,$74,$5F,$63,$61,$6C,
                    $6C,$62,$61,$63,$6B
       00:0B38: 78 74 5F 63 
       00:0B3C: 61 6C 6C 62 
       00:0B40: 61 63 6B 
  9765 00:0B43: 3A 63 6C 69  	db	$3A,$63,$6C,$69,$63,$6B,$65,$64,$3A,$00
       00:0B47: 63 6B 65 64 
       00:0B4B: 3A 00 
  9766 00:0B4D:              	ends
  9767                        ;
  Tue Oct  1 2019  1:02                                                Page 197


  9768                        ;
  9769                        ;int k_render_text(HWND pParent,LPCSTR clickableTe
                    xt,int cx,int cy,char color,OBJECTCLICKED callback)
  9770                        ;{
  9771                        	.line	1935
  9772                        	.line	1936
  9773                        	WINMAN
  9774                        	xdef	~~k_render_text
  9775                        	func
  9776                        	.function	1936
  9777                        ~~k_render_text:
  9778                        	longa	on
  9779                        	longi	on
  9780 04:28C1: 3B           	tsc
  9781 04:28C2: 38           	sec
  9782 04:28C3: E9 0C 00     	sbc	#L334
  9783 04:28C6: 1B           	tcs
  9784 04:28C7: 0B           	phd
  9785 04:28C8: 5B           	tcd
  9786             00000004   pParent_0	set	4
  9787             00000008   clickableText_0	set	8
  9788             0000000C   cx_0	set	12
  9789             0000000E   cy_0	set	14
  9790             00000010   color_0	set	16
  9791             00000012   callback_0	set	18
  9792                        	.block	1936
  9793                        ;	PCLICKDETECTED pcd = NULL;
  9794                        ;	int pos = 0;
  9795                        ;	int retCode = 0;
  9796                        ;
  9797                        ;	pos = k_draw_text_point(clickableText,cx,cy,colo
                    r);
  9798             00000000   pcd_1	set	0
  9799             00000004   pos_1	set	4
  9800             00000006   retCode_1	set	6
  9801                        	.sym	pcd,0,138,1,32,50
  9802                        	.sym	pos,4,5,1,16
  9803                        	.sym	retCode,6,5,1,16
  9804                        	.sym	pParent,4,129,6,32
  9805                        	.sym	clickableText,8,142,6,32
  9806                        	.sym	cx,12,5,6,16
  9807                        	.sym	cy,14,5,6,16
  9808                        	.sym	color,16,14,6,8
  9809                        	.sym	callback,18,641,6,32
  9810 04:28C9: 64 05        	stz	<L335+pcd_1
  9811 04:28CB: 64 07        	stz	<L335+pcd_1+2
  9812 04:28CD: 64 09        	stz	<L335+pos_1
  9813 04:28CF: 64 0B        	stz	<L335+retCode_1
  9814                        	.line	1941
  9815 04:28D1: D4 1C        	pei	<L334+color_0
  9816 04:28D3: D4 1A        	pei	<L334+cy_0
  9817 04:28D5: D4 18        	pei	<L334+cx_0
  9818 04:28D7: D4 16        	pei	<L334+clickableText_0+2
  9819 04:28D9: D4 14        	pei	<L334+clickableText_0
  9820 04:28DB: 22 xx xx xx  	jsl	~~k_draw_text_point
  9821 04:28DF: 85 09        	sta	<L335+pos_1
  9822                        ;
  9823                        ;	pcd = k_mem_allocate_heap(sizeof(CLICKDETECTED))
  Tue Oct  1 2019  1:02                                                Page 198


                    ;
  9824                        	.line	1943
  9825 04:28E1: F4 08 00     	pea	#<$8
  9826 04:28E4: 22 xx xx xx  	jsl	~~k_mem_allocate_heap
  9827 04:28E8: 85 05        	sta	<L335+pcd_1
  9828 04:28EA: 86 07        	stx	<L335+pcd_1+2
  9829                        ;	if(pcd)
  9830                        	.line	1944
  9831                        ;	{
  9832 04:28EC: A5 05        	lda	<L335+pcd_1
  9833 04:28EE: 05 07        	ora	<L335+pcd_1+2
  9834 04:28F0: D0 03        	bne	L337
  9835 04:28F2: 82 8C 00     	brl	L10135
  9836                        L337:
  9837                        	.line	1945
  9838                        ;		pcd->window  = k_create_ui_window_class(
                    cx,cy,FONTH,pos - cx,"text","text",NULL);
  9839                        	.line	1946
  9840 04:28F5: F4 00 00     	pea	#^$0
  9841 04:28F8: F4 00 00     	pea	#<$0
  9842 04:28FB: F4 xx xx     	pea	#^L333+5
  9843 04:28FE: F4 xx xx     	pea	#<L333+5
  9844 04:2901: F4 xx xx     	pea	#^L333
  9845 04:2904: F4 xx xx     	pea	#<L333
  9846 04:2907: 38           	sec
  9847 04:2908: A5 09        	lda	<L335+pos_1
  9848 04:290A: E5 18        	sbc	<L334+cx_0
  9849 04:290C: 48           	pha
  9850 04:290D: 22 xx xx xx  	jsl	~~k_font_getFontHeight
  9851 04:2911: 48           	pha
  9852 04:2912: D4 1A        	pei	<L334+cy_0
  9853 04:2914: D4 18        	pei	<L334+cx_0
  9854 04:2916: 22 xx xx xx  	jsl	~~k_create_ui_window_class
  9855 04:291A: 85 01        	sta	<R0
  9856 04:291C: 86 03        	stx	<R0+2
  9857 04:291E: A5 01        	lda	<R0
  9858 04:2920: 87 05        	sta	[<L335+pcd_1]
  9859 04:2922: A5 03        	lda	<R0+2
  9860 04:2924: A0 02 00     	ldy	#$2
  9861 04:2927: 97 05        	sta	[<L335+pcd_1],Y
  9862                        ;		pcd->handler = callback;
  9863                        	.line	1947
  9864 04:2929: A5 1E        	lda	<L334+callback_0
  9865 04:292B: A0 04 00     	ldy	#$4
  9866 04:292E: 97 05        	sta	[<L335+pcd_1],Y
  9867 04:2930: A5 20        	lda	<L334+callback_0+2
  9868 04:2932: A0 06 00     	ldy	#$6
  9869 04:2935: 97 05        	sta	[<L335+pcd_1],Y
  9870                        ;		//k_add_window_hit_node(pcd);
  9871                        ;
  9872                        ;		if(pParent)
  9873                        	.line	1950
  9874                        ;			k_attach_mouse_detection_local(k
                    _getWindowFromHandle(pParent)->pChildHitList,pcd->window ,k_
                    update_hover_location);
  9875 04:2937: A5 10        	lda	<L334+pParent_0
  9876 04:2939: 05 12        	ora	<L334+pParent_0+2
  9877 04:293B: D0 03        	bne	L338
  Tue Oct  1 2019  1:02                                                Page 199


  9878 04:293D: 82 2E 00     	brl	L10136
  9879                        L338:
  9880                        	.line	1951
  9881 04:2940: F4 04 00     	pea	#^~~k_update_hover_location
  9882 04:2943: F4 7E 20     	pea	#<~~k_update_hover_location
  9883 04:2946: A0 02 00     	ldy	#$2
  9884 04:2949: B7 05        	lda	[<L335+pcd_1],Y
  9885 04:294B: 48           	pha
  9886 04:294C: A7 05        	lda	[<L335+pcd_1]
  9887 04:294E: 48           	pha
  9888 04:294F: D4 12        	pei	<L334+pParent_0+2
  9889 04:2951: D4 10        	pei	<L334+pParent_0
  9890 04:2953: 22 AA 03 04  	jsl	~~k_getWindowFromHandle
  9891 04:2957: 85 01        	sta	<R0
  9892 04:2959: 86 03        	stx	<R0+2
  9893 04:295B: A0 5A 00     	ldy	#$5a
  9894 04:295E: B7 01        	lda	[<R0],Y
  9895 04:2960: 48           	pha
  9896 04:2961: A0 58 00     	ldy	#$58
  9897 04:2964: B7 01        	lda	[<R0],Y
  9898 04:2966: 48           	pha
  9899 04:2967: 22 0D 23 04  	jsl	~~k_attach_mouse_detection_local
  9900                        ;		else
  9901 04:296B: 82 13 00     	brl	L10137
  9902                        L10136:
  9903                        ;			k_attach_mouse_detection(pcd->wi
                    ndow,k_update_hover_location);
  9904                        	.line	1953
  9905 04:296E: F4 04 00     	pea	#^~~k_update_hover_location
  9906 04:2971: F4 7E 20     	pea	#<~~k_update_hover_location
  9907 04:2974: A0 02 00     	ldy	#$2
  9908 04:2977: B7 05        	lda	[<L335+pcd_1],Y
  9909 04:2979: 48           	pha
  9910 04:297A: A7 05        	lda	[<L335+pcd_1]
  9911 04:297C: 48           	pha
  9912 04:297D: 22 6D 22 04  	jsl	~~k_attach_mouse_detection
  9913                        L10137:
  9914                        ;	}
  9915                        	.line	1954
  9916                        ;
  9917                        ;	return retCode;
  9918                        L10135:
  9919                        	.line	1956
  9920 04:2981: A5 0B        	lda	<L335+retCode_1
  9921                        L339:
  9922 04:2983: A8           	tay
  9923 04:2984: A5 0E        	lda	<L334+2
  9924 04:2986: 85 20        	sta	<L334+2+18
  9925 04:2988: A5 0D        	lda	<L334+1
  9926 04:298A: 85 1F        	sta	<L334+1+18
  9927 04:298C: 2B           	pld
  9928 04:298D: 3B           	tsc
  9929 04:298E: 18           	clc
  9930 04:298F: 69 1E 00     	adc	#L334+18
  9931 04:2992: 1B           	tcs
  9932 04:2993: 98           	tya
  9933 04:2994: 6B           	rtl
  9934                        ;}
  Tue Oct  1 2019  1:02                                                Page 200


  9935                        	.line	1957
  9936                        	.endblock	1957
  9937             0000000C   L334	equ	12
  9938             00000005   L335	equ	5
  9939 04:2995:              	ends
  9940                        	efunc
  9941                        	.endfunc	1957,5,12
  9942                        	.line	1957
  9943                        	data
  9944                        L333:
  9945 00:0B4D: 74 65 78 74  	db	$74,$65,$78,$74,$00,$74,$65,$78,$74,$00
       00:0B51: 00 74 65 78 
       00:0B55: 74 00 
  9946 00:0B57:              	ends
  9947                        ;
  9948                        ;BOOL _k_user_send_child_message(HWND hParentWindo
                    w,MSGTYPE type,LPVOID data,UINT size)
  9949                        ;{
  9950                        	.line	1959
  9951                        	.line	1960
  9952                        	WINMAN
  9953                        	xdef	~~_k_user_send_child_message
  9954                        	func
  9955                        	.function	1960
  9956                        ~~_k_user_send_child_message:
  9957                        	longa	on
  9958                        	longi	on
  9959 04:2995: 3B           	tsc
  9960 04:2996: 38           	sec
  9961 04:2997: E9 0C 00     	sbc	#L341
  9962 04:299A: 1B           	tcs
  9963 04:299B: 0B           	phd
  9964 04:299C: 5B           	tcd
  9965             00000004   hParentWindow_0	set	4
  9966             00000008   type_0	set	8
  9967             0000000A   data_0	set	10
  9968             0000000E   size_0	set	14
  9969                        	.block	1960
  9970                        ;
  9971                        ;	EACHCHILD_MSG 	msgData;
  9972                        ;	PWINDOW pWin = k_getWindowFromHandle(hParentWind
                    ow);
  9973                        ;
  9974                        ;	if(pWin)
  9975             00000000   msgData_1	set	0
  9976             00000008   pWin_1	set	8
  9977                        	.sym	msgData,0,10,1,64,52
  9978                        	.sym	pWin,8,138,1,32,23
  9979                        	.sym	hParentWindow,4,129,6,32
  9980                        	.sym	type,8,16,6,16
  9981                        	.sym	data,10,129,6,32
  9982                        	.sym	size,14,16,6,16
  9983 04:299D: D4 12        	pei	<L341+hParentWindow_0+2
  9984 04:299F: D4 10        	pei	<L341+hParentWindow_0
  9985 04:29A1: 22 AA 03 04  	jsl	~~k_getWindowFromHandle
  9986 04:29A5: 85 09        	sta	<L342+pWin_1
  9987 04:29A7: 86 0B        	stx	<L342+pWin_1+2
  9988                        	.line	1965
  Tue Oct  1 2019  1:02                                                Page 201


  9989                        ;	{
  9990 04:29A9: A5 09        	lda	<L342+pWin_1
  9991 04:29AB: 05 0B        	ora	<L342+pWin_1+2
  9992 04:29AD: D0 03        	bne	L344
  9993 04:29AF: 82 2F 00     	brl	L10138
  9994                        L344:
  9995                        	.line	1966
  9996                        ;		msgData.msgType 	= type;
  9997                        	.line	1967
  9998 04:29B2: A5 14        	lda	<L341+type_0
  9999 04:29B4: 85 01        	sta	<L342+msgData_1
 10000                        ;		msgData.msgData 	= data;
 10001                        	.line	1968
 10002 04:29B6: A5 16        	lda	<L341+data_0
 10003 04:29B8: 85 03        	sta	<L342+msgData_1+2
 10004 04:29BA: A5 18        	lda	<L341+data_0+2
 10005 04:29BC: 85 05        	sta	<L342+msgData_1+4
 10006                        ;		msgData.dataSize 	= size;
 10007                        	.line	1969
 10008 04:29BE: A5 1A        	lda	<L341+size_0
 10009 04:29C0: 85 07        	sta	<L342+msgData_1+6
 10010                        ;
 10011                        ;		k_nodelist_foreach_listdata(pWin->pChild
                    Windows,
 10012                        	.line	1971
 10013                        ;							
                    		(LPVOID)&msgData,
 10014                        ;							
                    		k_iterate_children);
 10015 04:29C2: F4 04 00     	pea	#^~~k_iterate_children
 10016 04:29C5: F4 F6 29     	pea	#<~~k_iterate_children
 10017 04:29C8: F4 00 00     	pea	#0
 10018 04:29CB: 18           	clc
 10019 04:29CC: 7B           	tdc
 10020 04:29CD: 69 01 00     	adc	#<L342+msgData_1
 10021 04:29D0: 48           	pha
 10022 04:29D1: A0 56 00     	ldy	#$56
 10023 04:29D4: B7 09        	lda	[<L342+pWin_1],Y
 10024 04:29D6: 48           	pha
 10025 04:29D7: A0 54 00     	ldy	#$54
 10026 04:29DA: B7 09        	lda	[<L342+pWin_1],Y
 10027 04:29DC: 48           	pha
 10028 04:29DD: 22 xx xx xx  	jsl	~~k_nodelist_foreach_listdata
 10029                        ;	}
 10030                        	.line	1974
 10031                        ;
 10032                        ;	return TRUE;
 10033                        L10138:
 10034                        	.line	1976
 10035 04:29E1: A9 01 00     	lda	#$1
 10036                        L345:
 10037 04:29E4: A8           	tay
 10038 04:29E5: A5 0E        	lda	<L341+2
 10039 04:29E7: 85 1A        	sta	<L341+2+12
 10040 04:29E9: A5 0D        	lda	<L341+1
 10041 04:29EB: 85 19        	sta	<L341+1+12
 10042 04:29ED: 2B           	pld
 10043 04:29EE: 3B           	tsc
  Tue Oct  1 2019  1:02                                                Page 202


 10044 04:29EF: 18           	clc
 10045 04:29F0: 69 18 00     	adc	#L341+12
 10046 04:29F3: 1B           	tcs
 10047 04:29F4: 98           	tya
 10048 04:29F5: 6B           	rtl
 10049                        ;}
 10050                        	.line	1977
 10051                        	.endblock	1977
 10052             0000000C   L341	equ	12
 10053             00000001   L342	equ	1
 10054 04:29F6:              	ends
 10055                        	efunc
 10056                        	.endfunc	1977,1,12
 10057                        	.line	1977
 10058                        ;
 10059                        ;
 10060                        ;void k_iterate_children(LPVOID ctx,LPVOID data)
 10061                        ;{
 10062                        	.line	1980
 10063                        	.line	1981
 10064                        	WINMAN
 10065                        	xdef	~~k_iterate_children
 10066                        	func
 10067                        	.function	1981
 10068                        ~~k_iterate_children:
 10069                        	longa	on
 10070                        	longi	on
 10071 04:29F6: 3B           	tsc
 10072 04:29F7: 38           	sec
 10073 04:29F8: E9 0C 00     	sbc	#L346
 10074 04:29FB: 1B           	tcs
 10075 04:29FC: 0B           	phd
 10076 04:29FD: 5B           	tcd
 10077             00000004   ctx_0	set	4
 10078             00000008   data_0	set	8
 10079                        	.block	1981
 10080                        ;	PWINDOW 		pWin   = ((PWINDOW)data)
                    ;
 10081                        ;	PEACHCHILD_MSG 	pChildMsg = (PEACHCHILD_MSG)ctx;
 10082                        ;
 10083                        ;	if(pWin && pChildMsg)
 10084             00000000   pWin_1	set	0
 10085             00000004   pChildMsg_1	set	4
 10086                        	.sym	pWin,0,138,1,32,23
 10087                        	.sym	pChildMsg,4,138,1,32,52
 10088                        	.sym	ctx,4,129,6,32
 10089                        	.sym	data,8,129,6,32
 10090 04:29FE: A5 14        	lda	<L346+data_0
 10091 04:2A00: 85 05        	sta	<L347+pWin_1
 10092 04:2A02: A5 16        	lda	<L346+data_0+2
 10093 04:2A04: 85 07        	sta	<L347+pWin_1+2
 10094 04:2A06: A5 10        	lda	<L346+ctx_0
 10095 04:2A08: 85 09        	sta	<L347+pChildMsg_1
 10096 04:2A0A: A5 12        	lda	<L346+ctx_0+2
 10097 04:2A0C: 85 0B        	sta	<L347+pChildMsg_1+2
 10098                        	.line	1985
 10099                        ;	{
 10100 04:2A0E: A5 05        	lda	<L347+pWin_1
  Tue Oct  1 2019  1:02                                                Page 203


 10101 04:2A10: 05 07        	ora	<L347+pWin_1+2
 10102 04:2A12: D0 03        	bne	L349
 10103 04:2A14: 82 30 00     	brl	L10139
 10104                        L349:
 10105 04:2A17: A5 09        	lda	<L347+pChildMsg_1
 10106 04:2A19: 05 0B        	ora	<L347+pChildMsg_1+2
 10107 04:2A1B: D0 03        	bne	L350
 10108 04:2A1D: 82 27 00     	brl	L10139
 10109                        L350:
 10110                        	.line	1986
 10111                        ;		k_send_window_message(k_getHandleFromWin
                    dow(pWin),pChildMsg->msgType,pChildMsg->msgData,pChildMsg->d
                    ataSize);
 10112                        	.line	1987
 10113 04:2A20: A0 06 00     	ldy	#$6
 10114 04:2A23: B7 09        	lda	[<L347+pChildMsg_1],Y
 10115 04:2A25: 48           	pha
 10116 04:2A26: A0 04 00     	ldy	#$4
 10117 04:2A29: B7 09        	lda	[<L347+pChildMsg_1],Y
 10118 04:2A2B: 48           	pha
 10119 04:2A2C: A0 02 00     	ldy	#$2
 10120 04:2A2F: B7 09        	lda	[<L347+pChildMsg_1],Y
 10121 04:2A31: 48           	pha
 10122 04:2A32: A7 09        	lda	[<L347+pChildMsg_1]
 10123 04:2A34: 48           	pha
 10124 04:2A35: D4 07        	pei	<L347+pWin_1+2
 10125 04:2A37: D4 05        	pei	<L347+pWin_1
 10126 04:2A39: 22 8C 03 04  	jsl	~~k_getHandleFromWindow
 10127 04:2A3D: 85 01        	sta	<R0
 10128 04:2A3F: 86 03        	stx	<R0+2
 10129 04:2A41: DA           	phx
 10130 04:2A42: 48           	pha
 10131 04:2A43: 22 xx xx xx  	jsl	~~k_send_window_message
 10132                        ;	}
 10133                        	.line	1988
 10134                        ;}
 10135                        L10139:
 10136                        	.line	1989
 10137                        L351:
 10138 04:2A47: A5 0E        	lda	<L346+2
 10139 04:2A49: 85 16        	sta	<L346+2+8
 10140 04:2A4B: A5 0D        	lda	<L346+1
 10141 04:2A4D: 85 15        	sta	<L346+1+8
 10142 04:2A4F: 2B           	pld
 10143 04:2A50: 3B           	tsc
 10144 04:2A51: 18           	clc
 10145 04:2A52: 69 14 00     	adc	#L346+8
 10146 04:2A55: 1B           	tcs
 10147 04:2A56: 6B           	rtl
 10148                        	.endblock	1989
 10149             0000000C   L346	equ	12
 10150             00000005   L347	equ	5
 10151 04:2A57:              	ends
 10152                        	efunc
 10153                        	.endfunc	1989,5,12
 10154                        	.line	1989
 10155                        ;
 10156                        ;
  Tue Oct  1 2019  1:02                                                Page 204


 10157                        ;void debug_window_node(LPVOID ctx,LPVOID data)
 10158                        ;{
 10159                        	.line	1992
 10160                        	.line	1993
 10161                        	WINMAN
 10162                        	xdef	~~debug_window_node
 10163                        	func
 10164                        	.function	1993
 10165                        ~~debug_window_node:
 10166                        	longa	on
 10167                        	longi	on
 10168 04:2A57: 3B           	tsc
 10169 04:2A58: 38           	sec
 10170 04:2A59: E9 08 00     	sbc	#L352
 10171 04:2A5C: 1B           	tcs
 10172 04:2A5D: 0B           	phd
 10173 04:2A5E: 5B           	tcd
 10174             00000004   ctx_0	set	4
 10175             00000008   data_0	set	8
 10176                        	.block	1993
 10177                        ;	PWINDOW pWin = (PWINDOW)data;
 10178                        ;	if(pWin)
 10179             00000000   pWin_1	set	0
 10180                        	.sym	pWin,0,138,1,32,23
 10181                        	.sym	ctx,4,129,6,32
 10182                        	.sym	data,8,129,6,32
 10183 04:2A5F: A5 10        	lda	<L352+data_0
 10184 04:2A61: 85 05        	sta	<L353+pWin_1
 10185 04:2A63: A5 12        	lda	<L352+data_0+2
 10186 04:2A65: 85 07        	sta	<L353+pWin_1+2
 10187                        	.line	1995
 10188                        ;	{
 10189 04:2A67: A5 05        	lda	<L353+pWin_1
 10190 04:2A69: 05 07        	ora	<L353+pWin_1+2
 10191 04:2A6B: D0 03        	bne	L355
 10192 04:2A6D: 82 C0 00     	brl	L10140
 10193                        L355:
 10194                        	.line	1996
 10195                        ;		k_debug_strings("      WINDOW TITLE:",pW
                    in->win_title);
 10196                        	.line	1997
 10197 04:2A70: 18           	clc
 10198 04:2A71: A9 14 00     	lda	#$14
 10199 04:2A74: 65 05        	adc	<L353+pWin_1
 10200 04:2A76: 85 01        	sta	<R0
 10201 04:2A78: A9 00 00     	lda	#$0
 10202 04:2A7B: 65 07        	adc	<L353+pWin_1+2
 10203 04:2A7D: 85 03        	sta	<R0+2
 10204 04:2A7F: D4 03        	pei	<R0+2
 10205 04:2A81: D4 01        	pei	<R0
 10206 04:2A83: F4 xx xx     	pea	#^L340
 10207 04:2A86: F4 xx xx     	pea	#<L340
 10208 04:2A89: 22 xx xx xx  	jsl	~~k_debug_strings
 10209                        ;		k_debug_pointer("      WINDOW CLASS:",pW
                    in->win_class);
 10210                        	.line	1998
 10211 04:2A8D: 18           	clc
 10212 04:2A8E: A9 34 00     	lda	#$34
  Tue Oct  1 2019  1:02                                                Page 205


 10213 04:2A91: 65 05        	adc	<L353+pWin_1
 10214 04:2A93: 85 01        	sta	<R0
 10215 04:2A95: A9 00 00     	lda	#$0
 10216 04:2A98: 65 07        	adc	<L353+pWin_1+2
 10217 04:2A9A: 85 03        	sta	<R0+2
 10218 04:2A9C: D4 03        	pei	<R0+2
 10219 04:2A9E: D4 01        	pei	<R0
 10220 04:2AA0: F4 xx xx     	pea	#^L340+20
 10221 04:2AA3: F4 xx xx     	pea	#<L340+20
 10222 04:2AA6: 22 xx xx xx  	jsl	~~k_debug_pointer
 10223                        ;		k_debug_long   ("      WINDOW   PID:",pW
                    in->procid);
 10224                        	.line	1999
 10225 04:2AAA: A0 46 00     	ldy	#$46
 10226 04:2AAD: B7 05        	lda	[<L353+pWin_1],Y
 10227 04:2AAF: 48           	pha
 10228 04:2AB0: A0 44 00     	ldy	#$44
 10229 04:2AB3: B7 05        	lda	[<L353+pWin_1],Y
 10230 04:2AB5: 48           	pha
 10231 04:2AB6: F4 xx xx     	pea	#^L340+40
 10232 04:2AB9: F4 xx xx     	pea	#<L340+40
 10233 04:2ABC: 22 xx xx xx  	jsl	~~k_debug_long
 10234                        ;		k_debug_pointer("      WINDOW   PTR:",pW
                    in);
 10235                        	.line	2000
 10236 04:2AC0: D4 07        	pei	<L353+pWin_1+2
 10237 04:2AC2: D4 05        	pei	<L353+pWin_1
 10238 04:2AC4: F4 xx xx     	pea	#^L340+60
 10239 04:2AC7: F4 xx xx     	pea	#<L340+60
 10240 04:2ACA: 22 xx xx xx  	jsl	~~k_debug_pointer
 10241                        ;		k_debug_pointer("      WINDOW  PPTR:",pW
                    in->pParentWindow);
 10242                        	.line	2001
 10243 04:2ACE: A0 4E 00     	ldy	#$4e
 10244 04:2AD1: B7 05        	lda	[<L353+pWin_1],Y
 10245 04:2AD3: 48           	pha
 10246 04:2AD4: A0 4C 00     	ldy	#$4c
 10247 04:2AD7: B7 05        	lda	[<L353+pWin_1],Y
 10248 04:2AD9: 48           	pha
 10249 04:2ADA: F4 xx xx     	pea	#^L340+80
 10250 04:2ADD: F4 xx xx     	pea	#<L340+80
 10251 04:2AE0: 22 xx xx xx  	jsl	~~k_debug_pointer
 10252                        ;		k_debug_pointer("      WINDOW  CPTR:",pW
                    in->pChildWindows);
 10253                        	.line	2002
 10254 04:2AE4: A0 56 00     	ldy	#$56
 10255 04:2AE7: B7 05        	lda	[<L353+pWin_1],Y
 10256 04:2AE9: 48           	pha
 10257 04:2AEA: A0 54 00     	ldy	#$54
 10258 04:2AED: B7 05        	lda	[<L353+pWin_1],Y
 10259 04:2AEF: 48           	pha
 10260 04:2AF0: F4 xx xx     	pea	#^L340+100
 10261 04:2AF3: F4 xx xx     	pea	#<L340+100
 10262 04:2AF6: 22 xx xx xx  	jsl	~~k_debug_pointer
 10263                        ;		k_debug_pointer("      WINDOW  HPTR:",pW
                    in->pChildHitList);
 10264                        	.line	2003
 10265 04:2AFA: A0 5A 00     	ldy	#$5a
  Tue Oct  1 2019  1:02                                                Page 206


 10266 04:2AFD: B7 05        	lda	[<L353+pWin_1],Y
 10267 04:2AFF: 48           	pha
 10268 04:2B00: A0 58 00     	ldy	#$58
 10269 04:2B03: B7 05        	lda	[<L353+pWin_1],Y
 10270 04:2B05: 48           	pha
 10271 04:2B06: F4 xx xx     	pea	#^L340+120
 10272 04:2B09: F4 xx xx     	pea	#<L340+120
 10273 04:2B0C: 22 xx xx xx  	jsl	~~k_debug_pointer
 10274                        ;		k_debug_integer("      WINDOW     X:",pW
                    in->win_x);
 10275                        	.line	2004
 10276 04:2B10: A0 08 00     	ldy	#$8
 10277 04:2B13: B7 05        	lda	[<L353+pWin_1],Y
 10278 04:2B15: 48           	pha
 10279 04:2B16: F4 xx xx     	pea	#^L340+140
 10280 04:2B19: F4 xx xx     	pea	#<L340+140
 10281 04:2B1C: 22 xx xx xx  	jsl	~~k_debug_integer
 10282                        ;		k_debug_integer("      WINDOW     Y:",pW
                    in->win_y);
 10283                        	.line	2005
 10284 04:2B20: A0 0A 00     	ldy	#$a
 10285 04:2B23: B7 05        	lda	[<L353+pWin_1],Y
 10286 04:2B25: 48           	pha
 10287 04:2B26: F4 xx xx     	pea	#^L340+160
 10288 04:2B29: F4 xx xx     	pea	#<L340+160
 10289 04:2B2C: 22 xx xx xx  	jsl	~~k_debug_integer
 10290                        ;	}
 10291                        	.line	2006
 10292                        ;}
 10293                        L10140:
 10294                        	.line	2007
 10295                        L356:
 10296 04:2B30: A5 0A        	lda	<L352+2
 10297 04:2B32: 85 12        	sta	<L352+2+8
 10298 04:2B34: A5 09        	lda	<L352+1
 10299 04:2B36: 85 11        	sta	<L352+1+8
 10300 04:2B38: 2B           	pld
 10301 04:2B39: 3B           	tsc
 10302 04:2B3A: 18           	clc
 10303 04:2B3B: 69 10 00     	adc	#L352+8
 10304 04:2B3E: 1B           	tcs
 10305 04:2B3F: 6B           	rtl
 10306                        	.endblock	2007
 10307             00000008   L352	equ	8
 10308             00000005   L353	equ	5
 10309 04:2B40:              	ends
 10310                        	efunc
 10311                        	.endfunc	2007,5,8
 10312                        	.line	2007
 10313                        	data
 10314                        L340:
 10315 00:0B57: 20 20 20 20  	db	$20,$20,$20,$20,$20,$20,$57,$49,$4E,$44,
                    $4F,$57,$20,$54,$49
       00:0B5B: 20 20 57 49 
       00:0B5F: 4E 44 4F 57 
       00:0B63: 20 54 49 
 10316 00:0B66: 54 4C 45 3A  	db	$54,$4C,$45,$3A,$00,$20,$20,$20,$20,$20,
                    $20,$57,$49,$4E,$44
  Tue Oct  1 2019  1:02                                                Page 207


       00:0B6A: 00 20 20 20 
       00:0B6E: 20 20 20 57 
       00:0B72: 49 4E 44 
 10317 00:0B75: 4F 57 20 43  	db	$4F,$57,$20,$43,$4C,$41,$53,$53,$3A,$00,
                    $20,$20,$20,$20,$20
       00:0B79: 4C 41 53 53 
       00:0B7D: 3A 00 20 20 
       00:0B81: 20 20 20 
 10318 00:0B84: 20 57 49 4E  	db	$20,$57,$49,$4E,$44,$4F,$57,$20,$20,$20,
                    $50,$49,$44,$3A,$00
       00:0B88: 44 4F 57 20 
       00:0B8C: 20 20 50 49 
       00:0B90: 44 3A 00 
 10319 00:0B93: 20 20 20 20  	db	$20,$20,$20,$20,$20,$20,$57,$49,$4E,$44,
                    $4F,$57,$20,$20,$20
       00:0B97: 20 20 57 49 
       00:0B9B: 4E 44 4F 57 
       00:0B9F: 20 20 20 
 10320 00:0BA2: 50 54 52 3A  	db	$50,$54,$52,$3A,$00,$20,$20,$20,$20,$20,
                    $20,$57,$49,$4E,$44
       00:0BA6: 00 20 20 20 
       00:0BAA: 20 20 20 57 
       00:0BAE: 49 4E 44 
 10321 00:0BB1: 4F 57 20 20  	db	$4F,$57,$20,$20,$50,$50,$54,$52,$3A,$00,
                    $20,$20,$20,$20,$20
       00:0BB5: 50 50 54 52 
       00:0BB9: 3A 00 20 20 
       00:0BBD: 20 20 20 
 10322 00:0BC0: 20 57 49 4E  	db	$20,$57,$49,$4E,$44,$4F,$57,$20,$20,$43,
                    $50,$54,$52,$3A,$00
       00:0BC4: 44 4F 57 20 
       00:0BC8: 20 43 50 54 
       00:0BCC: 52 3A 00 
 10323 00:0BCF: 20 20 20 20  	db	$20,$20,$20,$20,$20,$20,$57,$49,$4E,$44,
                    $4F,$57,$20,$20,$48
       00:0BD3: 20 20 57 49 
       00:0BD7: 4E 44 4F 57 
       00:0BDB: 20 20 48 
 10324 00:0BDE: 50 54 52 3A  	db	$50,$54,$52,$3A,$00,$20,$20,$20,$20,$20,
                    $20,$57,$49,$4E,$44
       00:0BE2: 00 20 20 20 
       00:0BE6: 20 20 20 57 
       00:0BEA: 49 4E 44 
 10325 00:0BED: 4F 57 20 20  	db	$4F,$57,$20,$20,$20,$20,$20,$58,$3A,$00,
                    $20,$20,$20,$20,$20
       00:0BF1: 20 20 20 58 
       00:0BF5: 3A 00 20 20 
       00:0BF9: 20 20 20 
 10326 00:0BFC: 20 57 49 4E  	db	$20,$57,$49,$4E,$44,$4F,$57,$20,$20,$20,
                    $20,$20,$59,$3A,$00
       00:0C00: 44 4F 57 20 
       00:0C04: 20 20 20 20 
       00:0C08: 59 3A 00 
 10327 00:0C0B:              	ends
 10328                        ;
 10329                        ;
 10330                        ;BOOL DefWindowProc(PFXOSMESSAGE pMsg)
 10331                        ;{
  Tue Oct  1 2019  1:02                                                Page 208


 10332                        	.line	2010
 10333                        	.line	2011
 10334                        	WINMAN
 10335                        	xdef	~~DefWindowProc
 10336                        	func
 10337                        	.function	2011
 10338                        ~~DefWindowProc:
 10339                        	longa	on
 10340                        	longi	on
 10341 04:2B40: 3B           	tsc
 10342 04:2B41: 38           	sec
 10343 04:2B42: E9 0C 00     	sbc	#L358
 10344 04:2B45: 1B           	tcs
 10345 04:2B46: 0B           	phd
 10346 04:2B47: 5B           	tcd
 10347             00000004   pMsg_0	set	4
 10348                        	.block	2011
 10349                        ;	PFXPROCESS p = NULL;
 10350                        ;	PWINDOW	   pWin = NULL;
 10351                        ;
 10352                        ;
 10353                        ;	if(pMsg)
 10354             00000000   p_1	set	0
 10355             00000004   pWin_1	set	4
 10356                        	.sym	p,0,138,1,32,16
 10357                        	.sym	pWin,4,138,1,32,23
 10358                        	.sym	pMsg,4,138,6,32,12
 10359 04:2B48: 64 05        	stz	<L359+p_1
 10360 04:2B4A: 64 07        	stz	<L359+p_1+2
 10361 04:2B4C: 64 09        	stz	<L359+pWin_1
 10362 04:2B4E: 64 0B        	stz	<L359+pWin_1+2
 10363                        	.line	2016
 10364                        ;	{
 10365 04:2B50: A5 10        	lda	<L358+pMsg_0
 10366 04:2B52: 05 12        	ora	<L358+pMsg_0+2
 10367 04:2B54: D0 03        	bne	L361
 10368 04:2B56: 82 A4 00     	brl	L10141
 10369                        L361:
 10370                        	.line	2017
 10371                        ;		pWin = k_getWindowFromHandle(pMsg->hwnd)
                    ;
 10372                        	.line	2018
 10373 04:2B59: A0 0C 00     	ldy	#$c
 10374 04:2B5C: B7 10        	lda	[<L358+pMsg_0],Y
 10375 04:2B5E: 48           	pha
 10376 04:2B5F: A0 0A 00     	ldy	#$a
 10377 04:2B62: B7 10        	lda	[<L358+pMsg_0],Y
 10378 04:2B64: 48           	pha
 10379 04:2B65: 22 AA 03 04  	jsl	~~k_getWindowFromHandle
 10380 04:2B69: 85 09        	sta	<L359+pWin_1
 10381 04:2B6B: 86 0B        	stx	<L359+pWin_1+2
 10382                        ;		//k_debug_integer(" *** DefWndProc::Type
                    :",pMsg->type);
 10383                        ;		if(pMsg!=NULL)
 10384                        	.line	2020
 10385                        ;		{
 10386 04:2B6D: A5 10        	lda	<L358+pMsg_0
 10387 04:2B6F: 05 12        	ora	<L358+pMsg_0+2
  Tue Oct  1 2019  1:02                                                Page 209


 10388 04:2B71: D0 03        	bne	L362
 10389 04:2B73: 82 87 00     	brl	L10142
 10390                        L362:
 10391                        	.line	2021
 10392                        ;			p = k_exec_get_current_process()
                    ;
 10393                        	.line	2022
 10394 04:2B76: 22 xx xx xx  	jsl	~~k_exec_get_current_process
 10395 04:2B7A: 85 05        	sta	<L359+p_1
 10396 04:2B7C: 86 07        	stx	<L359+p_1+2
 10397                        ;			switch(pMsg->type)
 10398                        	.line	2023
 10399 04:2B7E: A0 08 00     	ldy	#$8
 10400 04:2B81: B7 10        	lda	[<L358+pMsg_0],Y
 10401 04:2B83: 82 67 00     	brl	L10143
 10402                        ;			{
 10403                        	.line	2024
 10404                        ;			case FX_LBUTTON_DOWN:
 10405                        	.line	2025
 10406                        L10145:
 10407                        ;				k_debug_strings("DefWind
                    owProc::FX_LBUTTON_DOWN",pWin->win_title);
 10408                        	.line	2026
 10409 04:2B86: 18           	clc
 10410 04:2B87: A9 14 00     	lda	#$14
 10411 04:2B8A: 65 09        	adc	<L359+pWin_1
 10412 04:2B8C: 85 01        	sta	<R0
 10413 04:2B8E: A9 00 00     	lda	#$0
 10414 04:2B91: 65 0B        	adc	<L359+pWin_1+2
 10415 04:2B93: 85 03        	sta	<R0+2
 10416 04:2B95: D4 03        	pei	<R0+2
 10417 04:2B97: D4 01        	pei	<R0
 10418 04:2B99: F4 xx xx     	pea	#^L357
 10419 04:2B9C: F4 xx xx     	pea	#<L357
 10420 04:2B9F: 22 xx xx xx  	jsl	~~k_debug_strings
 10421                        ;				break;
 10422                        	.line	2027
 10423 04:2BA3: 82 57 00     	brl	L10144
 10424                        ;			case FX_DRAW_NONCLIENT:
 10425                        	.line	2028
 10426                        L10146:
 10427                        ;				k_vdraw_ui_window(pWin->
                    style,
 10428                        	.line	2029
 10429                        ;							
                    	  pWin->win_x,
 10430                        ;							
                    	  pWin->win_y,
 10431                        ;							
                    	  pWin->win_height,
 10432                        ;							
                    	  pWin->win_width,
 10433                        ;							
                    	  pWin->win_title,
 10434                        ;							
                    	  15,
 10435                        ;							
                    	  4);
  Tue Oct  1 2019  1:02                                                Page 210


 10436 04:2BA6: F4 04 00     	pea	#<$4
 10437 04:2BA9: F4 0F 00     	pea	#<$f
 10438 04:2BAC: 18           	clc
 10439 04:2BAD: A9 14 00     	lda	#$14
 10440 04:2BB0: 65 09        	adc	<L359+pWin_1
 10441 04:2BB2: 85 01        	sta	<R0
 10442 04:2BB4: A9 00 00     	lda	#$0
 10443 04:2BB7: 65 0B        	adc	<L359+pWin_1+2
 10444 04:2BB9: 85 03        	sta	<R0+2
 10445 04:2BBB: D4 03        	pei	<R0+2
 10446 04:2BBD: D4 01        	pei	<R0
 10447 04:2BBF: A0 0C 00     	ldy	#$c
 10448 04:2BC2: B7 09        	lda	[<L359+pWin_1],Y
 10449 04:2BC4: 48           	pha
 10450 04:2BC5: A0 0E 00     	ldy	#$e
 10451 04:2BC8: B7 09        	lda	[<L359+pWin_1],Y
 10452 04:2BCA: 48           	pha
 10453 04:2BCB: A0 0A 00     	ldy	#$a
 10454 04:2BCE: B7 09        	lda	[<L359+pWin_1],Y
 10455 04:2BD0: 48           	pha
 10456 04:2BD1: A0 08 00     	ldy	#$8
 10457 04:2BD4: B7 09        	lda	[<L359+pWin_1],Y
 10458 04:2BD6: 48           	pha
 10459 04:2BD7: A0 04 00     	ldy	#$4
 10460 04:2BDA: B7 09        	lda	[<L359+pWin_1],Y
 10461 04:2BDC: 48           	pha
 10462 04:2BDD: A0 02 00     	ldy	#$2
 10463 04:2BE0: B7 09        	lda	[<L359+pWin_1],Y
 10464 04:2BE2: 48           	pha
 10465 04:2BE3: 22 xx xx xx  	jsl	~~k_vdraw_ui_window
 10466                        ;				break;
 10467                        	.line	2037
 10468 04:2BE7: 82 13 00     	brl	L10144
 10469                        ;			default:
 10470                        	.line	2038
 10471                        L10147:
 10472                        ;				break;
 10473                        	.line	2039
 10474 04:2BEA: 82 10 00     	brl	L10144
 10475                        ;			}
 10476                        	.line	2040
 10477                        L10143:
 10478                        	xref	~~~swt
 10479 04:2BED: 22 xx xx xx  	jsl	~~~swt
 10480 04:2BF1: 02 00        	dw	2
 10481 04:2BF3: 04 0F        	dw	3844
 10482 04:2BF5: 85 2B        	dw	L10145-1
 10483 04:2BF7: 01 FB        	dw	64257
 10484 04:2BF9: A5 2B        	dw	L10146-1
 10485 04:2BFB: E9 2B        	dw	L10147-1
 10486                        L10144:
 10487                        ;		}
 10488                        	.line	2041
 10489                        ;	}
 10490                        L10142:
 10491                        	.line	2042
 10492                        ;	return TRUE;
 10493                        L10141:
  Tue Oct  1 2019  1:02                                                Page 211


 10494                        	.line	2043
 10495 04:2BFD: A9 01 00     	lda	#$1
 10496                        L363:
 10497 04:2C00: A8           	tay
 10498 04:2C01: A5 0E        	lda	<L358+2
 10499 04:2C03: 85 12        	sta	<L358+2+4
 10500 04:2C05: A5 0D        	lda	<L358+1
 10501 04:2C07: 85 11        	sta	<L358+1+4
 10502 04:2C09: 2B           	pld
 10503 04:2C0A: 3B           	tsc
 10504 04:2C0B: 18           	clc
 10505 04:2C0C: 69 10 00     	adc	#L358+4
 10506 04:2C0F: 1B           	tcs
 10507 04:2C10: 98           	tya
 10508 04:2C11: 6B           	rtl
 10509                        ;}
 10510                        	.line	2044
 10511                        	.endblock	2044
 10512             0000000C   L358	equ	12
 10513             00000005   L359	equ	5
 10514 04:2C12:              	ends
 10515                        	efunc
 10516                        	.endfunc	2044,5,12
 10517                        	.line	2044
 10518                        	data
 10519                        L357:
 10520 00:0C0B: 44 65 66 57  	db	$44,$65,$66,$57,$69,$6E,$64,$6F,$77,$50,
                    $72,$6F,$63,$3A,$3A
       00:0C0F: 69 6E 64 6F 
       00:0C13: 77 50 72 6F 
       00:0C17: 63 3A 3A 
 10521 00:0C1A: 46 58 5F 4C  	db	$46,$58,$5F,$4C,$42,$55,$54,$54,$4F,$4E,
                    $5F,$44,$4F,$57,$4E
       00:0C1E: 42 55 54 54 
       00:0C22: 4F 4E 5F 44 
       00:0C26: 4F 57 4E 
 10522 00:0C29: 00           	db	$00
 10523 00:0C2A:              	ends
 10524                        ;
 10525                        ;BOOL DlgWindowProc(PFXOSMESSAGE pMsg)
 10526                        ;{
 10527                        	.line	2046
 10528                        	.line	2047
 10529                        	WINMAN
 10530                        	xdef	~~DlgWindowProc
 10531                        	func
 10532                        	.function	2047
 10533                        ~~DlgWindowProc:
 10534                        	longa	on
 10535                        	longi	on
 10536 04:2C12: 3B           	tsc
 10537 04:2C13: 38           	sec
 10538 04:2C14: E9 0C 00     	sbc	#L365
 10539 04:2C17: 1B           	tcs
 10540 04:2C18: 0B           	phd
 10541 04:2C19: 5B           	tcd
 10542             00000004   pMsg_0	set	4
 10543                        	.block	2047
  Tue Oct  1 2019  1:02                                                Page 212


 10544                        ;	PFXPROCESS p = NULL;
 10545                        ;	PWINDOW	   pWin = NULL;
 10546                        ;
 10547                        ;
 10548                        ;	if(pMsg)
 10549             00000000   p_1	set	0
 10550             00000004   pWin_1	set	4
 10551                        	.sym	p,0,138,1,32,16
 10552                        	.sym	pWin,4,138,1,32,23
 10553                        	.sym	pMsg,4,138,6,32,12
 10554 04:2C1A: 64 05        	stz	<L366+p_1
 10555 04:2C1C: 64 07        	stz	<L366+p_1+2
 10556 04:2C1E: 64 09        	stz	<L366+pWin_1
 10557 04:2C20: 64 0B        	stz	<L366+pWin_1+2
 10558                        	.line	2052
 10559                        ;	{
 10560 04:2C22: A5 10        	lda	<L365+pMsg_0
 10561 04:2C24: 05 12        	ora	<L365+pMsg_0+2
 10562 04:2C26: D0 03        	bne	L368
 10563 04:2C28: 82 90 00     	brl	L10148
 10564                        L368:
 10565                        	.line	2053
 10566                        ;		pWin = k_getWindowFromHandle(pMsg->hwnd)
                    ;
 10567                        	.line	2054
 10568 04:2C2B: A0 0C 00     	ldy	#$c
 10569 04:2C2E: B7 10        	lda	[<L365+pMsg_0],Y
 10570 04:2C30: 48           	pha
 10571 04:2C31: A0 0A 00     	ldy	#$a
 10572 04:2C34: B7 10        	lda	[<L365+pMsg_0],Y
 10573 04:2C36: 48           	pha
 10574 04:2C37: 22 AA 03 04  	jsl	~~k_getWindowFromHandle
 10575 04:2C3B: 85 09        	sta	<L366+pWin_1
 10576 04:2C3D: 86 0B        	stx	<L366+pWin_1+2
 10577                        ;		k_debug_integer(" *** DefWndProc::Type:"
                    ,pMsg->type);
 10578                        	.line	2055
 10579 04:2C3F: A0 08 00     	ldy	#$8
 10580 04:2C42: B7 10        	lda	[<L365+pMsg_0],Y
 10581 04:2C44: 48           	pha
 10582 04:2C45: F4 xx xx     	pea	#^L364
 10583 04:2C48: F4 xx xx     	pea	#<L364
 10584 04:2C4B: 22 xx xx xx  	jsl	~~k_debug_integer
 10585                        ;		if(pMsg!=NULL)
 10586                        	.line	2056
 10587                        ;		{
 10588 04:2C4F: A5 10        	lda	<L365+pMsg_0
 10589 04:2C51: 05 12        	ora	<L365+pMsg_0+2
 10590 04:2C53: D0 03        	bne	L369
 10591 04:2C55: 82 63 00     	brl	L10149
 10592                        L369:
 10593                        	.line	2057
 10594                        ;			p = k_exec_get_current_process()
                    ;
 10595                        	.line	2058
 10596 04:2C58: 22 xx xx xx  	jsl	~~k_exec_get_current_process
 10597 04:2C5C: 85 05        	sta	<L366+p_1
 10598 04:2C5E: 86 07        	stx	<L366+p_1+2
  Tue Oct  1 2019  1:02                                                Page 213


 10599                        ;			switch(pMsg->type)
 10600                        	.line	2059
 10601 04:2C60: A0 08 00     	ldy	#$8
 10602 04:2C63: B7 10        	lda	[<L365+pMsg_0],Y
 10603 04:2C65: 82 47 00     	brl	L10150
 10604                        ;			{
 10605                        	.line	2060
 10606                        ;			case FX_DRAW_NONCLIENT:
 10607                        	.line	2061
 10608                        L10152:
 10609                        ;				k_vdraw_ui_window(pWin->
                    style,
 10610                        	.line	2062
 10611                        ;							
                    	  pWin->win_x,
 10612                        ;							
                    	  pWin->win_y,
 10613                        ;							
                    	  pWin->win_height,
 10614                        ;							
                    	  pWin->win_width,
 10615                        ;							
                    	  pWin->win_title,
 10616                        ;							
                    	  15,
 10617                        ;							
                    	  15);
 10618 04:2C68: F4 0F 00     	pea	#<$f
 10619 04:2C6B: F4 0F 00     	pea	#<$f
 10620 04:2C6E: 18           	clc
 10621 04:2C6F: A9 14 00     	lda	#$14
 10622 04:2C72: 65 09        	adc	<L366+pWin_1
 10623 04:2C74: 85 01        	sta	<R0
 10624 04:2C76: A9 00 00     	lda	#$0
 10625 04:2C79: 65 0B        	adc	<L366+pWin_1+2
 10626 04:2C7B: 85 03        	sta	<R0+2
 10627 04:2C7D: D4 03        	pei	<R0+2
 10628 04:2C7F: D4 01        	pei	<R0
 10629 04:2C81: A0 0C 00     	ldy	#$c
 10630 04:2C84: B7 09        	lda	[<L366+pWin_1],Y
 10631 04:2C86: 48           	pha
 10632 04:2C87: A0 0E 00     	ldy	#$e
 10633 04:2C8A: B7 09        	lda	[<L366+pWin_1],Y
 10634 04:2C8C: 48           	pha
 10635 04:2C8D: A0 0A 00     	ldy	#$a
 10636 04:2C90: B7 09        	lda	[<L366+pWin_1],Y
 10637 04:2C92: 48           	pha
 10638 04:2C93: A0 08 00     	ldy	#$8
 10639 04:2C96: B7 09        	lda	[<L366+pWin_1],Y
 10640 04:2C98: 48           	pha
 10641 04:2C99: A0 04 00     	ldy	#$4
 10642 04:2C9C: B7 09        	lda	[<L366+pWin_1],Y
 10643 04:2C9E: 48           	pha
 10644 04:2C9F: A0 02 00     	ldy	#$2
 10645 04:2CA2: B7 09        	lda	[<L366+pWin_1],Y
 10646 04:2CA4: 48           	pha
 10647 04:2CA5: 22 xx xx xx  	jsl	~~k_vdraw_ui_window
 10648                        ;				break;
  Tue Oct  1 2019  1:02                                                Page 214


 10649                        	.line	2070
 10650 04:2CA9: 82 0F 00     	brl	L10151
 10651                        ;			default:
 10652                        	.line	2071
 10653                        L10153:
 10654                        ;				break;
 10655                        	.line	2072
 10656 04:2CAC: 82 0C 00     	brl	L10151
 10657                        ;			}
 10658                        	.line	2073
 10659                        L10150:
 10660                        	xref	~~~swt
 10661 04:2CAF: 22 xx xx xx  	jsl	~~~swt
 10662 04:2CB3: 01 00        	dw	1
 10663 04:2CB5: 01 FB        	dw	64257
 10664 04:2CB7: 67 2C        	dw	L10152-1
 10665 04:2CB9: AB 2C        	dw	L10153-1
 10666                        L10151:
 10667                        ;		}
 10668                        	.line	2074
 10669                        ;	}
 10670                        L10149:
 10671                        	.line	2075
 10672                        ;	return TRUE;
 10673                        L10148:
 10674                        	.line	2076
 10675 04:2CBB: A9 01 00     	lda	#$1
 10676                        L370:
 10677 04:2CBE: A8           	tay
 10678 04:2CBF: A5 0E        	lda	<L365+2
 10679 04:2CC1: 85 12        	sta	<L365+2+4
 10680 04:2CC3: A5 0D        	lda	<L365+1
 10681 04:2CC5: 85 11        	sta	<L365+1+4
 10682 04:2CC7: 2B           	pld
 10683 04:2CC8: 3B           	tsc
 10684 04:2CC9: 18           	clc
 10685 04:2CCA: 69 10 00     	adc	#L365+4
 10686 04:2CCD: 1B           	tcs
 10687 04:2CCE: 98           	tya
 10688 04:2CCF: 6B           	rtl
 10689                        ;}
 10690                        	.line	2077
 10691                        	.endblock	2077
 10692             0000000C   L365	equ	12
 10693             00000005   L366	equ	5
 10694 04:2CD0:              	ends
 10695                        	efunc
 10696                        	.endfunc	2077,5,12
 10697                        	.line	2077
 10698                        	data
 10699                        L364:
 10700 00:0C2A: 20 2A 2A 2A  	db	$20,$2A,$2A,$2A,$20,$44,$65,$66,$57,$6E,
                    $64,$50,$72,$6F,$63
       00:0C2E: 20 44 65 66 
       00:0C32: 57 6E 64 50 
       00:0C36: 72 6F 63 
 10701 00:0C39: 3A 3A 54 79  	db	$3A,$3A,$54,$79,$70,$65,$3A,$00
       00:0C3D: 70 65 3A 00 
  Tue Oct  1 2019  1:02                                                Page 215


 10702 00:0C41:              	ends
 10703                        ;
 10704                        	.line	2077
 10705                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOSv1\src\fxwindows.c",2046
 10706                        	xref	~~k_font_getFontWidth
 10707                        	xref	~~k_font_getFontHeight
 10708                        	xref	~~k_create_ui_window_class
 10709                        	xref	~~k_vdraw_ui_window
 10710                        	xref	~~k_put_wingadget_point
 10711                        	xref	~~k_get_font_metrics
 10712                        	xref	~~k_draw_text_point
 10713                        	xref	~~k_draw_line
 10714                        	xref	~~k_scratch_restore_bitblt
 10715                        	xref	~~k_getUIGadgetColor
 10716                        	xref	~~k_getUIMenuColor
 10717                        	xref	~~k_vdraw_ui_menu
 10718                        	xref	~~k_mem_allocate_heap
 10719                        	xref	~~k_heap_integrity_check
 10720                        	xref	~~k_send_command_message
 10721                        	xref	~~k_send_window_message
 10722                        	xref	~~k_exec_get_current_process
 10723                        	xref	~~k_string_copy_string
 10724                        	xref	~~k_longtodec
 10725                        	xref	~~k_debug_strings
 10726                        	xref	~~k_debug_message
 10727                        	xref	~~k_debug_long
 10728                        	xref	~~k_debug_integer
 10729                        	xref	~~k_debug_pointer
 10730                        	xref	~~k_debug_string
 10731                        	xref	~~k_nodelist_foreach_until_listdata
 10732                        	xref	~~k_nodelist_foreach_listdata
 10733                        	xref	~~k_nodelist_foreach_type
 10734                        	xref	~~k_nodelist_getfirstnode
 10735                        	xref	~~k_nodelist_searchByName
 10736                        	xref	~~k_nodelist_addnodetolist
 10737                        	xref	~~k_nodelist_naddtolist
 10738                        	xref	~~k_nodelist_addtolist
 10739                        	xref	~~k_nodelist_allocate_list
 10740                        	xref	~~k_nodelist_ncreate
 10741                        	xref	~~strlen
 10742                        	xref	~~strcpy
 10743                        	xref	~~strcmp
 10744                        	xref	~~memset
 10745                        	.sym	~~k_deallocate_menu_resource,~~k_dealloc
                    ate_menu_resource,65,2,0
 10746                        	.sym	~~k_deallocate_icon_object,~~k_deallocat
                    e_icon_object,65,2,0
 10747                        	.sym	~~_k_windowManager_IconList,~~_k_windowM
                    anager_IconList,138,3,32,3
 10748                        	.sym	~~_k_windowManager_WindowMenuList,~~_k_w
                    indowManager_WindowMenuList,138,3,32,3
 10749                        	.sym	~~_k_windowManager_ObjectHitList,~~_k_wi
                    ndowManager_ObjectHitList,138,3,32,3
 10750                        	.sym	~~_k_windowManager_WindowObjectList,~~_k
                    _windowManager_WindowObjectList,138,3,32,3
 10751                        	.sym	~~_k_windowManager_WindowClassList,~~_k_
                    windowManager_WindowClassList,138,3,32,3
  Tue Oct  1 2019  1:02                                                Page 216


 10752                        	.sym	~~debug_window_node,~~debug_window_node,
                    65,2,0
 10753                        	.sym	~~k_size_dropdown_menus,~~k_size_dropdow
                    n_menus,65,2,0
 10754                        	.sym	~~find_window_caption,~~find_window_capt
                    ion,78,2,0
 10755                        	.sym	~~find_child_window,~~find_child_window,
                    78,2,0
 10756                        	.sym	~~k_iterate_children,~~k_iterate_childre
                    n,65,2,0
 10757                        	.sym	~~k_iterate_dropdown_menu_captions,~~k_i
                    terate_dropdown_menu_captions,65,2,0
 10758                        	.sym	~~k_iterate_menus,~~k_iterate_menus,65,2
                    ,0
 10759                        	.sym	~~_k_user_send_child_message,~~_k_user_s
                    end_child_message,78,2,0
 10760                        	.sym	PEACHCHILD_MSG,0,138,14,32,52
 10761                        	.sym	EACHCHILD_MSG,0,10,14,64,52
 10762                        	.sym	~~menuItemWindowProc,~~menuItemWindowPro
                    c,78,2,0
 10763                        	.sym	~~menuDropDownWindowProc,~~menuDropDownW
                    indowProc,78,2,0
 10764                        	.sym	~~menuAnchorWindowProc,~~menuAnchorWindo
                    wProc,78,2,0
 10765                        	.sym	~~gadgetWindowProc,~~gadgetWindowProc,78
                    ,2,0
 10766                        	.sym	~~menuWindowProc,~~menuWindowProc,78,2,0
 10767                        	.sym	~~buttonWindowProc,~~buttonWindowProc,78
                    ,2,0
 10768                        	.sym	~~DlgWindowProc,~~DlgWindowProc,78,2,0
 10769                        	.sym	~~DefWindowProc,~~DefWindowProc,78,2,0
 10770                        	.sym	~~k_deallocate_hit_class,~~k_deallocate_
                    hit_class,65,2,0
 10771                        	.sym	~~k_deallocate_menu_object,~~k_deallocat
                    e_menu_object,65,2,0
 10772                        	.sym	~~k_deallocate_window_object,~~k_dealloc
                    ate_window_object,65,2,0
 10773                        	.sym	~~k_deallocate_window_class,~~k_dealloca
                    te_window_class,65,2,0
 10774                        	.sym	~~k_render_text,~~k_render_text,69,2,0
 10775                        	.sym	~~k_text_callback,~~k_text_callback,65,2
                    ,0
 10776                        	.sym	~~k_update_hover_location,~~k_update_hov
                    er_location,65,2,0
 10777                        	.sym	~~k_add_object_hit_node_local,~~k_add_ob
                    ject_hit_node_local,65,2,0
 10778                        	.sym	~~k_attach_mouse_detection_local,~~k_att
                    ach_mouse_detection_local,69,2,0
 10779                        	.sym	~~k_point_in_any_nodeslist,~~k_point_in_
                    any_nodeslist,1098,2,32,2
 10780                        	.sym	~~k_point_in_nodeslist,~~k_point_in_node
                    slist,1098,2,32,2
 10781                        	.sym	~~k_add_object_hit_node,~~k_add_object_h
                    it_node,65,2,0
 10782                        	.sym	~~k_attach_mouse_detection,~~k_attach_mo
                    use_detection,69,2,0
 10783                        	.sym	~~k_add_child_window,~~k_add_child_windo
                    w,78,2,0
  Tue Oct  1 2019  1:02                                                Page 217


 10784                        	.sym	~~k_user_IsChildWindow,~~k_user_IsChildW
                    indow,78,2,0
 10785                        	.sym	~~k_user_getFocusWindow,~~k_user_getFocu
                    sWindow,1089,2,32
 10786                        	.sym	~~k_user_CreateButton,~~k_user_CreateBut
                    ton,1098,2,32,23
 10787                        	.sym	~~k_user_CreateMenuDropItem,~~k_user_Cre
                    ateMenuDropItem,1098,2,32,23
 10788                        	.sym	~~k_user_CreateMenuDropDown,~~k_user_Cre
                    ateMenuDropDown,1098,2,32,23
 10789                        	.sym	~~k_user_CreateMenuAnchor,~~k_user_Creat
                    eMenuAnchor,1098,2,32,23
 10790                        	.sym	~~k_user_AddMenuItem,~~k_user_AddMenuIte
                    m,1089,2,32
 10791                        	.sym	~~k_user_CreateMenuResource,~~k_user_Cre
                    ateMenuResource,1089,2,32
 10792                        	.sym	~~k_user_CreateMenu,~~k_user_CreateMenu,
                    1098,2,32,23
 10793                        	.sym	~~k_user_GlobalToClientCoordinates,~~k_u
                    ser_GlobalToClientCoordinates,1098,2,32,20
 10794                        	.sym	~~k_user_ClientToGlobalCoordinates,~~k_u
                    ser_ClientToGlobalCoordinates,1098,2,32,20
 10795                        	.sym	~~k_user_ShowWindow,~~k_user_ShowWindow,
                    78,2,0
 10796                        	.sym	~~k_user_CreateWindow,~~k_user_CreateWin
                    dow,1098,2,32,23
 10797                        	.sym	~~k_user_RegisterWindowClass,~~k_user_Re
                    gisterWindowClass,1089,2,32
 10798                        	.sym	~~k_user_CreateWindowClass,~~k_user_Crea
                    teWindowClass,1098,2,32,22
 10799                        	.sym	~~k_user_getSystemMetric,~~k_user_getSys
                    temMetric,69,2,0
 10800                        	.sym	~~k_user_getDesktopWindow,~~k_user_getDe
                    sktopWindow,1089,2,32
 10801                        	.sym	~~k_getHandleFromWindow,~~k_getHandleFro
                    mWindow,1089,2,32
 10802                        	.sym	~~k_getWindowFromHandle,~~k_getWindowFro
                    mHandle,1098,2,32,23
 10803                        	.sym	~~k_getWindowClassList,~~k_getWindowClas
                    sList,1098,2,32,2
 10804                        	.sym	~~k_getWindowList,~~k_getWindowList,1098
                    ,2,32,2
 10805                        	.sym	~~k_getWindowManagerClassList,~~k_getWin
                    dowManagerClassList,1098,2,32,3
 10806                        	.sym	~~k_getWindowManagerList,~~k_getWindowMa
                    nagerList,1098,2,32,3
 10807                        	.sym	~~k_initializeWindowManager,~~k_initiali
                    zeWindowManager,78,2,0
 10808                        	.sym	~~k_font_getFontWidth,~~k_font_getFontWi
                    dth,80,18,0
 10809                        	.sym	~~k_font_getFontHeight,~~k_font_getFontH
                    eight,80,18,0
 10810                        	.sym	~~k_create_ui_window_class,~~k_create_ui
                    _window_class,1098,18,32,23
 10811                        	.sym	~~k_vdraw_ui_window,~~k_vdraw_ui_window,
                    65,18,0
 10812                        	.sym	~~k_put_wingadget_point,~~k_put_wingadge
                    t_point,69,18,0
  Tue Oct  1 2019  1:02                                                Page 218


 10813                        	.sym	~~k_get_font_metrics,~~k_get_font_metric
                    s,69,18,0
 10814                        	.sym	~~k_draw_text_point,~~k_draw_text_point,
                    69,18,0
 10815                        	.sym	~~k_draw_line,~~k_draw_line,65,18,0
 10816                        	.sym	~~k_scratch_restore_bitblt,~~k_scratch_r
                    estore_bitblt,65,18,0
 10817                        	.sym	~~k_getUIGadgetColor,~~k_getUIGadgetColo
                    r,69,18,0
 10818                        	.sym	~~k_getUIMenuColor,~~k_getUIMenuColor,69
                    ,18,0
 10819                        	.sym	PCUR_PALETTE_MAP,0,138,14,32,51
 10820                        	.sym	CUR_PALETTE_MAP,0,10,14,400,51
 10821                        	.sym	~~k_vdraw_ui_menu,~~k_vdraw_ui_menu,1098
                    ,18,32,27
 10822                        	.sym	PCLICKDETECTED,0,138,14,32,50
 10823                        	.sym	CLICKDETECTED,0,10,14,64,50
 10824                        	.sym	OBJECTCLICKED,0,641,14,32
 10825                        	.sym	~~k_mem_allocate_heap,~~k_mem_allocate_h
                    eap,1089,18,32
 10826                        	.sym	~~k_heap_integrity_check,~~k_heap_integr
                    ity_check,82,18,0
 10827                        	.sym	MemoryCallback,0,641,14,32
 10828                        	.sym	PFXMEMORYMAP,0,138,14,32,49
 10829                        	.sym	FXMEMORYMAP,0,10,14,2072,49
 10830                        	.sym	UMM_HEAP_INFO,0,10,14,256,48
 10831                        	.sym	PCOMMANDARGS,0,138,14,32,47
 10832                        	.sym	COMMANDARGS,0,10,14,64,47
 10833                        	.sym	PTOKENIZESTATE,0,133,14,32
 10834                        	.sym	TOKENIZESTATE,0,5,14,16
 10835                        	.sym	PTOKEN,0,138,14,32,46
 10836                        	.sym	TOKEN,0,10,14,64,46
 10837                        	.sym	PTOKENTYPE,0,133,14,32
 10838                        	.sym	TOKENTYPE,0,5,14,16
 10839                        	.sym	FXCommandHandler,0,656,14,32
 10840                        	.sym	PCONSOLECTX,0,138,14,32,45
 10841                        	.sym	CONSOLECTX,0,10,14,1144,45
 10842                        	.sym	PSPINNERCTX,0,138,14,32,44
 10843                        	.sym	SPINNERCTX,0,10,14,48,44
 10844                        	.sym	~~_k_keyCodesExtSet,~~_k_keyCodesExtSet,
                    110,3,0,1
 10845                        	.sym	~~_k_keyCodesShiftSet,~~_k_keyCodesShift
                    Set,110,3,0,89
 10846                        	.sym	~~_k_keyCodesSet,~~_k_keyCodesSet,110,3,
                    0,89
 10847                        	.sym	~~k_send_command_message,~~k_send_comman
                    d_message,78,18,0
 10848                        	.sym	~~k_send_window_message,~~k_send_window_
                    message,78,18,0
 10849                        	.sym	PMOUSE_MSG_STATE,0,138,14,32,43
 10850                        	.sym	MOUSE_MSG_STATE,0,10,14,184,43
 10851                        	.sym	PFXEVENTPROCESS,0,138,14,32,42
 10852                        	.sym	FXEVENTPROCESS,0,10,14,64,42
 10853                        	.sym	FXEventProc,0,641,14,32
 10854                        	.sym	PMOUSEMSGDATA,0,138,14,32,41
 10855                        	.sym	MOUSEMSGDATA,0,10,14,64,41
 10856                        	.sym	MSGIRQ,0,5,14,16
 10857                        	.sym	MAINLOOPARGS,0,10,14,16,40
  Tue Oct  1 2019  1:02                                                Page 219


 10858                        	.sym	~~k_exec_get_current_process,~~k_exec_ge
                    t_current_process,1098,18,32,16
 10859                        	.sym	~~k_string_copy_string,~~k_string_copy_s
                    tring,1102,18,32
 10860                        	.sym	~~k_longtodec,~~k_longtodec,1102,18,32
 10861                        	.sym	PFXSTRING,0,138,14,32,39
 10862                        	.sym	FXSTRING,0,10,14,64,39
 10863                        	.sym	~~k_debug_strings,~~k_debug_strings,65,1
                    8,0
 10864                        	.sym	~~k_debug_message,~~k_debug_message,65,1
                    8,0
 10865                        	.sym	~~k_debug_long,~~k_debug_long,65,18,0
 10866                        	.sym	~~k_debug_integer,~~k_debug_integer,65,1
                    8,0
 10867                        	.sym	~~k_debug_pointer,~~k_debug_pointer,65,1
                    8,0
 10868                        	.sym	~~k_debug_string,~~k_debug_string,65,18,
                    0
 10869                        	.sym	PFXENVIRONMENT,0,138,14,32,38
 10870                        	.sym	FXENVIRONMENT,0,10,14,96,38
 10871                        	.sym	PFXZERPOPAGE,0,138,14,32,37
 10872                        	.sym	FXZERPOPAGE,0,10,14,352,37
 10873                        	.sym	~~k_nodelist_foreach_until_listdata,~~k_
                    nodelist_foreach_until_listdata,1098,18,32,2
 10874                        	.sym	~~k_nodelist_foreach_listdata,~~k_nodeli
                    st_foreach_listdata,65,18,0
 10875                        	.sym	~~k_nodelist_foreach_type,~~k_nodelist_f
                    oreach_type,65,18,0
 10876                        	.sym	FOREACHNODEUNTIL,0,654,14,32
 10877                        	.sym	FOREACHNODE,0,641,14,32
 10878                        	.sym	~~k_nodelist_getfirstnode,~~k_nodelist_g
                    etfirstnode,1098,18,32,2
 10879                        	.sym	~~k_nodelist_searchByName,~~k_nodelist_s
                    earchByName,1098,18,32,2
 10880                        	.sym	~~k_nodelist_addnodetolist,~~k_nodelist_
                    addnodetolist,1098,18,32,2
 10881                        	.sym	~~k_nodelist_naddtolist,~~k_nodelist_nad
                    dtolist,1098,18,32,2
 10882                        	.sym	~~k_nodelist_addtolist,~~k_nodelist_addt
                    olist,1098,18,32,2
 10883                        	.sym	~~k_nodelist_allocate_list,~~k_nodelist_
                    allocate_list,1098,18,32,3
 10884                        	.sym	~~k_nodelist_ncreate,~~k_nodelist_ncreat
                    e,1098,18,32,2
 10885                        	.sym	~~strlen,~~strlen,80,18,0
 10886                        	.sym	~~strcpy,~~strcpy,1102,18,32
 10887                        	.sym	~~strcmp,~~strcmp,69,18,0
 10888                        	.sym	~~memset,~~memset,1089,18,32
 10889                        	.sym	Boolean_T,0,5,14,16
 10890                        	.sym	ldiv_t,0,10,14,64,35
 10891                        	.sym	div_t,0,10,14,32,34
 10892                        	.sym	wctype_t,0,16,14,16
 10893                        	.sym	wint_t,0,16,14,16
 10894                        	.sym	wchar_t,0,14,14,8
 10895                        	.sym	ptrdiff_t,0,7,14,32
 10896                        	.sym	size_t,0,16,14,16
 10897                        	.sym	PFXCOMBUFFER,0,138,14,32,33
 10898                        	.sym	FXCOMBUFFER,0,10,14,2080,33
  Tue Oct  1 2019  1:02                                                Page 220


 10899                        	.sym	PSUBMENULIST,0,138,14,32,32
 10900                        	.sym	SUBMENULIST,0,10,14,40,32
 10901                        	.sym	HSUBMENU,0,7,14,32
 10902                        	.sym	PSUBMENU,0,138,14,32,31
 10903                        	.sym	SUBMENU,0,10,14,64,31
 10904                        	.sym	MenuAction,0,641,14,32
 10905                        	.sym	PMENUANCHOR,0,138,14,32,30
 10906                        	.sym	MENUANCHOR,0,10,14,96,30
 10907                        	.sym	PBUTTON,0,138,14,32,29
 10908                        	.sym	BUTTON,0,10,14,64,29
 10909                        	.sym	PMENUDROPDOWNDATA,0,138,14,32,28
 10910                        	.sym	MENUDROPDOWNDATA,0,10,14,2896,28
 10911                        	.sym	PMENU,0,138,14,32,27
 10912                        	.sym	MENU,0,10,14,248,27
 10913                        	.sym	HMENURESOURCE,0,129,14,32
 10914                        	.sym	HCLICKABLE,0,7,14,32
 10915                        	.sym	PCLICKABLE,0,138,14,32,26
 10916                        	.sym	CLICKABLE,0,10,14,80,26
 10917                        	.sym	HTEXTBOX,0,7,14,32
 10918                        	.sym	PTEXTBOX,0,138,14,32,25
 10919                        	.sym	TEXTBOX,0,10,14,112,25
 10920                        	.sym	FONTMETRIC,0,10,14,32,24
 10921                        	.sym	TITLE,0,142,14,32
 10922                        	.sym	PHANDLE,0,1153,14,32
 10923                        	.sym	HANDLE,0,129,14,32
 10924                        	.sym	PWINDOW,0,138,14,32,23
 10925                        	.sym	WINDOW,0,10,14,776,23
 10926                        	.sym	Window,0,10,14,776,23
 10927                        	.sym	PWNDCLASS,0,138,14,32,22
 10928                        	.sym	WNDCLASS,0,10,14,256,22
 10929                        	.sym	HBRUSH,0,129,14,32
 10930                        	.sym	HCURSOR,0,129,14,32
 10931                        	.sym	HICON,0,129,14,32
 10932                        	.sym	HINSTANCE,0,129,14,32
 10933                        	.sym	FXWndProc,0,654,14,32
 10934                        	.sym	PRECT,0,138,14,32,21
 10935                        	.sym	RECT,0,10,14,64,21
 10936                        	.sym	PPOINT,0,138,14,32,20
 10937                        	.sym	POINT,0,10,14,32,20
 10938                        	.sym	PFXPROPERTY,0,138,14,32,18
 10939                        	.sym	FXPROPERTY,0,10,14,384,18
 10940                        	.sym	SCANCODE,0,14,14,8
 10941                        	.sym	KEYCODE,0,14,14,8
 10942                        	.sym	PFXPROCESSMESSAGE,0,138,14,32,17
 10943                        	.sym	FXPROCESSMESSAGE,0,10,14,112,17
 10944                        	.sym	PFXPROCESS,0,138,14,32,16
 10945                        	.sym	FXPROCESS,0,10,14,664,16
 10946                        	.sym	PDESKTOP_CONTROL,0,138,14,32,15
 10947                        	.sym	DESKTOP_CONTROL,0,10,14,328,15
 10948                        	.sym	PCONSOLE_CONTROL,0,138,14,32,14
 10949                        	.sym	CONSOLE_CONTROL,0,10,14,448,14
 10950                        	.sym	FXProcessProc,0,641,14,32
 10951                        	.sym	PFXCMDMESSAGE,0,138,14,32,13
 10952                        	.sym	FXCMDMESSAGE,0,10,14,304,13
 10953                        	.sym	PFXOSMESSAGE,0,138,14,32,12
 10954                        	.sym	FXOSMESSAGE,0,10,14,304,12
 10955                        	.sym	PINT_REGS,0,138,14,32,11
 10956                        	.sym	INT_REGS,0,10,14,104,11
  Tue Oct  1 2019  1:02                                                Page 221


 10957                        	.sym	TASK_STACK,0,10,14,32,10
 10958                        	.sym	TASK,0,10,14,48,9
 10959                        	.sym	PIRQDATA,0,138,14,32,8
 10960                        	.sym	IRQDATA,0,10,14,48,8
 10961                        	.sym	HMENU,0,129,14,32
 10962                        	.sym	HWND,0,129,14,32
 10963                        	.sym	MSGDATA,0,14,14,8
 10964                        	.sym	MSGDEST,0,18,14,32
 10965                        	.sym	MSGSRC,0,18,14,32
 10966                        	.sym	MSGTYPE,0,16,14,16
 10967                        	.sym	PROCESS_RESOURCE_LIST,0,138,14,32,3
 10968                        	.sym	PROCESS_TLS_LIST,0,138,14,32,3
 10969                        	.sym	SEMAPHORE_LIST,0,138,14,32,3
 10970                        	.sym	FILE_BLOCK_LIST,0,138,14,32,3
 10971                        	.sym	FILE_PATH_LIST,0,138,14,32,3
 10972                        	.sym	PROCEDURE_LIST,0,138,14,32,3
 10973                        	.sym	FILE_HANDLE,0,138,14,32,7
 10974                        	.sym	FILE_BLOCK,0,10,14,552,7
 10975                        	.sym	SEMAPHORE,0,10,14,16,6
 10976                        	.sym	PPROCESS_SIGNAL,0,138,14,32,5
 10977                        	.sym	PROCESS_SIGNAL,0,10,14,16,5
 10978                        	.sym	PROCESS_STATUS,0,16,14,16
 10979                        	.sym	FILE_PATH_NAME,0,142,14,32
 10980                        	.sym	PROCESS_RESOURCE,0,129,14,32
 10981                        	.sym	PROCESS_TLS,0,129,14,32
 10982                        	.sym	PROCESS_CTX,0,129,14,32
 10983                        	.sym	USERID,0,16,14,16
 10984                        	.sym	PROCESS_ID,0,18,14,32
 10985                        	.sym	PROCESS_BANK,0,14,14,8
 10986                        	.sym	PFXQUEUE,0,138,14,32,4
 10987                        	.sym	FXQUEUE,0,10,14,80,4
 10988                        	.sym	PFXNODELIST,0,138,14,32,3
 10989                        	.sym	FXNODELIST,0,10,14,96,3
 10990                        	.sym	NodeListDeallocator,0,641,14,32
 10991                        	.sym	PFXNODE,0,138,14,32,2
 10992                        	.sym	FXNODE,0,10,14,384,2
 10993                        	.sym	PBYTEBITS,0,138,14,32,1
 10994                        	.sym	BYTEBITS,0,10,14,8,1
 10995                        	.sym	PFAR,0,142,14,32
 10996                        	.sym	LPBOOL,0,142,14,32
 10997                        	.sym	BOOL,0,14,14,8
 10998                        	.sym	DWORD,0,18,14,32
 10999                        	.sym	ULONG,0,18,14,32
 11000                        	.sym	LPLONG,0,135,14,32
 11001                        	.sym	LONG,0,7,14,32
 11002                        	.sym	UINT,0,16,14,16
 11003                        	.sym	INT,0,5,14,16
 11004                        	.sym	WORD,0,5,14,16
 11005                        	.sym	UCHAR,0,14,14,8
 11006                        	.sym	LPCSTR,0,142,14,32
 11007                        	.sym	LPSTR,0,142,14,32
 11008                        	.sym	LPCHAR,0,142,14,32
 11009                        	.sym	CHAR,0,14,14,8
 11010                        	.sym	BYTE,0,14,14,8
 11011                        	.sym	LPVOID,0,129,14,32
 11012                        	.sym	VOID,0,1,14,32
 11013                        	end

  Tue Oct  1 2019  1:02                                                Page 222



      Lines assembled: 11013
      Errors: 0
