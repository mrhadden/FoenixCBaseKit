  Wed Aug 14 2019 13:34                                                Page 1


                     ***************************************
                     **      WDC 65C816 Macro Assembler   **
                     **                                   **
                     **     Version 3.49.1- Feb  6 2006    **
                     ***************************************

     1                        ;:ts=8
     2             00000001   R0	equ	1
     3             00000005   R1	equ	5
     4             00000009   R2	equ	9
     5             0000000D   R3	equ	13
     6                        	.file	"G:\devprojects\c256Foenix\FXOSWorkspace
                    \FXOSv1\src\basicdrawing.c",0
     7                        ;#include "fxstartup.h"
     8                        	.file	"G:\devprojects\c256Foenix\FXOSWorkspace
                    \FXOSv1\src\fxstartup.h",0
     9                        	.file	"G:\devtools\WDCTools\wdc\Tools\include\
                    stdlib.h",0
    10                        	.file	"G:\devtools\WDCTools\wdc\Tools\include\
                    stddef.h",0
    11                        	.line	88
    12                        	.file	"G:\devtools\WDCTools\wdc\Tools\include\
                    stdlib.h",43
    13                        	.stag	fake1_,32,1
    14                        	.member	quot,0,5,8,16
    15                        	.member	rem,16,5,8,16
    16                        	.eos
    17                        	.stag	fake2_,64,2
    18                        	.member	quot,0,7,8,32
    19                        	.member	rem,32,7,8,32
    20                        	.eos
    21                        	.stag	int_sqrt,32,3
    22                        	.member	sqrt,0,16,8,16
    23                        	.member	frac,16,16,8,16
    24                        	.eos
    25                        	.line	205
    26                        	.file	"G:\devprojects\c256Foenix\FXOSWorkspace
                    \FXOSv1\src\fxstartup.h",4
    27                        	.file	"G:\devtools\WDCTools\wdc\Tools\include\
                    string.h",0
    28                        	.line	134
    29                        	.file	"G:\devprojects\c256Foenix\FXOSWorkspace
                    \FXOSv1\src\fxstartup.h",5
    30                        	.file	"G:\devtools\WDCTools\wdc\Tools\include\
                    ctype.h",0
    31                        	.line	103
    32                        	.file	"G:\devprojects\c256Foenix\FXOSWorkspace
                    \FXOSv1\src\fxstartup.h",6
    33                        	.file	"G:\devprojects\c256Foenix\FXOSWorkspace
                    \FXOSv1\src\fxos.h",0
    34                        	.file	"G:\devtools\WDCTools\wdc\Tools\include\
                    stdlib.h",0
    35                        	.line	205
    36                        	.file	"G:\devprojects\c256Foenix\FXOSWorkspace
                    \FXOSv1\src\fxos.h",4
    37                        	.file	"G:\devtools\WDCTools\wdc\Tools\include\
                    string.h",0
    38                        	.line	134
  Wed Aug 14 2019 13:34                                                Page 2


    39                        	.file	"G:\devprojects\c256Foenix\FXOSWorkspace
                    \FXOSv1\src\fxos.h",5
    40                        	.file	"G:\devprojects\c256Foenix\FXOSWorkspace
                    \FXOSv1\src\fxtypes.h",0
    41                        	.utag	_24bitPointer,32,4
    42                        	.member	address,0,142,11,32
    43                        	.member	bytes,0,110,11,0,4
    44                        	.eos
    45                        	.line	33
    46                        	.file	"G:\devprojects\c256Foenix\FXOSWorkspace
                    \FXOSv1\src\fxos.h",8
    47                        	.file	"G:\devprojects\c256Foenix\FXOSWorkspace
                    \FXOSv1\src\fxkernel.h",0
    48                        	.file	"G:\devprojects\c256Foenix\FXOSWorkspace
                    \FXOSv1\src\fxtypes.h",0
    49                        	.line	33
    50                        	.file	"G:\devprojects\c256Foenix\FXOSWorkspace
                    \FXOSv1\src\fxkernel.h",5
    51                        	.stag	_fx_zero_page,112,5
    52                        	.member	fxos_mouse_byte_0,0,14,8,8
    53                        	.member	fxos_mouse_byte_1,8,14,8,8
    54                        	.member	fxos_mouse_byte_2,16,14,8,8
    55                        	.member	fxos_mouse_byte_t,24,14,8,8
    56                        	.member	fxos_mouse_byte_x_l,32,14,8,8
    57                        	.member	fxos_mouse_byte_x_h,40,14,8,8
    58                        	.member	fxos_mouse_byte_y_l,48,14,8,8
    59                        	.member	fxos_mouse_byte_y_h,56,14,8,8
    60                        	.member	fxos_key_byte_0,64,14,8,8
    61                        	.member	fxos_key_byte_1,72,14,8,8
    62                        	.member	fxos_key_byte_2,80,14,8,8
    63                        	.member	fxos_mouse_ctl,88,14,8,8
    64                        	.member	fxos_mouse_index,96,14,8,8
    65                        	.member	fxos_mouse_status,104,14,8,8
    66                        	.eos
    67                        	.stag	_fx_environment,96,6
    68                        	.member	variables,0,142,8,32
    69                        	.member	reserved1,32,5,8,16
    70                        	.member	reserved2,48,5,8,16
    71                        	.member	reserved3,64,5,8,16
    72                        	.member	reserved4,80,5,8,16
    73                        	.eos
    74                        	.line	99
    75                        	.file	"G:\devprojects\c256Foenix\FXOSWorkspace
                    \FXOSv1\src\fxos.h",9
    76                        	.file	"G:\devprojects\c256Foenix\FXOSWorkspace
                    \FXOSv1\src\fxc256.h",0
    77                        	.file	"G:\devprojects\c256Foenix\FXOSWorkspace
                    \FXOSv1\src\fxtypes.h",0
    78                        	.line	33
    79                        	.file	"G:\devprojects\c256Foenix\FXOSWorkspace
                    \FXOSv1\src\fxc256.h",5
    80                        	.line	716
    81                        	.file	"G:\devprojects\c256Foenix\FXOSWorkspace
                    \FXOSv1\src\fxos.h",10
    82                        	.line	13
    83                        	.file	"G:\devprojects\c256Foenix\FXOSWorkspace
                    \FXOSv1\src\fxstartup.h",8
    84                        	.stag	_RectStruct,64,7
  Wed Aug 14 2019 13:34                                                Page 3


    85                        	.member	x,0,5,8,16
    86                        	.member	y,16,5,8,16
    87                        	.member	width,32,5,8,16
    88                        	.member	height,48,5,8,16
    89                        	.eos
    90                        	.stag	_WindowStruct,160,8
    91                        	.member	win_id,0,5,8,16
    92                        	.member	win_x,16,5,8,16
    93                        	.member	win_y,32,5,8,16
    94                        	.member	win_width,48,5,8,16
    95                        	.member	win_height,64,5,8,16
    96                        	.member	win_title,80,110,8,0,10
    97                        	.eos
    98                        	.stag	_FontMetric,32,9
    99                        	.member	width,0,5,8,16
   100                        	.member	height,16,5,8,16
   101                        	.eos
   102                        	.stag	_ctl_Textbox,112,10
   103                        	.member	win_id,0,5,8,16
   104                        	.member	win_x,16,5,8,16
   105                        	.member	win_y,32,5,8,16
   106                        	.member	win_width,48,5,8,16
   107                        	.member	win_height,64,5,8,16
   108                        	.member	content,80,1166,8,32
   109                        	.eos
   110                        	.stag	_ClickableRect,80,11
   111                        	.member	area,0,10,8,64,7
   112                        	.member	enabled,64,14,8,8
   113                        	.member	depth,72,14,8,8
   114                        	.eos
   115                        	.stag	_MenuStruct,168,12
   116                        	.member	cx,0,5,8,16
   117                        	.member	cy,16,5,8,16
   118                        	.member	width,32,5,8,16
   119                        	.member	height,48,5,8,16
   120                        	.member	fcolor,64,14,8,8
   121                        	.member	bcolor,72,14,8,8
   122                        	.member	chromeLeft,80,14,8,8
   123                        	.member	chromeRight1,88,14,8,8
   124                        	.member	chromeRight2,96,14,8,8
   125                        	.member	pCaption,104,142,8,32
   126                        	.member	subMenus,136,1153,8,32
   127                        	.eos
   128                        	.stag	_SubMenuStruct,64,13
   129                        	.member	caption,0,142,8,32
   130                        	.member	action,32,641,8,32
   131                        	.eos
   132                        	.stag	_SubMenuListStruct,40,14
   133                        	.member	cMenus,0,14,8,8
   134                        	.member	psubmenus,8,9354,8,32,13
   135                        	.eos
   136                        	.stag	_fx_irq_data,48,15
   137                        	.member	line,0,5,8,16
   138                        	.member	keycode,16,142,8,32
   139                        	.eos
   140                        	.stag	_task,48,16
   141                        	.member	SPL,0,14,8,8
   142                        	.member	SPH,8,14,8,8
  Wed Aug 14 2019 13:34                                                Page 4


   143                        	.member	pstack,16,142,8,32
   144                        	.eos
   145                        	.stag	_task_stack,32,17
   146                        	.member	SS,0,142,8,32
   147                        	.eos
   148                        	.stag	int_regs,104,18
   149                        	.member	PB,0,14,8,8
   150                        	.member	PH,8,14,8,8
   151                        	.member	PL,16,14,8,8
   152                        	.member	PP,24,14,8,8
   153                        	.member	DB,32,14,8,8
   154                        	.member	DH,40,14,8,8
   155                        	.member	DL,48,14,8,8
   156                        	.member	AH,56,14,8,8
   157                        	.member	AL,64,14,8,8
   158                        	.member	XH,72,14,8,8
   159                        	.member	XL,80,14,8,8
   160                        	.member	YH,88,14,8,8
   161                        	.member	YL,96,14,8,8
   162                        	.eos
   163                        	.line	327
   164                        	.file	"G:\devprojects\c256Foenix\FXOSWorkspace
                    \FXOSv1\src\basicdrawing.c",1
   165                        ;#include "basicdrawing.h"
   166                        	.file	"G:\devprojects\c256Foenix\FXOSWorkspace
                    \FXOSv1\src\basicdrawing.h",0
   167                        	.line	20
   168                        	.file	"G:\devprojects\c256Foenix\FXOSWorkspace
                    \FXOSv1\src\basicdrawing.c",2
   169                        ;#include "basicfont.h"
   170                        	.file	"G:\devprojects\c256Foenix\FXOSWorkspace
                    \FXOSv1\src\basicfont.h",0
   171                        	.line	38
   172                        	.file	"G:\devprojects\c256Foenix\FXOSWorkspace
                    \FXOSv1\src\basicdrawing.c",3
   173                        ;#include "tasking.h"
   174                        	.file	"G:\devprojects\c256Foenix\FXOSWorkspace
                    \FXOSv1\src\tasking.h",0
   175                        	.line	9
   176                        	.file	"G:\devprojects\c256Foenix\FXOSWorkspace
                    \FXOSv1\src\basicdrawing.c",4
   177                        ;
   178                        ;extern char far spinner[];
   179                        ;extern int 	far _k_window_index;
   180                        ;extern Window far _k_window_list[];
   181                        ;
   182                        ;#define CHKLIST_MAX 	(6)
   183                        ;CLICKABLE far clickList[CHKLIST_MAX];
   184                        ;PCLICKABLE far hitList[CHKLIST_MAX];
   185                        ;
   186                        ;void k_sleep(int* pmsec)
   187                        ;{
   188                        	.line	14
   189                        	.line	15
   190                        	code
   191                        	xdef	~~k_sleep
   192                        	func
   193                        	.function	15
  Wed Aug 14 2019 13:34                                                Page 5


   194                        ~~k_sleep:
   195                        	longa	on
   196                        	longi	on
   197 00:0000: 3B           	tsc
   198 00:0001: 38           	sec
   199 00:0002: E9 02 00     	sbc	#L2
   200 00:0005: 1B           	tcs
   201 00:0006: 0B           	phd
   202 00:0007: 5B           	tcd
   203             00000004   pmsec_0	set	4
   204                        	.block	15
   205                        ;	int delay = *pmsec;
   206                        ;	while(delay > 0)
   207             00000000   delay_1	set	0
   208                        	.sym	delay,0,5,1,16
   209                        	.sym	pmsec,4,133,6,32
   210 00:0008: A7 06        	lda	[<L2+pmsec_0]
   211 00:000A: 85 01        	sta	<L3+delay_1
   212                        	.line	17
   213                        L10001:
   214 00:000C: 38           	sec
   215 00:000D: A9 00 00     	lda	#$0
   216 00:0010: E5 01        	sbc	<L3+delay_1
   217 00:0012: 70 03        	bvs	L5
   218 00:0014: 49 00 80     	eor	#$8000
   219                        L5:
   220 00:0017: 10 03        	bpl	L6
   221 00:0019: 82 0A 00     	brl	L10002
   222                        L6:
   223                        ;	{
   224                        	.line	18
   225                        ;		#asm
   226                        	.line	19
   227                        ;			NOP
   228                        ;			NOP
   229                        ;			NOP
   230                        ;			NOP
   231                        ;			NOP
   232                        ;		#endasm
   233                        	asmstart
   234 00:001C: EA           			NOP
   235 00:001D: EA           			NOP
   236 00:001E: EA           			NOP
   237 00:001F: EA           			NOP
   238 00:0020: EA           			NOP
   239                        	asmend
   240                        ;		delay--;
   241                        	.line	26
   242 00:0021: C6 01        	dec	<L3+delay_1
   243                        ;	}
   244                        	.line	27
   245 00:0023: 82 E6 FF     	brl	L10001
   246                        L10002:
   247                        ;}
   248                        	.line	28
   249                        L7:
   250 00:0026: A5 04        	lda	<L2+2
   251 00:0028: 85 08        	sta	<L2+2+4
  Wed Aug 14 2019 13:34                                                Page 6


   252 00:002A: A5 03        	lda	<L2+1
   253 00:002C: 85 07        	sta	<L2+1+4
   254 00:002E: 2B           	pld
   255 00:002F: 3B           	tsc
   256 00:0030: 18           	clc
   257 00:0031: 69 06 00     	adc	#L2+4
   258 00:0034: 1B           	tcs
   259 00:0035: 6B           	rtl
   260                        	.endblock	28
   261             00000002   L2	equ	2
   262             00000001   L3	equ	1
   263                        	ends
   264                        	efunc
   265                        	.endfunc	28,1,2
   266                        	.line	28
   267                        ;
   268                        ;void k_draw_font(char outChar,int column,int row,
                    char color,char bcolor,char fontSetId)
   269                        ;{
   270                        	.line	30
   271                        	.line	31
   272                        	code
   273                        	xdef	~~k_draw_font
   274                        	func
   275                        	.function	31
   276                        ~~k_draw_font:
   277                        	longa	on
   278                        	longi	on
   279 00:0036: 3B           	tsc
   280 00:0037: 38           	sec
   281 00:0038: E9 00 00     	sbc	#L8
   282 00:003B: 1B           	tcs
   283 00:003C: 0B           	phd
   284 00:003D: 5B           	tcd
   285             00000004   outChar_0	set	4
   286             00000006   column_0	set	6
   287             00000008   row_0	set	8
   288             0000000A   color_0	set	10
   289             0000000C   bcolor_0	set	12
   290             0000000E   fontSetId_0	set	14
   291                        	.block	31
   292                        ;	k_draw_font_at_point(outChar,column * FONTW,row 
                    * FONTH,color,bcolor,fontSetId);
   293                        	.sym	outChar,4,14,6,8
   294                        	.sym	column,6,5,6,16
   295                        	.sym	row,8,5,6,16
   296                        	.sym	color,10,14,6,8
   297                        	.sym	bcolor,12,14,6,8
   298                        	.sym	fontSetId,14,14,6,8
   299                        	.line	32
   300 00:003E: D4 0E        	pei	<L8+fontSetId_0
   301 00:0040: D4 0C        	pei	<L8+bcolor_0
   302 00:0042: D4 0A        	pei	<L8+color_0
   303 00:0044: A5 08        	lda	<L8+row_0
   304 00:0046: 0A           	asl	A
   305 00:0047: 0A           	asl	A
   306 00:0048: 0A           	asl	A
   307 00:0049: 48           	pha
  Wed Aug 14 2019 13:34                                                Page 7


   308 00:004A: A5 06        	lda	<L8+column_0
   309 00:004C: 0A           	asl	A
   310 00:004D: 0A           	asl	A
   311 00:004E: 0A           	asl	A
   312 00:004F: 48           	pha
   313 00:0050: D4 04        	pei	<L8+outChar_0
   314 00:0052: 22 xx xx xx  	jsl	~~k_draw_font_at_point
   315                        ;}
   316                        	.line	33
   317                        L11:
   318 00:0056: A5 02        	lda	<L8+2
   319 00:0058: 85 0E        	sta	<L8+2+12
   320 00:005A: A5 01        	lda	<L8+1
   321 00:005C: 85 0D        	sta	<L8+1+12
   322 00:005E: 2B           	pld
   323 00:005F: 3B           	tsc
   324 00:0060: 18           	clc
   325 00:0061: 69 0C 00     	adc	#L8+12
   326 00:0064: 1B           	tcs
   327 00:0065: 6B           	rtl
   328                        	.endblock	33
   329             00000000   L8	equ	0
   330             00000001   L9	equ	1
   331                        	ends
   332                        	efunc
   333                        	.endfunc	33,1,0
   334                        	.line	33
   335                        ;
   336                        ;void k_draw_font_at_point(char outChar,int mx,int
                     my,char color,char bcolor,char fontSetId)
   337                        ;{
   338                        	.line	35
   339                        	.line	36
   340                        	code
   341                        	xdef	~~k_draw_font_at_point
   342                        	func
   343                        	.function	36
   344                        ~~k_draw_font_at_point:
   345                        	longa	on
   346                        	longi	on
   347 00:0066: 3B           	tsc
   348 00:0067: 38           	sec
   349 00:0068: E9 21 00     	sbc	#L12
   350 00:006B: 1B           	tcs
   351 00:006C: 0B           	phd
   352 00:006D: 5B           	tcd
   353             00000004   outChar_0	set	4
   354             00000006   mx_0	set	6
   355             00000008   my_0	set	8
   356             0000000A   color_0	set	10
   357             0000000C   bcolor_0	set	12
   358             0000000E   fontSetId_0	set	14
   359                        	.block	36
   360                        ;	int x = 0;
   361                        ;	int y = 0;
   362                        ;	int textX = mx;
   363                        ;	int textY = my;
   364                        ;
  Wed Aug 14 2019 13:34                                                Page 8


   365                        ;	char far* img = NULL;//fontImg[ix];
   366                        ;
   367                        ;    if(outChar == 32 && fontSetId!=0xFF)
   368             00000000   x_1	set	0
   369             00000002   y_1	set	2
   370             00000004   textX_1	set	4
   371             00000006   textY_1	set	6
   372             00000008   img_1	set	8
   373                        	.sym	x,0,5,1,16
   374                        	.sym	y,2,5,1,16
   375                        	.sym	textX,4,5,1,16
   376                        	.sym	textY,6,5,1,16
   377                        	.sym	img,8,142,1,32
   378                        	.sym	outChar,4,14,6,8
   379                        	.sym	mx,6,5,6,16
   380                        	.sym	my,8,5,6,16
   381                        	.sym	color,10,14,6,8
   382                        	.sym	bcolor,12,14,6,8
   383                        	.sym	fontSetId,14,14,6,8
   384 00:006E: 64 15        	stz	<L13+x_1
   385 00:0070: 64 17        	stz	<L13+y_1
   386 00:0072: A5 27        	lda	<L12+mx_0
   387 00:0074: 85 19        	sta	<L13+textX_1
   388 00:0076: A5 29        	lda	<L12+my_0
   389 00:0078: 85 1B        	sta	<L13+textY_1
   390 00:007A: 64 1D        	stz	<L13+img_1
   391 00:007C: 64 1F        	stz	<L13+img_1+2
   392                        	.line	44
   393                        ;	{
   394 00:007E: E2 20        	sep	#$20
   395                        	longa	off
   396 00:0080: A5 25        	lda	<L12+outChar_0
   397 00:0082: C9 20        	cmp	#<$20
   398 00:0084: C2 20        	rep	#$20
   399                        	longa	on
   400 00:0086: F0 03        	beq	L15
   401 00:0088: 82 14 00     	brl	L10003
   402                        L15:
   403 00:008B: E2 20        	sep	#$20
   404                        	longa	off
   405 00:008D: A5 2F        	lda	<L12+fontSetId_0
   406 00:008F: C9 FF        	cmp	#<$ff
   407 00:0091: C2 20        	rep	#$20
   408                        	longa	on
   409 00:0093: D0 03        	bne	L16
   410 00:0095: 82 07 00     	brl	L10003
   411                        L16:
   412                        	.line	45
   413                        ;	   img = NULL;
   414                        	.line	46
   415 00:0098: 64 1D        	stz	<L13+img_1
   416 00:009A: 64 1F        	stz	<L13+img_1+2
   417                        ;    }
   418                        	.line	47
   419                        ;	else if(outChar == 32 && fontSetId==0xFF)
   420 00:009C: 82 82 00     	brl	L10004
   421                        L10003:
   422                        	.line	48
  Wed Aug 14 2019 13:34                                                Page 9


   423                        ;	{
   424 00:009F: E2 20        	sep	#$20
   425                        	longa	off
   426 00:00A1: A5 25        	lda	<L12+outChar_0
   427 00:00A3: C9 20        	cmp	#<$20
   428 00:00A5: C2 20        	rep	#$20
   429                        	longa	on
   430 00:00A7: F0 03        	beq	L17
   431 00:00A9: 82 1A 00     	brl	L10005
   432                        L17:
   433 00:00AC: E2 20        	sep	#$20
   434                        	longa	off
   435 00:00AE: A5 2F        	lda	<L12+fontSetId_0
   436 00:00B0: C9 FF        	cmp	#<$ff
   437 00:00B2: C2 20        	rep	#$20
   438                        	longa	on
   439 00:00B4: F0 03        	beq	L18
   440 00:00B6: 82 0D 00     	brl	L10005
   441                        L18:
   442                        	.line	49
   443                        ;		img = fontSpace;		
   444                        	.line	50
   445 00:00B9: A9 xx xx     	lda	#<~~fontSpace
   446 00:00BC: 85 1D        	sta	<L13+img_1
   447 00:00BE: A9 xx xx     	lda	#^~~fontSpace
   448 00:00C1: 85 1F        	sta	<L13+img_1+2
   449                        ;	}
   450                        	.line	51
   451                        ;    else
   452 00:00C3: 82 5B 00     	brl	L10006
   453                        L10005:
   454                        ;	{
   455                        	.line	53
   456                        ;	    img = fontImg[(int)characterROMMapping[(int)
                    (outChar & 0xFF)]];
   457                        	.line	54
   458 00:00C6: A5 25        	lda	<L12+outChar_0
   459 00:00C8: 29 FF 00     	and	#<$ff
   460 00:00CB: 85 09        	sta	<R2
   461 00:00CD: A0 00 00     	ldy	#$0
   462 00:00D0: A5 09        	lda	<R2
   463 00:00D2: 10 01        	bpl	L19
   464 00:00D4: 88           	dey
   465                        L19:
   466 00:00D5: 85 09        	sta	<R2
   467 00:00D7: 84 0B        	sty	<R2+2
   468 00:00D9: D4 0B        	pei	<R2+2
   469 00:00DB: D4 09        	pei	<R2
   470 00:00DD: A9 01 00     	lda	#$1
   471                        	xref	~~~lasl
   472 00:00E0: 22 xx xx xx  	jsl	~~~lasl
   473 00:00E4: 85 05        	sta	<R1
   474 00:00E6: 86 07        	stx	<R1+2
   475 00:00E8: 18           	clc
   476 00:00E9: A9 xx xx     	lda	#<~~characterROMMapping
   477 00:00EC: 65 05        	adc	<R1
   478 00:00EE: 85 0D        	sta	<R3
   479 00:00F0: A9 xx xx     	lda	#^~~characterROMMapping
  Wed Aug 14 2019 13:34                                                Page 10


   480 00:00F3: 65 07        	adc	<R1+2
   481 00:00F5: 85 0F        	sta	<R3+2
   482 00:00F7: A0 00 00     	ldy	#$0
   483 00:00FA: A7 0D        	lda	[<R3]
   484 00:00FC: 10 01        	bpl	L20
   485 00:00FE: 88           	dey
   486                        L20:
   487 00:00FF: 85 05        	sta	<R1
   488 00:0101: 84 07        	sty	<R1+2
   489 00:0103: D4 07        	pei	<R1+2
   490 00:0105: D4 05        	pei	<R1
   491 00:0107: A9 06 00     	lda	#$6
   492                        	xref	~~~lasl
   493 00:010A: 22 xx xx xx  	jsl	~~~lasl
   494 00:010E: 85 01        	sta	<R0
   495 00:0110: 86 03        	stx	<R0+2
   496 00:0112: 18           	clc
   497 00:0113: A9 xx xx     	lda	#<~~fontImg
   498 00:0116: 65 01        	adc	<R0
   499 00:0118: 85 1D        	sta	<L13+img_1
   500 00:011A: A9 xx xx     	lda	#^~~fontImg
   501 00:011D: 65 03        	adc	<R0+2
   502 00:011F: 85 1F        	sta	<L13+img_1+2
   503                        ;		//img = fontImg[0x02];
   504                        ;	}
   505                        	.line	56
   506                        L10006:
   507                        L10004:
   508                        ;
   509                        ;	if(img!=NULL)
   510                        	.line	58
   511                        ;	{
   512 00:0121: A5 1D        	lda	<L13+img_1
   513 00:0123: 05 1F        	ora	<L13+img_1+2
   514 00:0125: D0 03        	bne	L21
   515 00:0127: 82 D0 00     	brl	L10007
   516                        L21:
   517                        	.line	59
   518                        ;		for (y = 0; y < FONTH; y++) 
   519                        	.line	60
   520 00:012A: 64 17        	stz	<L13+y_1
   521                        L10010:
   522                        ;		{
   523                        	.line	61
   524                        ;			// loop through pixel columns
   525                        ;			for (x = 0; x < FONTW; x++) 
   526                        	.line	63
   527 00:012C: 64 15        	stz	<L13+x_1
   528                        L10013:
   529                        ;			{
   530                        	.line	64
   531                        ;				// get the pixel value
   532                        ;				char b = img[y * FONTW +
                     x];
   533                        ;				if (b > 0) 
   534                        	.block	67
   535             0000000C   b_2	set	12
   536                        	.sym	b,12,14,1,8
  Wed Aug 14 2019 13:34                                                Page 11


   537 00:012E: A5 17        	lda	<L13+y_1
   538 00:0130: 0A           	asl	A
   539 00:0131: 0A           	asl	A
   540 00:0132: 0A           	asl	A
   541 00:0133: 85 01        	sta	<R0
   542 00:0135: 18           	clc
   543 00:0136: A5 01        	lda	<R0
   544 00:0138: 65 15        	adc	<L13+x_1
   545 00:013A: 85 05        	sta	<R1
   546 00:013C: E2 20        	sep	#$20
   547                        	longa	off
   548 00:013E: A4 05        	ldy	<R1
   549 00:0140: B7 1D        	lda	[<L13+img_1],Y
   550 00:0142: 85 21        	sta	<L13+b_2
   551 00:0144: C2 20        	rep	#$20
   552                        	longa	on
   553                        	.line	67
   554                        ;				{ // plot the pixel
   555 00:0146: E2 20        	sep	#$20
   556                        	longa	off
   557 00:0148: A9 00        	lda	#$0
   558 00:014A: C5 21        	cmp	<L13+b_2
   559 00:014C: C2 20        	rep	#$20
   560                        	longa	on
   561 00:014E: 90 03        	bcc	L23
   562 00:0150: 82 83 00     	brl	L10014
   563                        L23:
   564                        	.line	68
   565                        ;					//k_draw_pixel(t
                    extX + x, textY + y, color);
   566                        ;					
   567                        ;					((unsigned char 
                    far *)BITMAP_BANK_0)[(long)(( ((long)textY + y) * 640L) + ((
                    long)textX + x) )] = (char)color;
   568                        	.line	71
   569 00:0153: A0 00 00     	ldy	#$0
   570 00:0156: A5 19        	lda	<L13+textX_1
   571 00:0158: 10 01        	bpl	L24
   572 00:015A: 88           	dey
   573                        L24:
   574 00:015B: 85 01        	sta	<R0
   575 00:015D: 84 03        	sty	<R0+2
   576 00:015F: A0 00 00     	ldy	#$0
   577 00:0162: A5 15        	lda	<L13+x_1
   578 00:0164: 10 01        	bpl	L25
   579 00:0166: 88           	dey
   580                        L25:
   581 00:0167: 85 05        	sta	<R1
   582 00:0169: 84 07        	sty	<R1+2
   583 00:016B: A0 00 00     	ldy	#$0
   584 00:016E: A5 17        	lda	<L13+y_1
   585 00:0170: 10 01        	bpl	L26
   586 00:0172: 88           	dey
   587                        L26:
   588 00:0173: 85 09        	sta	<R2
   589 00:0175: 84 0B        	sty	<R2+2
   590 00:0177: A0 00 00     	ldy	#$0
   591 00:017A: A5 1B        	lda	<L13+textY_1
  Wed Aug 14 2019 13:34                                                Page 12


   592 00:017C: 10 01        	bpl	L27
   593 00:017E: 88           	dey
   594                        L27:
   595 00:017F: 85 0D        	sta	<R3
   596 00:0181: 84 0F        	sty	<R3+2
   597 00:0183: 18           	clc
   598 00:0184: A5 0D        	lda	<R3
   599 00:0186: 65 09        	adc	<R2
   600 00:0188: 85 11        	sta	<17
   601 00:018A: A5 0F        	lda	<R3+2
   602 00:018C: 65 0B        	adc	<R2+2
   603 00:018E: 85 13        	sta	<17+2
   604 00:0190: F4 00 00     	pea	#^$280
   605 00:0193: F4 80 02     	pea	#<$280
   606 00:0196: D4 13        	pei	<17+2
   607 00:0198: D4 11        	pei	<17
   608                        	xref	~~~lmul
   609 00:019A: 22 xx xx xx  	jsl	~~~lmul
   610 00:019E: 85 09        	sta	<R2
   611 00:01A0: 86 0B        	stx	<R2+2
   612 00:01A2: 18           	clc
   613 00:01A3: A5 09        	lda	<R2
   614 00:01A5: 65 05        	adc	<R1
   615 00:01A7: 85 0D        	sta	<R3
   616 00:01A9: A5 0B        	lda	<R2+2
   617 00:01AB: 65 07        	adc	<R1+2
   618 00:01AD: 85 0F        	sta	<R3+2
   619 00:01AF: 18           	clc
   620 00:01B0: A5 0D        	lda	<R3
   621 00:01B2: 65 01        	adc	<R0
   622 00:01B4: 85 05        	sta	<R1
   623 00:01B6: A5 0F        	lda	<R3+2
   624 00:01B8: 65 03        	adc	<R0+2
   625 00:01BA: 85 07        	sta	<R1+2
   626 00:01BC: 18           	clc
   627 00:01BD: A9 00 00     	lda	#$0
   628 00:01C0: 65 05        	adc	<R1
   629 00:01C2: 85 01        	sta	<R0
   630 00:01C4: A9 B0 00     	lda	#$b0
   631 00:01C7: 65 07        	adc	<R1+2
   632 00:01C9: 85 03        	sta	<R0+2
   633 00:01CB: E2 20        	sep	#$20
   634                        	longa	off
   635 00:01CD: A5 2B        	lda	<L12+color_0
   636 00:01CF: 87 01        	sta	[<R0]
   637 00:01D1: C2 20        	rep	#$20
   638                        	longa	on
   639                        ;				}
   640                        	.line	72
   641                        ;				else 
   642 00:01D3: 82 00 00     	brl	L10015
   643                        L10014:
   644                        ;				{ 
   645                        	.line	74
   646                        ;					// leave empty (
                    or maybe plot 'text backgr color')
   647                        ;				}
   648                        	.line	76
  Wed Aug 14 2019 13:34                                                Page 13


   649                        L10015:
   650                        ;			} // end "for x"
   651                        	.endblock	77
   652                        	.line	77
   653                        L10011:
   654 00:01D6: E6 15        	inc	<L13+x_1
   655 00:01D8: 38           	sec
   656 00:01D9: A5 15        	lda	<L13+x_1
   657 00:01DB: E9 08 00     	sbc	#<$8
   658 00:01DE: 70 03        	bvs	L28
   659 00:01E0: 49 00 80     	eor	#$8000
   660                        L28:
   661 00:01E3: 30 03        	bmi	L29
   662 00:01E5: 82 46 FF     	brl	L10013
   663                        L29:
   664                        L10012:
   665                        ;		} // end "for y"
   666                        	.line	78
   667                        L10008:
   668 00:01E8: E6 17        	inc	<L13+y_1
   669 00:01EA: 38           	sec
   670 00:01EB: A5 17        	lda	<L13+y_1
   671 00:01ED: E9 08 00     	sbc	#<$8
   672 00:01F0: 70 03        	bvs	L30
   673 00:01F2: 49 00 80     	eor	#$8000
   674                        L30:
   675 00:01F5: 30 03        	bmi	L31
   676 00:01F7: 82 32 FF     	brl	L10010
   677                        L31:
   678                        L10009:
   679                        ;	}
   680                        	.line	79
   681                        ;}
   682                        L10007:
   683                        	.line	80
   684                        L32:
   685 00:01FA: A5 23        	lda	<L12+2
   686 00:01FC: 85 2F        	sta	<L12+2+12
   687 00:01FE: A5 22        	lda	<L12+1
   688 00:0200: 85 2E        	sta	<L12+1+12
   689 00:0202: 2B           	pld
   690 00:0203: 3B           	tsc
   691 00:0204: 18           	clc
   692 00:0205: 69 2D 00     	adc	#L12+12
   693 00:0208: 1B           	tcs
   694 00:0209: 6B           	rtl
   695                        	.endblock	80
   696             00000021   L12	equ	33
   697             00000015   L13	equ	21
   698                        	ends
   699                        	efunc
   700                        	.endfunc	80,21,33
   701                        	.line	80
   702                        ;
   703                        ;
   704                        ;void k_create_text_window(PRECT prect,TITLE title
                    ,PHANDLE phandle)
   705                        ;{
  Wed Aug 14 2019 13:34                                                Page 14


   706                        	.line	83
   707                        	.line	84
   708                        	code
   709                        	xdef	~~k_create_text_window
   710                        	func
   711                        	.function	84
   712                        ~~k_create_text_window:
   713                        	longa	on
   714                        	longi	on
   715 00:020A: 3B           	tsc
   716 00:020B: 38           	sec
   717 00:020C: E9 0A 00     	sbc	#L33
   718 00:020F: 1B           	tcs
   719 00:0210: 0B           	phd
   720 00:0211: 5B           	tcd
   721             00000004   prect_0	set	4
   722             00000008   title_0	set	8
   723             0000000C   phandle_0	set	12
   724                        	.block	84
   725                        ;	int index = -1;
   726                        ;	Window far *pwin = NULL;
   727                        ;
   728                        ;	//k_put_char(0,1,'a',5,0);
   729                        ;	
   730                        ;	index = _k_window_index++;
   731             00000000   index_1	set	0
   732             00000002   pwin_1	set	2
   733                        	.sym	index,0,5,1,16
   734                        	.sym	pwin,2,138,1,32,8
   735                        	.sym	prect,4,138,6,32,7
   736                        	.sym	title,8,142,6,32
   737                        	.sym	phandle,12,133,6,32
   738 00:0212: A9 FF FF     	lda	#$ffff
   739 00:0215: 85 05        	sta	<L34+index_1
   740 00:0217: 64 07        	stz	<L34+pwin_1
   741 00:0219: 64 09        	stz	<L34+pwin_1+2
   742                        	.line	90
   743 00:021B: AF xx xx xx  	lda	>~~_k_window_index
   744 00:021F: 85 05        	sta	<L34+index_1
   745 00:0221: AF xx xx xx  	lda	>~~_k_window_index
   746 00:0225: 1A           	ina
   747 00:0226: 8F xx xx xx  	sta	>~~_k_window_index
   748                        ;	
   749                        ;	//k_put_char(0,1,'b',5,0);
   750                        ;	
   751                        ;	pwin = &_k_window_list[index];
   752                        	.line	94
   753 00:022A: A0 00 00     	ldy	#$0
   754 00:022D: A5 05        	lda	<L34+index_1
   755 00:022F: 10 01        	bpl	L36
   756 00:0231: 88           	dey
   757                        L36:
   758 00:0232: 85 01        	sta	<R0
   759 00:0234: 84 03        	sty	<R0+2
   760 00:0236: F4 00 00     	pea	#^$14
   761 00:0239: F4 14 00     	pea	#<$14
   762 00:023C: D4 03        	pei	<R0+2
   763 00:023E: D4 01        	pei	<R0
  Wed Aug 14 2019 13:34                                                Page 15


   764                        	xref	~~~lmul
   765 00:0240: 22 xx xx xx  	jsl	~~~lmul
   766 00:0244: 85 01        	sta	<R0
   767 00:0246: 86 03        	stx	<R0+2
   768 00:0248: 18           	clc
   769 00:0249: A9 xx xx     	lda	#<~~_k_window_list
   770 00:024C: 65 01        	adc	<R0
   771 00:024E: 85 07        	sta	<L34+pwin_1
   772 00:0250: A9 xx xx     	lda	#^~~_k_window_list
   773 00:0253: 65 03        	adc	<R0+2
   774 00:0255: 85 09        	sta	<L34+pwin_1+2
   775                        ;	
   776                        ;	pwin->win_x = prect->x;
   777                        	.line	96
   778 00:0257: A7 0E        	lda	[<L33+prect_0]
   779 00:0259: A0 02 00     	ldy	#$2
   780 00:025C: 97 07        	sta	[<L34+pwin_1],Y
   781                        ;	pwin->win_y = prect->y;
   782                        	.line	97
   783 00:025E: A0 02 00     	ldy	#$2
   784 00:0261: B7 0E        	lda	[<L33+prect_0],Y
   785 00:0263: A0 04 00     	ldy	#$4
   786 00:0266: 97 07        	sta	[<L34+pwin_1],Y
   787                        ;	pwin->win_width = prect->width;
   788                        	.line	98
   789 00:0268: A0 04 00     	ldy	#$4
   790 00:026B: B7 0E        	lda	[<L33+prect_0],Y
   791 00:026D: A0 06 00     	ldy	#$6
   792 00:0270: 97 07        	sta	[<L34+pwin_1],Y
   793                        ;	pwin->win_height = prect->height;
   794                        	.line	99
   795 00:0272: A0 06 00     	ldy	#$6
   796 00:0275: B7 0E        	lda	[<L33+prect_0],Y
   797 00:0277: A0 08 00     	ldy	#$8
   798 00:027A: 97 07        	sta	[<L34+pwin_1],Y
   799                        ;
   800                        ;	//k_put_char(0,1,'c',5,0);
   801                        ;	
   802                        ;	strcpy(pwin->win_title,title);
   803                        	.line	103
   804 00:027C: D4 14        	pei	<L33+title_0+2
   805 00:027E: D4 12        	pei	<L33+title_0
   806 00:0280: 18           	clc
   807 00:0281: A9 0A 00     	lda	#$a
   808 00:0284: 65 07        	adc	<L34+pwin_1
   809 00:0286: 85 01        	sta	<R0
   810 00:0288: A9 00 00     	lda	#$0
   811 00:028B: 65 09        	adc	<L34+pwin_1+2
   812 00:028D: 85 03        	sta	<R0+2
   813 00:028F: D4 03        	pei	<R0+2
   814 00:0291: D4 01        	pei	<R0
   815 00:0293: 22 xx xx xx  	jsl	~~strcpy
   816                        ;	
   817                        ;	//k_put_char(0,1,'d',5,0);
   818                        ;	
   819                        ;	k_window_draw(pwin->win_x,pwin->win_y,pwin->win_
                    width,pwin->win_height,pwin->win_title);
   820                        	.line	107
  Wed Aug 14 2019 13:34                                                Page 16


   821 00:0297: 18           	clc
   822 00:0298: A9 0A 00     	lda	#$a
   823 00:029B: 65 07        	adc	<L34+pwin_1
   824 00:029D: 85 01        	sta	<R0
   825 00:029F: A9 00 00     	lda	#$0
   826 00:02A2: 65 09        	adc	<L34+pwin_1+2
   827 00:02A4: 85 03        	sta	<R0+2
   828 00:02A6: D4 03        	pei	<R0+2
   829 00:02A8: D4 01        	pei	<R0
   830 00:02AA: A0 08 00     	ldy	#$8
   831 00:02AD: B7 07        	lda	[<L34+pwin_1],Y
   832 00:02AF: 48           	pha
   833 00:02B0: A0 06 00     	ldy	#$6
   834 00:02B3: B7 07        	lda	[<L34+pwin_1],Y
   835 00:02B5: 48           	pha
   836 00:02B6: A0 04 00     	ldy	#$4
   837 00:02B9: B7 07        	lda	[<L34+pwin_1],Y
   838 00:02BB: 48           	pha
   839 00:02BC: A0 02 00     	ldy	#$2
   840 00:02BF: B7 07        	lda	[<L34+pwin_1],Y
   841 00:02C1: 48           	pha
   842 00:02C2: 22 xx xx xx  	jsl	~~k_window_draw
   843                        ;	
   844                        ;	//k_put_char(0,1,'e',5,0);
   845                        ;	
   846                        ;	*phandle = index;
   847                        	.line	111
   848 00:02C6: A5 05        	lda	<L34+index_1
   849 00:02C8: 87 16        	sta	[<L33+phandle_0]
   850                        ;	
   851                        ;	return;
   852                        	.line	113
   853                        L37:
   854 00:02CA: A5 0C        	lda	<L33+2
   855 00:02CC: 85 18        	sta	<L33+2+12
   856 00:02CE: A5 0B        	lda	<L33+1
   857 00:02D0: 85 17        	sta	<L33+1+12
   858 00:02D2: 2B           	pld
   859 00:02D3: 3B           	tsc
   860 00:02D4: 18           	clc
   861 00:02D5: 69 16 00     	adc	#L33+12
   862 00:02D8: 1B           	tcs
   863 00:02D9: 6B           	rtl
   864                        ;}
   865                        	.line	114
   866                        	.endblock	114
   867             0000000A   L33	equ	10
   868             00000005   L34	equ	5
   869                        	ends
   870                        	efunc
   871                        	.endfunc	114,5,10
   872                        	.line	114
   873                        ;
   874                        ;
   875                        ;int k_is_menu_hit(PMENU pmenu, int cx,int cy)
   876                        ;{
   877                        	.line	117
   878                        	.line	118
  Wed Aug 14 2019 13:34                                                Page 17


   879                        	code
   880                        	xdef	~~k_is_menu_hit
   881                        	func
   882                        	.function	118
   883                        ~~k_is_menu_hit:
   884                        	longa	on
   885                        	longi	on
   886 00:02DA: 3B           	tsc
   887 00:02DB: 38           	sec
   888 00:02DC: E9 14 00     	sbc	#L38
   889 00:02DF: 1B           	tcs
   890 00:02E0: 0B           	phd
   891 00:02E1: 5B           	tcd
   892             00000004   pmenu_0	set	4
   893             00000008   cx_0	set	8
   894             0000000A   cy_0	set	10
   895                        	.block	118
   896                        ;	int i = 0;
   897                        ;	char far* caption;
   898                        ;	int index = -1;
   899                        ;	
   900                        ;	if(pmenu!=NULL)
   901             00000000   i_1	set	0
   902             00000002   caption_1	set	2
   903             00000006   index_1	set	6
   904                        	.sym	i,0,5,1,16
   905                        	.sym	caption,2,142,1,32
   906                        	.sym	index,6,5,1,16
   907                        	.sym	pmenu,4,138,6,32,12
   908                        	.sym	cx,8,5,6,16
   909                        	.sym	cy,10,5,6,16
   910 00:02E2: 64 0D        	stz	<L39+i_1
   911 00:02E4: A9 FF FF     	lda	#$ffff
   912 00:02E7: 85 13        	sta	<L39+index_1
   913                        	.line	123
   914                        ;	{
   915 00:02E9: A5 18        	lda	<L38+pmenu_0
   916 00:02EB: 05 1A        	ora	<L38+pmenu_0+2
   917 00:02ED: D0 03        	bne	L41
   918 00:02EF: 82 B8 00     	brl	L10016
   919                        L41:
   920                        	.line	124
   921                        ;		caption = pmenu->subMenus[i];
   922                        	.line	125
   923 00:02F2: A0 00 00     	ldy	#$0
   924 00:02F5: A5 0D        	lda	<L39+i_1
   925 00:02F7: 10 01        	bpl	L42
   926 00:02F9: 88           	dey
   927                        L42:
   928 00:02FA: 85 05        	sta	<R1
   929 00:02FC: 84 07        	sty	<R1+2
   930 00:02FE: D4 07        	pei	<R1+2
   931 00:0300: D4 05        	pei	<R1
   932 00:0302: A9 02 00     	lda	#$2
   933                        	xref	~~~lasl
   934 00:0305: 22 xx xx xx  	jsl	~~~lasl
   935 00:0309: 85 01        	sta	<R0
   936 00:030B: 86 03        	stx	<R0+2
  Wed Aug 14 2019 13:34                                                Page 18


   937 00:030D: 18           	clc
   938 00:030E: A0 11 00     	ldy	#$11
   939 00:0311: B7 18        	lda	[<L38+pmenu_0],Y
   940 00:0313: 65 01        	adc	<R0
   941 00:0315: 85 09        	sta	<R2
   942 00:0317: A0 13 00     	ldy	#$13
   943 00:031A: B7 18        	lda	[<L38+pmenu_0],Y
   944 00:031C: 65 03        	adc	<R0+2
   945 00:031E: 85 0B        	sta	<R2+2
   946 00:0320: A7 09        	lda	[<R2]
   947 00:0322: 85 0F        	sta	<L39+caption_1
   948 00:0324: A0 02 00     	ldy	#$2
   949 00:0327: B7 09        	lda	[<R2],Y
   950 00:0329: 85 11        	sta	<L39+caption_1+2
   951                        ;		while(caption!=NULL)
   952                        	.line	126
   953                        L10017:
   954 00:032B: A5 0F        	lda	<L39+caption_1
   955 00:032D: 05 11        	ora	<L39+caption_1+2
   956 00:032F: D0 03        	bne	L43
   957 00:0331: 82 76 00     	brl	L10018
   958                        L43:
   959                        ;		{
   960                        	.line	127
   961                        ;			if((cx >= pmenu->cx) && (pmenu->
                    cx + pmenu->width < cx))
   962                        	.line	128
   963                        ;			{
   964 00:0334: 38           	sec
   965 00:0335: A5 1C        	lda	<L38+cx_0
   966 00:0337: E7 18        	sbc	[<L38+pmenu_0]
   967 00:0339: 70 03        	bvs	L44
   968 00:033B: 49 00 80     	eor	#$8000
   969                        L44:
   970 00:033E: 30 03        	bmi	L45
   971 00:0340: 82 19 00     	brl	L10019
   972                        L45:
   973 00:0343: 18           	clc
   974 00:0344: A7 18        	lda	[<L38+pmenu_0]
   975 00:0346: A0 04 00     	ldy	#$4
   976 00:0349: 77 18        	adc	[<L38+pmenu_0],Y
   977 00:034B: 85 01        	sta	<R0
   978 00:034D: 38           	sec
   979 00:034E: A5 01        	lda	<R0
   980 00:0350: E5 1C        	sbc	<L38+cx_0
   981 00:0352: 70 03        	bvs	L46
   982 00:0354: 49 00 80     	eor	#$8000
   983                        L46:
   984 00:0357: 10 03        	bpl	L47
   985 00:0359: 82 00 00     	brl	L10019
   986                        L47:
   987                        	.line	129
   988                        ;				
   989                        ;			}			
   990                        	.line	131
   991                        ;			if(index > -1)
   992                        L10019:
   993                        	.line	132
  Wed Aug 14 2019 13:34                                                Page 19


   994                        ;				break;
   995 00:035C: 38           	sec
   996 00:035D: A9 FF FF     	lda	#$ffff
   997 00:0360: E5 13        	sbc	<L39+index_1
   998 00:0362: 70 03        	bvs	L48
   999 00:0364: 49 00 80     	eor	#$8000
  1000                        L48:
  1001 00:0367: 30 03        	bmi	L49
  1002 00:0369: 82 3E 00     	brl	L10018
  1003                        L49:
  1004                        ;			
  1005                        ;			i++;
  1006                        	.line	135
  1007 00:036C: E6 0D        	inc	<L39+i_1
  1008                        ;			caption = pmenu->subMenus[i];
  1009                        	.line	136
  1010 00:036E: A0 00 00     	ldy	#$0
  1011 00:0371: A5 0D        	lda	<L39+i_1
  1012 00:0373: 10 01        	bpl	L50
  1013 00:0375: 88           	dey
  1014                        L50:
  1015 00:0376: 85 05        	sta	<R1
  1016 00:0378: 84 07        	sty	<R1+2
  1017 00:037A: D4 07        	pei	<R1+2
  1018 00:037C: D4 05        	pei	<R1
  1019 00:037E: A9 02 00     	lda	#$2
  1020                        	xref	~~~lasl
  1021 00:0381: 22 xx xx xx  	jsl	~~~lasl
  1022 00:0385: 85 01        	sta	<R0
  1023 00:0387: 86 03        	stx	<R0+2
  1024 00:0389: 18           	clc
  1025 00:038A: A0 11 00     	ldy	#$11
  1026 00:038D: B7 18        	lda	[<L38+pmenu_0],Y
  1027 00:038F: 65 01        	adc	<R0
  1028 00:0391: 85 09        	sta	<R2
  1029 00:0393: A0 13 00     	ldy	#$13
  1030 00:0396: B7 18        	lda	[<L38+pmenu_0],Y
  1031 00:0398: 65 03        	adc	<R0+2
  1032 00:039A: 85 0B        	sta	<R2+2
  1033 00:039C: A7 09        	lda	[<R2]
  1034 00:039E: 85 0F        	sta	<L39+caption_1
  1035 00:03A0: A0 02 00     	ldy	#$2
  1036 00:03A3: B7 09        	lda	[<R2],Y
  1037 00:03A5: 85 11        	sta	<L39+caption_1+2
  1038                        ;		}
  1039                        	.line	137
  1040 00:03A7: 82 81 FF     	brl	L10017
  1041                        L10018:
  1042                        ;	}
  1043                        	.line	138
  1044                        ;
  1045                        ;	return index;
  1046                        L10016:
  1047                        	.line	140
  1048 00:03AA: A5 13        	lda	<L39+index_1
  1049                        L51:
  1050 00:03AC: A8           	tay
  1051 00:03AD: A5 16        	lda	<L38+2
  Wed Aug 14 2019 13:34                                                Page 20


  1052 00:03AF: 85 1E        	sta	<L38+2+8
  1053 00:03B1: A5 15        	lda	<L38+1
  1054 00:03B3: 85 1D        	sta	<L38+1+8
  1055 00:03B5: 2B           	pld
  1056 00:03B6: 3B           	tsc
  1057 00:03B7: 18           	clc
  1058 00:03B8: 69 1C 00     	adc	#L38+8
  1059 00:03BB: 1B           	tcs
  1060 00:03BC: 98           	tya
  1061 00:03BD: 6B           	rtl
  1062                        ;}
  1063                        	.line	141
  1064                        	.endblock	141
  1065             00000014   L38	equ	20
  1066             0000000D   L39	equ	13
  1067                        	ends
  1068                        	efunc
  1069                        	.endfunc	141,13,20
  1070                        	.line	141
  1071                        ;
  1072                        ;PMENU k_create_menu(int cx,int cy,int width,char 
                    far *title,char far **captions,int color, int bgcolor)
  1073                        ;{
  1074                        	.line	143
  1075                        	.line	144
  1076                        	code
  1077                        	xdef	~~k_create_menu
  1078                        	func
  1079                        	.function	144
  1080                        ~~k_create_menu:
  1081                        	longa	on
  1082                        	longi	on
  1083 00:03BE: 3B           	tsc
  1084 00:03BF: 38           	sec
  1085 00:03C0: E9 24 00     	sbc	#L52
  1086 00:03C3: 1B           	tcs
  1087 00:03C4: 0B           	phd
  1088 00:03C5: 5B           	tcd
  1089             00000004   cx_0	set	4
  1090             00000006   cy_0	set	6
  1091             00000008   width_0	set	8
  1092             0000000A   title_0	set	10
  1093             0000000E   captions_0	set	14
  1094             00000012   color_0	set	18
  1095             00000014   bgcolor_0	set	20
  1096                        	.block	144
  1097                        ;	FONTMETRIC metric;
  1098                        ;	
  1099                        ;	int i = 0;
  1100                        ;	
  1101                        ;	int borderTitle = 10;
  1102                        ;	int borderWidth = 3;
  1103                        ;
  1104                        ;	int titleOffsetX = cx+2;
  1105                        ;	int titleOffsetY = cy+2;
  1106                        ;	int titleScaler = 0;
  1107                        ;	
  1108                        ;	int clientOffsetX = cx+borderWidth+2;
  Wed Aug 14 2019 13:34                                                Page 21


  1109                        ;	int clientOffsetY = cy+borderTitle+1;
  1110                        ;	
  1111                        ;	int endX = width + cx - borderWidth;
  1112                        ;	
  1113                        ;	int height = 0;
  1114                        ;	
  1115                        ;	PMENU menu = (PMENU)malloc(sizeof(MENU));
  1116                        ;	
  1117                        ;
  1118                        ;	k_get_font_metrics(&metric);
  1119             00000000   metric_1	set	0
  1120             00000004   i_1	set	4
  1121             00000006   borderTitle_1	set	6
  1122             00000008   borderWidth_1	set	8
  1123             0000000A   titleOffsetX_1	set	10
  1124             0000000C   titleOffsetY_1	set	12
  1125             0000000E   titleScaler_1	set	14
  1126             00000010   clientOffsetX_1	set	16
  1127             00000012   clientOffsetY_1	set	18
  1128             00000014   endX_1	set	20
  1129             00000016   height_1	set	22
  1130             00000018   menu_1	set	24
  1131                        	.sym	metric,0,10,1,32,9
  1132                        	.sym	i,4,5,1,16
  1133                        	.sym	borderTitle,6,5,1,16
  1134                        	.sym	borderWidth,8,5,1,16
  1135                        	.sym	titleOffsetX,10,5,1,16
  1136                        	.sym	titleOffsetY,12,5,1,16
  1137                        	.sym	titleScaler,14,5,1,16
  1138                        	.sym	clientOffsetX,16,5,1,16
  1139                        	.sym	clientOffsetY,18,5,1,16
  1140                        	.sym	endX,20,5,1,16
  1141                        	.sym	height,22,5,1,16
  1142                        	.sym	menu,24,138,1,32,12
  1143                        	.sym	cx,4,5,6,16
  1144                        	.sym	cy,6,5,6,16
  1145                        	.sym	width,8,5,6,16
  1146                        	.sym	title,10,142,6,32
  1147                        	.sym	captions,14,1166,6,32
  1148                        	.sym	color,18,5,6,16
  1149                        	.sym	bgcolor,20,5,6,16
  1150 00:03C6: 64 0D        	stz	<L53+i_1
  1151 00:03C8: A9 0A 00     	lda	#$a
  1152 00:03CB: 85 0F        	sta	<L53+borderTitle_1
  1153 00:03CD: A9 03 00     	lda	#$3
  1154 00:03D0: 85 11        	sta	<L53+borderWidth_1
  1155 00:03D2: 18           	clc
  1156 00:03D3: A9 02 00     	lda	#$2
  1157 00:03D6: 65 28        	adc	<L52+cx_0
  1158 00:03D8: 85 13        	sta	<L53+titleOffsetX_1
  1159 00:03DA: 18           	clc
  1160 00:03DB: A9 02 00     	lda	#$2
  1161 00:03DE: 65 2A        	adc	<L52+cy_0
  1162 00:03E0: 85 15        	sta	<L53+titleOffsetY_1
  1163 00:03E2: 64 17        	stz	<L53+titleScaler_1
  1164 00:03E4: 18           	clc
  1165 00:03E5: A5 28        	lda	<L52+cx_0
  1166 00:03E7: 65 11        	adc	<L53+borderWidth_1
  Wed Aug 14 2019 13:34                                                Page 22


  1167 00:03E9: 85 01        	sta	<R0
  1168 00:03EB: 18           	clc
  1169 00:03EC: A9 02 00     	lda	#$2
  1170 00:03EF: 65 01        	adc	<R0
  1171 00:03F1: 85 19        	sta	<L53+clientOffsetX_1
  1172 00:03F3: 18           	clc
  1173 00:03F4: A5 2A        	lda	<L52+cy_0
  1174 00:03F6: 65 0F        	adc	<L53+borderTitle_1
  1175 00:03F8: 85 01        	sta	<R0
  1176 00:03FA: A5 01        	lda	<R0
  1177 00:03FC: 1A           	ina
  1178 00:03FD: 85 1B        	sta	<L53+clientOffsetY_1
  1179 00:03FF: 18           	clc
  1180 00:0400: A5 2C        	lda	<L52+width_0
  1181 00:0402: 65 28        	adc	<L52+cx_0
  1182 00:0404: 85 01        	sta	<R0
  1183 00:0406: 38           	sec
  1184 00:0407: A5 01        	lda	<R0
  1185 00:0409: E5 11        	sbc	<L53+borderWidth_1
  1186 00:040B: 85 1D        	sta	<L53+endX_1
  1187 00:040D: 64 1F        	stz	<L53+height_1
  1188 00:040F: F4 15 00     	pea	#<$15
  1189 00:0412: 22 xx xx xx  	jsl	~~malloc
  1190 00:0416: 85 21        	sta	<L53+menu_1
  1191 00:0418: 86 23        	stx	<L53+menu_1+2
  1192                        	.line	166
  1193 00:041A: F4 00 00     	pea	#0
  1194 00:041D: 18           	clc
  1195 00:041E: 7B           	tdc
  1196 00:041F: 69 09 00     	adc	#<L53+metric_1
  1197 00:0422: 48           	pha
  1198 00:0423: 22 xx xx xx  	jsl	~~k_get_font_metrics
  1199                        ;	
  1200                        ;	height = metric.height + (int)(metric.width/4);
  1201                        	.line	168
  1202 00:0427: A5 09        	lda	<L53+metric_1
  1203 00:0429: A2 04 00     	ldx	#<$4
  1204                        	xref	~~~div
  1205 00:042C: 22 xx xx xx  	jsl	~~~div
  1206 00:0430: 85 01        	sta	<R0
  1207 00:0432: 18           	clc
  1208 00:0433: A5 01        	lda	<R0
  1209 00:0435: 65 0B        	adc	<L53+metric_1+2
  1210 00:0437: 85 1F        	sta	<L53+height_1
  1211                        ;
  1212                        ;	menu->cx = cx;
  1213                        	.line	170
  1214 00:0439: A5 28        	lda	<L52+cx_0
  1215 00:043B: 87 21        	sta	[<L53+menu_1]
  1216                        ;	menu->cy = cy;
  1217                        	.line	171
  1218 00:043D: A5 2A        	lda	<L52+cy_0
  1219 00:043F: A0 02 00     	ldy	#$2
  1220 00:0442: 97 21        	sta	[<L53+menu_1],Y
  1221                        ;	menu->height = height;
  1222                        	.line	172
  1223 00:0444: A5 1F        	lda	<L53+height_1
  1224 00:0446: A0 06 00     	ldy	#$6
  Wed Aug 14 2019 13:34                                                Page 23


  1225 00:0449: 97 21        	sta	[<L53+menu_1],Y
  1226                        ;	menu->width = width;
  1227                        	.line	173
  1228 00:044B: A5 2C        	lda	<L52+width_0
  1229 00:044D: A0 04 00     	ldy	#$4
  1230 00:0450: 97 21        	sta	[<L53+menu_1],Y
  1231                        ;	menu->fcolor = color;
  1232                        	.line	174
  1233 00:0452: E2 20        	sep	#$20
  1234                        	longa	off
  1235 00:0454: A5 36        	lda	<L52+color_0
  1236 00:0456: A0 08 00     	ldy	#$8
  1237 00:0459: 97 21        	sta	[<L53+menu_1],Y
  1238 00:045B: C2 20        	rep	#$20
  1239                        	longa	on
  1240                        ;	menu->bcolor = bgcolor;
  1241                        	.line	175
  1242 00:045D: E2 20        	sep	#$20
  1243                        	longa	off
  1244 00:045F: A5 38        	lda	<L52+bgcolor_0
  1245 00:0461: A0 09 00     	ldy	#$9
  1246 00:0464: 97 21        	sta	[<L53+menu_1],Y
  1247 00:0466: C2 20        	rep	#$20
  1248                        	longa	on
  1249                        ;	menu->subMenus = (void far**)captions;
  1250                        	.line	176
  1251 00:0468: A5 32        	lda	<L52+captions_0
  1252 00:046A: A0 11 00     	ldy	#$11
  1253 00:046D: 97 21        	sta	[<L53+menu_1],Y
  1254 00:046F: A5 34        	lda	<L52+captions_0+2
  1255 00:0471: A0 13 00     	ldy	#$13
  1256 00:0474: 97 21        	sta	[<L53+menu_1],Y
  1257                        ;
  1258                        ;	k_vdma_fill_rect(cx,cy,width,height,color);	
  1259                        	.line	178
  1260 00:0476: D4 36        	pei	<L52+color_0
  1261 00:0478: D4 1F        	pei	<L53+height_1
  1262 00:047A: D4 2C        	pei	<L52+width_0
  1263 00:047C: A0 00 00     	ldy	#$0
  1264 00:047F: A5 2A        	lda	<L52+cy_0
  1265 00:0481: 10 01        	bpl	L55
  1266 00:0483: 88           	dey
  1267                        L55:
  1268 00:0484: 85 01        	sta	<R0
  1269 00:0486: 84 03        	sty	<R0+2
  1270 00:0488: D4 03        	pei	<R0+2
  1271 00:048A: D4 01        	pei	<R0
  1272 00:048C: A0 00 00     	ldy	#$0
  1273 00:048F: A5 28        	lda	<L52+cx_0
  1274 00:0491: 10 01        	bpl	L56
  1275 00:0493: 88           	dey
  1276                        L56:
  1277 00:0494: 85 05        	sta	<R1
  1278 00:0496: 84 07        	sty	<R1+2
  1279 00:0498: D4 07        	pei	<R1+2
  1280 00:049A: D4 05        	pei	<R1
  1281 00:049C: 22 xx xx xx  	jsl	~~k_vdma_fill_rect
  1282                        ;	//k_delay(15);
  Wed Aug 14 2019 13:34                                                Page 24


  1283                        ;	
  1284                        ;	title = strupr(title);
  1285                        	.line	181
  1286 00:04A0: D4 30        	pei	<L52+title_0+2
  1287 00:04A2: D4 2E        	pei	<L52+title_0
  1288 00:04A4: 22 xx xx xx  	jsl	~~strupr
  1289 00:04A8: 85 2E        	sta	<L52+title_0
  1290 00:04AA: 86 30        	stx	<L52+title_0+2
  1291                        ;	
  1292                        ;	//titleOffsetX+=k_put_wingadget_point(WINICON_TI
                    TLE_ACLOSE,titleOffsetX,titleOffsetY,14);	
  1293                        ;	/*
  1294                        ;	titleScaler = (int)(width / metric.width - 4);
  1295                        ;	for(i=0;i<titleScaler;i++)
  1296                        ;	{
  1297                        ;		titleOffsetX+=k_put_wingadget_point(WINI
                    CON_TITLE_LINES,titleOffsetX,titleOffsetY,14);	
  1298                        ;	}*/
  1299                        ;	k_put_wingadget_point(WINICON_TITLE_BACK,endX - 
                    (metric.width*2 + 2),titleOffsetY,14);
  1300                        	.line	190
  1301 00:04AC: F4 0E 00     	pea	#<$e
  1302 00:04AF: D4 15        	pei	<L53+titleOffsetY_1
  1303 00:04B1: A5 09        	lda	<L53+metric_1
  1304 00:04B3: 0A           	asl	A
  1305 00:04B4: 85 01        	sta	<R0
  1306 00:04B6: 18           	clc
  1307 00:04B7: A9 02 00     	lda	#$2
  1308 00:04BA: 65 01        	adc	<R0
  1309 00:04BC: 85 05        	sta	<R1
  1310 00:04BE: 38           	sec
  1311 00:04BF: A5 1D        	lda	<L53+endX_1
  1312 00:04C1: E5 05        	sbc	<R1
  1313 00:04C3: 48           	pha
  1314 00:04C4: F4 04 00     	pea	#<$4
  1315 00:04C7: 22 xx xx xx  	jsl	~~k_put_wingadget_point
  1316                        ;	k_put_wingadget_point(WINICON_TITLE_FRONT,endX -
                     (metric.width),titleOffsetY,14);
  1317                        	.line	191
  1318 00:04CB: F4 0E 00     	pea	#<$e
  1319 00:04CE: D4 15        	pei	<L53+titleOffsetY_1
  1320 00:04D0: 38           	sec
  1321 00:04D1: A5 1D        	lda	<L53+endX_1
  1322 00:04D3: E5 09        	sbc	<L53+metric_1
  1323 00:04D5: 48           	pha
  1324 00:04D6: F4 03 00     	pea	#<$3
  1325 00:04D9: 22 xx xx xx  	jsl	~~k_put_wingadget_point
  1326                        ;
  1327                        ;	k_draw_text_point(title,cx+2+metric.width,titleO
                    ffsetY,0);
  1328                        	.line	193
  1329 00:04DD: F4 00 00     	pea	#<$0
  1330 00:04E0: D4 15        	pei	<L53+titleOffsetY_1
  1331 00:04E2: 18           	clc
  1332 00:04E3: A5 28        	lda	<L52+cx_0
  1333 00:04E5: 65 09        	adc	<L53+metric_1
  1334 00:04E7: 85 01        	sta	<R0
  1335 00:04E9: 18           	clc
  Wed Aug 14 2019 13:34                                                Page 25


  1336 00:04EA: A9 02 00     	lda	#$2
  1337 00:04ED: 65 01        	adc	<R0
  1338 00:04EF: 48           	pha
  1339 00:04F0: D4 30        	pei	<L52+title_0+2
  1340 00:04F2: D4 2E        	pei	<L52+title_0
  1341 00:04F4: 22 xx xx xx  	jsl	~~k_draw_text_point
  1342                        ;	
  1343                        ;	return menu;
  1344                        	.line	195
  1345 00:04F8: A6 23        	ldx	<L53+menu_1+2
  1346 00:04FA: A5 21        	lda	<L53+menu_1
  1347                        L57:
  1348 00:04FC: A8           	tay
  1349 00:04FD: A5 26        	lda	<L52+2
  1350 00:04FF: 85 38        	sta	<L52+2+18
  1351 00:0501: A5 25        	lda	<L52+1
  1352 00:0503: 85 37        	sta	<L52+1+18
  1353 00:0505: 2B           	pld
  1354 00:0506: 3B           	tsc
  1355 00:0507: 18           	clc
  1356 00:0508: 69 36 00     	adc	#L52+18
  1357 00:050B: 1B           	tcs
  1358 00:050C: 98           	tya
  1359 00:050D: 6B           	rtl
  1360                        ;}
  1361                        	.line	196
  1362                        	.endblock	196
  1363             00000024   L52	equ	36
  1364             00000009   L53	equ	9
  1365                        	ends
  1366                        	efunc
  1367                        	.endfunc	196,9,36
  1368                        	.line	196
  1369                        ;
  1370                        ;
  1371                        ;PMENU k_create_context_menu(int cx,int cy,int wid
                    th,int height,char far **captions,int color, int bgcolor)
  1372                        ;{
  1373                        	.line	199
  1374                        	.line	200
  1375                        	code
  1376                        	xdef	~~k_create_context_menu
  1377                        	func
  1378                        	.function	200
  1379                        ~~k_create_context_menu:
  1380                        	longa	on
  1381                        	longi	on
  1382 00:050E: 3B           	tsc
  1383 00:050F: 38           	sec
  1384 00:0510: E9 2A 00     	sbc	#L58
  1385 00:0513: 1B           	tcs
  1386 00:0514: 0B           	phd
  1387 00:0515: 5B           	tcd
  1388             00000004   cx_0	set	4
  1389             00000006   cy_0	set	6
  1390             00000008   width_0	set	8
  1391             0000000A   height_0	set	10
  1392             0000000C   captions_0	set	12
  Wed Aug 14 2019 13:34                                                Page 26


  1393             00000010   color_0	set	16
  1394             00000012   bgcolor_0	set	18
  1395                        	.block	200
  1396                        ;	FONTMETRIC metric;
  1397                        ;	
  1398                        ;	int i = 0;
  1399                        ;	
  1400                        ;	char far *caption = NULL;
  1401                        ;	
  1402                        ;	int borderTitle = 10;
  1403                        ;	int borderWidth = 3;
  1404                        ;
  1405                        ;	int titleOffsetX = cx+2;
  1406                        ;	int titleOffsetY = cy+2;
  1407                        ;	int titleScaler = 0;
  1408                        ;	
  1409                        ;	int clientOffsetX = cx+borderWidth+2;
  1410                        ;	int clientOffsetY = cy+borderTitle+1;
  1411                        ;	
  1412                        ;	int endX = width + cx - borderWidth;
  1413                        ;		
  1414                        ;	PMENU menu = (PMENU)malloc(sizeof(MENU));
  1415                        ;	
  1416                        ;
  1417                        ;	k_get_font_metrics(&metric);
  1418             00000000   metric_1	set	0
  1419             00000004   i_1	set	4
  1420             00000006   caption_1	set	6
  1421             0000000A   borderTitle_1	set	10
  1422             0000000C   borderWidth_1	set	12
  1423             0000000E   titleOffsetX_1	set	14
  1424             00000010   titleOffsetY_1	set	16
  1425             00000012   titleScaler_1	set	18
  1426             00000014   clientOffsetX_1	set	20
  1427             00000016   clientOffsetY_1	set	22
  1428             00000018   endX_1	set	24
  1429             0000001A   menu_1	set	26
  1430                        	.sym	metric,0,10,1,32,9
  1431                        	.sym	i,4,5,1,16
  1432                        	.sym	caption,6,142,1,32
  1433                        	.sym	borderTitle,10,5,1,16
  1434                        	.sym	borderWidth,12,5,1,16
  1435                        	.sym	titleOffsetX,14,5,1,16
  1436                        	.sym	titleOffsetY,16,5,1,16
  1437                        	.sym	titleScaler,18,5,1,16
  1438                        	.sym	clientOffsetX,20,5,1,16
  1439                        	.sym	clientOffsetY,22,5,1,16
  1440                        	.sym	endX,24,5,1,16
  1441                        	.sym	menu,26,138,1,32,12
  1442                        	.sym	cx,4,5,6,16
  1443                        	.sym	cy,6,5,6,16
  1444                        	.sym	width,8,5,6,16
  1445                        	.sym	height,10,5,6,16
  1446                        	.sym	captions,12,1166,6,32
  1447                        	.sym	color,16,5,6,16
  1448                        	.sym	bgcolor,18,5,6,16
  1449 00:0516: 64 11        	stz	<L59+i_1
  1450 00:0518: 64 13        	stz	<L59+caption_1
  Wed Aug 14 2019 13:34                                                Page 27


  1451 00:051A: 64 15        	stz	<L59+caption_1+2
  1452 00:051C: A9 0A 00     	lda	#$a
  1453 00:051F: 85 17        	sta	<L59+borderTitle_1
  1454 00:0521: A9 03 00     	lda	#$3
  1455 00:0524: 85 19        	sta	<L59+borderWidth_1
  1456 00:0526: 18           	clc
  1457 00:0527: A9 02 00     	lda	#$2
  1458 00:052A: 65 2E        	adc	<L58+cx_0
  1459 00:052C: 85 1B        	sta	<L59+titleOffsetX_1
  1460 00:052E: 18           	clc
  1461 00:052F: A9 02 00     	lda	#$2
  1462 00:0532: 65 30        	adc	<L58+cy_0
  1463 00:0534: 85 1D        	sta	<L59+titleOffsetY_1
  1464 00:0536: 64 1F        	stz	<L59+titleScaler_1
  1465 00:0538: 18           	clc
  1466 00:0539: A5 2E        	lda	<L58+cx_0
  1467 00:053B: 65 19        	adc	<L59+borderWidth_1
  1468 00:053D: 85 01        	sta	<R0
  1469 00:053F: 18           	clc
  1470 00:0540: A9 02 00     	lda	#$2
  1471 00:0543: 65 01        	adc	<R0
  1472 00:0545: 85 21        	sta	<L59+clientOffsetX_1
  1473 00:0547: 18           	clc
  1474 00:0548: A5 30        	lda	<L58+cy_0
  1475 00:054A: 65 17        	adc	<L59+borderTitle_1
  1476 00:054C: 85 01        	sta	<R0
  1477 00:054E: A5 01        	lda	<R0
  1478 00:0550: 1A           	ina
  1479 00:0551: 85 23        	sta	<L59+clientOffsetY_1
  1480 00:0553: 18           	clc
  1481 00:0554: A5 32        	lda	<L58+width_0
  1482 00:0556: 65 2E        	adc	<L58+cx_0
  1483 00:0558: 85 01        	sta	<R0
  1484 00:055A: 38           	sec
  1485 00:055B: A5 01        	lda	<R0
  1486 00:055D: E5 19        	sbc	<L59+borderWidth_1
  1487 00:055F: 85 25        	sta	<L59+endX_1
  1488 00:0561: F4 15 00     	pea	#<$15
  1489 00:0564: 22 xx xx xx  	jsl	~~malloc
  1490 00:0568: 85 27        	sta	<L59+menu_1
  1491 00:056A: 86 29        	stx	<L59+menu_1+2
  1492                        	.line	222
  1493 00:056C: F4 00 00     	pea	#0
  1494 00:056F: 18           	clc
  1495 00:0570: 7B           	tdc
  1496 00:0571: 69 0D 00     	adc	#<L59+metric_1
  1497 00:0574: 48           	pha
  1498 00:0575: 22 xx xx xx  	jsl	~~k_get_font_metrics
  1499                        ;	
  1500                        ;	height += metric.height + (int)(metric.width/4);
  1501                        	.line	224
  1502 00:0579: A5 0D        	lda	<L59+metric_1
  1503 00:057B: A2 04 00     	ldx	#<$4
  1504                        	xref	~~~div
  1505 00:057E: 22 xx xx xx  	jsl	~~~div
  1506 00:0582: 85 01        	sta	<R0
  1507 00:0584: 18           	clc
  1508 00:0585: A5 01        	lda	<R0
  Wed Aug 14 2019 13:34                                                Page 28


  1509 00:0587: 65 34        	adc	<L58+height_0
  1510 00:0589: 85 05        	sta	<R1
  1511 00:058B: 18           	clc
  1512 00:058C: A5 05        	lda	<R1
  1513 00:058E: 65 0F        	adc	<L59+metric_1+2
  1514 00:0590: 85 34        	sta	<L58+height_0
  1515                        ;
  1516                        ;	menu->cx = cx;
  1517                        	.line	226
  1518 00:0592: A5 2E        	lda	<L58+cx_0
  1519 00:0594: 87 27        	sta	[<L59+menu_1]
  1520                        ;	menu->cy = cy;
  1521                        	.line	227
  1522 00:0596: A5 30        	lda	<L58+cy_0
  1523 00:0598: A0 02 00     	ldy	#$2
  1524 00:059B: 97 27        	sta	[<L59+menu_1],Y
  1525                        ;	menu->height = height;
  1526                        	.line	228
  1527 00:059D: A5 34        	lda	<L58+height_0
  1528 00:059F: A0 06 00     	ldy	#$6
  1529 00:05A2: 97 27        	sta	[<L59+menu_1],Y
  1530                        ;	menu->width = width;
  1531                        	.line	229
  1532 00:05A4: A5 32        	lda	<L58+width_0
  1533 00:05A6: A0 04 00     	ldy	#$4
  1534 00:05A9: 97 27        	sta	[<L59+menu_1],Y
  1535                        ;
  1536                        ;	k_vdma_fill_rect(cx-1,cy,width+1,height+1,0);
  1537                        	.line	231
  1538 00:05AB: F4 00 00     	pea	#<$0
  1539 00:05AE: A5 34        	lda	<L58+height_0
  1540 00:05B0: 1A           	ina
  1541 00:05B1: 48           	pha
  1542 00:05B2: A5 32        	lda	<L58+width_0
  1543 00:05B4: 1A           	ina
  1544 00:05B5: 48           	pha
  1545 00:05B6: A0 00 00     	ldy	#$0
  1546 00:05B9: A5 30        	lda	<L58+cy_0
  1547 00:05BB: 10 01        	bpl	L61
  1548 00:05BD: 88           	dey
  1549                        L61:
  1550 00:05BE: 85 01        	sta	<R0
  1551 00:05C0: 84 03        	sty	<R0+2
  1552 00:05C2: D4 03        	pei	<R0+2
  1553 00:05C4: D4 01        	pei	<R0
  1554 00:05C6: 18           	clc
  1555 00:05C7: A9 FF FF     	lda	#$ffff
  1556 00:05CA: 65 2E        	adc	<L58+cx_0
  1557 00:05CC: 85 05        	sta	<R1
  1558 00:05CE: A0 00 00     	ldy	#$0
  1559 00:05D1: A5 05        	lda	<R1
  1560 00:05D3: 10 01        	bpl	L62
  1561 00:05D5: 88           	dey
  1562                        L62:
  1563 00:05D6: 85 05        	sta	<R1
  1564 00:05D8: 84 07        	sty	<R1+2
  1565 00:05DA: D4 07        	pei	<R1+2
  1566 00:05DC: D4 05        	pei	<R1
  Wed Aug 14 2019 13:34                                                Page 29


  1567 00:05DE: 22 xx xx xx  	jsl	~~k_vdma_fill_rect
  1568                        ;	k_vdma_fill_rect(cx,cy,width,height,color);	
  1569                        	.line	232
  1570 00:05E2: D4 3A        	pei	<L58+color_0
  1571 00:05E4: D4 34        	pei	<L58+height_0
  1572 00:05E6: D4 32        	pei	<L58+width_0
  1573 00:05E8: A0 00 00     	ldy	#$0
  1574 00:05EB: A5 30        	lda	<L58+cy_0
  1575 00:05ED: 10 01        	bpl	L63
  1576 00:05EF: 88           	dey
  1577                        L63:
  1578 00:05F0: 85 01        	sta	<R0
  1579 00:05F2: 84 03        	sty	<R0+2
  1580 00:05F4: D4 03        	pei	<R0+2
  1581 00:05F6: D4 01        	pei	<R0
  1582 00:05F8: A0 00 00     	ldy	#$0
  1583 00:05FB: A5 2E        	lda	<L58+cx_0
  1584 00:05FD: 10 01        	bpl	L64
  1585 00:05FF: 88           	dey
  1586                        L64:
  1587 00:0600: 85 05        	sta	<R1
  1588 00:0602: 84 07        	sty	<R1+2
  1589 00:0604: D4 07        	pei	<R1+2
  1590 00:0606: D4 05        	pei	<R1
  1591 00:0608: 22 xx xx xx  	jsl	~~k_vdma_fill_rect
  1592                        ;	
  1593                        ;	//k_delay(15);
  1594                        ;	
  1595                        ;	
  1596                        ;
  1597                        ;	//k_put_wingadget_point(WINICON_TITLE_BACK,endX 
                    - (metric.width*2 + 2),titleOffsetY,14);
  1598                        ;	//k_put_wingadget_point(WINICON_TITLE_FRONT,endX
                     - (metric.width),titleOffsetY,14);
  1599                        ;	i = 0;
  1600                        	.line	240
  1601 00:060C: 64 11        	stz	<L59+i_1
  1602                        ;	caption = captions[i];	
  1603                        	.line	241
  1604 00:060E: A0 00 00     	ldy	#$0
  1605 00:0611: A5 11        	lda	<L59+i_1
  1606 00:0613: 10 01        	bpl	L65
  1607 00:0615: 88           	dey
  1608                        L65:
  1609 00:0616: 85 05        	sta	<R1
  1610 00:0618: 84 07        	sty	<R1+2
  1611 00:061A: D4 07        	pei	<R1+2
  1612 00:061C: D4 05        	pei	<R1
  1613 00:061E: A9 02 00     	lda	#$2
  1614                        	xref	~~~lasl
  1615 00:0621: 22 xx xx xx  	jsl	~~~lasl
  1616 00:0625: 85 01        	sta	<R0
  1617 00:0627: 86 03        	stx	<R0+2
  1618 00:0629: 18           	clc
  1619 00:062A: A5 36        	lda	<L58+captions_0
  1620 00:062C: 65 01        	adc	<R0
  1621 00:062E: 85 09        	sta	<R2
  1622 00:0630: A5 38        	lda	<L58+captions_0+2
  Wed Aug 14 2019 13:34                                                Page 30


  1623 00:0632: 65 03        	adc	<R0+2
  1624 00:0634: 85 0B        	sta	<R2+2
  1625 00:0636: A7 09        	lda	[<R2]
  1626 00:0638: 85 13        	sta	<L59+caption_1
  1627 00:063A: A0 02 00     	ldy	#$2
  1628 00:063D: B7 09        	lda	[<R2],Y
  1629 00:063F: 85 15        	sta	<L59+caption_1+2
  1630                        ;	while(caption!=NULL)
  1631                        	.line	242
  1632                        L10020:
  1633 00:0641: A5 13        	lda	<L59+caption_1
  1634 00:0643: 05 15        	ora	<L59+caption_1+2
  1635 00:0645: D0 03        	bne	L66
  1636 00:0647: 82 5B 00     	brl	L10021
  1637                        L66:
  1638                        ;	{
  1639                        	.line	243
  1640                        ;		caption = strupr(caption);
  1641                        	.line	244
  1642 00:064A: D4 15        	pei	<L59+caption_1+2
  1643 00:064C: D4 13        	pei	<L59+caption_1
  1644 00:064E: 22 xx xx xx  	jsl	~~strupr
  1645 00:0652: 85 13        	sta	<L59+caption_1
  1646 00:0654: 86 15        	stx	<L59+caption_1+2
  1647                        ;		k_draw_text_point(caption,titleOffsetX,t
                    itleOffsetY,0);
  1648                        	.line	245
  1649 00:0656: F4 00 00     	pea	#<$0
  1650 00:0659: D4 1D        	pei	<L59+titleOffsetY_1
  1651 00:065B: D4 1B        	pei	<L59+titleOffsetX_1
  1652 00:065D: D4 15        	pei	<L59+caption_1+2
  1653 00:065F: D4 13        	pei	<L59+caption_1
  1654 00:0661: 22 xx xx xx  	jsl	~~k_draw_text_point
  1655                        ;		titleOffsetY+=(FONTH + 2);
  1656                        	.line	246
  1657 00:0665: 18           	clc
  1658 00:0666: A9 0A 00     	lda	#$a
  1659 00:0669: 65 1D        	adc	<L59+titleOffsetY_1
  1660 00:066B: 85 1D        	sta	<L59+titleOffsetY_1
  1661                        ;		i++;		
  1662                        	.line	247
  1663 00:066D: E6 11        	inc	<L59+i_1
  1664                        ;		caption = captions[i];
  1665                        	.line	248
  1666 00:066F: A0 00 00     	ldy	#$0
  1667 00:0672: A5 11        	lda	<L59+i_1
  1668 00:0674: 10 01        	bpl	L67
  1669 00:0676: 88           	dey
  1670                        L67:
  1671 00:0677: 85 05        	sta	<R1
  1672 00:0679: 84 07        	sty	<R1+2
  1673 00:067B: D4 07        	pei	<R1+2
  1674 00:067D: D4 05        	pei	<R1
  1675 00:067F: A9 02 00     	lda	#$2
  1676                        	xref	~~~lasl
  1677 00:0682: 22 xx xx xx  	jsl	~~~lasl
  1678 00:0686: 85 01        	sta	<R0
  1679 00:0688: 86 03        	stx	<R0+2
  Wed Aug 14 2019 13:34                                                Page 31


  1680 00:068A: 18           	clc
  1681 00:068B: A5 36        	lda	<L58+captions_0
  1682 00:068D: 65 01        	adc	<R0
  1683 00:068F: 85 09        	sta	<R2
  1684 00:0691: A5 38        	lda	<L58+captions_0+2
  1685 00:0693: 65 03        	adc	<R0+2
  1686 00:0695: 85 0B        	sta	<R2+2
  1687 00:0697: A7 09        	lda	[<R2]
  1688 00:0699: 85 13        	sta	<L59+caption_1
  1689 00:069B: A0 02 00     	ldy	#$2
  1690 00:069E: B7 09        	lda	[<R2],Y
  1691 00:06A0: 85 15        	sta	<L59+caption_1+2
  1692                        ;	}
  1693                        	.line	249
  1694 00:06A2: 82 9C FF     	brl	L10020
  1695                        L10021:
  1696                        ;	
  1697                        ;	return menu;
  1698                        	.line	251
  1699 00:06A5: A6 29        	ldx	<L59+menu_1+2
  1700 00:06A7: A5 27        	lda	<L59+menu_1
  1701                        L68:
  1702 00:06A9: A8           	tay
  1703 00:06AA: A5 2C        	lda	<L58+2
  1704 00:06AC: 85 3C        	sta	<L58+2+16
  1705 00:06AE: A5 2B        	lda	<L58+1
  1706 00:06B0: 85 3B        	sta	<L58+1+16
  1707 00:06B2: 2B           	pld
  1708 00:06B3: 3B           	tsc
  1709 00:06B4: 18           	clc
  1710 00:06B5: 69 3A 00     	adc	#L58+16
  1711 00:06B8: 1B           	tcs
  1712 00:06B9: 98           	tya
  1713 00:06BA: 6B           	rtl
  1714                        ;	
  1715                        ;}
  1716                        	.line	253
  1717                        	.endblock	253
  1718             0000002A   L58	equ	42
  1719             0000000D   L59	equ	13
  1720                        	ends
  1721                        	efunc
  1722                        	.endfunc	253,13,42
  1723                        	.line	253
  1724                        ;
  1725                        ;/*
  1726                        ;PMENU k_vdraw_ui_menu(int cx,int cy,int width,cha
                    r far *title,int color, int bgcolor)
  1727                        ;{
  1728                        ;	FONTMETRIC metric;
  1729                        ;	
  1730                        ;	int i = 0;
  1731                        ;	
  1732                        ;	int borderTitle = 10;
  1733                        ;	int borderWidth = 3;
  1734                        ;
  1735                        ;	int titleOffsetX = cx+2;
  1736                        ;	int titleOffsetY = cy+2;
  Wed Aug 14 2019 13:34                                                Page 32


  1737                        ;	int titleScaler = 0;
  1738                        ;	
  1739                        ;	int clientOffsetX = cx+borderWidth+2;
  1740                        ;	int clientOffsetY = cy+borderTitle+1;
  1741                        ;	
  1742                        ;	int endX = width + cx - borderWidth;
  1743                        ;	
  1744                        ;	int height = 0;
  1745                        ;	
  1746                        ;	PMENU menu = (PMENU)malloc(sizeof(MENU));
  1747                        ;	
  1748                        ;
  1749                        ;	k_get_font_metrics(&metric);
  1750                        ;	
  1751                        ;	height = metric.height + (int)(metric.width/4);
  1752                        ;
  1753                        ;	menu->height = height;
  1754                        ;
  1755                        ;	k_vdma_fill_rect(cx,cy,width,height,color);	
  1756                        ;	//k_delay(15);
  1757                        ;	
  1758                        ;	title = strupr(title);
  1759                        ;	
  1760                        ;
  1761                        ;	k_put_wingadget_point(WINICON_TITLE_BACK,endX - 
                    (metric.width*2 + 2),titleOffsetY,14);
  1762                        ;	k_put_wingadget_point(WINICON_TITLE_FRONT,endX -
                     (metric.width),titleOffsetY,14);
  1763                        ;
  1764                        ;	k_draw_text_point(title,cx+2+metric.width,titleO
                    ffsetY,0);
  1765                        ;	
  1766                        ;	return menu;
  1767                        ;}
  1768                        ;*/
  1769                        ;
  1770                        ;void k_sd_init(void)
  1771                        ;{
  1772                        	.line	300
  1773                        	.line	301
  1774                        	code
  1775                        	xdef	~~k_sd_init
  1776                        	func
  1777                        	.function	301
  1778                        ~~k_sd_init:
  1779                        	longa	on
  1780                        	longi	on
  1781 00:06BB: 3B           	tsc
  1782 00:06BC: 38           	sec
  1783 00:06BD: E9 00 00     	sbc	#L69
  1784 00:06C0: 1B           	tcs
  1785 00:06C1: 0B           	phd
  1786 00:06C2: 5B           	tcd
  1787                        	.block	301
  1788                        ;/*
  1789                        ;.192000	5c d2 21 19	jmp $1921d2	SDOS_CHE
                    CK_CD JML ISDOS_CHK_CD ; Check if Card is Present
  1790                        ;.192004	5c e1 21 19	jmp $1921e1	SDOS_CHE
  Wed Aug 14 2019 13:34                                                Page 33


                    CK_WP JML ISDOS_CHK_WP ; Check if Card is Write Protected
  1791                        ;.192008	5c 20 20 19	jmp $192020	SDOS_INI
                    T     JML ISDOS_INIT
  1792                        ;.19200c	5c 6d 20 19	jmp $19206d	SDOS_DIR
                          JML ISDOS_DIR
  1793                        ;.192010	5c 27 21 19	jmp $192127	SDOS_CHD
                    IR    JML ISDOS_CHDIR
  1794                        ;.192014	5c 28 21 19	jmp $192128	SDOS_LOA
                    D     JML ISDOS_LOAD
  1795                        ;.192018	5c 2c 21 19	jmp $19212c	SDOS_SAV
                    E     JML ISDOS_SAVE
  1796                        ;.19201c	5c 2d 21 19	jmp $19212d	SDOS_EXE
                    C     JML ISDOS_EXEC
  1797                        ;*/
  1798                        ;	#asm	
  1799                        	.line	312
  1800                        ;		
  1801                        ;	jsl $192020
  1802                        ;		
  1803                        ;	#endasm
  1804                        	asmstart
  1805                        		
  1806 00:06C3: 22 20 20 19  	jsl $192020
  1807                        		
  1808                        	asmend
  1809                        ;}
  1810                        	.line	317
  1811                        L72:
  1812 00:06C7: 2B           	pld
  1813 00:06C8: 3B           	tsc
  1814 00:06C9: 18           	clc
  1815 00:06CA: 69 00 00     	adc	#L69
  1816 00:06CD: 1B           	tcs
  1817 00:06CE: 6B           	rtl
  1818                        	.endblock	317
  1819             00000000   L69	equ	0
  1820             00000001   L70	equ	1
  1821                        	ends
  1822                        	efunc
  1823                        	.endfunc	317,1,0
  1824                        	.line	317
  1825                        ;
  1826                        ;void k_sd_present(void)
  1827                        ;{
  1828                        	.line	319
  1829                        	.line	320
  1830                        	code
  1831                        	xdef	~~k_sd_present
  1832                        	func
  1833                        	.function	320
  1834                        ~~k_sd_present:
  1835                        	longa	on
  1836                        	longi	on
  1837 00:06CF: 3B           	tsc
  1838 00:06D0: 38           	sec
  1839 00:06D1: E9 00 00     	sbc	#L73
  1840 00:06D4: 1B           	tcs
  1841 00:06D5: 0B           	phd
  Wed Aug 14 2019 13:34                                                Page 34


  1842 00:06D6: 5B           	tcd
  1843                        	.block	320
  1844                        ;/*
  1845                        ;.192000	5c d2 21 19	jmp $1921d2	SDOS_CHE
                    CK_CD JML ISDOS_CHK_CD ; Check if Card is Present
  1846                        ;.192004	5c e1 21 19	jmp $1921e1	SDOS_CHE
                    CK_WP JML ISDOS_CHK_WP ; Check if Card is Write Protected
  1847                        ;.192008	5c 20 20 19	jmp $192020	SDOS_INI
                    T     JML ISDOS_INIT
  1848                        ;.19200c	5c 6d 20 19	jmp $19206d	SDOS_DIR
                          JML ISDOS_DIR
  1849                        ;.192010	5c 27 21 19	jmp $192127	SDOS_CHD
                    IR    JML ISDOS_CHDIR
  1850                        ;.192014	5c 28 21 19	jmp $192128	SDOS_LOA
                    D     JML ISDOS_LOAD
  1851                        ;.192018	5c 2c 21 19	jmp $19212c	SDOS_SAV
                    E     JML ISDOS_SAVE
  1852                        ;.19201c	5c 2d 21 19	jmp $19212d	SDOS_EXE
                    C     JML ISDOS_EXEC
  1853                        ;*/
  1854                        ;	
  1855                        ;	#asm	
  1856                        	.line	332
  1857                        ;		
  1858                        ;		phx
  1859                        ;		pha
  1860                        ;		REP #$30
  1861                        ;		jsl $19200c
  1862                        ;		REP #$20
  1863                        ;		pla
  1864                        ;		plx
  1865                        ;		
  1866                        ;	#endasm	
  1867                        	asmstart
  1868                        		
  1869 00:06D7: DA           		phx
  1870 00:06D8: 48           		pha
  1871 00:06D9: C2 30        		REP #$30
  1872 00:06DB: 22 0C 20 19  		jsl $19200c
  1873 00:06DF: C2 20        		REP #$20
  1874 00:06E1: 68           		pla
  1875 00:06E2: FA           		plx
  1876                        		
  1877                        	asmend
  1878                        ;}
  1879                        	.line	343
  1880                        L76:
  1881 00:06E3: 2B           	pld
  1882 00:06E4: 3B           	tsc
  1883 00:06E5: 18           	clc
  1884 00:06E6: 69 00 00     	adc	#L73
  1885 00:06E9: 1B           	tcs
  1886 00:06EA: 6B           	rtl
  1887                        	.endblock	343
  1888             00000000   L73	equ	0
  1889             00000001   L74	equ	1
  1890                        	ends
  1891                        	efunc
  Wed Aug 14 2019 13:34                                                Page 35


  1892                        	.endfunc	343,1,0
  1893                        	.line	343
  1894                        ;
  1895                        ;void k_sd_dir(void)
  1896                        ;{
  1897                        	.line	345
  1898                        	.line	346
  1899                        	code
  1900                        	xdef	~~k_sd_dir
  1901                        	func
  1902                        	.function	346
  1903                        ~~k_sd_dir:
  1904                        	longa	on
  1905                        	longi	on
  1906 00:06EB: 3B           	tsc
  1907 00:06EC: 38           	sec
  1908 00:06ED: E9 00 00     	sbc	#L77
  1909 00:06F0: 1B           	tcs
  1910 00:06F1: 0B           	phd
  1911 00:06F2: 5B           	tcd
  1912                        	.block	346
  1913                        ;/*
  1914                        ;.192000	5c d2 21 19	jmp $1921d2	SDOS_CHE
                    CK_CD JML ISDOS_CHK_CD ; Check if Card is Present
  1915                        ;.192004	5c e1 21 19	jmp $1921e1	SDOS_CHE
                    CK_WP JML ISDOS_CHK_WP ; Check if Card is Write Protected
  1916                        ;.192008	5c 20 20 19	jmp $192020	SDOS_INI
                    T     JML ISDOS_INIT
  1917                        ;.19200c	5c 6d 20 19	jmp $19206d	SDOS_DIR
                          JML ISDOS_DIR
  1918                        ;.192010	5c 27 21 19	jmp $192127	SDOS_CHD
                    IR    JML ISDOS_CHDIR
  1919                        ;.192014	5c 28 21 19	jmp $192128	SDOS_LOA
                    D     JML ISDOS_LOAD
  1920                        ;.192018	5c 2c 21 19	jmp $19212c	SDOS_SAV
                    E     JML ISDOS_SAVE
  1921                        ;.19201c	5c 2d 21 19	jmp $19212d	SDOS_EXE
                    C     JML ISDOS_EXEC
  1922                        ;*/
  1923                        ;	#asm	
  1924                        	.line	357
  1925                        ;		phd
  1926                        ;		phx
  1927                        ;		phy
  1928                        ;		pha
  1929                        ;		jsl $19206d
  1930                        ;		pla
  1931                        ;		ply
  1932                        ;		plx
  1933                        ;		pld
  1934                        ;	#endasm
  1935                        	asmstart
  1936 00:06F3: 0B           		phd
  1937 00:06F4: DA           		phx
  1938 00:06F5: 5A           		phy
  1939 00:06F6: 48           		pha
  1940 00:06F7: 22 6D 20 19  		jsl $19206d
  1941 00:06FB: 68           		pla
  Wed Aug 14 2019 13:34                                                Page 36


  1942 00:06FC: 7A           		ply
  1943 00:06FD: FA           		plx
  1944 00:06FE: 2B           		pld
  1945                        	asmend
  1946                        ;}
  1947                        	.line	368
  1948                        L80:
  1949 00:06FF: 2B           	pld
  1950 00:0700: 3B           	tsc
  1951 00:0701: 18           	clc
  1952 00:0702: 69 00 00     	adc	#L77
  1953 00:0705: 1B           	tcs
  1954 00:0706: 6B           	rtl
  1955                        	.endblock	368
  1956             00000000   L77	equ	0
  1957             00000001   L78	equ	1
  1958                        	ends
  1959                        	efunc
  1960                        	.endfunc	368,1,0
  1961                        	.line	368
  1962                        ;
  1963                        ;void k_free_context_menu(PMENU pmenu,char fcolor,
                    char bcolor)
  1964                        ;{
  1965                        	.line	370
  1966                        	.line	371
  1967                        	code
  1968                        	xdef	~~k_free_context_menu
  1969                        	func
  1970                        	.function	371
  1971                        ~~k_free_context_menu:
  1972                        	longa	on
  1973                        	longi	on
  1974 00:0707: 3B           	tsc
  1975 00:0708: 38           	sec
  1976 00:0709: E9 08 00     	sbc	#L81
  1977 00:070C: 1B           	tcs
  1978 00:070D: 0B           	phd
  1979 00:070E: 5B           	tcd
  1980             00000004   pmenu_0	set	4
  1981             00000008   fcolor_0	set	8
  1982             0000000A   bcolor_0	set	10
  1983                        	.block	371
  1984                        ;	if(pmenu)
  1985                        	.sym	pmenu,4,138,6,32,12
  1986                        	.sym	fcolor,8,14,6,8
  1987                        	.sym	bcolor,10,14,6,8
  1988                        	.line	372
  1989                        ;	{
  1990 00:070F: A5 0C        	lda	<L81+pmenu_0
  1991 00:0711: 05 0E        	ora	<L81+pmenu_0+2
  1992 00:0713: D0 03        	bne	L84
  1993 00:0715: 82 4B 00     	brl	L10022
  1994                        L84:
  1995                        	.line	373
  1996                        ;		k_vdma_fill_rect(pmenu->cx-1,pmenu->cy,p
                    menu->width+1,pmenu->height+1,bcolor);
  1997                        	.line	374
  Wed Aug 14 2019 13:34                                                Page 37


  1998 00:0718: D4 12        	pei	<L81+bcolor_0
  1999 00:071A: A0 06 00     	ldy	#$6
  2000 00:071D: B7 0C        	lda	[<L81+pmenu_0],Y
  2001 00:071F: 1A           	ina
  2002 00:0720: 48           	pha
  2003 00:0721: A0 04 00     	ldy	#$4
  2004 00:0724: B7 0C        	lda	[<L81+pmenu_0],Y
  2005 00:0726: 1A           	ina
  2006 00:0727: 48           	pha
  2007 00:0728: A0 00 00     	ldy	#$0
  2008 00:072B: 5A           	phy
  2009 00:072C: A0 02 00     	ldy	#$2
  2010 00:072F: B7 0C        	lda	[<L81+pmenu_0],Y
  2011 00:0731: 7A           	ply
  2012 00:0732: 2A           	rol	A
  2013 00:0733: 6A           	ror	A
  2014 00:0734: 10 01        	bpl	L85
  2015 00:0736: 88           	dey
  2016                        L85:
  2017 00:0737: 85 01        	sta	<R0
  2018 00:0739: 84 03        	sty	<R0+2
  2019 00:073B: D4 03        	pei	<R0+2
  2020 00:073D: D4 01        	pei	<R0
  2021 00:073F: 18           	clc
  2022 00:0740: A9 FF FF     	lda	#$ffff
  2023 00:0743: 67 0C        	adc	[<L81+pmenu_0]
  2024 00:0745: 85 05        	sta	<R1
  2025 00:0747: A0 00 00     	ldy	#$0
  2026 00:074A: A5 05        	lda	<R1
  2027 00:074C: 10 01        	bpl	L86
  2028 00:074E: 88           	dey
  2029                        L86:
  2030 00:074F: 85 05        	sta	<R1
  2031 00:0751: 84 07        	sty	<R1+2
  2032 00:0753: D4 07        	pei	<R1+2
  2033 00:0755: D4 05        	pei	<R1
  2034 00:0757: 22 xx xx xx  	jsl	~~k_vdma_fill_rect
  2035                        ;		//k_vdma_fill_rect(pmenu->cx,pmenu->cy,p
                    menu->width,pmenu->height,bcolor);	
  2036                        ;		free(pmenu);
  2037                        	.line	376
  2038 00:075B: D4 0E        	pei	<L81+pmenu_0+2
  2039 00:075D: D4 0C        	pei	<L81+pmenu_0
  2040 00:075F: 22 xx xx xx  	jsl	~~free
  2041                        ;	}
  2042                        	.line	377
  2043                        ;}
  2044                        L10022:
  2045                        	.line	378
  2046                        L87:
  2047 00:0763: A5 0A        	lda	<L81+2
  2048 00:0765: 85 12        	sta	<L81+2+8
  2049 00:0767: A5 09        	lda	<L81+1
  2050 00:0769: 85 11        	sta	<L81+1+8
  2051 00:076B: 2B           	pld
  2052 00:076C: 3B           	tsc
  2053 00:076D: 18           	clc
  2054 00:076E: 69 10 00     	adc	#L81+8
  Wed Aug 14 2019 13:34                                                Page 38


  2055 00:0771: 1B           	tcs
  2056 00:0772: 6B           	rtl
  2057                        	.endblock	378
  2058             00000008   L81	equ	8
  2059             00000009   L82	equ	9
  2060                        	ends
  2061                        	efunc
  2062                        	.endfunc	378,9,8
  2063                        	.line	378
  2064                        ;
  2065                        ;
  2066                        ;int k_point_in_list_depth(int x,int y,PCLICKABLE 
                    clickableList,int cSize)
  2067                        ;{
  2068                        	.line	381
  2069                        	.line	382
  2070                        	code
  2071                        	xdef	~~k_point_in_list_depth
  2072                        	func
  2073                        	.function	382
  2074                        ~~k_point_in_list_depth:
  2075                        	longa	on
  2076                        	longi	on
  2077 00:0773: 3B           	tsc
  2078 00:0774: 38           	sec
  2079 00:0775: E9 22 00     	sbc	#L88
  2080 00:0778: 1B           	tcs
  2081 00:0779: 0B           	phd
  2082 00:077A: 5B           	tcd
  2083             00000004   x_0	set	4
  2084             00000006   y_0	set	6
  2085             00000008   clickableList_0	set	8
  2086             0000000C   cSize_0	set	12
  2087                        	.block	382
  2088                        ;	int i = 0;
  2089                        ;	int index = -1;
  2090                        ;	int found = 0;
  2091                        ;	PCLICKABLE top = NULL;
  2092                        ;	RECT r;
  2093                        ;	
  2094                        ;	for(i=0;i<cSize;i++)
  2095             00000000   i_1	set	0
  2096             00000002   index_1	set	2
  2097             00000004   found_1	set	4
  2098             00000006   top_1	set	6
  2099             0000000A   r_1	set	10
  2100                        	.sym	i,0,5,1,16
  2101                        	.sym	index,2,5,1,16
  2102                        	.sym	found,4,5,1,16
  2103                        	.sym	top,6,138,1,32,11
  2104                        	.sym	r,10,10,1,64,7
  2105                        	.sym	x,4,5,6,16
  2106                        	.sym	y,6,5,6,16
  2107                        	.sym	clickableList,8,138,6,32,11
  2108                        	.sym	cSize,12,5,6,16
  2109 00:077B: 64 11        	stz	<L89+i_1
  2110 00:077D: A9 FF FF     	lda	#$ffff
  2111 00:0780: 85 13        	sta	<L89+index_1
  Wed Aug 14 2019 13:34                                                Page 39


  2112 00:0782: 64 15        	stz	<L89+found_1
  2113 00:0784: 64 17        	stz	<L89+top_1
  2114 00:0786: 64 19        	stz	<L89+top_1+2
  2115                        	.line	389
  2116 00:0788: 64 11        	stz	<L89+i_1
  2117 00:078A: 82 2F 01     	brl	L10026
  2118                        L10025:
  2119                        ;	{
  2120                        	.line	390
  2121                        ;		hitList[i] = NULL;
  2122                        	.line	391
  2123 00:078D: A0 00 00     	ldy	#$0
  2124 00:0790: A5 11        	lda	<L89+i_1
  2125 00:0792: 10 01        	bpl	L91
  2126 00:0794: 88           	dey
  2127                        L91:
  2128 00:0795: 85 05        	sta	<R1
  2129 00:0797: 84 07        	sty	<R1+2
  2130 00:0799: D4 07        	pei	<R1+2
  2131 00:079B: D4 05        	pei	<R1
  2132 00:079D: A9 02 00     	lda	#$2
  2133                        	xref	~~~lasl
  2134 00:07A0: 22 xx xx xx  	jsl	~~~lasl
  2135 00:07A4: 85 01        	sta	<R0
  2136 00:07A6: 86 03        	stx	<R0+2
  2137 00:07A8: 18           	clc
  2138 00:07A9: A9 xx xx     	lda	#<~~hitList
  2139 00:07AC: 65 01        	adc	<R0
  2140 00:07AE: 85 09        	sta	<R2
  2141 00:07B0: A9 xx xx     	lda	#^~~hitList
  2142 00:07B3: 65 03        	adc	<R0+2
  2143 00:07B5: 85 0B        	sta	<R2+2
  2144 00:07B7: A9 00 00     	lda	#$0
  2145 00:07BA: 87 09        	sta	[<R2]
  2146 00:07BC: A9 00 00     	lda	#$0
  2147 00:07BF: A0 02 00     	ldy	#$2
  2148 00:07C2: 97 09        	sta	[<R2],Y
  2149                        ;		r = clickableList[i].area;
  2150                        	.line	392
  2151 00:07C4: A0 00 00     	ldy	#$0
  2152 00:07C7: A5 11        	lda	<L89+i_1
  2153 00:07C9: 10 01        	bpl	L92
  2154 00:07CB: 88           	dey
  2155                        L92:
  2156 00:07CC: 85 01        	sta	<R0
  2157 00:07CE: 84 03        	sty	<R0+2
  2158 00:07D0: F4 00 00     	pea	#^$a
  2159 00:07D3: F4 0A 00     	pea	#<$a
  2160 00:07D6: D4 03        	pei	<R0+2
  2161 00:07D8: D4 01        	pei	<R0
  2162                        	xref	~~~lmul
  2163 00:07DA: 22 xx xx xx  	jsl	~~~lmul
  2164 00:07DE: 85 01        	sta	<R0
  2165 00:07E0: 86 03        	stx	<R0+2
  2166 00:07E2: 18           	clc
  2167 00:07E3: A5 2A        	lda	<L88+clickableList_0
  2168 00:07E5: 65 01        	adc	<R0
  2169 00:07E7: 85 05        	sta	<R1
  Wed Aug 14 2019 13:34                                                Page 40


  2170 00:07E9: A5 2C        	lda	<L88+clickableList_0+2
  2171 00:07EB: 65 03        	adc	<R0+2
  2172 00:07ED: 85 07        	sta	<R1+2
  2173 00:07EF: D4 07        	pei	<R1+2
  2174 00:07F1: D4 05        	pei	<R1
  2175 00:07F3: 18           	clc
  2176 00:07F4: 7B           	tdc
  2177 00:07F5: 69 1B 00     	adc	#<L89+r_1
  2178 00:07F8: 85 01        	sta	<R0
  2179 00:07FA: A9 00 00     	lda	#$0
  2180 00:07FD: 85 03        	sta	<R0+2
  2181 00:07FF: D4 03        	pei	<R0+2
  2182 00:0801: D4 01        	pei	<R0
  2183 00:0803: A9 08 00     	lda	#$8
  2184                        	xref	~~~fmov
  2185 00:0806: 22 xx xx xx  	jsl	~~~fmov
  2186                        ;		if(x >=r.x && x<(r.x+r.width))
  2187                        	.line	393
  2188                        ;		{
  2189 00:080A: 38           	sec
  2190 00:080B: A5 26        	lda	<L88+x_0
  2191 00:080D: E5 1B        	sbc	<L89+r_1
  2192 00:080F: 70 03        	bvs	L93
  2193 00:0811: 49 00 80     	eor	#$8000
  2194                        L93:
  2195 00:0814: 30 03        	bmi	L94
  2196 00:0816: 82 A1 00     	brl	L10027
  2197                        L94:
  2198 00:0819: 18           	clc
  2199 00:081A: A5 1B        	lda	<L89+r_1
  2200 00:081C: 65 1F        	adc	<L89+r_1+4
  2201 00:081E: 85 01        	sta	<R0
  2202 00:0820: 38           	sec
  2203 00:0821: A5 26        	lda	<L88+x_0
  2204 00:0823: E5 01        	sbc	<R0
  2205 00:0825: 70 03        	bvs	L95
  2206 00:0827: 49 00 80     	eor	#$8000
  2207                        L95:
  2208 00:082A: 10 03        	bpl	L96
  2209 00:082C: 82 8B 00     	brl	L10027
  2210                        L96:
  2211                        	.line	394
  2212                        ;			if(y >=r.y && y<(r.y+r.height))
  2213                        	.line	395
  2214                        ;			{
  2215 00:082F: 38           	sec
  2216 00:0830: A5 28        	lda	<L88+y_0
  2217 00:0832: E5 1D        	sbc	<L89+r_1+2
  2218 00:0834: 70 03        	bvs	L97
  2219 00:0836: 49 00 80     	eor	#$8000
  2220                        L97:
  2221 00:0839: 30 03        	bmi	L98
  2222 00:083B: 82 7C 00     	brl	L10028
  2223                        L98:
  2224 00:083E: 18           	clc
  2225 00:083F: A5 1D        	lda	<L89+r_1+2
  2226 00:0841: 65 21        	adc	<L89+r_1+6
  2227 00:0843: 85 01        	sta	<R0
  Wed Aug 14 2019 13:34                                                Page 41


  2228 00:0845: 38           	sec
  2229 00:0846: A5 28        	lda	<L88+y_0
  2230 00:0848: E5 01        	sbc	<R0
  2231 00:084A: 70 03        	bvs	L99
  2232 00:084C: 49 00 80     	eor	#$8000
  2233                        L99:
  2234 00:084F: 10 03        	bpl	L100
  2235 00:0851: 82 66 00     	brl	L10028
  2236                        L100:
  2237                        	.line	396
  2238                        ;				index = i;
  2239                        	.line	397
  2240 00:0854: A5 11        	lda	<L89+i_1
  2241 00:0856: 85 13        	sta	<L89+index_1
  2242                        ;				//clickableList[i].depth
                     = 1;	
  2243                        ;				hitList[i] = &clickableL
                    ist[i];
  2244                        	.line	399
  2245 00:0858: A0 00 00     	ldy	#$0
  2246 00:085B: A5 11        	lda	<L89+i_1
  2247 00:085D: 10 01        	bpl	L101
  2248 00:085F: 88           	dey
  2249                        L101:
  2250 00:0860: 85 05        	sta	<R1
  2251 00:0862: 84 07        	sty	<R1+2
  2252 00:0864: D4 07        	pei	<R1+2
  2253 00:0866: D4 05        	pei	<R1
  2254 00:0868: A9 02 00     	lda	#$2
  2255                        	xref	~~~lasl
  2256 00:086B: 22 xx xx xx  	jsl	~~~lasl
  2257 00:086F: 85 01        	sta	<R0
  2258 00:0871: 86 03        	stx	<R0+2
  2259 00:0873: 18           	clc
  2260 00:0874: A9 xx xx     	lda	#<~~hitList
  2261 00:0877: 65 01        	adc	<R0
  2262 00:0879: 85 09        	sta	<R2
  2263 00:087B: A9 xx xx     	lda	#^~~hitList
  2264 00:087E: 65 03        	adc	<R0+2
  2265 00:0880: 85 0B        	sta	<R2+2
  2266 00:0882: A0 00 00     	ldy	#$0
  2267 00:0885: A5 11        	lda	<L89+i_1
  2268 00:0887: 10 01        	bpl	L102
  2269 00:0889: 88           	dey
  2270                        L102:
  2271 00:088A: 85 01        	sta	<R0
  2272 00:088C: 84 03        	sty	<R0+2
  2273 00:088E: F4 00 00     	pea	#^$a
  2274 00:0891: F4 0A 00     	pea	#<$a
  2275 00:0894: D4 03        	pei	<R0+2
  2276 00:0896: D4 01        	pei	<R0
  2277                        	xref	~~~lmul
  2278 00:0898: 22 xx xx xx  	jsl	~~~lmul
  2279 00:089C: 85 01        	sta	<R0
  2280 00:089E: 86 03        	stx	<R0+2
  2281 00:08A0: 18           	clc
  2282 00:08A1: A5 2A        	lda	<L88+clickableList_0
  2283 00:08A3: 65 01        	adc	<R0
  Wed Aug 14 2019 13:34                                                Page 42


  2284 00:08A5: 85 0D        	sta	<R3
  2285 00:08A7: A5 2C        	lda	<L88+clickableList_0+2
  2286 00:08A9: 65 03        	adc	<R0+2
  2287 00:08AB: 85 0F        	sta	<R3+2
  2288 00:08AD: A5 0D        	lda	<R3
  2289 00:08AF: 87 09        	sta	[<R2]
  2290 00:08B1: A5 0F        	lda	<R3+2
  2291 00:08B3: A0 02 00     	ldy	#$2
  2292 00:08B6: 97 09        	sta	[<R2],Y
  2293                        ;				found++;
  2294                        	.line	400
  2295 00:08B8: E6 15        	inc	<L89+found_1
  2296                        ;			}
  2297                        	.line	401
  2298                        ;		}	
  2299                        L10028:
  2300                        	.line	402
  2301                        ;	}
  2302                        L10027:
  2303                        	.line	403
  2304                        L10023:
  2305 00:08BA: E6 11        	inc	<L89+i_1
  2306                        L10026:
  2307 00:08BC: 38           	sec
  2308 00:08BD: A5 11        	lda	<L89+i_1
  2309 00:08BF: E5 2E        	sbc	<L88+cSize_0
  2310 00:08C1: 70 03        	bvs	L103
  2311 00:08C3: 49 00 80     	eor	#$8000
  2312                        L103:
  2313 00:08C6: 30 03        	bmi	L104
  2314 00:08C8: 82 C2 FE     	brl	L10025
  2315                        L104:
  2316                        L10024:
  2317                        ;
  2318                        ;	if(found > 0)
  2319                        	.line	405
  2320                        ;	{
  2321 00:08CB: 38           	sec
  2322 00:08CC: A9 00 00     	lda	#$0
  2323 00:08CF: E5 15        	sbc	<L89+found_1
  2324 00:08D1: 70 03        	bvs	L105
  2325 00:08D3: 49 00 80     	eor	#$8000
  2326                        L105:
  2327 00:08D6: 10 03        	bpl	L106
  2328 00:08D8: 82 F2 00     	brl	L10029
  2329                        L106:
  2330                        	.line	406
  2331                        ;		top = hitList[0];
  2332                        	.line	407
  2333 00:08DB: AF xx xx xx  	lda	>~~hitList
  2334 00:08DF: 85 17        	sta	<L89+top_1
  2335 00:08E1: AF xx xx xx  	lda	>~~hitList+2
  2336 00:08E5: 85 19        	sta	<L89+top_1+2
  2337                        ;		for(i=0;i<cSize;i++)
  2338                        	.line	408
  2339 00:08E7: 64 11        	stz	<L89+i_1
  2340 00:08E9: 82 CF 00     	brl	L10033
  2341                        L10032:
  Wed Aug 14 2019 13:34                                                Page 43


  2342                        ;		{
  2343                        	.line	409
  2344                        ;			if(hitList[i]!=NULL && hitList[i
                    ]->depth < top->depth)
  2345                        	.line	410
  2346                        ;			{
  2347 00:08EC: A0 00 00     	ldy	#$0
  2348 00:08EF: A5 11        	lda	<L89+i_1
  2349 00:08F1: 10 01        	bpl	L107
  2350 00:08F3: 88           	dey
  2351                        L107:
  2352 00:08F4: 85 05        	sta	<R1
  2353 00:08F6: 84 07        	sty	<R1+2
  2354 00:08F8: D4 07        	pei	<R1+2
  2355 00:08FA: D4 05        	pei	<R1
  2356 00:08FC: A9 02 00     	lda	#$2
  2357                        	xref	~~~lasl
  2358 00:08FF: 22 xx xx xx  	jsl	~~~lasl
  2359 00:0903: 85 01        	sta	<R0
  2360 00:0905: 86 03        	stx	<R0+2
  2361 00:0907: 18           	clc
  2362 00:0908: A9 xx xx     	lda	#<~~hitList
  2363 00:090B: 65 01        	adc	<R0
  2364 00:090D: 85 09        	sta	<R2
  2365 00:090F: A9 xx xx     	lda	#^~~hitList
  2366 00:0912: 65 03        	adc	<R0+2
  2367 00:0914: 85 0B        	sta	<R2+2
  2368 00:0916: A7 09        	lda	[<R2]
  2369 00:0918: A0 02 00     	ldy	#$2
  2370 00:091B: 17 09        	ora	[<R2],Y
  2371 00:091D: D0 03        	bne	L108
  2372 00:091F: 82 97 00     	brl	L10034
  2373                        L108:
  2374 00:0922: A0 00 00     	ldy	#$0
  2375 00:0925: A5 11        	lda	<L89+i_1
  2376 00:0927: 10 01        	bpl	L109
  2377 00:0929: 88           	dey
  2378                        L109:
  2379 00:092A: 85 09        	sta	<R2
  2380 00:092C: 84 0B        	sty	<R2+2
  2381 00:092E: D4 0B        	pei	<R2+2
  2382 00:0930: D4 09        	pei	<R2
  2383 00:0932: A9 02 00     	lda	#$2
  2384                        	xref	~~~lasl
  2385 00:0935: 22 xx xx xx  	jsl	~~~lasl
  2386 00:0939: 85 01        	sta	<R0
  2387 00:093B: 86 03        	stx	<R0+2
  2388 00:093D: 18           	clc
  2389 00:093E: A9 xx xx     	lda	#<~~hitList
  2390 00:0941: 65 01        	adc	<R0
  2391 00:0943: 85 0D        	sta	<R3
  2392 00:0945: A9 xx xx     	lda	#^~~hitList
  2393 00:0948: 65 03        	adc	<R0+2
  2394 00:094A: 85 0F        	sta	<R3+2
  2395 00:094C: A7 0D        	lda	[<R3]
  2396 00:094E: 85 01        	sta	<R0
  2397 00:0950: A0 02 00     	ldy	#$2
  2398 00:0953: B7 0D        	lda	[<R3],Y
  Wed Aug 14 2019 13:34                                                Page 44


  2399 00:0955: 85 03        	sta	<R0+2
  2400 00:0957: E2 20        	sep	#$20
  2401                        	longa	off
  2402 00:0959: A0 09 00     	ldy	#$9
  2403 00:095C: B7 01        	lda	[<R0],Y
  2404 00:095E: A0 09 00     	ldy	#$9
  2405 00:0961: D7 17        	cmp	[<L89+top_1],Y
  2406 00:0963: C2 20        	rep	#$20
  2407                        	longa	on
  2408 00:0965: 90 03        	bcc	L110
  2409 00:0967: 82 4F 00     	brl	L10034
  2410                        L110:
  2411                        	.line	411
  2412                        ;				top->depth = 1;
  2413                        	.line	412
  2414 00:096A: E2 20        	sep	#$20
  2415                        	longa	off
  2416 00:096C: A9 01        	lda	#$1
  2417 00:096E: A0 09 00     	ldy	#$9
  2418 00:0971: 97 17        	sta	[<L89+top_1],Y
  2419 00:0973: C2 20        	rep	#$20
  2420                        	longa	on
  2421                        ;				top = hitList[i];
  2422                        	.line	413
  2423 00:0975: A0 00 00     	ldy	#$0
  2424 00:0978: A5 11        	lda	<L89+i_1
  2425 00:097A: 10 01        	bpl	L111
  2426 00:097C: 88           	dey
  2427                        L111:
  2428 00:097D: 85 05        	sta	<R1
  2429 00:097F: 84 07        	sty	<R1+2
  2430 00:0981: D4 07        	pei	<R1+2
  2431 00:0983: D4 05        	pei	<R1
  2432 00:0985: A9 02 00     	lda	#$2
  2433                        	xref	~~~lasl
  2434 00:0988: 22 xx xx xx  	jsl	~~~lasl
  2435 00:098C: 85 01        	sta	<R0
  2436 00:098E: 86 03        	stx	<R0+2
  2437 00:0990: 18           	clc
  2438 00:0991: A9 xx xx     	lda	#<~~hitList
  2439 00:0994: 65 01        	adc	<R0
  2440 00:0996: 85 09        	sta	<R2
  2441 00:0998: A9 xx xx     	lda	#^~~hitList
  2442 00:099B: 65 03        	adc	<R0+2
  2443 00:099D: 85 0B        	sta	<R2+2
  2444 00:099F: A7 09        	lda	[<R2]
  2445 00:09A1: 85 17        	sta	<L89+top_1
  2446 00:09A3: A0 02 00     	ldy	#$2
  2447 00:09A6: B7 09        	lda	[<R2],Y
  2448 00:09A8: 85 19        	sta	<L89+top_1+2
  2449                        ;				top->depth = 0;
  2450                        	.line	414
  2451 00:09AA: E2 20        	sep	#$20
  2452                        	longa	off
  2453 00:09AC: A9 00        	lda	#$0
  2454 00:09AE: A0 09 00     	ldy	#$9
  2455 00:09B1: 97 17        	sta	[<L89+top_1],Y
  2456 00:09B3: C2 20        	rep	#$20
  Wed Aug 14 2019 13:34                                                Page 45


  2457                        	longa	on
  2458                        ;				index = i;
  2459                        	.line	415
  2460 00:09B5: A5 11        	lda	<L89+i_1
  2461 00:09B7: 85 13        	sta	<L89+index_1
  2462                        ;			}
  2463                        	.line	416
  2464                        ;		}		
  2465                        L10034:
  2466                        	.line	417
  2467                        L10030:
  2468 00:09B9: E6 11        	inc	<L89+i_1
  2469                        L10033:
  2470 00:09BB: 38           	sec
  2471 00:09BC: A5 11        	lda	<L89+i_1
  2472 00:09BE: E5 2E        	sbc	<L88+cSize_0
  2473 00:09C0: 70 03        	bvs	L112
  2474 00:09C2: 49 00 80     	eor	#$8000
  2475                        L112:
  2476 00:09C5: 30 03        	bmi	L113
  2477 00:09C7: 82 22 FF     	brl	L10032
  2478                        L113:
  2479                        L10031:
  2480                        ;	}
  2481                        	.line	418
  2482                        ;	else
  2483 00:09CA: 82 42 00     	brl	L10035
  2484                        L10029:
  2485                        ;	{
  2486                        	.line	420
  2487                        ;		clickableList[index].depth = 0;
  2488                        	.line	421
  2489 00:09CD: A0 00 00     	ldy	#$0
  2490 00:09D0: A5 13        	lda	<L89+index_1
  2491 00:09D2: 10 01        	bpl	L114
  2492 00:09D4: 88           	dey
  2493                        L114:
  2494 00:09D5: 85 01        	sta	<R0
  2495 00:09D7: 84 03        	sty	<R0+2
  2496 00:09D9: F4 00 00     	pea	#^$a
  2497 00:09DC: F4 0A 00     	pea	#<$a
  2498 00:09DF: D4 03        	pei	<R0+2
  2499 00:09E1: D4 01        	pei	<R0
  2500                        	xref	~~~lmul
  2501 00:09E3: 22 xx xx xx  	jsl	~~~lmul
  2502 00:09E7: 85 01        	sta	<R0
  2503 00:09E9: 86 03        	stx	<R0+2
  2504 00:09EB: 18           	clc
  2505 00:09EC: A9 09 00     	lda	#$9
  2506 00:09EF: 65 2A        	adc	<L88+clickableList_0
  2507 00:09F1: 85 05        	sta	<R1
  2508 00:09F3: A9 00 00     	lda	#$0
  2509 00:09F6: 65 2C        	adc	<L88+clickableList_0+2
  2510 00:09F8: 85 07        	sta	<R1+2
  2511 00:09FA: 18           	clc
  2512 00:09FB: A5 05        	lda	<R1
  2513 00:09FD: 65 01        	adc	<R0
  2514 00:09FF: 85 09        	sta	<R2
  Wed Aug 14 2019 13:34                                                Page 46


  2515 00:0A01: A5 07        	lda	<R1+2
  2516 00:0A03: 65 03        	adc	<R0+2
  2517 00:0A05: 85 0B        	sta	<R2+2
  2518 00:0A07: E2 20        	sep	#$20
  2519                        	longa	off
  2520 00:0A09: A9 00        	lda	#$0
  2521 00:0A0B: 87 09        	sta	[<R2]
  2522 00:0A0D: C2 20        	rep	#$20
  2523                        	longa	on
  2524                        ;	}
  2525                        	.line	422
  2526                        L10035:
  2527                        ;
  2528                        ;	return index;
  2529                        	.line	424
  2530 00:0A0F: A5 13        	lda	<L89+index_1
  2531                        L115:
  2532 00:0A11: A8           	tay
  2533 00:0A12: A5 24        	lda	<L88+2
  2534 00:0A14: 85 2E        	sta	<L88+2+10
  2535 00:0A16: A5 23        	lda	<L88+1
  2536 00:0A18: 85 2D        	sta	<L88+1+10
  2537 00:0A1A: 2B           	pld
  2538 00:0A1B: 3B           	tsc
  2539 00:0A1C: 18           	clc
  2540 00:0A1D: 69 2C 00     	adc	#L88+10
  2541 00:0A20: 1B           	tcs
  2542 00:0A21: 98           	tya
  2543 00:0A22: 6B           	rtl
  2544                        ;}
  2545                        	.line	425
  2546                        	.endblock	425
  2547             00000022   L88	equ	34
  2548             00000011   L89	equ	17
  2549                        	ends
  2550                        	efunc
  2551                        	.endfunc	425,17,34
  2552                        	.line	425
  2553                        ;
  2554                        ;int k_point_in_list(int x,int y,PCLICKABLE clicka
                    bleList,int cSize)
  2555                        ;{
  2556                        	.line	427
  2557                        	.line	428
  2558                        	code
  2559                        	xdef	~~k_point_in_list
  2560                        	func
  2561                        	.function	428
  2562                        ~~k_point_in_list:
  2563                        	longa	on
  2564                        	longi	on
  2565 00:0A23: 3B           	tsc
  2566 00:0A24: 38           	sec
  2567 00:0A25: E9 14 00     	sbc	#L116
  2568 00:0A28: 1B           	tcs
  2569 00:0A29: 0B           	phd
  2570 00:0A2A: 5B           	tcd
  2571             00000004   x_0	set	4
  Wed Aug 14 2019 13:34                                                Page 47


  2572             00000006   y_0	set	6
  2573             00000008   clickableList_0	set	8
  2574             0000000C   cSize_0	set	12
  2575                        	.block	428
  2576                        ;	RECT r;
  2577                        ;	int i = 0;
  2578                        ;	int index = -1;
  2579                        ;	
  2580                        ;	for(i=0;i<cSize;i++)
  2581             00000000   r_1	set	0
  2582             00000008   i_1	set	8
  2583             0000000A   index_1	set	10
  2584                        	.sym	r,0,10,1,64,7
  2585                        	.sym	i,8,5,1,16
  2586                        	.sym	index,10,5,1,16
  2587                        	.sym	x,4,5,6,16
  2588                        	.sym	y,6,5,6,16
  2589                        	.sym	clickableList,8,138,6,32,11
  2590                        	.sym	cSize,12,5,6,16
  2591 00:0A2B: 64 11        	stz	<L117+i_1
  2592 00:0A2D: A9 FF FF     	lda	#$ffff
  2593 00:0A30: 85 13        	sta	<L117+index_1
  2594                        	.line	433
  2595 00:0A32: 64 11        	stz	<L117+i_1
  2596 00:0A34: 82 99 00     	brl	L10039
  2597                        L10038:
  2598                        ;	{
  2599                        	.line	434
  2600                        ;		r = clickableList[i].area;
  2601                        	.line	435
  2602 00:0A37: A0 00 00     	ldy	#$0
  2603 00:0A3A: A5 11        	lda	<L117+i_1
  2604 00:0A3C: 10 01        	bpl	L119
  2605 00:0A3E: 88           	dey
  2606                        L119:
  2607 00:0A3F: 85 01        	sta	<R0
  2608 00:0A41: 84 03        	sty	<R0+2
  2609 00:0A43: F4 00 00     	pea	#^$a
  2610 00:0A46: F4 0A 00     	pea	#<$a
  2611 00:0A49: D4 03        	pei	<R0+2
  2612 00:0A4B: D4 01        	pei	<R0
  2613                        	xref	~~~lmul
  2614 00:0A4D: 22 xx xx xx  	jsl	~~~lmul
  2615 00:0A51: 85 01        	sta	<R0
  2616 00:0A53: 86 03        	stx	<R0+2
  2617 00:0A55: 18           	clc
  2618 00:0A56: A5 1C        	lda	<L116+clickableList_0
  2619 00:0A58: 65 01        	adc	<R0
  2620 00:0A5A: 85 05        	sta	<R1
  2621 00:0A5C: A5 1E        	lda	<L116+clickableList_0+2
  2622 00:0A5E: 65 03        	adc	<R0+2
  2623 00:0A60: 85 07        	sta	<R1+2
  2624 00:0A62: D4 07        	pei	<R1+2
  2625 00:0A64: D4 05        	pei	<R1
  2626 00:0A66: 18           	clc
  2627 00:0A67: 7B           	tdc
  2628 00:0A68: 69 09 00     	adc	#<L117+r_1
  2629 00:0A6B: 85 01        	sta	<R0
  Wed Aug 14 2019 13:34                                                Page 48


  2630 00:0A6D: A9 00 00     	lda	#$0
  2631 00:0A70: 85 03        	sta	<R0+2
  2632 00:0A72: D4 03        	pei	<R0+2
  2633 00:0A74: D4 01        	pei	<R0
  2634 00:0A76: A9 08 00     	lda	#$8
  2635                        	xref	~~~fmov
  2636 00:0A79: 22 xx xx xx  	jsl	~~~fmov
  2637                        ;		if(x >=r.x && x<(r.x+r.width))
  2638                        	.line	436
  2639                        ;		{
  2640 00:0A7D: 38           	sec
  2641 00:0A7E: A5 18        	lda	<L116+x_0
  2642 00:0A80: E5 09        	sbc	<L117+r_1
  2643 00:0A82: 70 03        	bvs	L120
  2644 00:0A84: 49 00 80     	eor	#$8000
  2645                        L120:
  2646 00:0A87: 30 03        	bmi	L121
  2647 00:0A89: 82 42 00     	brl	L10040
  2648                        L121:
  2649 00:0A8C: 18           	clc
  2650 00:0A8D: A5 09        	lda	<L117+r_1
  2651 00:0A8F: 65 0D        	adc	<L117+r_1+4
  2652 00:0A91: 85 01        	sta	<R0
  2653 00:0A93: 38           	sec
  2654 00:0A94: A5 18        	lda	<L116+x_0
  2655 00:0A96: E5 01        	sbc	<R0
  2656 00:0A98: 70 03        	bvs	L122
  2657 00:0A9A: 49 00 80     	eor	#$8000
  2658                        L122:
  2659 00:0A9D: 10 03        	bpl	L123
  2660 00:0A9F: 82 2C 00     	brl	L10040
  2661                        L123:
  2662                        	.line	437
  2663                        ;			if(y >=r.y && y<(r.y+r.height))
  2664                        	.line	438
  2665                        ;			{
  2666 00:0AA2: 38           	sec
  2667 00:0AA3: A5 1A        	lda	<L116+y_0
  2668 00:0AA5: E5 0B        	sbc	<L117+r_1+2
  2669 00:0AA7: 70 03        	bvs	L124
  2670 00:0AA9: 49 00 80     	eor	#$8000
  2671                        L124:
  2672 00:0AAC: 30 03        	bmi	L125
  2673 00:0AAE: 82 1D 00     	brl	L10041
  2674                        L125:
  2675 00:0AB1: 18           	clc
  2676 00:0AB2: A5 0B        	lda	<L117+r_1+2
  2677 00:0AB4: 65 0F        	adc	<L117+r_1+6
  2678 00:0AB6: 85 01        	sta	<R0
  2679 00:0AB8: 38           	sec
  2680 00:0AB9: A5 1A        	lda	<L116+y_0
  2681 00:0ABB: E5 01        	sbc	<R0
  2682 00:0ABD: 70 03        	bvs	L126
  2683 00:0ABF: 49 00 80     	eor	#$8000
  2684                        L126:
  2685 00:0AC2: 10 03        	bpl	L127
  2686 00:0AC4: 82 07 00     	brl	L10041
  2687                        L127:
  Wed Aug 14 2019 13:34                                                Page 49


  2688                        	.line	439
  2689                        ;				index = i;
  2690                        	.line	440
  2691 00:0AC7: A5 11        	lda	<L117+i_1
  2692 00:0AC9: 85 13        	sta	<L117+index_1
  2693                        ;				//clickableList[i].depth
                     = 1;	
  2694                        ;				break;
  2695                        	.line	442
  2696 00:0ACB: 82 11 00     	brl	L10037
  2697                        ;			}
  2698                        	.line	443
  2699                        ;		}	
  2700                        L10041:
  2701                        	.line	444
  2702                        ;	}
  2703                        L10040:
  2704                        	.line	445
  2705                        L10036:
  2706 00:0ACE: E6 11        	inc	<L117+i_1
  2707                        L10039:
  2708 00:0AD0: 38           	sec
  2709 00:0AD1: A5 11        	lda	<L117+i_1
  2710 00:0AD3: E5 20        	sbc	<L116+cSize_0
  2711 00:0AD5: 70 03        	bvs	L128
  2712 00:0AD7: 49 00 80     	eor	#$8000
  2713                        L128:
  2714 00:0ADA: 30 03        	bmi	L129
  2715 00:0ADC: 82 58 FF     	brl	L10038
  2716                        L129:
  2717                        L10037:
  2718                        ;
  2719                        ;	return index;
  2720                        	.line	447
  2721 00:0ADF: A5 13        	lda	<L117+index_1
  2722                        L130:
  2723 00:0AE1: A8           	tay
  2724 00:0AE2: A5 16        	lda	<L116+2
  2725 00:0AE4: 85 20        	sta	<L116+2+10
  2726 00:0AE6: A5 15        	lda	<L116+1
  2727 00:0AE8: 85 1F        	sta	<L116+1+10
  2728 00:0AEA: 2B           	pld
  2729 00:0AEB: 3B           	tsc
  2730 00:0AEC: 18           	clc
  2731 00:0AED: 69 1E 00     	adc	#L116+10
  2732 00:0AF0: 1B           	tcs
  2733 00:0AF1: 98           	tya
  2734 00:0AF2: 6B           	rtl
  2735                        ;}
  2736                        	.line	448
  2737                        	.endblock	448
  2738             00000014   L116	equ	20
  2739             00000009   L117	equ	9
  2740                        	ends
  2741                        	efunc
  2742                        	.endfunc	448,9,20
  2743                        	.line	448
  2744                        ;
  Wed Aug 14 2019 13:34                                                Page 50


  2745                        ;
  2746                        ;void k_test_bitmap_drawing_sd(void)
  2747                        ;{
  2748                        	.line	451
  2749                        	.line	452
  2750                        	code
  2751                        	xdef	~~k_test_bitmap_drawing_sd
  2752                        	func
  2753                        	.function	452
  2754                        ~~k_test_bitmap_drawing_sd:
  2755                        	longa	on
  2756                        	longi	on
  2757 00:0AF3: 3B           	tsc
  2758 00:0AF4: 38           	sec
  2759 00:0AF5: E9 5A 00     	sbc	#L131
  2760 00:0AF8: 1B           	tcs
  2761 00:0AF9: 0B           	phd
  2762 00:0AFA: 5B           	tcd
  2763                        	.block	452
  2764                        ;	int bx = 0;
  2765                        ;	int by = 0;
  2766                        ;	int bw = 0;
  2767                        ;	int bh = 0;
  2768                        ;	int mx = -1;
  2769                        ;	int my = -1;
  2770                        ;	int mb = -1;
  2771                        ;	long px = 0;
  2772                        ;	int lx = -1;
  2773                        ;	int ly = -1;
  2774                        ;	int lk = -1;
  2775                        ;	int tx = -1;
  2776                        ;	int ty = -1;
  2777                        ;	int i;
  2778                        ;	int delay = 500;
  2779                        ;	char bExit = 0;
  2780                        ;	int pos = 0;
  2781                        ;	char dcolor = 15;
  2782                        ;	int fcolor = 15;
  2783                        ;	int bcolor = 0;
  2784                        ;	char far convert[16];
  2785                        ;	char far *pitoa = "                ";
  2786                        ;	int mbState = 0;
  2787                        ;	HANDLE hWin;
  2788                        ;	RECT rect;
  2789                        ;	int debug = 0;
  2790                        ;	int far *pmx = malloc(sizeof(int));
  2791                        ;	char far *pstr  = (char far*)malloc(32);
  2792                        ;
  2793                        ;	unsigned long tick = 0;
  2794                        ;	unsigned long ctick = 0;
  2795                        ;
  2796                        ;	memset(convert,0,16);
  2797             00000000   bx_1	set	0
  2798             00000002   by_1	set	2
  2799             00000004   bw_1	set	4
  2800             00000006   bh_1	set	6
  2801             00000008   mx_1	set	8
  2802             0000000A   my_1	set	10
  Wed Aug 14 2019 13:34                                                Page 51


  2803             0000000C   mb_1	set	12
  2804             0000000E   px_1	set	14
  2805             00000012   lx_1	set	18
  2806             00000014   ly_1	set	20
  2807             00000016   lk_1	set	22
  2808             00000018   tx_1	set	24
  2809             0000001A   ty_1	set	26
  2810             0000001C   i_1	set	28
  2811             0000001E   delay_1	set	30
  2812             00000020   bExit_1	set	32
  2813             00000021   pos_1	set	33
  2814             00000023   dcolor_1	set	35
  2815             00000024   fcolor_1	set	36
  2816             00000026   bcolor_1	set	38
  2817             00000028   convert_1	set	40
  2818             00000038   pitoa_1	set	56
  2819             0000003C   mbState_1	set	60
  2820             0000003E   hWin_1	set	62
  2821             00000040   rect_1	set	64
  2822             00000048   debug_1	set	72
  2823             0000004A   pmx_1	set	74
  2824             0000004E   pstr_1	set	78
  2825             00000052   tick_1	set	82
  2826             00000056   ctick_1	set	86
  2827                        	.sym	bx,0,5,1,16
  2828                        	.sym	by,2,5,1,16
  2829                        	.sym	bw,4,5,1,16
  2830                        	.sym	bh,6,5,1,16
  2831                        	.sym	mx,8,5,1,16
  2832                        	.sym	my,10,5,1,16
  2833                        	.sym	mb,12,5,1,16
  2834                        	.sym	px,14,7,1,32
  2835                        	.sym	lx,18,5,1,16
  2836                        	.sym	ly,20,5,1,16
  2837                        	.sym	lk,22,5,1,16
  2838                        	.sym	tx,24,5,1,16
  2839                        	.sym	ty,26,5,1,16
  2840                        	.sym	i,28,5,1,16
  2841                        	.sym	delay,30,5,1,16
  2842                        	.sym	bExit,32,14,1,8
  2843                        	.sym	pos,33,5,1,16
  2844                        	.sym	dcolor,35,14,1,8
  2845                        	.sym	fcolor,36,5,1,16
  2846                        	.sym	bcolor,38,5,1,16
  2847                        	.sym	convert,40,110,1,0,16
  2848                        	.sym	pitoa,56,142,1,32
  2849                        	.sym	mbState,60,5,1,16
  2850                        	.sym	hWin,62,5,1,16
  2851                        	.sym	rect,64,10,1,64,7
  2852                        	.sym	debug,72,5,1,16
  2853                        	.sym	pmx,74,133,1,32
  2854                        	.sym	pstr,78,142,1,32
  2855                        	.sym	tick,82,18,1,32
  2856                        	.sym	ctick,86,18,1,32
  2857 00:0AFB: 64 01        	stz	<L132+bx_1
  2858 00:0AFD: 64 03        	stz	<L132+by_1
  2859 00:0AFF: 64 05        	stz	<L132+bw_1
  2860 00:0B01: 64 07        	stz	<L132+bh_1
  Wed Aug 14 2019 13:34                                                Page 52


  2861 00:0B03: A9 FF FF     	lda	#$ffff
  2862 00:0B06: 85 09        	sta	<L132+mx_1
  2863 00:0B08: A9 FF FF     	lda	#$ffff
  2864 00:0B0B: 85 0B        	sta	<L132+my_1
  2865 00:0B0D: A9 FF FF     	lda	#$ffff
  2866 00:0B10: 85 0D        	sta	<L132+mb_1
  2867 00:0B12: 64 0F        	stz	<L132+px_1
  2868 00:0B14: 64 11        	stz	<L132+px_1+2
  2869 00:0B16: A9 FF FF     	lda	#$ffff
  2870 00:0B19: 85 13        	sta	<L132+lx_1
  2871 00:0B1B: A9 FF FF     	lda	#$ffff
  2872 00:0B1E: 85 15        	sta	<L132+ly_1
  2873 00:0B20: A9 FF FF     	lda	#$ffff
  2874 00:0B23: 85 17        	sta	<L132+lk_1
  2875 00:0B25: A9 FF FF     	lda	#$ffff
  2876 00:0B28: 85 19        	sta	<L132+tx_1
  2877 00:0B2A: A9 FF FF     	lda	#$ffff
  2878 00:0B2D: 85 1B        	sta	<L132+ty_1
  2879 00:0B2F: A9 F4 01     	lda	#$1f4
  2880 00:0B32: 85 1F        	sta	<L132+delay_1
  2881 00:0B34: E2 20        	sep	#$20
  2882                        	longa	off
  2883 00:0B36: 64 21        	stz	<L132+bExit_1
  2884 00:0B38: C2 20        	rep	#$20
  2885                        	longa	on
  2886 00:0B3A: 64 22        	stz	<L132+pos_1
  2887 00:0B3C: E2 20        	sep	#$20
  2888                        	longa	off
  2889 00:0B3E: A9 0F        	lda	#$f
  2890 00:0B40: 85 24        	sta	<L132+dcolor_1
  2891 00:0B42: C2 20        	rep	#$20
  2892                        	longa	on
  2893 00:0B44: A9 0F 00     	lda	#$f
  2894 00:0B47: 85 25        	sta	<L132+fcolor_1
  2895 00:0B49: 64 27        	stz	<L132+bcolor_1
  2896 00:0B4B: A9 xx xx     	lda	#<L1
  2897 00:0B4E: 85 39        	sta	<L132+pitoa_1
  2898 00:0B50: A9 xx xx     	lda	#^L1
  2899 00:0B53: 85 3B        	sta	<L132+pitoa_1+2
  2900 00:0B55: 64 3D        	stz	<L132+mbState_1
  2901 00:0B57: 64 49        	stz	<L132+debug_1
  2902 00:0B59: F4 02 00     	pea	#<$2
  2903 00:0B5C: 22 xx xx xx  	jsl	~~malloc
  2904 00:0B60: 85 4B        	sta	<L132+pmx_1
  2905 00:0B62: 86 4D        	stx	<L132+pmx_1+2
  2906 00:0B64: F4 20 00     	pea	#<$20
  2907 00:0B67: 22 xx xx xx  	jsl	~~malloc
  2908 00:0B6B: 85 4F        	sta	<L132+pstr_1
  2909 00:0B6D: 86 51        	stx	<L132+pstr_1+2
  2910 00:0B6F: 64 53        	stz	<L132+tick_1
  2911 00:0B71: 64 55        	stz	<L132+tick_1+2
  2912 00:0B73: 64 57        	stz	<L132+ctick_1
  2913 00:0B75: 64 59        	stz	<L132+ctick_1+2
  2914                        	.line	485
  2915 00:0B77: F4 10 00     	pea	#<$10
  2916 00:0B7A: F4 00 00     	pea	#<$0
  2917 00:0B7D: F4 00 00     	pea	#0
  2918 00:0B80: 18           	clc
  Wed Aug 14 2019 13:34                                                Page 53


  2919 00:0B81: 7B           	tdc
  2920 00:0B82: 69 29 00     	adc	#<L132+convert_1
  2921 00:0B85: 48           	pha
  2922 00:0B86: 22 xx xx xx  	jsl	~~memset
  2923                        ;	memset(pstr,0,32);
  2924                        	.line	486
  2925 00:0B8A: F4 20 00     	pea	#<$20
  2926 00:0B8D: F4 00 00     	pea	#<$0
  2927 00:0B90: D4 51        	pei	<L132+pstr_1+2
  2928 00:0B92: D4 4F        	pei	<L132+pstr_1
  2929 00:0B94: 22 xx xx xx  	jsl	~~memset
  2930                        ;	
  2931                        ;	
  2932                        ;	//FXOS_MOUSE_CTL[0] = 0xFF;
  2933                        ;	
  2934                        ;	/*
  2935                        ;	k_put_string(1,1,pstr,15,0);
  2936                        ;	k_put_string(1,2,"Y:",15,0);
  2937                        ;	k_put_string(1,3,"B:",15,0);
  2938                        ;	k_put_string(1,4,"K:",15,0);
  2939                        ;	k_put_string(1,5,"J:",15,0);	
  2940                        ;	k_put_string(1,6,"M:",15,0);
  2941                        ;	*/
  2942                        ;	mbState = 0;
  2943                        	.line	499
  2944 00:0B98: 64 3D        	stz	<L132+mbState_1
  2945                        ;	
  2946                        ;	//rect.x = 5;
  2947                        ;	//rect.y = 5;
  2948                        ;	//rect.height = 35;
  2949                        ;	//rect.width = 45;			
  2950                        ;	//k_create_text_window(&rect,"CONSOLE WINDOW",&h
                    Win);
  2951                        ;	k_put_string(0,0,"k_sd_init 1",15,0);
  2952                        	.line	506
  2953 00:0B9A: F4 00 00     	pea	#<$0
  2954 00:0B9D: F4 0F 00     	pea	#<$f
  2955 00:0BA0: F4 xx xx     	pea	#^L1+17
  2956 00:0BA3: F4 xx xx     	pea	#<L1+17
  2957 00:0BA6: F4 00 00     	pea	#<$0
  2958 00:0BA9: F4 00 00     	pea	#<$0
  2959 00:0BAC: 22 xx xx xx  	jsl	~~k_put_string
  2960                        ;	k_print("C256 Version:BEFORE\r");	
  2961                        	.line	507
  2962 00:0BB0: F4 xx xx     	pea	#^L1+29
  2963 00:0BB3: F4 xx xx     	pea	#<L1+29
  2964 00:0BB6: 22 xx xx xx  	jsl	~~k_print
  2965                        ;	k_put_string(0,0,"k_sd_init",15,0);
  2966                        	.line	508
  2967 00:0BBA: F4 00 00     	pea	#<$0
  2968 00:0BBD: F4 0F 00     	pea	#<$f
  2969 00:0BC0: F4 xx xx     	pea	#^L1+50
  2970 00:0BC3: F4 xx xx     	pea	#<L1+50
  2971 00:0BC6: F4 00 00     	pea	#<$0
  2972 00:0BC9: F4 00 00     	pea	#<$0
  2973 00:0BCC: 22 xx xx xx  	jsl	~~k_put_string
  2974                        ;	k_print("C256 Version:MIDDLE\r");	
  2975                        	.line	509
  Wed Aug 14 2019 13:34                                                Page 54


  2976 00:0BD0: F4 xx xx     	pea	#^L1+60
  2977 00:0BD3: F4 xx xx     	pea	#<L1+60
  2978 00:0BD6: 22 xx xx xx  	jsl	~~k_print
  2979                        ;	//k_sd_init();
  2980                        ;	k_put_string(0,0,"k_sd_init 2",15,0);
  2981                        	.line	511
  2982 00:0BDA: F4 00 00     	pea	#<$0
  2983 00:0BDD: F4 0F 00     	pea	#<$f
  2984 00:0BE0: F4 xx xx     	pea	#^L1+81
  2985 00:0BE3: F4 xx xx     	pea	#<L1+81
  2986 00:0BE6: F4 00 00     	pea	#<$0
  2987 00:0BE9: F4 00 00     	pea	#<$0
  2988 00:0BEC: 22 xx xx xx  	jsl	~~k_put_string
  2989                        ;	
  2990                        ;	init_sd_card();
  2991                        	.line	513
  2992 00:0BF0: 22 xx xx xx  	jsl	~~init_sd_card
  2993                        ;	
  2994                        ;	k_put_string(0,0,"k_sd_init 3",15,0);
  2995                        	.line	515
  2996 00:0BF4: F4 00 00     	pea	#<$0
  2997 00:0BF7: F4 0F 00     	pea	#<$f
  2998 00:0BFA: F4 xx xx     	pea	#^L1+93
  2999 00:0BFD: F4 xx xx     	pea	#<L1+93
  3000 00:0C00: F4 00 00     	pea	#<$0
  3001 00:0C03: F4 00 00     	pea	#<$0
  3002 00:0C06: 22 xx xx xx  	jsl	~~k_put_string
  3003                        ;	
  3004                        ;	k_print("C256 Version:AFTER\r");
  3005                        	.line	517
  3006 00:0C0A: F4 xx xx     	pea	#^L1+105
  3007 00:0C0D: F4 xx xx     	pea	#<L1+105
  3008 00:0C10: 22 xx xx xx  	jsl	~~k_print
  3009                        ;
  3010                        ;	//k_put_string(0,0,"k_sd_dir",15,0);
  3011                        ;	//sd_card_dir();
  3012                        ;	
  3013                        ;	pos = 0;
  3014                        	.line	522
  3015 00:0C14: 64 22        	stz	<L132+pos_1
  3016                        ;	while(1)
  3017                        	.line	523
  3018                        L10042:
  3019                        ;	{
  3020                        	.line	524
  3021                        ;		#asm
  3022                        	.line	525
  3023                        ;			WAI
  3024                        ;		#endasm
  3025                        	asmstart
  3026 00:0C16: CB           			WAI
  3027                        	asmend
  3028                        ;		//asm sei;
  3029                        ;		
  3030                        ;		//asm cli;
  3031                        ;	}	
  3032                        	.line	531
  3033 00:0C17: 82 FC FF     	brl	L10042
  Wed Aug 14 2019 13:34                                                Page 55


  3034                        ;	return;
  3035                        	.line	532
  3036                        L134:
  3037 00:0C1A: 2B           	pld
  3038 00:0C1B: 3B           	tsc
  3039 00:0C1C: 18           	clc
  3040 00:0C1D: 69 5A 00     	adc	#L131
  3041 00:0C20: 1B           	tcs
  3042 00:0C21: 6B           	rtl
  3043                        ;}
  3044                        	.line	533
  3045                        	.endblock	533
  3046             0000005A   L131	equ	90
  3047             00000001   L132	equ	1
  3048                        	ends
  3049                        	efunc
  3050                        	.endfunc	533,1,90
  3051                        	.line	533
  3052                        	data
  3053                        L1:
  3054 00:0000: 20 20 20 20  	db	$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,
                    $20,$20,$20,$20,$20
       00:0004: 20 20 20 20 
       00:0008: 20 20 20 20 
       00:000C: 20 20 20 
  3055 00:000F: 20 00 6B 5F  	db	$20,$00,$6B,$5F,$73,$64,$5F,$69,$6E,$69,
                    $74,$20,$31,$00,$43
       00:0013: 73 64 5F 69 
       00:0017: 6E 69 74 20 
       00:001B: 31 00 43 
  3056 00:001E: 32 35 36 20  	db	$32,$35,$36,$20,$56,$65,$72,$73,$69,$6F,
                    $6E,$3A,$42,$45,$46
       00:0022: 56 65 72 73 
       00:0026: 69 6F 6E 3A 
       00:002A: 42 45 46 
  3057 00:002D: 4F 52 45 0D  	db	$4F,$52,$45,$0D,$00,$6B,$5F,$73,$64,$5F,
                    $69,$6E,$69,$74,$00
       00:0031: 00 6B 5F 73 
       00:0035: 64 5F 69 6E 
       00:0039: 69 74 00 
  3058 00:003C: 43 32 35 36  	db	$43,$32,$35,$36,$20,$56,$65,$72,$73,$69,
                    $6F,$6E,$3A,$4D,$49
       00:0040: 20 56 65 72 
       00:0044: 73 69 6F 6E 
       00:0048: 3A 4D 49 
  3059 00:004B: 44 44 4C 45  	db	$44,$44,$4C,$45,$0D,$00,$6B,$5F,$73,$64,
                    $5F,$69,$6E,$69,$74
       00:004F: 0D 00 6B 5F 
       00:0053: 73 64 5F 69 
       00:0057: 6E 69 74 
  3060 00:005A: 20 32 00 6B  	db	$20,$32,$00,$6B,$5F,$73,$64,$5F,$69,$6E,
                    $69,$74,$20,$33,$00
       00:005E: 5F 73 64 5F 
       00:0062: 69 6E 69 74 
       00:0066: 20 33 00 
  3061 00:0069: 43 32 35 36  	db	$43,$32,$35,$36,$20,$56,$65,$72,$73,$69,
                    $6F,$6E,$3A,$41,$46
       00:006D: 20 56 65 72 
  Wed Aug 14 2019 13:34                                                Page 56


       00:0071: 73 69 6F 6E 
       00:0075: 3A 41 46 
  3062 00:0078: 54 45 52 0D  	db	$54,$45,$52,$0D,$00
       00:007C: 00 
  3063 00:007D:              	ends
  3064                        ;
  3065                        ;//
  3066                        ;// REAL WORKING VERSION
  3067                        ;//
  3068                        ;void k_test_bitmap_drawing(void)
  3069                        ;{
  3070                        	.line	538
  3071                        	.line	539
  3072                        	code
  3073                        	xdef	~~k_test_bitmap_drawing
  3074                        	func
  3075                        	.function	539
  3076                        ~~k_test_bitmap_drawing:
  3077                        	longa	on
  3078                        	longi	on
  3079 00:0C22: 3B           	tsc
  3080 00:0C23: 38           	sec
  3081 00:0C24: E9 8B 00     	sbc	#L136
  3082 00:0C27: 1B           	tcs
  3083 00:0C28: 0B           	phd
  3084 00:0C29: 5B           	tcd
  3085                        	.block	539
  3086                        ;	char menuOn = 0;
  3087                        ;	
  3088                        ;	int bx = 0;
  3089                        ;	int by = 0;
  3090                        ;	int bw = 0;
  3091                        ;	int bh = 0;
  3092                        ;	int mx = -1;
  3093                        ;	int my = -1;
  3094                        ;	int mb = -1;
  3095                        ;	int lb = -1;
  3096                        ;	long px = 0;
  3097                        ;	int lx = -1;
  3098                        ;	int ly = -1;
  3099                        ;	int lk = -1;
  3100                        ;	int tx = -1;
  3101                        ;	int ty = -1;
  3102                        ;	int area = 0;
  3103                        ;	int i;
  3104                        ;	int delay = 500;
  3105                        ;	char bExit = 0;
  3106                        ;	int pos = 0;
  3107                        ;	char dcolor = 15;
  3108                        ;	int fcolor = 15;
  3109                        ;	int bcolor = 0;
  3110                        ;	char far convert[16];
  3111                        ;	char far *pitoa = "                ";
  3112                        ;	int mbState = 0;
  3113                        ;	HANDLE hWin;
  3114                        ;	PMENU menu = NULL;
  3115                        ;	RECT rect;
  3116                        ;	int debug = 0;
  Wed Aug 14 2019 13:34                                                Page 57


  3117                        ;	int far *pmx = malloc(sizeof(int));
  3118                        ;	char far *pstr  = (char far*)malloc(32);
  3119                        ;	PMENU ctxMenu = NULL;
  3120                        ;	char far* menuTitle = "C256 FX-DRAW";
  3121                        ;	char far* captions[] = {"Open..","Save","SaveAs.
                    .","Close",NULL};
  3122                        	data
  3123                        L139:
  3124 00:007D: xx xx xx xx  	dl	L135+30
  3125 00:0081: xx xx xx xx  	dl	L135+37
  3126 00:0085: xx xx xx xx  	dl	L135+42
  3127 00:0089: xx xx xx xx  	dl	L135+51
  3128 00:008D: 00 00 00 00  	dl	$0
  3129 00:0091:              	ends
  3130                        ;	unsigned long tick = 0;
  3131                        ;	unsigned long ctick = 0;
  3132                        ;
  3133                        ;	memset(convert,0,16);
  3134             00000000   menuOn_1	set	0
  3135             00000001   bx_1	set	1
  3136             00000003   by_1	set	3
  3137             00000005   bw_1	set	5
  3138             00000007   bh_1	set	7
  3139             00000009   mx_1	set	9
  3140             0000000B   my_1	set	11
  3141             0000000D   mb_1	set	13
  3142             0000000F   lb_1	set	15
  3143             00000011   px_1	set	17
  3144             00000015   lx_1	set	21
  3145             00000017   ly_1	set	23
  3146             00000019   lk_1	set	25
  3147             0000001B   tx_1	set	27
  3148             0000001D   ty_1	set	29
  3149             0000001F   area_1	set	31
  3150             00000021   i_1	set	33
  3151             00000023   delay_1	set	35
  3152             00000025   bExit_1	set	37
  3153             00000026   pos_1	set	38
  3154             00000028   dcolor_1	set	40
  3155             00000029   fcolor_1	set	41
  3156             0000002B   bcolor_1	set	43
  3157             0000002D   convert_1	set	45
  3158             0000003D   pitoa_1	set	61
  3159             00000041   mbState_1	set	65
  3160             00000043   hWin_1	set	67
  3161             00000045   menu_1	set	69
  3162             00000049   rect_1	set	73
  3163             00000051   debug_1	set	81
  3164             00000053   pmx_1	set	83
  3165             00000057   pstr_1	set	87
  3166             0000005B   ctxMenu_1	set	91
  3167             0000005F   menuTitle_1	set	95
  3168             00000063   captions_1	set	99
  3169             00000077   tick_1	set	119
  3170             0000007B   ctick_1	set	123
  3171                        	.sym	menuOn,0,14,1,8
  3172                        	.sym	bx,1,5,1,16
  3173                        	.sym	by,3,5,1,16
  Wed Aug 14 2019 13:34                                                Page 58


  3174                        	.sym	bw,5,5,1,16
  3175                        	.sym	bh,7,5,1,16
  3176                        	.sym	mx,9,5,1,16
  3177                        	.sym	my,11,5,1,16
  3178                        	.sym	mb,13,5,1,16
  3179                        	.sym	lb,15,5,1,16
  3180                        	.sym	px,17,7,1,32
  3181                        	.sym	lx,21,5,1,16
  3182                        	.sym	ly,23,5,1,16
  3183                        	.sym	lk,25,5,1,16
  3184                        	.sym	tx,27,5,1,16
  3185                        	.sym	ty,29,5,1,16
  3186                        	.sym	area,31,5,1,16
  3187                        	.sym	i,33,5,1,16
  3188                        	.sym	delay,35,5,1,16
  3189                        	.sym	bExit,37,14,1,8
  3190                        	.sym	pos,38,5,1,16
  3191                        	.sym	dcolor,40,14,1,8
  3192                        	.sym	fcolor,41,5,1,16
  3193                        	.sym	bcolor,43,5,1,16
  3194                        	.sym	convert,45,110,1,0,16
  3195                        	.sym	pitoa,61,142,1,32
  3196                        	.sym	mbState,65,5,1,16
  3197                        	.sym	hWin,67,5,1,16
  3198                        	.sym	menu,69,138,1,32,12
  3199                        	.sym	rect,73,10,1,64,7
  3200                        	.sym	debug,81,5,1,16
  3201                        	.sym	pmx,83,133,1,32
  3202                        	.sym	pstr,87,142,1,32
  3203                        	.sym	ctxMenu,91,138,1,32,12
  3204                        	.sym	menuTitle,95,142,1,32
  3205                        	.sym	captions,99,1134,1,32,5
  3206                        	.sym	tick,119,18,1,32
  3207                        	.sym	ctick,123,18,1,32
  3208 00:0C2A: E2 20        	sep	#$20
  3209                        	longa	off
  3210 00:0C2C: 64 0D        	stz	<L137+menuOn_1
  3211 00:0C2E: C2 20        	rep	#$20
  3212                        	longa	on
  3213 00:0C30: 64 0E        	stz	<L137+bx_1
  3214 00:0C32: 64 10        	stz	<L137+by_1
  3215 00:0C34: 64 12        	stz	<L137+bw_1
  3216 00:0C36: 64 14        	stz	<L137+bh_1
  3217 00:0C38: A9 FF FF     	lda	#$ffff
  3218 00:0C3B: 85 16        	sta	<L137+mx_1
  3219 00:0C3D: A9 FF FF     	lda	#$ffff
  3220 00:0C40: 85 18        	sta	<L137+my_1
  3221 00:0C42: A9 FF FF     	lda	#$ffff
  3222 00:0C45: 85 1A        	sta	<L137+mb_1
  3223 00:0C47: A9 FF FF     	lda	#$ffff
  3224 00:0C4A: 85 1C        	sta	<L137+lb_1
  3225 00:0C4C: 64 1E        	stz	<L137+px_1
  3226 00:0C4E: 64 20        	stz	<L137+px_1+2
  3227 00:0C50: A9 FF FF     	lda	#$ffff
  3228 00:0C53: 85 22        	sta	<L137+lx_1
  3229 00:0C55: A9 FF FF     	lda	#$ffff
  3230 00:0C58: 85 24        	sta	<L137+ly_1
  3231 00:0C5A: A9 FF FF     	lda	#$ffff
  Wed Aug 14 2019 13:34                                                Page 59


  3232 00:0C5D: 85 26        	sta	<L137+lk_1
  3233 00:0C5F: A9 FF FF     	lda	#$ffff
  3234 00:0C62: 85 28        	sta	<L137+tx_1
  3235 00:0C64: A9 FF FF     	lda	#$ffff
  3236 00:0C67: 85 2A        	sta	<L137+ty_1
  3237 00:0C69: 64 2C        	stz	<L137+area_1
  3238 00:0C6B: A9 F4 01     	lda	#$1f4
  3239 00:0C6E: 85 30        	sta	<L137+delay_1
  3240 00:0C70: E2 20        	sep	#$20
  3241                        	longa	off
  3242 00:0C72: 64 32        	stz	<L137+bExit_1
  3243 00:0C74: C2 20        	rep	#$20
  3244                        	longa	on
  3245 00:0C76: 64 33        	stz	<L137+pos_1
  3246 00:0C78: E2 20        	sep	#$20
  3247                        	longa	off
  3248 00:0C7A: A9 0F        	lda	#$f
  3249 00:0C7C: 85 35        	sta	<L137+dcolor_1
  3250 00:0C7E: C2 20        	rep	#$20
  3251                        	longa	on
  3252 00:0C80: A9 0F 00     	lda	#$f
  3253 00:0C83: 85 36        	sta	<L137+fcolor_1
  3254 00:0C85: 64 38        	stz	<L137+bcolor_1
  3255 00:0C87: A9 xx xx     	lda	#<L135
  3256 00:0C8A: 85 4A        	sta	<L137+pitoa_1
  3257 00:0C8C: A9 xx xx     	lda	#^L135
  3258 00:0C8F: 85 4C        	sta	<L137+pitoa_1+2
  3259 00:0C91: 64 4E        	stz	<L137+mbState_1
  3260 00:0C93: 64 52        	stz	<L137+menu_1
  3261 00:0C95: 64 54        	stz	<L137+menu_1+2
  3262 00:0C97: 64 5E        	stz	<L137+debug_1
  3263 00:0C99: F4 02 00     	pea	#<$2
  3264 00:0C9C: 22 xx xx xx  	jsl	~~malloc
  3265 00:0CA0: 85 60        	sta	<L137+pmx_1
  3266 00:0CA2: 86 62        	stx	<L137+pmx_1+2
  3267 00:0CA4: F4 20 00     	pea	#<$20
  3268 00:0CA7: 22 xx xx xx  	jsl	~~malloc
  3269 00:0CAB: 85 64        	sta	<L137+pstr_1
  3270 00:0CAD: 86 66        	stx	<L137+pstr_1+2
  3271 00:0CAF: 64 68        	stz	<L137+ctxMenu_1
  3272 00:0CB1: 64 6A        	stz	<L137+ctxMenu_1+2
  3273 00:0CB3: A9 xx xx     	lda	#<L135+17
  3274 00:0CB6: 85 6C        	sta	<L137+menuTitle_1
  3275 00:0CB8: A9 xx xx     	lda	#^L135+17
  3276 00:0CBB: 85 6E        	sta	<L137+menuTitle_1+2
  3277 00:0CBD: F4 xx xx     	pea	#^L139
  3278 00:0CC0: F4 xx xx     	pea	#<L139
  3279 00:0CC3: 18           	clc
  3280 00:0CC4: 7B           	tdc
  3281 00:0CC5: 69 70 00     	adc	#<L137+captions_1
  3282 00:0CC8: 85 01        	sta	<R0
  3283 00:0CCA: A9 00 00     	lda	#$0
  3284 00:0CCD: 85 03        	sta	<R0+2
  3285 00:0CCF: D4 03        	pei	<R0+2
  3286 00:0CD1: D4 01        	pei	<R0
  3287 00:0CD3: A9 14 00     	lda	#$14
  3288                        	xref	~~~fmov
  3289 00:0CD6: 22 xx xx xx  	jsl	~~~fmov
  Wed Aug 14 2019 13:34                                                Page 60


  3290 00:0CDA: 64 84        	stz	<L137+tick_1
  3291 00:0CDC: 64 86        	stz	<L137+tick_1+2
  3292 00:0CDE: 64 88        	stz	<L137+ctick_1
  3293 00:0CE0: 64 8A        	stz	<L137+ctick_1+2
  3294                        	.line	579
  3295 00:0CE2: F4 10 00     	pea	#<$10
  3296 00:0CE5: F4 00 00     	pea	#<$0
  3297 00:0CE8: F4 00 00     	pea	#0
  3298 00:0CEB: 18           	clc
  3299 00:0CEC: 7B           	tdc
  3300 00:0CED: 69 3A 00     	adc	#<L137+convert_1
  3301 00:0CF0: 48           	pha
  3302 00:0CF1: 22 xx xx xx  	jsl	~~memset
  3303                        ;	memset(pstr,0,32);
  3304                        	.line	580
  3305 00:0CF5: F4 20 00     	pea	#<$20
  3306 00:0CF8: F4 00 00     	pea	#<$0
  3307 00:0CFB: D4 66        	pei	<L137+pstr_1+2
  3308 00:0CFD: D4 64        	pei	<L137+pstr_1
  3309 00:0CFF: 22 xx xx xx  	jsl	~~memset
  3310                        ;
  3311                        ;
  3312                        ;	clickList[0].area.x = 10;
  3313                        	.line	583
  3314 00:0D03: A9 0A 00     	lda	#$a
  3315 00:0D06: 8F xx xx xx  	sta	>~~clickList
  3316                        ;	clickList[0].area.y = 0;
  3317                        	.line	584
  3318 00:0D0A: A9 00 00     	lda	#$0
  3319 00:0D0D: 8F xx xx xx  	sta	>~~clickList+2
  3320                        ;	clickList[0].area.width = 20;
  3321                        	.line	585
  3322 00:0D11: A9 14 00     	lda	#$14
  3323 00:0D14: 8F xx xx xx  	sta	>~~clickList+4
  3324                        ;	clickList[0].area.height = 10;
  3325                        	.line	586
  3326 00:0D18: A9 0A 00     	lda	#$a
  3327 00:0D1B: 8F xx xx xx  	sta	>~~clickList+6
  3328                        ;	clickList[0].depth = 0;
  3329                        	.line	587
  3330 00:0D1F: E2 20        	sep	#$20
  3331                        	longa	off
  3332 00:0D21: A9 00        	lda	#$0
  3333 00:0D23: 8F xx xx xx  	sta	>~~clickList+9
  3334 00:0D27: C2 20        	rep	#$20
  3335                        	longa	on
  3336                        ;
  3337                        ;	clickList[1].area.x = 300;
  3338                        	.line	589
  3339 00:0D29: A9 2C 01     	lda	#$12c
  3340 00:0D2C: 8F xx xx xx  	sta	>~~clickList+10
  3341                        ;	clickList[1].area.y = 200;
  3342                        	.line	590
  3343 00:0D30: A9 C8 00     	lda	#$c8
  3344 00:0D33: 8F xx xx xx  	sta	>~~clickList+12
  3345                        ;	clickList[1].area.width = 200;
  3346                        	.line	591
  3347 00:0D37: A9 C8 00     	lda	#$c8
  Wed Aug 14 2019 13:34                                                Page 61


  3348 00:0D3A: 8F xx xx xx  	sta	>~~clickList+14
  3349                        ;	clickList[1].area.height = 100;
  3350                        	.line	592
  3351 00:0D3E: A9 64 00     	lda	#$64
  3352 00:0D41: 8F xx xx xx  	sta	>~~clickList+16
  3353                        ;	clickList[1].depth = 0;
  3354                        	.line	593
  3355 00:0D45: E2 20        	sep	#$20
  3356                        	longa	off
  3357 00:0D47: A9 00        	lda	#$0
  3358 00:0D49: 8F xx xx xx  	sta	>~~clickList+19
  3359 00:0D4D: C2 20        	rep	#$20
  3360                        	longa	on
  3361                        ;
  3362                        ;	clickList[2].area.x = 50;
  3363                        	.line	595
  3364 00:0D4F: A9 32 00     	lda	#$32
  3365 00:0D52: 8F xx xx xx  	sta	>~~clickList+20
  3366                        ;	clickList[2].area.y = 50;
  3367                        	.line	596
  3368 00:0D56: A9 32 00     	lda	#$32
  3369 00:0D59: 8F xx xx xx  	sta	>~~clickList+22
  3370                        ;	clickList[2].area.width = 150;
  3371                        	.line	597
  3372 00:0D5D: A9 96 00     	lda	#$96
  3373 00:0D60: 8F xx xx xx  	sta	>~~clickList+24
  3374                        ;	clickList[2].area.height = 200;
  3375                        	.line	598
  3376 00:0D64: A9 C8 00     	lda	#$c8
  3377 00:0D67: 8F xx xx xx  	sta	>~~clickList+26
  3378                        ;	clickList[2].depth = 0;
  3379                        	.line	599
  3380 00:0D6B: E2 20        	sep	#$20
  3381                        	longa	off
  3382 00:0D6D: A9 00        	lda	#$0
  3383 00:0D6F: 8F xx xx xx  	sta	>~~clickList+29
  3384 00:0D73: C2 20        	rep	#$20
  3385                        	longa	on
  3386                        ;
  3387                        ;	clickList[3].area.x = 300;
  3388                        	.line	601
  3389 00:0D75: A9 2C 01     	lda	#$12c
  3390 00:0D78: 8F xx xx xx  	sta	>~~clickList+30
  3391                        ;	clickList[3].area.y = 0;
  3392                        	.line	602
  3393 00:0D7C: A9 00 00     	lda	#$0
  3394 00:0D7F: 8F xx xx xx  	sta	>~~clickList+32
  3395                        ;	clickList[3].area.width = 20;
  3396                        	.line	603
  3397 00:0D83: A9 14 00     	lda	#$14
  3398 00:0D86: 8F xx xx xx  	sta	>~~clickList+34
  3399                        ;	clickList[3].area.height = 10;
  3400                        	.line	604
  3401 00:0D8A: A9 0A 00     	lda	#$a
  3402 00:0D8D: 8F xx xx xx  	sta	>~~clickList+36
  3403                        ;	clickList[3].depth = 0;
  3404                        	.line	605
  3405 00:0D91: E2 20        	sep	#$20
  Wed Aug 14 2019 13:34                                                Page 62


  3406                        	longa	off
  3407 00:0D93: A9 00        	lda	#$0
  3408 00:0D95: 8F xx xx xx  	sta	>~~clickList+39
  3409 00:0D99: C2 20        	rep	#$20
  3410                        	longa	on
  3411                        ;
  3412                        ;	clickList[4].area.x = 500;
  3413                        	.line	607
  3414 00:0D9B: A9 F4 01     	lda	#$1f4
  3415 00:0D9E: 8F xx xx xx  	sta	>~~clickList+40
  3416                        ;	clickList[4].area.y = 400;
  3417                        	.line	608
  3418 00:0DA2: A9 90 01     	lda	#$190
  3419 00:0DA5: 8F xx xx xx  	sta	>~~clickList+42
  3420                        ;	clickList[4].area.width = 100;
  3421                        	.line	609
  3422 00:0DA9: A9 64 00     	lda	#$64
  3423 00:0DAC: 8F xx xx xx  	sta	>~~clickList+44
  3424                        ;	clickList[4].area.height = 100;
  3425                        	.line	610
  3426 00:0DB0: A9 64 00     	lda	#$64
  3427 00:0DB3: 8F xx xx xx  	sta	>~~clickList+46
  3428                        ;	clickList[4].depth = 1;
  3429                        	.line	611
  3430 00:0DB7: E2 20        	sep	#$20
  3431                        	longa	off
  3432 00:0DB9: A9 01        	lda	#$1
  3433 00:0DBB: 8F xx xx xx  	sta	>~~clickList+49
  3434 00:0DBF: C2 20        	rep	#$20
  3435                        	longa	on
  3436                        ;
  3437                        ;	clickList[5].area.x = 425;
  3438                        	.line	613
  3439 00:0DC1: A9 A9 01     	lda	#$1a9
  3440 00:0DC4: 8F xx xx xx  	sta	>~~clickList+50
  3441                        ;	clickList[5].area.y = 200;
  3442                        	.line	614
  3443 00:0DC8: A9 C8 00     	lda	#$c8
  3444 00:0DCB: 8F xx xx xx  	sta	>~~clickList+52
  3445                        ;	clickList[5].area.width = 100;
  3446                        	.line	615
  3447 00:0DCF: A9 64 00     	lda	#$64
  3448 00:0DD2: 8F xx xx xx  	sta	>~~clickList+54
  3449                        ;	clickList[5].area.height = 100;
  3450                        	.line	616
  3451 00:0DD6: A9 64 00     	lda	#$64
  3452 00:0DD9: 8F xx xx xx  	sta	>~~clickList+56
  3453                        ;	clickList[5].depth = 0;
  3454                        	.line	617
  3455 00:0DDD: E2 20        	sep	#$20
  3456                        	longa	off
  3457 00:0DDF: A9 00        	lda	#$0
  3458 00:0DE1: 8F xx xx xx  	sta	>~~clickList+59
  3459 00:0DE5: C2 20        	rep	#$20
  3460                        	longa	on
  3461                        ;
  3462                        ;	VDMA_CONTROL_REG[0] = VDMA_CTRL_ENABLE;
  3463                        	.line	619
  Wed Aug 14 2019 13:34                                                Page 63


  3464 00:0DE7: E2 20        	sep	#$20
  3465                        	longa	off
  3466 00:0DE9: A9 01        	lda	#$1
  3467 00:0DEB: 8F 00 04 AF  	sta	>11469824
  3468 00:0DEF: C2 20        	rep	#$20
  3469                        	longa	on
  3470                        ;
  3471                        ;	*BM_START_ADDY_L = 0x00;
  3472                        	.line	621
  3473 00:0DF1: E2 20        	sep	#$20
  3474                        	longa	off
  3475 00:0DF3: A9 00        	lda	#$0
  3476 00:0DF5: 8F 41 01 AF  	sta	>11469121
  3477 00:0DF9: C2 20        	rep	#$20
  3478                        	longa	on
  3479                        ;	*BM_START_ADDY_M = 0x00;
  3480                        	.line	622
  3481 00:0DFB: E2 20        	sep	#$20
  3482                        	longa	off
  3483 00:0DFD: A9 00        	lda	#$0
  3484 00:0DFF: 8F 42 01 AF  	sta	>11469122
  3485 00:0E03: C2 20        	rep	#$20
  3486                        	longa	on
  3487                        ;	*BM_START_ADDY_H = 0x00;
  3488                        	.line	623
  3489 00:0E05: E2 20        	sep	#$20
  3490                        	longa	off
  3491 00:0E07: A9 00        	lda	#$0
  3492 00:0E09: 8F 43 01 AF  	sta	>11469123
  3493 00:0E0D: C2 20        	rep	#$20
  3494                        	longa	on
  3495                        ;	*((char far*)0xAF1F80) = 0x02;
  3496                        	.line	624
  3497 00:0E0F: E2 20        	sep	#$20
  3498                        	longa	off
  3499 00:0E11: A9 02        	lda	#$2
  3500 00:0E13: 8F 80 1F AF  	sta	>11476864
  3501 00:0E17: C2 20        	rep	#$20
  3502                        	longa	on
  3503                        ;	
  3504                        ;	*BM_X_SIZE_L = 0x80;
  3505                        	.line	626
  3506 00:0E19: E2 20        	sep	#$20
  3507                        	longa	off
  3508 00:0E1B: A9 80        	lda	#$80
  3509 00:0E1D: 8F 44 01 AF  	sta	>11469124
  3510 00:0E21: C2 20        	rep	#$20
  3511                        	longa	on
  3512                        ;	*BM_X_SIZE_H = 0x02;	
  3513                        	.line	627
  3514 00:0E23: E2 20        	sep	#$20
  3515                        	longa	off
  3516 00:0E25: A9 02        	lda	#$2
  3517 00:0E27: 8F 45 01 AF  	sta	>11469125
  3518 00:0E2B: C2 20        	rep	#$20
  3519                        	longa	on
  3520                        ;	*BM_Y_SIZE_L = 0xE0;
  3521                        	.line	628
  Wed Aug 14 2019 13:34                                                Page 64


  3522 00:0E2D: E2 20        	sep	#$20
  3523                        	longa	off
  3524 00:0E2F: A9 E0        	lda	#$e0
  3525 00:0E31: 8F 46 01 AF  	sta	>11469126
  3526 00:0E35: C2 20        	rep	#$20
  3527                        	longa	on
  3528                        ;	*BM_Y_SIZE_H = 0x01;	
  3529                        	.line	629
  3530 00:0E37: E2 20        	sep	#$20
  3531                        	longa	off
  3532 00:0E39: A9 01        	lda	#$1
  3533 00:0E3B: 8F 47 01 AF  	sta	>11469127
  3534 00:0E3F: C2 20        	rep	#$20
  3535                        	longa	on
  3536                        ;	
  3537                        ;	setColors();
  3538                        	.line	631
  3539 00:0E41: 22 xx xx xx  	jsl	~~setColors
  3540                        ;	
  3541                        ;	*FG_CHAR_LUT_PTR    = 0x00;
  3542                        	.line	633
  3543 00:0E45: E2 20        	sep	#$20
  3544                        	longa	off
  3545 00:0E47: A9 00        	lda	#$0
  3546 00:0E49: 8F 40 1F AF  	sta	>11476800
  3547 00:0E4D: C2 20        	rep	#$20
  3548                        	longa	on
  3549                        ;	*BG_CHAR_LUT_PTR    = 0x00;
  3550                        	.line	634
  3551 00:0E4F: E2 20        	sep	#$20
  3552                        	longa	off
  3553 00:0E51: A9 00        	lda	#$0
  3554 00:0E53: 8F 80 1F AF  	sta	>11476864
  3555 00:0E57: C2 20        	rep	#$20
  3556                        	longa	on
  3557                        ;	*BM_CONTROL_REG 	= 0x08;
  3558                        	.line	635
  3559 00:0E59: E2 20        	sep	#$20
  3560                        	longa	off
  3561 00:0E5B: A9 08        	lda	#$8
  3562 00:0E5D: 8F 40 01 AF  	sta	>11469120
  3563 00:0E61: C2 20        	rep	#$20
  3564                        	longa	on
  3565                        ;	*MASTER_CTRL_REG_L 	= 0x0C;
  3566                        	.line	636
  3567 00:0E63: E2 20        	sep	#$20
  3568                        	longa	off
  3569 00:0E65: A9 0C        	lda	#$c
  3570 00:0E67: 8F 00 00 AF  	sta	>11468800
  3571 00:0E6B: C2 20        	rep	#$20
  3572                        	longa	on
  3573                        ;	
  3574                        ;	k_set_border_color(0xAA,0xAA,0xAA);
  3575                        	.line	638
  3576 00:0E6D: F4 AA 00     	pea	#<$aa
  3577 00:0E70: F4 AA 00     	pea	#<$aa
  3578 00:0E73: F4 AA 00     	pea	#<$aa
  3579 00:0E76: 22 xx xx xx  	jsl	~~k_set_border_color
  Wed Aug 14 2019 13:34                                                Page 65


  3580                        ;	
  3581                        ;	k_disable_border();
  3582                        	.line	640
  3583 00:0E7A: 22 xx xx xx  	jsl	~~k_disable_border
  3584                        ;
  3585                        ;	for(i=0;i<480;i++)
  3586                        	.line	642
  3587 00:0E7E: 64 2E        	stz	<L137+i_1
  3588                        L10046:
  3589                        ;	{
  3590                        	.line	643
  3591                        ;		k_fill_line(0,i,639,3);
  3592                        	.line	644
  3593 00:0E80: F4 03 00     	pea	#<$3
  3594 00:0E83: F4 7F 02     	pea	#<$27f
  3595 00:0E86: D4 2E        	pei	<L137+i_1
  3596 00:0E88: F4 00 00     	pea	#<$0
  3597 00:0E8B: 22 xx xx xx  	jsl	~~k_fill_line
  3598                        ;	}				
  3599                        	.line	645
  3600                        L10044:
  3601 00:0E8F: E6 2E        	inc	<L137+i_1
  3602 00:0E91: 38           	sec
  3603 00:0E92: A5 2E        	lda	<L137+i_1
  3604 00:0E94: E9 E0 01     	sbc	#<$1e0
  3605 00:0E97: 70 03        	bvs	L140
  3606 00:0E99: 49 00 80     	eor	#$8000
  3607                        L140:
  3608 00:0E9C: 30 03        	bmi	L141
  3609 00:0E9E: 82 DF FF     	brl	L10046
  3610                        L141:
  3611                        L10045:
  3612                        ;
  3613                        ;	menu = k_vdraw_ui_menu(0,0,636,menuTitle,15,3);	
  3614                        	.line	647
  3615 00:0EA1: F4 03 00     	pea	#<$3
  3616 00:0EA4: F4 0F 00     	pea	#<$f
  3617 00:0EA7: D4 6E        	pei	<L137+menuTitle_1+2
  3618 00:0EA9: D4 6C        	pei	<L137+menuTitle_1
  3619 00:0EAB: F4 7C 02     	pea	#<$27c
  3620 00:0EAE: F4 00 00     	pea	#<$0
  3621 00:0EB1: F4 00 00     	pea	#<$0
  3622 00:0EB4: 22 xx xx xx  	jsl	~~k_vdraw_ui_menu
  3623 00:0EB8: 85 52        	sta	<L137+menu_1
  3624 00:0EBA: 86 54        	stx	<L137+menu_1+2
  3625                        ;	//k_put_draw_text(2,1,"C256/FOENIX-DRAW L=DRAW R
                    =COLOR[ ] M=CLEAR",15,bcolor);
  3626                        ;	//k_draw_font(32,34,1,dcolor,14,0xFF);
  3627                        ;	
  3628                        ;	
  3629                        ;	k_debug_string("********************************
                    **\r\n");
  3630                        	.line	652
  3631 00:0EBC: F4 xx xx     	pea	#^L135+57
  3632 00:0EBF: F4 xx xx     	pea	#<L135+57
  3633 00:0EC2: 22 xx xx xx  	jsl	~~k_debug_string
  3634                        ;	k_debug_string("******k_test_bitmap_drawing*****
                    **\r\n");
  Wed Aug 14 2019 13:34                                                Page 66


  3635                        	.line	653
  3636 00:0EC6: F4 xx xx     	pea	#^L135+94
  3637 00:0EC9: F4 xx xx     	pea	#<L135+94
  3638 00:0ECC: 22 xx xx xx  	jsl	~~k_debug_string
  3639                        ;	k_debug_string("********************************
                    **\r\n");
  3640                        	.line	654
  3641 00:0ED0: F4 xx xx     	pea	#^L135+131
  3642 00:0ED3: F4 xx xx     	pea	#<L135+131
  3643 00:0ED6: 22 xx xx xx  	jsl	~~k_debug_string
  3644                        ;	
  3645                        ;	
  3646                        ;	while(!bExit)
  3647                        	.line	657
  3648                        L10047:
  3649 00:0EDA: A5 32        	lda	<L137+bExit_1
  3650 00:0EDC: 29 FF 00     	and	#$ff
  3651 00:0EDF: F0 03        	beq	L142
  3652 00:0EE1: 82 77 05     	brl	L10048
  3653                        L142:
  3654                        ;	{
  3655                        	.line	658
  3656                        ;		mb = 0;
  3657                        	.line	659
  3658 00:0EE4: 64 1A        	stz	<L137+mb_1
  3659                        ;		asm WAI;
  3660                        	.line	660
  3661                        	asmstart
  3662 00:0EE6: CB           	WAI
  3663                        	asmend
  3664                        ;	
  3665                        ;		mb = (FXOS_MOUSE_BYTE_0[0] & 0x07);	
  3666                        	.line	662
  3667 00:0EE7: AF 00 15 00  	lda	>5376
  3668 00:0EEB: 29 FF 00     	and	#$ff
  3669 00:0EEE: 85 01        	sta	<R0
  3670 00:0EF0: B2 01        	lda	(<R0)
  3671 00:0EF2: 29 07 00     	and	#<$7
  3672 00:0EF5: 85 1A        	sta	<L137+mb_1
  3673                        ;
  3674                        ;		if(FXOS_KEY_BYTE_2[0]!=lk)
  3675                        	.line	664
  3676                        ;		{
  3677 00:0EF7: AF 0A 15 00  	lda	>5386
  3678 00:0EFB: 29 FF 00     	and	#$ff
  3679 00:0EFE: 85 01        	sta	<R0
  3680 00:0F00: B2 01        	lda	(<R0)
  3681 00:0F02: C5 26        	cmp	<L137+lk_1
  3682 00:0F04: D0 03        	bne	L143
  3683 00:0F06: 82 1A 00     	brl	L10049
  3684                        L143:
  3685                        	.line	665
  3686                        ;			lk = FXOS_KEY_BYTE_2[0];
  3687                        	.line	666
  3688 00:0F09: AF 0A 15 00  	lda	>5386
  3689 00:0F0D: 29 FF 00     	and	#$ff
  3690 00:0F10: 85 01        	sta	<R0
  3691 00:0F12: B2 01        	lda	(<R0)
  Wed Aug 14 2019 13:34                                                Page 67


  3692 00:0F14: 85 26        	sta	<L137+lk_1
  3693                        ;			mb = 0x08;
  3694                        	.line	667
  3695 00:0F16: A9 08 00     	lda	#$8
  3696 00:0F19: 85 1A        	sta	<L137+mb_1
  3697                        ;			ctick = tick;
  3698                        	.line	668
  3699 00:0F1B: A5 84        	lda	<L137+tick_1
  3700 00:0F1D: 85 88        	sta	<L137+ctick_1
  3701 00:0F1F: A5 86        	lda	<L137+tick_1+2
  3702 00:0F21: 85 8A        	sta	<L137+ctick_1+2
  3703                        ;		}
  3704                        	.line	669
  3705                        ;
  3706                        ;		if(mb!=0)
  3707                        L10049:
  3708                        	.line	671
  3709                        ;		{
  3710 00:0F23: A5 1A        	lda	<L137+mb_1
  3711 00:0F25: D0 03        	bne	L144
  3712 00:0F27: 82 CB 04     	brl	L10050
  3713                        L144:
  3714                        	.line	672
  3715                        ;			lb = mb;
  3716                        	.line	673
  3717 00:0F2A: A5 1A        	lda	<L137+mb_1
  3718 00:0F2C: 85 1C        	sta	<L137+lb_1
  3719                        ;			
  3720                        ;			//asm sei;
  3721                        ;			//FXOS_MOUSE_CTL[0] = 0xFF;
  3722                        ;			//asm cli;
  3723                        ;			
  3724                        ;			asm sei;	
  3725                        	.line	679
  3726                        	asmstart
  3727 00:0F2E: 78           	sei
  3728                        	asmend
  3729                        ;			if(mb & 1)
  3730                        	.line	680
  3731                        ;			{
  3732 00:0F2F: A5 1A        	lda	<L137+mb_1
  3733 00:0F31: 29 01 00     	and	#<$1
  3734 00:0F34: D0 03        	bne	L145
  3735 00:0F36: 82 EB 03     	brl	L10051
  3736                        L145:
  3737                        	.line	681
  3738                        ;				mx = k_get_mouse_pos_X()
                    ;
  3739                        	.line	682
  3740 00:0F39: 22 xx xx xx  	jsl	~~k_get_mouse_pos_X
  3741 00:0F3D: 85 16        	sta	<L137+mx_1
  3742                        ;				my = k_get_mouse_pos_Y()
                    ;
  3743                        	.line	683
  3744 00:0F3F: 22 xx xx xx  	jsl	~~k_get_mouse_pos_Y
  3745 00:0F43: 85 18        	sta	<L137+my_1
  3746                        ;				if(mx > 0 && mx < 639)
  3747                        	.line	684
  Wed Aug 14 2019 13:34                                                Page 68


  3748                        ;				{
  3749 00:0F45: 38           	sec
  3750 00:0F46: A9 00 00     	lda	#$0
  3751 00:0F49: E5 16        	sbc	<L137+mx_1
  3752 00:0F4B: 70 03        	bvs	L146
  3753 00:0F4D: 49 00 80     	eor	#$8000
  3754                        L146:
  3755 00:0F50: 10 03        	bpl	L147
  3756 00:0F52: 82 FC 02     	brl	L10052
  3757                        L147:
  3758 00:0F55: 38           	sec
  3759 00:0F56: A5 16        	lda	<L137+mx_1
  3760 00:0F58: E9 7F 02     	sbc	#<$27f
  3761 00:0F5B: 70 03        	bvs	L148
  3762 00:0F5D: 49 00 80     	eor	#$8000
  3763                        L148:
  3764 00:0F60: 10 03        	bpl	L149
  3765 00:0F62: 82 EC 02     	brl	L10052
  3766                        L149:
  3767                        	.line	685
  3768                        ;					if(my > menu->he
                    ight && my < 479)
  3769                        	.line	686
  3770                        ;					{
  3771 00:0F65: 38           	sec
  3772 00:0F66: A0 06 00     	ldy	#$6
  3773 00:0F69: B7 52        	lda	[<L137+menu_1],Y
  3774 00:0F6B: E5 18        	sbc	<L137+my_1
  3775 00:0F6D: 70 03        	bvs	L150
  3776 00:0F6F: 49 00 80     	eor	#$8000
  3777                        L150:
  3778 00:0F72: 10 03        	bpl	L151
  3779 00:0F74: 82 7B 01     	brl	L10053
  3780                        L151:
  3781 00:0F77: 38           	sec
  3782 00:0F78: A5 18        	lda	<L137+my_1
  3783 00:0F7A: E9 DF 01     	sbc	#<$1df
  3784 00:0F7D: 70 03        	bvs	L152
  3785 00:0F7F: 49 00 80     	eor	#$8000
  3786                        L152:
  3787 00:0F82: 10 03        	bpl	L153
  3788 00:0F84: 82 6B 01     	brl	L10053
  3789                        L153:
  3790                        	.line	687
  3791                        ;
  3792                        ;						tx = mx;
  3793                        	.line	689
  3794 00:0F87: A5 16        	lda	<L137+mx_1
  3795 00:0F89: 85 28        	sta	<L137+tx_1
  3796                        ;						ty = my;
  3797                        	.line	690
  3798 00:0F8B: A5 18        	lda	<L137+my_1
  3799 00:0F8D: 85 2A        	sta	<L137+ty_1
  3800                        ;						if(!menu
                    On)
  3801                        	.line	691
  3802                        ;							
                    k_draw_pixel((long)mx,(long)my,dcolor);
  Wed Aug 14 2019 13:34                                                Page 69


  3803 00:0F8F: A5 0D        	lda	<L137+menuOn_1
  3804 00:0F91: 29 FF 00     	and	#$ff
  3805 00:0F94: F0 03        	beq	L154
  3806 00:0F96: 82 26 00     	brl	L10054
  3807                        L154:
  3808                        	.line	692
  3809 00:0F99: D4 35        	pei	<L137+dcolor_1
  3810 00:0F9B: A0 00 00     	ldy	#$0
  3811 00:0F9E: A5 18        	lda	<L137+my_1
  3812 00:0FA0: 10 01        	bpl	L155
  3813 00:0FA2: 88           	dey
  3814                        L155:
  3815 00:0FA3: 85 01        	sta	<R0
  3816 00:0FA5: 84 03        	sty	<R0+2
  3817 00:0FA7: D4 03        	pei	<R0+2
  3818 00:0FA9: D4 01        	pei	<R0
  3819 00:0FAB: A0 00 00     	ldy	#$0
  3820 00:0FAE: A5 16        	lda	<L137+mx_1
  3821 00:0FB0: 10 01        	bpl	L156
  3822 00:0FB2: 88           	dey
  3823                        L156:
  3824 00:0FB3: 85 05        	sta	<R1
  3825 00:0FB5: 84 07        	sty	<R1+2
  3826 00:0FB7: D4 07        	pei	<R1+2
  3827 00:0FB9: D4 05        	pei	<R1
  3828 00:0FBB: 22 xx xx xx  	jsl	~~k_draw_pixel
  3829                        ;						
  3830                        ;						area = k
                    _point_in_list_depth(mx,my,clickList,CHKLIST_MAX);
  3831                        L10054:
  3832                        	.line	694
  3833 00:0FBF: F4 06 00     	pea	#<$6
  3834 00:0FC2: F4 xx xx     	pea	#^~~clickList
  3835 00:0FC5: F4 xx xx     	pea	#<~~clickList
  3836 00:0FC8: D4 18        	pei	<L137+my_1
  3837 00:0FCA: D4 16        	pei	<L137+mx_1
  3838 00:0FCC: 22 xx xx xx  	jsl	~~k_point_in_list_depth
  3839 00:0FD0: 85 2C        	sta	<L137+area_1
  3840                        ;						if(area 
                    > -1)
  3841                        	.line	695
  3842                        ;						{
  3843 00:0FD2: 38           	sec
  3844 00:0FD3: A9 FF FF     	lda	#$ffff
  3845 00:0FD6: E5 2C        	sbc	<L137+area_1
  3846 00:0FD8: 70 03        	bvs	L157
  3847 00:0FDA: 49 00 80     	eor	#$8000
  3848                        L157:
  3849 00:0FDD: 10 03        	bpl	L158
  3850 00:0FDF: 82 0D 01     	brl	L10055
  3851                        L158:
  3852                        	.line	696
  3853                        ;							
                    k_vdma_fill_rect(clickList[area].area.x,clickList[area].area
                    .y,
  3854                        	.line	697
  3855                        ;							
                    				 clickList[area].area.width,clic
  Wed Aug 14 2019 13:34                                                Page 70


                    kList[area].area.height,dcolor);
  3856 00:0FE2: D4 35        	pei	<L137+dcolor_1
  3857 00:0FE4: A0 00 00     	ldy	#$0
  3858 00:0FE7: A5 2C        	lda	<L137+area_1
  3859 00:0FE9: 10 01        	bpl	L159
  3860 00:0FEB: 88           	dey
  3861                        L159:
  3862 00:0FEC: 85 01        	sta	<R0
  3863 00:0FEE: 84 03        	sty	<R0+2
  3864 00:0FF0: F4 00 00     	pea	#^$a
  3865 00:0FF3: F4 0A 00     	pea	#<$a
  3866 00:0FF6: D4 03        	pei	<R0+2
  3867 00:0FF8: D4 01        	pei	<R0
  3868                        	xref	~~~lmul
  3869 00:0FFA: 22 xx xx xx  	jsl	~~~lmul
  3870 00:0FFE: 85 01        	sta	<R0
  3871 00:1000: 86 03        	stx	<R0+2
  3872 00:1002: 18           	clc
  3873 00:1003: A9 06 00     	lda	#$6
  3874 00:1006: 69 xx xx     	adc	#<~~clickList
  3875 00:1009: 85 05        	sta	<R1
  3876 00:100B: A9 00 00     	lda	#$0
  3877 00:100E: 69 xx xx     	adc	#^~~clickList
  3878 00:1011: 85 07        	sta	<R1+2
  3879 00:1013: 18           	clc
  3880 00:1014: A5 05        	lda	<R1
  3881 00:1016: 65 01        	adc	<R0
  3882 00:1018: 85 09        	sta	<R2
  3883 00:101A: A5 07        	lda	<R1+2
  3884 00:101C: 65 03        	adc	<R0+2
  3885 00:101E: 85 0B        	sta	<R2+2
  3886 00:1020: A7 09        	lda	[<R2]
  3887 00:1022: 48           	pha
  3888 00:1023: A0 00 00     	ldy	#$0
  3889 00:1026: A5 2C        	lda	<L137+area_1
  3890 00:1028: 10 01        	bpl	L160
  3891 00:102A: 88           	dey
  3892                        L160:
  3893 00:102B: 85 01        	sta	<R0
  3894 00:102D: 84 03        	sty	<R0+2
  3895 00:102F: F4 00 00     	pea	#^$a
  3896 00:1032: F4 0A 00     	pea	#<$a
  3897 00:1035: D4 03        	pei	<R0+2
  3898 00:1037: D4 01        	pei	<R0
  3899                        	xref	~~~lmul
  3900 00:1039: 22 xx xx xx  	jsl	~~~lmul
  3901 00:103D: 85 01        	sta	<R0
  3902 00:103F: 86 03        	stx	<R0+2
  3903 00:1041: 18           	clc
  3904 00:1042: A9 04 00     	lda	#$4
  3905 00:1045: 69 xx xx     	adc	#<~~clickList
  3906 00:1048: 85 05        	sta	<R1
  3907 00:104A: A9 00 00     	lda	#$0
  3908 00:104D: 69 xx xx     	adc	#^~~clickList
  3909 00:1050: 85 07        	sta	<R1+2
  3910 00:1052: 18           	clc
  3911 00:1053: A5 05        	lda	<R1
  3912 00:1055: 65 01        	adc	<R0
  Wed Aug 14 2019 13:34                                                Page 71


  3913 00:1057: 85 09        	sta	<R2
  3914 00:1059: A5 07        	lda	<R1+2
  3915 00:105B: 65 03        	adc	<R0+2
  3916 00:105D: 85 0B        	sta	<R2+2
  3917 00:105F: A7 09        	lda	[<R2]
  3918 00:1061: 48           	pha
  3919 00:1062: A0 00 00     	ldy	#$0
  3920 00:1065: A5 2C        	lda	<L137+area_1
  3921 00:1067: 10 01        	bpl	L161
  3922 00:1069: 88           	dey
  3923                        L161:
  3924 00:106A: 85 01        	sta	<R0
  3925 00:106C: 84 03        	sty	<R0+2
  3926 00:106E: F4 00 00     	pea	#^$a
  3927 00:1071: F4 0A 00     	pea	#<$a
  3928 00:1074: D4 03        	pei	<R0+2
  3929 00:1076: D4 01        	pei	<R0
  3930                        	xref	~~~lmul
  3931 00:1078: 22 xx xx xx  	jsl	~~~lmul
  3932 00:107C: 85 01        	sta	<R0
  3933 00:107E: 86 03        	stx	<R0+2
  3934 00:1080: 18           	clc
  3935 00:1081: A9 02 00     	lda	#$2
  3936 00:1084: 69 xx xx     	adc	#<~~clickList
  3937 00:1087: 85 05        	sta	<R1
  3938 00:1089: A9 00 00     	lda	#$0
  3939 00:108C: 69 xx xx     	adc	#^~~clickList
  3940 00:108F: 85 07        	sta	<R1+2
  3941 00:1091: 18           	clc
  3942 00:1092: A5 05        	lda	<R1
  3943 00:1094: 65 01        	adc	<R0
  3944 00:1096: 85 09        	sta	<R2
  3945 00:1098: A5 07        	lda	<R1+2
  3946 00:109A: 65 03        	adc	<R0+2
  3947 00:109C: 85 0B        	sta	<R2+2
  3948 00:109E: A0 00 00     	ldy	#$0
  3949 00:10A1: A7 09        	lda	[<R2]
  3950 00:10A3: 10 01        	bpl	L162
  3951 00:10A5: 88           	dey
  3952                        L162:
  3953 00:10A6: 85 01        	sta	<R0
  3954 00:10A8: 84 03        	sty	<R0+2
  3955 00:10AA: D4 03        	pei	<R0+2
  3956 00:10AC: D4 01        	pei	<R0
  3957 00:10AE: A0 00 00     	ldy	#$0
  3958 00:10B1: A5 2C        	lda	<L137+area_1
  3959 00:10B3: 10 01        	bpl	L163
  3960 00:10B5: 88           	dey
  3961                        L163:
  3962 00:10B6: 85 05        	sta	<R1
  3963 00:10B8: 84 07        	sty	<R1+2
  3964 00:10BA: F4 00 00     	pea	#^$a
  3965 00:10BD: F4 0A 00     	pea	#<$a
  3966 00:10C0: D4 07        	pei	<R1+2
  3967 00:10C2: D4 05        	pei	<R1
  3968                        	xref	~~~lmul
  3969 00:10C4: 22 xx xx xx  	jsl	~~~lmul
  3970 00:10C8: 85 05        	sta	<R1
  Wed Aug 14 2019 13:34                                                Page 72


  3971 00:10CA: 86 07        	stx	<R1+2
  3972 00:10CC: 18           	clc
  3973 00:10CD: A9 xx xx     	lda	#<~~clickList
  3974 00:10D0: 65 05        	adc	<R1
  3975 00:10D2: 85 09        	sta	<R2
  3976 00:10D4: A9 xx xx     	lda	#^~~clickList
  3977 00:10D7: 65 07        	adc	<R1+2
  3978 00:10D9: 85 0B        	sta	<R2+2
  3979 00:10DB: A0 00 00     	ldy	#$0
  3980 00:10DE: A7 09        	lda	[<R2]
  3981 00:10E0: 10 01        	bpl	L164
  3982 00:10E2: 88           	dey
  3983                        L164:
  3984 00:10E3: 85 05        	sta	<R1
  3985 00:10E5: 84 07        	sty	<R1+2
  3986 00:10E7: D4 07        	pei	<R1+2
  3987 00:10E9: D4 05        	pei	<R1
  3988 00:10EB: 22 xx xx xx  	jsl	~~k_vdma_fill_rect
  3989                        ;						}	
  3990                        	.line	699
  3991                        ;						
  3992                        ;					}
  3993                        L10055:
  3994                        	.line	701
  3995                        ;					else
  3996 00:10EF: 82 5F 01     	brl	L10056
  3997                        L10053:
  3998                        ;					{
  3999                        	.line	703
  4000                        ;						
  4001                        ;						area = k
                    _point_in_list_depth(mx,my,clickList,CHKLIST_MAX);
  4002                        	.line	705
  4003 00:10F2: F4 06 00     	pea	#<$6
  4004 00:10F5: F4 xx xx     	pea	#^~~clickList
  4005 00:10F8: F4 xx xx     	pea	#<~~clickList
  4006 00:10FB: D4 18        	pei	<L137+my_1
  4007 00:10FD: D4 16        	pei	<L137+mx_1
  4008 00:10FF: 22 xx xx xx  	jsl	~~k_point_in_list_depth
  4009 00:1103: 85 2C        	sta	<L137+area_1
  4010                        ;						if(area 
                    > -1)
  4011                        	.line	706
  4012                        ;						{
  4013 00:1105: 38           	sec
  4014 00:1106: A9 FF FF     	lda	#$ffff
  4015 00:1109: E5 2C        	sbc	<L137+area_1
  4016 00:110B: 70 03        	bvs	L165
  4017 00:110D: 49 00 80     	eor	#$8000
  4018                        L165:
  4019 00:1110: 10 03        	bpl	L166
  4020 00:1112: 82 0D 01     	brl	L10057
  4021                        L166:
  4022                        	.line	707
  4023                        ;							
                    k_vdma_fill_rect(clickList[area].area.x,clickList[area].area
                    .y,
  4024                        	.line	708
  Wed Aug 14 2019 13:34                                                Page 73


  4025                        ;							
                                     clickList[area].area.width,clickList[area].
                    area.height,dcolor);
  4026 00:1115: D4 35        	pei	<L137+dcolor_1
  4027 00:1117: A0 00 00     	ldy	#$0
  4028 00:111A: A5 2C        	lda	<L137+area_1
  4029 00:111C: 10 01        	bpl	L167
  4030 00:111E: 88           	dey
  4031                        L167:
  4032 00:111F: 85 01        	sta	<R0
  4033 00:1121: 84 03        	sty	<R0+2
  4034 00:1123: F4 00 00     	pea	#^$a
  4035 00:1126: F4 0A 00     	pea	#<$a
  4036 00:1129: D4 03        	pei	<R0+2
  4037 00:112B: D4 01        	pei	<R0
  4038                        	xref	~~~lmul
  4039 00:112D: 22 xx xx xx  	jsl	~~~lmul
  4040 00:1131: 85 01        	sta	<R0
  4041 00:1133: 86 03        	stx	<R0+2
  4042 00:1135: 18           	clc
  4043 00:1136: A9 06 00     	lda	#$6
  4044 00:1139: 69 xx xx     	adc	#<~~clickList
  4045 00:113C: 85 05        	sta	<R1
  4046 00:113E: A9 00 00     	lda	#$0
  4047 00:1141: 69 xx xx     	adc	#^~~clickList
  4048 00:1144: 85 07        	sta	<R1+2
  4049 00:1146: 18           	clc
  4050 00:1147: A5 05        	lda	<R1
  4051 00:1149: 65 01        	adc	<R0
  4052 00:114B: 85 09        	sta	<R2
  4053 00:114D: A5 07        	lda	<R1+2
  4054 00:114F: 65 03        	adc	<R0+2
  4055 00:1151: 85 0B        	sta	<R2+2
  4056 00:1153: A7 09        	lda	[<R2]
  4057 00:1155: 48           	pha
  4058 00:1156: A0 00 00     	ldy	#$0
  4059 00:1159: A5 2C        	lda	<L137+area_1
  4060 00:115B: 10 01        	bpl	L168
  4061 00:115D: 88           	dey
  4062                        L168:
  4063 00:115E: 85 01        	sta	<R0
  4064 00:1160: 84 03        	sty	<R0+2
  4065 00:1162: F4 00 00     	pea	#^$a
  4066 00:1165: F4 0A 00     	pea	#<$a
  4067 00:1168: D4 03        	pei	<R0+2
  4068 00:116A: D4 01        	pei	<R0
  4069                        	xref	~~~lmul
  4070 00:116C: 22 xx xx xx  	jsl	~~~lmul
  4071 00:1170: 85 01        	sta	<R0
  4072 00:1172: 86 03        	stx	<R0+2
  4073 00:1174: 18           	clc
  4074 00:1175: A9 04 00     	lda	#$4
  4075 00:1178: 69 xx xx     	adc	#<~~clickList
  4076 00:117B: 85 05        	sta	<R1
  4077 00:117D: A9 00 00     	lda	#$0
  4078 00:1180: 69 xx xx     	adc	#^~~clickList
  4079 00:1183: 85 07        	sta	<R1+2
  4080 00:1185: 18           	clc
  Wed Aug 14 2019 13:34                                                Page 74


  4081 00:1186: A5 05        	lda	<R1
  4082 00:1188: 65 01        	adc	<R0
  4083 00:118A: 85 09        	sta	<R2
  4084 00:118C: A5 07        	lda	<R1+2
  4085 00:118E: 65 03        	adc	<R0+2
  4086 00:1190: 85 0B        	sta	<R2+2
  4087 00:1192: A7 09        	lda	[<R2]
  4088 00:1194: 48           	pha
  4089 00:1195: A0 00 00     	ldy	#$0
  4090 00:1198: A5 2C        	lda	<L137+area_1
  4091 00:119A: 10 01        	bpl	L169
  4092 00:119C: 88           	dey
  4093                        L169:
  4094 00:119D: 85 01        	sta	<R0
  4095 00:119F: 84 03        	sty	<R0+2
  4096 00:11A1: F4 00 00     	pea	#^$a
  4097 00:11A4: F4 0A 00     	pea	#<$a
  4098 00:11A7: D4 03        	pei	<R0+2
  4099 00:11A9: D4 01        	pei	<R0
  4100                        	xref	~~~lmul
  4101 00:11AB: 22 xx xx xx  	jsl	~~~lmul
  4102 00:11AF: 85 01        	sta	<R0
  4103 00:11B1: 86 03        	stx	<R0+2
  4104 00:11B3: 18           	clc
  4105 00:11B4: A9 02 00     	lda	#$2
  4106 00:11B7: 69 xx xx     	adc	#<~~clickList
  4107 00:11BA: 85 05        	sta	<R1
  4108 00:11BC: A9 00 00     	lda	#$0
  4109 00:11BF: 69 xx xx     	adc	#^~~clickList
  4110 00:11C2: 85 07        	sta	<R1+2
  4111 00:11C4: 18           	clc
  4112 00:11C5: A5 05        	lda	<R1
  4113 00:11C7: 65 01        	adc	<R0
  4114 00:11C9: 85 09        	sta	<R2
  4115 00:11CB: A5 07        	lda	<R1+2
  4116 00:11CD: 65 03        	adc	<R0+2
  4117 00:11CF: 85 0B        	sta	<R2+2
  4118 00:11D1: A0 00 00     	ldy	#$0
  4119 00:11D4: A7 09        	lda	[<R2]
  4120 00:11D6: 10 01        	bpl	L170
  4121 00:11D8: 88           	dey
  4122                        L170:
  4123 00:11D9: 85 01        	sta	<R0
  4124 00:11DB: 84 03        	sty	<R0+2
  4125 00:11DD: D4 03        	pei	<R0+2
  4126 00:11DF: D4 01        	pei	<R0
  4127 00:11E1: A0 00 00     	ldy	#$0
  4128 00:11E4: A5 2C        	lda	<L137+area_1
  4129 00:11E6: 10 01        	bpl	L171
  4130 00:11E8: 88           	dey
  4131                        L171:
  4132 00:11E9: 85 05        	sta	<R1
  4133 00:11EB: 84 07        	sty	<R1+2
  4134 00:11ED: F4 00 00     	pea	#^$a
  4135 00:11F0: F4 0A 00     	pea	#<$a
  4136 00:11F3: D4 07        	pei	<R1+2
  4137 00:11F5: D4 05        	pei	<R1
  4138                        	xref	~~~lmul
  Wed Aug 14 2019 13:34                                                Page 75


  4139 00:11F7: 22 xx xx xx  	jsl	~~~lmul
  4140 00:11FB: 85 05        	sta	<R1
  4141 00:11FD: 86 07        	stx	<R1+2
  4142 00:11FF: 18           	clc
  4143 00:1200: A9 xx xx     	lda	#<~~clickList
  4144 00:1203: 65 05        	adc	<R1
  4145 00:1205: 85 09        	sta	<R2
  4146 00:1207: A9 xx xx     	lda	#^~~clickList
  4147 00:120A: 65 07        	adc	<R1+2
  4148 00:120C: 85 0B        	sta	<R2+2
  4149 00:120E: A0 00 00     	ldy	#$0
  4150 00:1211: A7 09        	lda	[<R2]
  4151 00:1213: 10 01        	bpl	L172
  4152 00:1215: 88           	dey
  4153                        L172:
  4154 00:1216: 85 05        	sta	<R1
  4155 00:1218: 84 07        	sty	<R1+2
  4156 00:121A: D4 07        	pei	<R1+2
  4157 00:121C: D4 05        	pei	<R1
  4158 00:121E: 22 xx xx xx  	jsl	~~k_vdma_fill_rect
  4159                        ;						}	
  4160                        	.line	710
  4161                        ;						
  4162                        ;						if(menuO
                    n)
  4163                        L10057:
  4164                        	.line	712
  4165                        ;						{
  4166 00:1222: A5 0D        	lda	<L137+menuOn_1
  4167 00:1224: 29 FF 00     	and	#$ff
  4168 00:1227: D0 03        	bne	L173
  4169 00:1229: 82 25 00     	brl	L10058
  4170                        L173:
  4171                        	.line	713
  4172                        ;							
                    ctxMenu = k_create_context_menu(mx,menu->height,70,60,captio
                    ns,15,3);
  4173                        	.line	714
  4174 00:122C: F4 03 00     	pea	#<$3
  4175 00:122F: F4 0F 00     	pea	#<$f
  4176 00:1232: F4 00 00     	pea	#0
  4177 00:1235: 18           	clc
  4178 00:1236: 7B           	tdc
  4179 00:1237: 69 70 00     	adc	#<L137+captions_1
  4180 00:123A: 48           	pha
  4181 00:123B: F4 3C 00     	pea	#<$3c
  4182 00:123E: F4 46 00     	pea	#<$46
  4183 00:1241: A0 06 00     	ldy	#$6
  4184 00:1244: B7 52        	lda	[<L137+menu_1],Y
  4185 00:1246: 48           	pha
  4186 00:1247: D4 16        	pei	<L137+mx_1
  4187 00:1249: 22 xx xx xx  	jsl	~~k_create_context_menu
  4188 00:124D: 85 68        	sta	<L137+ctxMenu_1
  4189 00:124F: 86 6A        	stx	<L137+ctxMenu_1+2
  4190                        ;						}
  4191                        	.line	715
  4192                        ;					}
  4193                        L10058:
  Wed Aug 14 2019 13:34                                                Page 76


  4194                        	.line	716
  4195                        L10056:
  4196                        ;				}
  4197                        	.line	717
  4198                        ;				
  4199                        ;				if(debug && mx > 0 && mx
                     < 639)
  4200                        L10052:
  4201                        	.line	719
  4202                        ;				{
  4203 00:1251: A5 5E        	lda	<L137+debug_1
  4204 00:1253: D0 03        	bne	L174
  4205 00:1255: 82 61 00     	brl	L10059
  4206                        L174:
  4207 00:1258: 38           	sec
  4208 00:1259: A9 00 00     	lda	#$0
  4209 00:125C: E5 16        	sbc	<L137+mx_1
  4210 00:125E: 70 03        	bvs	L175
  4211 00:1260: 49 00 80     	eor	#$8000
  4212                        L175:
  4213 00:1263: 10 03        	bpl	L176
  4214 00:1265: 82 51 00     	brl	L10059
  4215                        L176:
  4216 00:1268: 38           	sec
  4217 00:1269: A5 16        	lda	<L137+mx_1
  4218 00:126B: E9 7F 02     	sbc	#<$27f
  4219 00:126E: 70 03        	bvs	L177
  4220 00:1270: 49 00 80     	eor	#$8000
  4221                        L177:
  4222 00:1273: 10 03        	bpl	L178
  4223 00:1275: 82 41 00     	brl	L10059
  4224                        L178:
  4225                        	.line	720
  4226                        ;					k_itoa(mx,conver
                    t,10);
  4227                        	.line	721
  4228 00:1278: F4 0A 00     	pea	#<$a
  4229 00:127B: F4 00 00     	pea	#0
  4230 00:127E: 18           	clc
  4231 00:127F: 7B           	tdc
  4232 00:1280: 69 3A 00     	adc	#<L137+convert_1
  4233 00:1283: 48           	pha
  4234 00:1284: D4 16        	pei	<L137+mx_1
  4235 00:1286: 22 xx xx xx  	jsl	~~k_itoa
  4236                        ;					k_put_draw_text(
                    3,1,"     ",0,0);
  4237                        	.line	722
  4238 00:128A: F4 00 00     	pea	#<$0
  4239 00:128D: F4 00 00     	pea	#<$0
  4240 00:1290: F4 xx xx     	pea	#^L135+168
  4241 00:1293: F4 xx xx     	pea	#<L135+168
  4242 00:1296: F4 01 00     	pea	#<$1
  4243 00:1299: F4 03 00     	pea	#<$3
  4244 00:129C: 22 xx xx xx  	jsl	~~k_put_draw_text
  4245                        ;					k_put_draw_text(
                    3,1,convert,15,0);
  4246                        	.line	723
  4247 00:12A0: F4 00 00     	pea	#<$0
  Wed Aug 14 2019 13:34                                                Page 77


  4248 00:12A3: F4 0F 00     	pea	#<$f
  4249 00:12A6: F4 00 00     	pea	#0
  4250 00:12A9: 18           	clc
  4251 00:12AA: 7B           	tdc
  4252 00:12AB: 69 3A 00     	adc	#<L137+convert_1
  4253 00:12AE: 48           	pha
  4254 00:12AF: F4 01 00     	pea	#<$1
  4255 00:12B2: F4 03 00     	pea	#<$3
  4256 00:12B5: 22 xx xx xx  	jsl	~~k_put_draw_text
  4257                        ;				}
  4258                        	.line	724
  4259                        ;				if(debug && my > 0 && my
                     < 479)
  4260                        L10059:
  4261                        	.line	725
  4262                        ;				{
  4263 00:12B9: A5 5E        	lda	<L137+debug_1
  4264 00:12BB: D0 03        	bne	L179
  4265 00:12BD: 82 61 00     	brl	L10060
  4266                        L179:
  4267 00:12C0: 38           	sec
  4268 00:12C1: A9 00 00     	lda	#$0
  4269 00:12C4: E5 18        	sbc	<L137+my_1
  4270 00:12C6: 70 03        	bvs	L180
  4271 00:12C8: 49 00 80     	eor	#$8000
  4272                        L180:
  4273 00:12CB: 10 03        	bpl	L181
  4274 00:12CD: 82 51 00     	brl	L10060
  4275                        L181:
  4276 00:12D0: 38           	sec
  4277 00:12D1: A5 18        	lda	<L137+my_1
  4278 00:12D3: E9 DF 01     	sbc	#<$1df
  4279 00:12D6: 70 03        	bvs	L182
  4280 00:12D8: 49 00 80     	eor	#$8000
  4281                        L182:
  4282 00:12DB: 10 03        	bpl	L183
  4283 00:12DD: 82 41 00     	brl	L10060
  4284                        L183:
  4285                        	.line	726
  4286                        ;					k_itoa(my,conver
                    t,10);
  4287                        	.line	727
  4288 00:12E0: F4 0A 00     	pea	#<$a
  4289 00:12E3: F4 00 00     	pea	#0
  4290 00:12E6: 18           	clc
  4291 00:12E7: 7B           	tdc
  4292 00:12E8: 69 3A 00     	adc	#<L137+convert_1
  4293 00:12EB: 48           	pha
  4294 00:12EC: D4 18        	pei	<L137+my_1
  4295 00:12EE: 22 xx xx xx  	jsl	~~k_itoa
  4296                        ;					k_put_draw_text(
                    3,2,"      ",0,0);
  4297                        	.line	728
  4298 00:12F2: F4 00 00     	pea	#<$0
  4299 00:12F5: F4 00 00     	pea	#<$0
  4300 00:12F8: F4 xx xx     	pea	#^L135+174
  4301 00:12FB: F4 xx xx     	pea	#<L135+174
  4302 00:12FE: F4 02 00     	pea	#<$2
  Wed Aug 14 2019 13:34                                                Page 78


  4303 00:1301: F4 03 00     	pea	#<$3
  4304 00:1304: 22 xx xx xx  	jsl	~~k_put_draw_text
  4305                        ;					k_put_draw_text(
                    3,2,convert,15,0);
  4306                        	.line	729
  4307 00:1308: F4 00 00     	pea	#<$0
  4308 00:130B: F4 0F 00     	pea	#<$f
  4309 00:130E: F4 00 00     	pea	#0
  4310 00:1311: 18           	clc
  4311 00:1312: 7B           	tdc
  4312 00:1313: 69 3A 00     	adc	#<L137+convert_1
  4313 00:1316: 48           	pha
  4314 00:1317: F4 02 00     	pea	#<$2
  4315 00:131A: F4 03 00     	pea	#<$3
  4316 00:131D: 22 xx xx xx  	jsl	~~k_put_draw_text
  4317                        ;				}
  4318                        	.line	730
  4319                        ;			}
  4320                        L10060:
  4321                        	.line	731
  4322                        ;			else if(mb == 2)
  4323 00:1321: 82 CD 00     	brl	L10061
  4324                        L10051:
  4325                        	.line	732
  4326                        ;			{			
  4327 00:1324: A5 1A        	lda	<L137+mb_1
  4328 00:1326: C9 02 00     	cmp	#<$2
  4329 00:1329: F0 03        	beq	L184
  4330 00:132B: 82 4F 00     	brl	L10062
  4331                        L184:
  4332                        	.line	733
  4333                        ;				if(!menuOn)
  4334                        	.line	734
  4335                        ;				{
  4336 00:132E: A5 0D        	lda	<L137+menuOn_1
  4337 00:1330: 29 FF 00     	and	#$ff
  4338 00:1333: F0 03        	beq	L185
  4339 00:1335: 82 25 00     	brl	L10063
  4340                        L185:
  4341                        	.line	735
  4342                        ;					//k_itoa(menu->h
                    eight,convert,10);				
  4343                        ;					//k_itoa(((int)k
                    t_tick),convert,10);
  4344                        ;					//k_itoa(free(),
                    convert,10);
  4345                        ;					//menu = k_vdraw
                    _ui_menu(0,0,640,convert,15,3);
  4346                        ;					menu = k_vdraw_u
                    i_menu(0,0,640," File  Brush  Color  About",15,3);
  4347                        	.line	740
  4348 00:1338: F4 03 00     	pea	#<$3
  4349 00:133B: F4 0F 00     	pea	#<$f
  4350 00:133E: F4 xx xx     	pea	#^L135+181
  4351 00:1341: F4 xx xx     	pea	#<L135+181
  4352 00:1344: F4 80 02     	pea	#<$280
  4353 00:1347: F4 00 00     	pea	#<$0
  4354 00:134A: F4 00 00     	pea	#<$0
  Wed Aug 14 2019 13:34                                                Page 79


  4355 00:134D: 22 xx xx xx  	jsl	~~k_vdraw_ui_menu
  4356 00:1351: 85 52        	sta	<L137+menu_1
  4357 00:1353: 86 54        	stx	<L137+menu_1+2
  4358                        ;					menuOn = 1;
  4359                        	.line	741
  4360 00:1355: E2 20        	sep	#$20
  4361                        	longa	off
  4362 00:1357: A9 01        	lda	#$1
  4363 00:1359: 85 0D        	sta	<L137+menuOn_1
  4364 00:135B: C2 20        	rep	#$20
  4365                        	longa	on
  4366                        ;			    }
  4367                        	.line	742
  4368                        ;				dcolor++;
  4369                        L10063:
  4370                        	.line	743
  4371 00:135D: E2 20        	sep	#$20
  4372                        	longa	off
  4373 00:135F: E6 35        	inc	<L137+dcolor_1
  4374 00:1361: C2 20        	rep	#$20
  4375                        	longa	on
  4376                        ;				if(dcolor > 0x0F)
  4377                        	.line	744
  4378                        ;					dcolor = 0x01;
  4379 00:1363: E2 20        	sep	#$20
  4380                        	longa	off
  4381 00:1365: A9 0F        	lda	#$f
  4382 00:1367: C5 35        	cmp	<L137+dcolor_1
  4383 00:1369: C2 20        	rep	#$20
  4384                        	longa	on
  4385 00:136B: 90 03        	bcc	L186
  4386 00:136D: 82 08 00     	brl	L10064
  4387                        L186:
  4388                        	.line	745
  4389 00:1370: E2 20        	sep	#$20
  4390                        	longa	off
  4391 00:1372: A9 01        	lda	#$1
  4392 00:1374: 85 35        	sta	<L137+dcolor_1
  4393 00:1376: C2 20        	rep	#$20
  4394                        	longa	on
  4395                        ;				
  4396                        ;				//k_draw_font(32,34,1,dc
                    olor,14,0xFF);
  4397                        ;				
  4398                        ;				mb = 0;
  4399                        L10064:
  4400                        	.line	749
  4401 00:1378: 64 1A        	stz	<L137+mb_1
  4402                        ;			}
  4403                        	.line	750
  4404                        ;			else if(mb == 4)
  4405 00:137A: 82 74 00     	brl	L10065
  4406                        L10062:
  4407                        	.line	751
  4408                        ;			{
  4409 00:137D: A5 1A        	lda	<L137+mb_1
  4410 00:137F: C9 04 00     	cmp	#<$4
  4411 00:1382: F0 03        	beq	L187
  Wed Aug 14 2019 13:34                                                Page 80


  4412 00:1384: 82 26 00     	brl	L10066
  4413                        L187:
  4414                        	.line	752
  4415                        ;				//k_put_draw_text(2,1,"C
                    256/FOENIX-DRAW L=DRAW R=COLOR[ ] M=CLEAR",15,bcolor);
  4416                        ;				//k_draw_font(32,34,1,dc
                    olor,14,0xFF);
  4417                        ;				for(i=0;i<480;i++)
  4418                        	.line	755
  4419 00:1387: 64 2E        	stz	<L137+i_1
  4420                        L10069:
  4421                        ;				{
  4422                        	.line	756
  4423                        ;					k_fill_line(0,i,
                    639,3);
  4424                        	.line	757
  4425 00:1389: F4 03 00     	pea	#<$3
  4426 00:138C: F4 7F 02     	pea	#<$27f
  4427 00:138F: D4 2E        	pei	<L137+i_1
  4428 00:1391: F4 00 00     	pea	#<$0
  4429 00:1394: 22 xx xx xx  	jsl	~~k_fill_line
  4430                        ;				}			
                    	
  4431                        	.line	758
  4432                        L10067:
  4433 00:1398: E6 2E        	inc	<L137+i_1
  4434 00:139A: 38           	sec
  4435 00:139B: A5 2E        	lda	<L137+i_1
  4436 00:139D: E9 E0 01     	sbc	#<$1e0
  4437 00:13A0: 70 03        	bvs	L188
  4438 00:13A2: 49 00 80     	eor	#$8000
  4439                        L188:
  4440 00:13A5: 30 03        	bmi	L189
  4441 00:13A7: 82 DF FF     	brl	L10069
  4442                        L189:
  4443                        L10068:
  4444                        ;			}
  4445                        	.line	759
  4446                        ;			else if(mb == 8)
  4447 00:13AA: 82 44 00     	brl	L10070
  4448                        L10066:
  4449                        	.line	760
  4450                        ;			{
  4451 00:13AD: A5 1A        	lda	<L137+mb_1
  4452 00:13AF: C9 08 00     	cmp	#<$8
  4453 00:13B2: F0 03        	beq	L190
  4454 00:13B4: 82 3A 00     	brl	L10071
  4455                        L190:
  4456                        	.line	761
  4457                        ;				if(tx > -1 && ty > -1)
  4458                        	.line	762
  4459                        ;				{
  4460 00:13B7: 38           	sec
  4461 00:13B8: A9 FF FF     	lda	#$ffff
  4462 00:13BB: E5 28        	sbc	<L137+tx_1
  4463 00:13BD: 70 03        	bvs	L191
  4464 00:13BF: 49 00 80     	eor	#$8000
  4465                        L191:
  Wed Aug 14 2019 13:34                                                Page 81


  4466 00:13C2: 10 03        	bpl	L192
  4467 00:13C4: 82 2A 00     	brl	L10072
  4468                        L192:
  4469 00:13C7: 38           	sec
  4470 00:13C8: A9 FF FF     	lda	#$ffff
  4471 00:13CB: E5 2A        	sbc	<L137+ty_1
  4472 00:13CD: 70 03        	bvs	L193
  4473 00:13CF: 49 00 80     	eor	#$8000
  4474                        L193:
  4475 00:13D2: 10 03        	bpl	L194
  4476 00:13D4: 82 1A 00     	brl	L10072
  4477                        L194:
  4478                        	.line	763
  4479                        ;					k_draw_font_at_p
                    oint(lk,tx,ty,dcolor,14,0x00);	
  4480                        	.line	764
  4481 00:13D7: F4 00 00     	pea	#<$0
  4482 00:13DA: F4 0E 00     	pea	#<$e
  4483 00:13DD: D4 35        	pei	<L137+dcolor_1
  4484 00:13DF: D4 2A        	pei	<L137+ty_1
  4485 00:13E1: D4 28        	pei	<L137+tx_1
  4486 00:13E3: D4 26        	pei	<L137+lk_1
  4487 00:13E5: 22 xx xx xx  	jsl	~~k_draw_font_at_point
  4488                        ;					tx+=(FONTW);
  4489                        	.line	765
  4490 00:13E9: 18           	clc
  4491 00:13EA: A9 08 00     	lda	#$8
  4492 00:13ED: 65 28        	adc	<L137+tx_1
  4493 00:13EF: 85 28        	sta	<L137+tx_1
  4494                        ;				}
  4495                        	.line	766
  4496                        ;			}
  4497                        L10072:
  4498                        	.line	767
  4499                        ;			//asm sei;
  4500                        ;			//FXOS_MOUSE_CTL[0] = 0x00;
  4501                        ;			//asm cli;
  4502                        ;			
  4503                        ;			asm cli;
  4504                        L10071:
  4505                        L10070:
  4506                        L10065:
  4507                        L10061:
  4508                        	.line	772
  4509                        	asmstart
  4510 00:13F1: 58           	cli
  4511                        	asmend
  4512                        ;		}
  4513                        	.line	773
  4514                        ;		else if(mb == 0 && lb > 0)
  4515 00:13F2: 82 63 00     	brl	L10073
  4516                        L10050:
  4517                        	.line	774
  4518                        ;		{
  4519 00:13F5: A5 1A        	lda	<L137+mb_1
  4520 00:13F7: F0 03        	beq	L195
  4521 00:13F9: 82 5C 00     	brl	L10074
  4522                        L195:
  Wed Aug 14 2019 13:34                                                Page 82


  4523 00:13FC: 38           	sec
  4524 00:13FD: A9 00 00     	lda	#$0
  4525 00:1400: E5 1C        	sbc	<L137+lb_1
  4526 00:1402: 70 03        	bvs	L196
  4527 00:1404: 49 00 80     	eor	#$8000
  4528                        L196:
  4529 00:1407: 10 03        	bpl	L197
  4530 00:1409: 82 4C 00     	brl	L10074
  4531                        L197:
  4532                        	.line	775
  4533                        ;			asm sei;
  4534                        	.line	776
  4535                        	asmstart
  4536 00:140C: 78           	sei
  4537                        	asmend
  4538                        ;			
  4539                        ;			if(lb & 2)
  4540                        	.line	778
  4541                        ;			{
  4542 00:140D: A5 1C        	lda	<L137+lb_1
  4543 00:140F: 29 02 00     	and	#<$2
  4544 00:1412: D0 03        	bne	L198
  4545 00:1414: 82 3C 00     	brl	L10075
  4546                        L198:
  4547                        	.line	779
  4548                        ;				if(ctxMenu!=NULL)
  4549                        	.line	780
  4550                        ;				{
  4551 00:1417: A5 68        	lda	<L137+ctxMenu_1
  4552 00:1419: 05 6A        	ora	<L137+ctxMenu_1+2
  4553 00:141B: D0 03        	bne	L199
  4554 00:141D: 82 12 00     	brl	L10076
  4555                        L199:
  4556                        	.line	781
  4557                        ;					k_free_context_m
                    enu(ctxMenu,15,3);
  4558                        	.line	782
  4559 00:1420: F4 03 00     	pea	#<$3
  4560 00:1423: F4 0F 00     	pea	#<$f
  4561 00:1426: D4 6A        	pei	<L137+ctxMenu_1+2
  4562 00:1428: D4 68        	pei	<L137+ctxMenu_1
  4563 00:142A: 22 xx xx xx  	jsl	~~k_free_context_menu
  4564                        ;					ctxMenu = NULL;
  4565                        	.line	783
  4566 00:142E: 64 68        	stz	<L137+ctxMenu_1
  4567 00:1430: 64 6A        	stz	<L137+ctxMenu_1+2
  4568                        ;				}
  4569                        	.line	784
  4570                        ;				menu = k_vdraw_ui_menu(0
                    ,0,640,menuTitle,15,3);
  4571                        L10076:
  4572                        	.line	785
  4573 00:1432: F4 03 00     	pea	#<$3
  4574 00:1435: F4 0F 00     	pea	#<$f
  4575 00:1438: D4 6E        	pei	<L137+menuTitle_1+2
  4576 00:143A: D4 6C        	pei	<L137+menuTitle_1
  4577 00:143C: F4 80 02     	pea	#<$280
  4578 00:143F: F4 00 00     	pea	#<$0
  Wed Aug 14 2019 13:34                                                Page 83


  4579 00:1442: F4 00 00     	pea	#<$0
  4580 00:1445: 22 xx xx xx  	jsl	~~k_vdraw_ui_menu
  4581 00:1449: 85 52        	sta	<L137+menu_1
  4582 00:144B: 86 54        	stx	<L137+menu_1+2
  4583                        ;				menuOn = 0;
  4584                        	.line	786
  4585 00:144D: E2 20        	sep	#$20
  4586                        	longa	off
  4587 00:144F: 64 0D        	stz	<L137+menuOn_1
  4588 00:1451: C2 20        	rep	#$20
  4589                        	longa	on
  4590                        ;			}
  4591                        	.line	787
  4592                        ;			lb-=2;	
  4593                        L10075:
  4594                        	.line	788
  4595 00:1453: C6 1C        	dec	<L137+lb_1
  4596 00:1455: C6 1C        	dec	<L137+lb_1
  4597                        ;			
  4598                        ;			asm cli;		
  4599                        	.line	790
  4600                        	asmstart
  4601 00:1457: 58           	cli
  4602                        	asmend
  4603                        ;		}
  4604                        	.line	791
  4605                        ;		
  4606                        ;	}
  4607                        L10074:
  4608                        L10073:
  4609                        	.line	793
  4610 00:1458: 82 7F FA     	brl	L10047
  4611                        L10048:
  4612                        ;	
  4613                        ;	return;
  4614                        	.line	795
  4615                        L200:
  4616 00:145B: 2B           	pld
  4617 00:145C: 3B           	tsc
  4618 00:145D: 18           	clc
  4619 00:145E: 69 8B 00     	adc	#L136
  4620 00:1461: 1B           	tcs
  4621 00:1462: 6B           	rtl
  4622                        ;}
  4623                        	.line	796
  4624                        	.endblock	796
  4625             0000008B   L136	equ	139
  4626             0000000D   L137	equ	13
  4627                        	ends
  4628                        	efunc
  4629                        	.endfunc	796,13,139
  4630                        	.line	796
  4631                        	data
  4632                        L135:
  4633 00:0091: 20 20 20 20  	db	$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,
                    $20,$20,$20,$20,$20
       00:0095: 20 20 20 20 
       00:0099: 20 20 20 20 
  Wed Aug 14 2019 13:34                                                Page 84


       00:009D: 20 20 20 
  4634 00:00A0: 20 00 43 32  	db	$20,$00,$43,$32,$35,$36,$20,$46,$58,$2D,
                    $44,$52,$41,$57,$00
       00:00A4: 35 36 20 46 
       00:00A8: 58 2D 44 52 
       00:00AC: 41 57 00 
  4635 00:00AF: 4F 70 65 6E  	db	$4F,$70,$65,$6E,$2E,$2E,$00,$53,$61,$76,
                    $65,$00,$53,$61,$76
       00:00B3: 2E 2E 00 53 
       00:00B7: 61 76 65 00 
       00:00BB: 53 61 76 
  4636 00:00BE: 65 41 73 2E  	db	$65,$41,$73,$2E,$2E,$00,$43,$6C,$6F,$73,
                    $65,$00,$2A,$2A,$2A
       00:00C2: 2E 00 43 6C 
       00:00C6: 6F 73 65 00 
       00:00CA: 2A 2A 2A 
  4637 00:00CD: 2A 2A 2A 2A  	db	$2A,$2A,$2A,$2A,$2A,$2A,$2A,$2A,$2A,$2A,
                    $2A,$2A,$2A,$2A,$2A
       00:00D1: 2A 2A 2A 2A 
       00:00D5: 2A 2A 2A 2A 
       00:00D9: 2A 2A 2A 
  4638 00:00DC: 2A 2A 2A 2A  	db	$2A,$2A,$2A,$2A,$2A,$2A,$2A,$2A,$2A,$2A,
                    $2A,$2A,$2A,$2A,$2A
       00:00E0: 2A 2A 2A 2A 
       00:00E4: 2A 2A 2A 2A 
       00:00E8: 2A 2A 2A 
  4639 00:00EB: 2A 0D 0A 00  	db	$2A,$0D,$0A,$00,$2A,$2A,$2A,$2A,$2A,$2A,
                    $6B,$5F,$74,$65,$73
       00:00EF: 2A 2A 2A 2A 
       00:00F3: 2A 2A 6B 5F 
       00:00F7: 74 65 73 
  4640 00:00FA: 74 5F 62 69  	db	$74,$5F,$62,$69,$74,$6D,$61,$70,$5F,$64,
                    $72,$61,$77,$69,$6E
       00:00FE: 74 6D 61 70 
       00:0102: 5F 64 72 61 
       00:0106: 77 69 6E 
  4641 00:0109: 67 2A 2A 2A  	db	$67,$2A,$2A,$2A,$2A,$2A,$2A,$2A,$0D,$0A,
                    $00,$2A,$2A,$2A,$2A
       00:010D: 2A 2A 2A 2A 
       00:0111: 0D 0A 00 2A 
       00:0115: 2A 2A 2A 
  4642 00:0118: 2A 2A 2A 2A  	db	$2A,$2A,$2A,$2A,$2A,$2A,$2A,$2A,$2A,$2A,
                    $2A,$2A,$2A,$2A,$2A
       00:011C: 2A 2A 2A 2A 
       00:0120: 2A 2A 2A 2A 
       00:0124: 2A 2A 2A 
  4643 00:0127: 2A 2A 2A 2A  	db	$2A,$2A,$2A,$2A,$2A,$2A,$2A,$2A,$2A,$2A,
                    $2A,$2A,$2A,$2A,$2A
       00:012B: 2A 2A 2A 2A 
       00:012F: 2A 2A 2A 2A 
       00:0133: 2A 2A 2A 
  4644 00:0136: 0D 0A 00 20  	db	$0D,$0A,$00,$20,$20,$20,$20,$20,$00,$20,
                    $20,$20,$20,$20,$20
       00:013A: 20 20 20 20 
       00:013E: 00 20 20 20 
       00:0142: 20 20 20 
  4645 00:0145: 00 20 46 69  	db	$00,$20,$46,$69,$6C,$65,$20,$20,$42,$72,
                    $75,$73,$68,$20,$20
  Wed Aug 14 2019 13:34                                                Page 85


       00:0149: 6C 65 20 20 
       00:014D: 42 72 75 73 
       00:0151: 68 20 20 
  4646 00:0154: 43 6F 6C 6F  	db	$43,$6F,$6C,$6F,$72,$20,$20,$41,$62,$6F,
                    $75,$74,$00
       00:0158: 72 20 20 41 
       00:015C: 62 6F 75 74 
       00:0160: 00 
  4647 00:0161:              	ends
  4648                        ;
  4649                        ;
  4650                        ;
  4651                        ;
  4652                        ;
  4653                        ;
  4654                        ;void k_test_bitmap_drawing_org(void)
  4655                        ;{
  4656                        	.line	803
  4657                        	.line	804
  4658                        	code
  4659                        	xdef	~~k_test_bitmap_drawing_org
  4660                        	func
  4661                        	.function	804
  4662                        ~~k_test_bitmap_drawing_org:
  4663                        	longa	on
  4664                        	longi	on
  4665 00:1463: 3B           	tsc
  4666 00:1464: 38           	sec
  4667 00:1465: E9 62 00     	sbc	#L202
  4668 00:1468: 1B           	tcs
  4669 00:1469: 0B           	phd
  4670 00:146A: 5B           	tcd
  4671                        	.block	804
  4672                        ;	int bx = 0;
  4673                        ;	int by = 0;
  4674                        ;	int bw = 0;
  4675                        ;	int bh = 0;
  4676                        ;	int mx = -1;
  4677                        ;	int my = -1;
  4678                        ;	int mb = -1;
  4679                        ;	long px = 0;
  4680                        ;	int lx = -1;
  4681                        ;	int ly = -1;
  4682                        ;	int lk = -1;
  4683                        ;	int tx = -1;
  4684                        ;	int ty = -1;
  4685                        ;	int i;
  4686                        ;	int delay = 500;
  4687                        ;	char bExit = 0;
  4688                        ;	int pos = 0;
  4689                        ;	char dcolor = 15;
  4690                        ;	int fcolor = 15;
  4691                        ;	int bcolor = 0;
  4692                        ;	char far convert[16];
  4693                        ;	char far *pitoa = "                ";
  4694                        ;	int mbState = 0;
  4695                        ;	HANDLE hWin;
  4696                        ;	RECT rect;
  Wed Aug 14 2019 13:34                                                Page 86


  4697                        ;	int debug = 0;
  4698                        ;	int far *pmx = malloc(sizeof(int));
  4699                        ;	char far *pstr  = (char far*)malloc(32);
  4700                        ;
  4701                        ;	unsigned long tick = 0;
  4702                        ;	unsigned long ctick = 0;
  4703                        ;
  4704                        ;	memset(convert,0,16);
  4705             00000000   bx_1	set	0
  4706             00000002   by_1	set	2
  4707             00000004   bw_1	set	4
  4708             00000006   bh_1	set	6
  4709             00000008   mx_1	set	8
  4710             0000000A   my_1	set	10
  4711             0000000C   mb_1	set	12
  4712             0000000E   px_1	set	14
  4713             00000012   lx_1	set	18
  4714             00000014   ly_1	set	20
  4715             00000016   lk_1	set	22
  4716             00000018   tx_1	set	24
  4717             0000001A   ty_1	set	26
  4718             0000001C   i_1	set	28
  4719             0000001E   delay_1	set	30
  4720             00000020   bExit_1	set	32
  4721             00000021   pos_1	set	33
  4722             00000023   dcolor_1	set	35
  4723             00000024   fcolor_1	set	36
  4724             00000026   bcolor_1	set	38
  4725             00000028   convert_1	set	40
  4726             00000038   pitoa_1	set	56
  4727             0000003C   mbState_1	set	60
  4728             0000003E   hWin_1	set	62
  4729             00000040   rect_1	set	64
  4730             00000048   debug_1	set	72
  4731             0000004A   pmx_1	set	74
  4732             0000004E   pstr_1	set	78
  4733             00000052   tick_1	set	82
  4734             00000056   ctick_1	set	86
  4735                        	.sym	bx,0,5,1,16
  4736                        	.sym	by,2,5,1,16
  4737                        	.sym	bw,4,5,1,16
  4738                        	.sym	bh,6,5,1,16
  4739                        	.sym	mx,8,5,1,16
  4740                        	.sym	my,10,5,1,16
  4741                        	.sym	mb,12,5,1,16
  4742                        	.sym	px,14,7,1,32
  4743                        	.sym	lx,18,5,1,16
  4744                        	.sym	ly,20,5,1,16
  4745                        	.sym	lk,22,5,1,16
  4746                        	.sym	tx,24,5,1,16
  4747                        	.sym	ty,26,5,1,16
  4748                        	.sym	i,28,5,1,16
  4749                        	.sym	delay,30,5,1,16
  4750                        	.sym	bExit,32,14,1,8
  4751                        	.sym	pos,33,5,1,16
  4752                        	.sym	dcolor,35,14,1,8
  4753                        	.sym	fcolor,36,5,1,16
  4754                        	.sym	bcolor,38,5,1,16
  Wed Aug 14 2019 13:34                                                Page 87


  4755                        	.sym	convert,40,110,1,0,16
  4756                        	.sym	pitoa,56,142,1,32
  4757                        	.sym	mbState,60,5,1,16
  4758                        	.sym	hWin,62,5,1,16
  4759                        	.sym	rect,64,10,1,64,7
  4760                        	.sym	debug,72,5,1,16
  4761                        	.sym	pmx,74,133,1,32
  4762                        	.sym	pstr,78,142,1,32
  4763                        	.sym	tick,82,18,1,32
  4764                        	.sym	ctick,86,18,1,32
  4765 00:146B: 64 09        	stz	<L203+bx_1
  4766 00:146D: 64 0B        	stz	<L203+by_1
  4767 00:146F: 64 0D        	stz	<L203+bw_1
  4768 00:1471: 64 0F        	stz	<L203+bh_1
  4769 00:1473: A9 FF FF     	lda	#$ffff
  4770 00:1476: 85 11        	sta	<L203+mx_1
  4771 00:1478: A9 FF FF     	lda	#$ffff
  4772 00:147B: 85 13        	sta	<L203+my_1
  4773 00:147D: A9 FF FF     	lda	#$ffff
  4774 00:1480: 85 15        	sta	<L203+mb_1
  4775 00:1482: 64 17        	stz	<L203+px_1
  4776 00:1484: 64 19        	stz	<L203+px_1+2
  4777 00:1486: A9 FF FF     	lda	#$ffff
  4778 00:1489: 85 1B        	sta	<L203+lx_1
  4779 00:148B: A9 FF FF     	lda	#$ffff
  4780 00:148E: 85 1D        	sta	<L203+ly_1
  4781 00:1490: A9 FF FF     	lda	#$ffff
  4782 00:1493: 85 1F        	sta	<L203+lk_1
  4783 00:1495: A9 FF FF     	lda	#$ffff
  4784 00:1498: 85 21        	sta	<L203+tx_1
  4785 00:149A: A9 FF FF     	lda	#$ffff
  4786 00:149D: 85 23        	sta	<L203+ty_1
  4787 00:149F: A9 F4 01     	lda	#$1f4
  4788 00:14A2: 85 27        	sta	<L203+delay_1
  4789 00:14A4: E2 20        	sep	#$20
  4790                        	longa	off
  4791 00:14A6: 64 29        	stz	<L203+bExit_1
  4792 00:14A8: C2 20        	rep	#$20
  4793                        	longa	on
  4794 00:14AA: 64 2A        	stz	<L203+pos_1
  4795 00:14AC: E2 20        	sep	#$20
  4796                        	longa	off
  4797 00:14AE: A9 0F        	lda	#$f
  4798 00:14B0: 85 2C        	sta	<L203+dcolor_1
  4799 00:14B2: C2 20        	rep	#$20
  4800                        	longa	on
  4801 00:14B4: A9 0F 00     	lda	#$f
  4802 00:14B7: 85 2D        	sta	<L203+fcolor_1
  4803 00:14B9: 64 2F        	stz	<L203+bcolor_1
  4804 00:14BB: A9 xx xx     	lda	#<L201
  4805 00:14BE: 85 41        	sta	<L203+pitoa_1
  4806 00:14C0: A9 xx xx     	lda	#^L201
  4807 00:14C3: 85 43        	sta	<L203+pitoa_1+2
  4808 00:14C5: 64 45        	stz	<L203+mbState_1
  4809 00:14C7: 64 51        	stz	<L203+debug_1
  4810 00:14C9: F4 02 00     	pea	#<$2
  4811 00:14CC: 22 xx xx xx  	jsl	~~malloc
  4812 00:14D0: 85 53        	sta	<L203+pmx_1
  Wed Aug 14 2019 13:34                                                Page 88


  4813 00:14D2: 86 55        	stx	<L203+pmx_1+2
  4814 00:14D4: F4 20 00     	pea	#<$20
  4815 00:14D7: 22 xx xx xx  	jsl	~~malloc
  4816 00:14DB: 85 57        	sta	<L203+pstr_1
  4817 00:14DD: 86 59        	stx	<L203+pstr_1+2
  4818 00:14DF: 64 5B        	stz	<L203+tick_1
  4819 00:14E1: 64 5D        	stz	<L203+tick_1+2
  4820 00:14E3: 64 5F        	stz	<L203+ctick_1
  4821 00:14E5: 64 61        	stz	<L203+ctick_1+2
  4822                        	.line	837
  4823 00:14E7: F4 10 00     	pea	#<$10
  4824 00:14EA: F4 00 00     	pea	#<$0
  4825 00:14ED: F4 00 00     	pea	#0
  4826 00:14F0: 18           	clc
  4827 00:14F1: 7B           	tdc
  4828 00:14F2: 69 31 00     	adc	#<L203+convert_1
  4829 00:14F5: 48           	pha
  4830 00:14F6: 22 xx xx xx  	jsl	~~memset
  4831                        ;	memset(pstr,0,32);
  4832                        	.line	838
  4833 00:14FA: F4 20 00     	pea	#<$20
  4834 00:14FD: F4 00 00     	pea	#<$0
  4835 00:1500: D4 59        	pei	<L203+pstr_1+2
  4836 00:1502: D4 57        	pei	<L203+pstr_1
  4837 00:1504: 22 xx xx xx  	jsl	~~memset
  4838                        ;	
  4839                        ;	
  4840                        ;	//FXOS_MOUSE_CTL[0] = 0xFF;
  4841                        ;	
  4842                        ;	
  4843                        ;	k_put_string(1,1,pstr,15,0);
  4844                        	.line	844
  4845 00:1508: F4 00 00     	pea	#<$0
  4846 00:150B: F4 0F 00     	pea	#<$f
  4847 00:150E: D4 59        	pei	<L203+pstr_1+2
  4848 00:1510: D4 57        	pei	<L203+pstr_1
  4849 00:1512: F4 01 00     	pea	#<$1
  4850 00:1515: F4 01 00     	pea	#<$1
  4851 00:1518: 22 xx xx xx  	jsl	~~k_put_string
  4852                        ;	k_put_string(1,2,"Y:",15,0);
  4853                        	.line	845
  4854 00:151C: F4 00 00     	pea	#<$0
  4855 00:151F: F4 0F 00     	pea	#<$f
  4856 00:1522: F4 xx xx     	pea	#^L201+17
  4857 00:1525: F4 xx xx     	pea	#<L201+17
  4858 00:1528: F4 02 00     	pea	#<$2
  4859 00:152B: F4 01 00     	pea	#<$1
  4860 00:152E: 22 xx xx xx  	jsl	~~k_put_string
  4861                        ;	k_put_string(1,3,"B:",15,0);
  4862                        	.line	846
  4863 00:1532: F4 00 00     	pea	#<$0
  4864 00:1535: F4 0F 00     	pea	#<$f
  4865 00:1538: F4 xx xx     	pea	#^L201+20
  4866 00:153B: F4 xx xx     	pea	#<L201+20
  4867 00:153E: F4 03 00     	pea	#<$3
  4868 00:1541: F4 01 00     	pea	#<$1
  4869 00:1544: 22 xx xx xx  	jsl	~~k_put_string
  4870                        ;	k_put_string(1,4,"K:",15,0);
  Wed Aug 14 2019 13:34                                                Page 89


  4871                        	.line	847
  4872 00:1548: F4 00 00     	pea	#<$0
  4873 00:154B: F4 0F 00     	pea	#<$f
  4874 00:154E: F4 xx xx     	pea	#^L201+23
  4875 00:1551: F4 xx xx     	pea	#<L201+23
  4876 00:1554: F4 04 00     	pea	#<$4
  4877 00:1557: F4 01 00     	pea	#<$1
  4878 00:155A: 22 xx xx xx  	jsl	~~k_put_string
  4879                        ;	k_put_string(1,5,"J:",15,0);
  4880                        	.line	848
  4881 00:155E: F4 00 00     	pea	#<$0
  4882 00:1561: F4 0F 00     	pea	#<$f
  4883 00:1564: F4 xx xx     	pea	#^L201+26
  4884 00:1567: F4 xx xx     	pea	#<L201+26
  4885 00:156A: F4 05 00     	pea	#<$5
  4886 00:156D: F4 01 00     	pea	#<$1
  4887 00:1570: 22 xx xx xx  	jsl	~~k_put_string
  4888                        ;	
  4889                        ;	k_put_string(1,6,"M:",15,0);
  4890                        	.line	850
  4891 00:1574: F4 00 00     	pea	#<$0
  4892 00:1577: F4 0F 00     	pea	#<$f
  4893 00:157A: F4 xx xx     	pea	#^L201+29
  4894 00:157D: F4 xx xx     	pea	#<L201+29
  4895 00:1580: F4 06 00     	pea	#<$6
  4896 00:1583: F4 01 00     	pea	#<$1
  4897 00:1586: 22 xx xx xx  	jsl	~~k_put_string
  4898                        ;	
  4899                        ;	mbState = 0;
  4900                        	.line	852
  4901 00:158A: 64 45        	stz	<L203+mbState_1
  4902                        ;	
  4903                        ;	k_put_string(0,0,"k_test_bitmap_drawing",15,0);
  4904                        	.line	854
  4905 00:158C: F4 00 00     	pea	#<$0
  4906 00:158F: F4 0F 00     	pea	#<$f
  4907 00:1592: F4 xx xx     	pea	#^L201+32
  4908 00:1595: F4 xx xx     	pea	#<L201+32
  4909 00:1598: F4 00 00     	pea	#<$0
  4910 00:159B: F4 00 00     	pea	#<$0
  4911 00:159E: 22 xx xx xx  	jsl	~~k_put_string
  4912                        ;
  4913                        ;	
  4914                        ;	rect.x = 5;
  4915                        	.line	857
  4916 00:15A2: A9 05 00     	lda	#$5
  4917 00:15A5: 85 49        	sta	<L203+rect_1
  4918                        ;	rect.y = 5;
  4919                        	.line	858
  4920 00:15A7: A9 05 00     	lda	#$5
  4921 00:15AA: 85 4B        	sta	<L203+rect_1+2
  4922                        ;	rect.height = 35;
  4923                        	.line	859
  4924 00:15AC: A9 23 00     	lda	#$23
  4925 00:15AF: 85 4F        	sta	<L203+rect_1+6
  4926                        ;	rect.width = 45;		
  4927                        	.line	860
  4928 00:15B1: A9 2D 00     	lda	#$2d
  Wed Aug 14 2019 13:34                                                Page 90


  4929 00:15B4: 85 4D        	sta	<L203+rect_1+4
  4930                        ;	
  4931                        ;	k_create_text_window(&rect,"CONSOLE WINDOW",&hWi
                    n);
  4932                        	.line	862
  4933 00:15B6: F4 00 00     	pea	#0
  4934 00:15B9: 18           	clc
  4935 00:15BA: 7B           	tdc
  4936 00:15BB: 69 47 00     	adc	#<L203+hWin_1
  4937 00:15BE: 48           	pha
  4938 00:15BF: F4 xx xx     	pea	#^L201+54
  4939 00:15C2: F4 xx xx     	pea	#<L201+54
  4940 00:15C5: F4 00 00     	pea	#0
  4941 00:15C8: 18           	clc
  4942 00:15C9: 7B           	tdc
  4943 00:15CA: 69 49 00     	adc	#<L203+rect_1
  4944 00:15CD: 48           	pha
  4945 00:15CE: 22 xx xx xx  	jsl	~~k_create_text_window
  4946                        ;	
  4947                        ;	//k_put_text_window_string(hWin,1,3,"LOADING GRA
                    PHICAL WORKBENCH...",15,0);
  4948                        ;
  4949                        ;	
  4950                        ;	pos = 0;
  4951                        	.line	867
  4952 00:15D2: 64 2A        	stz	<L203+pos_1
  4953                        ;	//for(i=0;i<30;i++)
  4954                        ;	while(1)
  4955                        	.line	869
  4956                        L10077:
  4957                        ;	{
  4958                        	.line	870
  4959                        ;		#asm
  4960                        	.line	871
  4961                        ;			WAI
  4962                        ;		#endasm
  4963                        	asmstart
  4964 00:15D4: CB           			WAI
  4965                        	asmend
  4966                        ;		asm sei;
  4967                        	.line	874
  4968                        	asmstart
  4969 00:15D5: 78           	sei
  4970                        	asmend
  4971                        ;		/*
  4972                        ;		k_put_char(3,4,FXOS_KEY_BYTE_0[0],15,0);
  4973                        ;		k_put_char(4,4,FXOS_KEY_BYTE_1[0],15,0);
  4974                        ;		k_put_char(5,4,FXOS_KEY_BYTE_2[0],15,0);
  4975                        ;		
  4976                        ;		k_put_char(3,6,(FXOS_MOUSE_BYTE_0[0] & 0
                    x07)+65,15,0);
  4977                        ;		if((FXOS_MOUSE_BYTE_0[0] & 0x07) == 1)
  4978                        ;		{
  4979                        ;			k_put_char(4,6,FXOS_MOUSE_BYTE_X
                    _L[0],15,0);
  4980                        ;			k_put_char(5,6,FXOS_MOUSE_BYTE_Y
                    _L[0],15,0);
  4981                        ;			dummy2(pmx);
  Wed Aug 14 2019 13:34                                                Page 91


  4982                        ;			
  4983                        ;			
  4984                        ;			k_put_char(3,1,*pmx,15,0);	
                    							
  4985                        ;			
  4986                        ;			//k_put_char(4,1,dummy3(&my),15,
                    0);
  4987                        ;			//k_put_char(5,1,dummy3(&my),15,
                    0);
  4988                        ;		}
  4989                        ;		k_put_font(FXOS_KEY_BYTE_0[0],3,4,15);
  4990                        ;		k_put_font(FXOS_KEY_BYTE_1[0],4,4,15);
  4991                        ;		k_put_font(FXOS_KEY_BYTE_2[0],5,4,15);
  4992                        ;		
  4993                        ;		
  4994                        ;	   k_put_char(bx+1,by + 4,spinner[pos],15,0);	
                    	
  4995                        ;	   pos++;
  4996                        ;	   k_sleep(&delay);
  4997                        ;	   if(pos > 3)
  4998                        ;			pos = 0;
  4999                        ;
  5000                        ;		*/
  5001                        ;		asm cli;
  5002                        	.line	905
  5003                        	asmstart
  5004 00:15D6: 58           	cli
  5005                        	asmend
  5006                        ;	}	
  5007                        	.line	906
  5008 00:15D7: 82 FA FF     	brl	L10077
  5009                        ;		
  5010                        ;	
  5011                        ;	
  5012                        ;	VDMA_CONTROL_REG[0] = VDMA_CTRL_ENABLE;
  5013                        	.line	910
  5014 00:15DA: E2 20        	sep	#$20
  5015                        	longa	off
  5016 00:15DC: A9 01        	lda	#$1
  5017 00:15DE: 8F 00 04 AF  	sta	>11469824
  5018 00:15E2: C2 20        	rep	#$20
  5019                        	longa	on
  5020                        ;
  5021                        ;	*BM_START_ADDY_L = 0x00;
  5022                        	.line	912
  5023 00:15E4: E2 20        	sep	#$20
  5024                        	longa	off
  5025 00:15E6: A9 00        	lda	#$0
  5026 00:15E8: 8F 41 01 AF  	sta	>11469121
  5027 00:15EC: C2 20        	rep	#$20
  5028                        	longa	on
  5029                        ;	*BM_START_ADDY_M = 0x00;
  5030                        	.line	913
  5031 00:15EE: E2 20        	sep	#$20
  5032                        	longa	off
  5033 00:15F0: A9 00        	lda	#$0
  5034 00:15F2: 8F 42 01 AF  	sta	>11469122
  5035 00:15F6: C2 20        	rep	#$20
  Wed Aug 14 2019 13:34                                                Page 92


  5036                        	longa	on
  5037                        ;	*BM_START_ADDY_H = 0x00;
  5038                        	.line	914
  5039 00:15F8: E2 20        	sep	#$20
  5040                        	longa	off
  5041 00:15FA: A9 00        	lda	#$0
  5042 00:15FC: 8F 43 01 AF  	sta	>11469123
  5043 00:1600: C2 20        	rep	#$20
  5044                        	longa	on
  5045                        ;	*((char far*)0xAF1F80) = 0x02;
  5046                        	.line	915
  5047 00:1602: E2 20        	sep	#$20
  5048                        	longa	off
  5049 00:1604: A9 02        	lda	#$2
  5050 00:1606: 8F 80 1F AF  	sta	>11476864
  5051 00:160A: C2 20        	rep	#$20
  5052                        	longa	on
  5053                        ;	
  5054                        ;	*BM_X_SIZE_L = 0x80;
  5055                        	.line	917
  5056 00:160C: E2 20        	sep	#$20
  5057                        	longa	off
  5058 00:160E: A9 80        	lda	#$80
  5059 00:1610: 8F 44 01 AF  	sta	>11469124
  5060 00:1614: C2 20        	rep	#$20
  5061                        	longa	on
  5062                        ;	*BM_X_SIZE_H = 0x02;	
  5063                        	.line	918
  5064 00:1616: E2 20        	sep	#$20
  5065                        	longa	off
  5066 00:1618: A9 02        	lda	#$2
  5067 00:161A: 8F 45 01 AF  	sta	>11469125
  5068 00:161E: C2 20        	rep	#$20
  5069                        	longa	on
  5070                        ;	*BM_Y_SIZE_L = 0xE0;
  5071                        	.line	919
  5072 00:1620: E2 20        	sep	#$20
  5073                        	longa	off
  5074 00:1622: A9 E0        	lda	#$e0
  5075 00:1624: 8F 46 01 AF  	sta	>11469126
  5076 00:1628: C2 20        	rep	#$20
  5077                        	longa	on
  5078                        ;	*BM_Y_SIZE_H = 0x01;	
  5079                        	.line	920
  5080 00:162A: E2 20        	sep	#$20
  5081                        	longa	off
  5082 00:162C: A9 01        	lda	#$1
  5083 00:162E: 8F 47 01 AF  	sta	>11469127
  5084 00:1632: C2 20        	rep	#$20
  5085                        	longa	on
  5086                        ;	
  5087                        ;	setColors();
  5088                        	.line	922
  5089 00:1634: 22 xx xx xx  	jsl	~~setColors
  5090                        ;	
  5091                        ;	*FG_CHAR_LUT_PTR    = 0x00;
  5092                        	.line	924
  5093 00:1638: E2 20        	sep	#$20
  Wed Aug 14 2019 13:34                                                Page 93


  5094                        	longa	off
  5095 00:163A: A9 00        	lda	#$0
  5096 00:163C: 8F 40 1F AF  	sta	>11476800
  5097 00:1640: C2 20        	rep	#$20
  5098                        	longa	on
  5099                        ;	*BG_CHAR_LUT_PTR    = 0x00;
  5100                        	.line	925
  5101 00:1642: E2 20        	sep	#$20
  5102                        	longa	off
  5103 00:1644: A9 00        	lda	#$0
  5104 00:1646: 8F 80 1F AF  	sta	>11476864
  5105 00:164A: C2 20        	rep	#$20
  5106                        	longa	on
  5107                        ;	*BM_CONTROL_REG 	= 0x08;
  5108                        	.line	926
  5109 00:164C: E2 20        	sep	#$20
  5110                        	longa	off
  5111 00:164E: A9 08        	lda	#$8
  5112 00:1650: 8F 40 01 AF  	sta	>11469120
  5113 00:1654: C2 20        	rep	#$20
  5114                        	longa	on
  5115                        ;	*MASTER_CTRL_REG_L 	= 0x0C;
  5116                        	.line	927
  5117 00:1656: E2 20        	sep	#$20
  5118                        	longa	off
  5119 00:1658: A9 0C        	lda	#$c
  5120 00:165A: 8F 00 00 AF  	sta	>11468800
  5121 00:165E: C2 20        	rep	#$20
  5122                        	longa	on
  5123                        ;	
  5124                        ;/*
  5125                        ;	k_fill_bank(0,0);
  5126                        ;	k_fill_bank(1,0);
  5127                        ;	k_fill_bank(2,0);
  5128                        ;	k_fill_bank(3,0);
  5129                        ;	k_fill_bank(4,0);
  5130                        ;	k_fill_bank(5,0);
  5131                        ;
  5132                        ;*/
  5133                        ;	k_set_border_color(0xAA,0xAA,0xAA);
  5134                        	.line	938
  5135 00:1660: F4 AA 00     	pea	#<$aa
  5136 00:1663: F4 AA 00     	pea	#<$aa
  5137 00:1666: F4 AA 00     	pea	#<$aa
  5138 00:1669: 22 xx xx xx  	jsl	~~k_set_border_color
  5139                        ;	
  5140                        ;	
  5141                        ;	
  5142                        ;	k_disable_border();
  5143                        	.line	942
  5144 00:166D: 22 xx xx xx  	jsl	~~k_disable_border
  5145                        ;
  5146                        ;	//asm sei;	
  5147                        ;		for(i=0;i<480;i++)
  5148                        	.line	945
  5149 00:1671: 64 25        	stz	<L203+i_1
  5150                        L10081:
  5151                        ;		{
  Wed Aug 14 2019 13:34                                                Page 94


  5152                        	.line	946
  5153                        ;			k_fill_line(0,i,639,14);
  5154                        	.line	947
  5155 00:1673: F4 0E 00     	pea	#<$e
  5156 00:1676: F4 7F 02     	pea	#<$27f
  5157 00:1679: D4 25        	pei	<L203+i_1
  5158 00:167B: F4 00 00     	pea	#<$0
  5159 00:167E: 22 xx xx xx  	jsl	~~k_fill_line
  5160                        ;		}				
  5161                        	.line	948
  5162                        L10079:
  5163 00:1682: E6 25        	inc	<L203+i_1
  5164 00:1684: 38           	sec
  5165 00:1685: A5 25        	lda	<L203+i_1
  5166 00:1687: E9 E0 01     	sbc	#<$1e0
  5167 00:168A: 70 03        	bvs	L205
  5168 00:168C: 49 00 80     	eor	#$8000
  5169                        L205:
  5170 00:168F: 30 03        	bmi	L206
  5171 00:1691: 82 DF FF     	brl	L10081
  5172                        L206:
  5173                        L10080:
  5174                        ;
  5175                        ;		k_put_draw_text(2,1,"C256/FOENIX-DRAW L=
                    DRAW R=COLOR[ ] M=CLEAR",15,bcolor);
  5176                        	.line	950
  5177 00:1694: D4 2F        	pei	<L203+bcolor_1
  5178 00:1696: F4 0F 00     	pea	#<$f
  5179 00:1699: F4 xx xx     	pea	#^L201+69
  5180 00:169C: F4 xx xx     	pea	#<L201+69
  5181 00:169F: F4 01 00     	pea	#<$1
  5182 00:16A2: F4 02 00     	pea	#<$2
  5183 00:16A5: 22 xx xx xx  	jsl	~~k_put_draw_text
  5184                        ;		k_draw_font(32,34,1,dcolor,14,0xFF);
  5185                        	.line	951
  5186 00:16A9: F4 FF 00     	pea	#<$ff
  5187 00:16AC: F4 0E 00     	pea	#<$e
  5188 00:16AF: D4 2C        	pei	<L203+dcolor_1
  5189 00:16B1: F4 01 00     	pea	#<$1
  5190 00:16B4: F4 22 00     	pea	#<$22
  5191 00:16B7: F4 20 00     	pea	#<$20
  5192 00:16BA: 22 xx xx xx  	jsl	~~k_draw_font
  5193                        ;	//asm cli;
  5194                        ;	
  5195                        ;	
  5196                        ;	while(!bExit)
  5197                        	.line	955
  5198                        L10082:
  5199 00:16BE: A5 29        	lda	<L203+bExit_1
  5200 00:16C0: 29 FF 00     	and	#$ff
  5201 00:16C3: F0 03        	beq	L207
  5202 00:16C5: 82 85 02     	brl	L10083
  5203                        L207:
  5204                        ;	{
  5205                        	.line	956
  5206                        ;		mb = 0;
  5207                        	.line	957
  5208 00:16C8: 64 15        	stz	<L203+mb_1
  Wed Aug 14 2019 13:34                                                Page 95


  5209                        ;		asm WAI;
  5210                        	.line	958
  5211                        	asmstart
  5212 00:16CA: CB           	WAI
  5213                        	asmend
  5214                        ;		tick++;
  5215                        	.line	959
  5216 00:16CB: E6 5B        	inc	<L203+tick_1
  5217 00:16CD: D0 02        	bne	L208
  5218 00:16CF: E6 5D        	inc	<L203+tick_1+2
  5219                        L208:
  5220                        ;		//k_put_font(' ',3,4,0);
  5221                        ;		//k_put_font(FXOS_KEY_BYTE_0[0],3,4,15);
                    		
  5222                        ;		//k_put_font(' ',4,4,0);
  5223                        ;		//k_put_font(FXOS_KEY_BYTE_1[0],4,4,15);
  5224                        ;		//k_put_font(' ',5,4,0);
  5225                        ;		
  5226                        ;		//k_put_font((FXOS_MOUSE_BYTE_0[0] & 0x0
                    7)+65,3,6,15);
  5227                        ;		//asm sei;	
  5228                        ;		//FXOS_MOUSE_CTL[0] = 0x00;
  5229                        ;	
  5230                        ;		mb = (FXOS_MOUSE_BYTE_0[0] & 0x07);	
  5231                        	.line	970
  5232 00:16D1: AF 00 15 00  	lda	>5376
  5233 00:16D5: 29 FF 00     	and	#$ff
  5234 00:16D8: 85 01        	sta	<R0
  5235 00:16DA: B2 01        	lda	(<R0)
  5236 00:16DC: 29 07 00     	and	#<$7
  5237 00:16DF: 85 15        	sta	<L203+mb_1
  5238                        ;
  5239                        ;		if(FXOS_KEY_BYTE_2[0]!=lk)
  5240                        	.line	972
  5241                        ;		//if((tick - ctick) > 1000L)
  5242                        ;		{
  5243 00:16E1: AF 0A 15 00  	lda	>5386
  5244 00:16E5: 29 FF 00     	and	#$ff
  5245 00:16E8: 85 01        	sta	<R0
  5246 00:16EA: B2 01        	lda	(<R0)
  5247 00:16EC: C5 1F        	cmp	<L203+lk_1
  5248 00:16EE: D0 03        	bne	L209
  5249 00:16F0: 82 1A 00     	brl	L10084
  5250                        L209:
  5251                        	.line	974
  5252                        ;			lk = FXOS_KEY_BYTE_2[0];
  5253                        	.line	975
  5254 00:16F3: AF 0A 15 00  	lda	>5386
  5255 00:16F7: 29 FF 00     	and	#$ff
  5256 00:16FA: 85 01        	sta	<R0
  5257 00:16FC: B2 01        	lda	(<R0)
  5258 00:16FE: 85 1F        	sta	<L203+lk_1
  5259                        ;			mb = 0x08;
  5260                        	.line	976
  5261 00:1700: A9 08 00     	lda	#$8
  5262 00:1703: 85 15        	sta	<L203+mb_1
  5263                        ;			ctick = tick;
  5264                        	.line	977
  Wed Aug 14 2019 13:34                                                Page 96


  5265 00:1705: A5 5B        	lda	<L203+tick_1
  5266 00:1707: 85 5F        	sta	<L203+ctick_1
  5267 00:1709: A5 5D        	lda	<L203+tick_1+2
  5268 00:170B: 85 61        	sta	<L203+ctick_1+2
  5269                        ;		}
  5270                        	.line	978
  5271                        ;		
  5272                        ;
  5273                        ;
  5274                        ;		if(mb!=0)
  5275                        L10084:
  5276                        	.line	982
  5277                        ;		{
  5278 00:170D: A5 15        	lda	<L203+mb_1
  5279 00:170F: D0 03        	bne	L210
  5280 00:1711: 82 36 02     	brl	L10085
  5281                        L210:
  5282                        	.line	983
  5283                        ;			asm sei;	
  5284                        	.line	984
  5285                        	asmstart
  5286 00:1714: 78           	sei
  5287                        	asmend
  5288                        ;			if(mb == 1)
  5289                        	.line	985
  5290                        ;			{
  5291 00:1715: A5 15        	lda	<L203+mb_1
  5292 00:1717: C9 01 00     	cmp	#<$1
  5293 00:171A: F0 03        	beq	L211
  5294 00:171C: 82 4D 01     	brl	L10086
  5295                        L211:
  5296                        	.line	986
  5297                        ;				/*
  5298                        ;				k_put_font(' ',4,6,0);
  5299                        ;				k_put_font(FXOS_MOUSE_BY
                    TE_X_L[0],4,6,15);
  5300                        ;				k_put_font(' ',5,6,0);
  5301                        ;				k_put_font(FXOS_MOUSE_BY
                    TE_Y_L[0],5,6,15);
  5302                        ;				*/
  5303                        ;				//asm sei;
  5304                        ;				mx = k_get_mouse_pos_X()
                    ;
  5305                        	.line	994
  5306 00:171F: 22 xx xx xx  	jsl	~~k_get_mouse_pos_X
  5307 00:1723: 85 11        	sta	<L203+mx_1
  5308                        ;				my = k_get_mouse_pos_Y()
                    ;
  5309                        	.line	995
  5310 00:1725: 22 xx xx xx  	jsl	~~k_get_mouse_pos_Y
  5311 00:1729: 85 13        	sta	<L203+my_1
  5312                        ;				
  5313                        ;				
  5314                        ;				if(mx > 0 && mx < 639)
  5315                        	.line	998
  5316                        ;				{
  5317 00:172B: 38           	sec
  5318 00:172C: A9 00 00     	lda	#$0
  Wed Aug 14 2019 13:34                                                Page 97


  5319 00:172F: E5 11        	sbc	<L203+mx_1
  5320 00:1731: 70 03        	bvs	L212
  5321 00:1733: 49 00 80     	eor	#$8000
  5322                        L212:
  5323 00:1736: 10 03        	bpl	L213
  5324 00:1738: 82 5E 00     	brl	L10087
  5325                        L213:
  5326 00:173B: 38           	sec
  5327 00:173C: A5 11        	lda	<L203+mx_1
  5328 00:173E: E9 7F 02     	sbc	#<$27f
  5329 00:1741: 70 03        	bvs	L214
  5330 00:1743: 49 00 80     	eor	#$8000
  5331                        L214:
  5332 00:1746: 10 03        	bpl	L215
  5333 00:1748: 82 4E 00     	brl	L10087
  5334                        L215:
  5335                        	.line	999
  5336                        ;					if(my > 0 && my 
                    < 479)
  5337                        	.line	1000
  5338                        ;					{
  5339 00:174B: 38           	sec
  5340 00:174C: A9 00 00     	lda	#$0
  5341 00:174F: E5 13        	sbc	<L203+my_1
  5342 00:1751: 70 03        	bvs	L216
  5343 00:1753: 49 00 80     	eor	#$8000
  5344                        L216:
  5345 00:1756: 10 03        	bpl	L217
  5346 00:1758: 82 3E 00     	brl	L10088
  5347                        L217:
  5348 00:175B: 38           	sec
  5349 00:175C: A5 13        	lda	<L203+my_1
  5350 00:175E: E9 DF 01     	sbc	#<$1df
  5351 00:1761: 70 03        	bvs	L218
  5352 00:1763: 49 00 80     	eor	#$8000
  5353                        L218:
  5354 00:1766: 10 03        	bpl	L219
  5355 00:1768: 82 2E 00     	brl	L10088
  5356                        L219:
  5357                        	.line	1001
  5358                        ;
  5359                        ;						tx = mx;
  5360                        	.line	1003
  5361 00:176B: A5 11        	lda	<L203+mx_1
  5362 00:176D: 85 21        	sta	<L203+tx_1
  5363                        ;						ty = my;
  5364                        	.line	1004
  5365 00:176F: A5 13        	lda	<L203+my_1
  5366 00:1771: 85 23        	sta	<L203+ty_1
  5367                        ;
  5368                        ;						//px = m
                    y * 640L;
  5369                        ;						//px+=((
                    long)mx);
  5370                        ;						//((char
                     far *)BITMAP_BANK_0)[px] = (char)dcolor;
  5371                        ;						
  5372                        ;						//*(BITM
  Wed Aug 14 2019 13:34                                                Page 98


                    AP_BANK_0 + px) = (char)dcolor;
  5373                        ;						k_draw_p
                    ixel((long)mx,(long)my,dcolor);
  5374                        	.line	1011
  5375 00:1773: D4 2C        	pei	<L203+dcolor_1
  5376 00:1775: A0 00 00     	ldy	#$0
  5377 00:1778: A5 13        	lda	<L203+my_1
  5378 00:177A: 10 01        	bpl	L220
  5379 00:177C: 88           	dey
  5380                        L220:
  5381 00:177D: 85 01        	sta	<R0
  5382 00:177F: 84 03        	sty	<R0+2
  5383 00:1781: D4 03        	pei	<R0+2
  5384 00:1783: D4 01        	pei	<R0
  5385 00:1785: A0 00 00     	ldy	#$0
  5386 00:1788: A5 11        	lda	<L203+mx_1
  5387 00:178A: 10 01        	bpl	L221
  5388 00:178C: 88           	dey
  5389                        L221:
  5390 00:178D: 85 05        	sta	<R1
  5391 00:178F: 84 07        	sty	<R1+2
  5392 00:1791: D4 07        	pei	<R1+2
  5393 00:1793: D4 05        	pei	<R1
  5394 00:1795: 22 xx xx xx  	jsl	~~k_draw_pixel
  5395                        ;						//lx = m
                    x;
  5396                        ;						//ly = m
                    y;
  5397                        ;					}
  5398                        	.line	1014
  5399                        ;				}
  5400                        L10088:
  5401                        	.line	1015
  5402                        ;				//asm cli;
  5403                        ;				
  5404                        ;				if(debug && mx > 0 && mx
                     < 639)
  5405                        L10087:
  5406                        	.line	1018
  5407                        ;				{
  5408 00:1799: A5 51        	lda	<L203+debug_1
  5409 00:179B: D0 03        	bne	L222
  5410 00:179D: 82 61 00     	brl	L10089
  5411                        L222:
  5412 00:17A0: 38           	sec
  5413 00:17A1: A9 00 00     	lda	#$0
  5414 00:17A4: E5 11        	sbc	<L203+mx_1
  5415 00:17A6: 70 03        	bvs	L223
  5416 00:17A8: 49 00 80     	eor	#$8000
  5417                        L223:
  5418 00:17AB: 10 03        	bpl	L224
  5419 00:17AD: 82 51 00     	brl	L10089
  5420                        L224:
  5421 00:17B0: 38           	sec
  5422 00:17B1: A5 11        	lda	<L203+mx_1
  5423 00:17B3: E9 7F 02     	sbc	#<$27f
  5424 00:17B6: 70 03        	bvs	L225
  5425 00:17B8: 49 00 80     	eor	#$8000
  Wed Aug 14 2019 13:34                                                Page 99


  5426                        L225:
  5427 00:17BB: 10 03        	bpl	L226
  5428 00:17BD: 82 41 00     	brl	L10089
  5429                        L226:
  5430                        	.line	1019
  5431                        ;					k_itoa(mx,conver
                    t,10);
  5432                        	.line	1020
  5433 00:17C0: F4 0A 00     	pea	#<$a
  5434 00:17C3: F4 00 00     	pea	#0
  5435 00:17C6: 18           	clc
  5436 00:17C7: 7B           	tdc
  5437 00:17C8: 69 31 00     	adc	#<L203+convert_1
  5438 00:17CB: 48           	pha
  5439 00:17CC: D4 11        	pei	<L203+mx_1
  5440 00:17CE: 22 xx xx xx  	jsl	~~k_itoa
  5441                        ;					k_put_draw_text(
                    3,1,"     ",0,0);
  5442                        	.line	1021
  5443 00:17D2: F4 00 00     	pea	#<$0
  5444 00:17D5: F4 00 00     	pea	#<$0
  5445 00:17D8: F4 xx xx     	pea	#^L201+112
  5446 00:17DB: F4 xx xx     	pea	#<L201+112
  5447 00:17DE: F4 01 00     	pea	#<$1
  5448 00:17E1: F4 03 00     	pea	#<$3
  5449 00:17E4: 22 xx xx xx  	jsl	~~k_put_draw_text
  5450                        ;					k_put_draw_text(
                    3,1,convert,15,0);
  5451                        	.line	1022
  5452 00:17E8: F4 00 00     	pea	#<$0
  5453 00:17EB: F4 0F 00     	pea	#<$f
  5454 00:17EE: F4 00 00     	pea	#0
  5455 00:17F1: 18           	clc
  5456 00:17F2: 7B           	tdc
  5457 00:17F3: 69 31 00     	adc	#<L203+convert_1
  5458 00:17F6: 48           	pha
  5459 00:17F7: F4 01 00     	pea	#<$1
  5460 00:17FA: F4 03 00     	pea	#<$3
  5461 00:17FD: 22 xx xx xx  	jsl	~~k_put_draw_text
  5462                        ;				}
  5463                        	.line	1023
  5464                        ;				if(debug && my > 0 && my
                     < 479)
  5465                        L10089:
  5466                        	.line	1024
  5467                        ;				{
  5468 00:1801: A5 51        	lda	<L203+debug_1
  5469 00:1803: D0 03        	bne	L227
  5470 00:1805: 82 61 00     	brl	L10090
  5471                        L227:
  5472 00:1808: 38           	sec
  5473 00:1809: A9 00 00     	lda	#$0
  5474 00:180C: E5 13        	sbc	<L203+my_1
  5475 00:180E: 70 03        	bvs	L228
  5476 00:1810: 49 00 80     	eor	#$8000
  5477                        L228:
  5478 00:1813: 10 03        	bpl	L229
  5479 00:1815: 82 51 00     	brl	L10090
  Wed Aug 14 2019 13:34                                                Page 100


  5480                        L229:
  5481 00:1818: 38           	sec
  5482 00:1819: A5 13        	lda	<L203+my_1
  5483 00:181B: E9 DF 01     	sbc	#<$1df
  5484 00:181E: 70 03        	bvs	L230
  5485 00:1820: 49 00 80     	eor	#$8000
  5486                        L230:
  5487 00:1823: 10 03        	bpl	L231
  5488 00:1825: 82 41 00     	brl	L10090
  5489                        L231:
  5490                        	.line	1025
  5491                        ;					k_itoa(my,conver
                    t,10);
  5492                        	.line	1026
  5493 00:1828: F4 0A 00     	pea	#<$a
  5494 00:182B: F4 00 00     	pea	#0
  5495 00:182E: 18           	clc
  5496 00:182F: 7B           	tdc
  5497 00:1830: 69 31 00     	adc	#<L203+convert_1
  5498 00:1833: 48           	pha
  5499 00:1834: D4 13        	pei	<L203+my_1
  5500 00:1836: 22 xx xx xx  	jsl	~~k_itoa
  5501                        ;					k_put_draw_text(
                    3,2,"      ",0,0);
  5502                        	.line	1027
  5503 00:183A: F4 00 00     	pea	#<$0
  5504 00:183D: F4 00 00     	pea	#<$0
  5505 00:1840: F4 xx xx     	pea	#^L201+118
  5506 00:1843: F4 xx xx     	pea	#<L201+118
  5507 00:1846: F4 02 00     	pea	#<$2
  5508 00:1849: F4 03 00     	pea	#<$3
  5509 00:184C: 22 xx xx xx  	jsl	~~k_put_draw_text
  5510                        ;					k_put_draw_text(
                    3,2,convert,15,0);
  5511                        	.line	1028
  5512 00:1850: F4 00 00     	pea	#<$0
  5513 00:1853: F4 0F 00     	pea	#<$f
  5514 00:1856: F4 00 00     	pea	#0
  5515 00:1859: 18           	clc
  5516 00:185A: 7B           	tdc
  5517 00:185B: 69 31 00     	adc	#<L203+convert_1
  5518 00:185E: 48           	pha
  5519 00:185F: F4 02 00     	pea	#<$2
  5520 00:1862: F4 03 00     	pea	#<$3
  5521 00:1865: 22 xx xx xx  	jsl	~~k_put_draw_text
  5522                        ;				}
  5523                        	.line	1029
  5524                        ;			}
  5525                        L10090:
  5526                        	.line	1030
  5527                        ;			else if(mb == 2)
  5528 00:1869: 82 DD 00     	brl	L10091
  5529                        L10086:
  5530                        	.line	1031
  5531                        ;			{			
  5532 00:186C: A5 15        	lda	<L203+mb_1
  5533 00:186E: C9 02 00     	cmp	#<$2
  5534 00:1871: F0 03        	beq	L232
  Wed Aug 14 2019 13:34                                                Page 101


  5535 00:1873: 82 35 00     	brl	L10092
  5536                        L232:
  5537                        	.line	1032
  5538                        ;				//asm sei;
  5539                        ;				dcolor++;
  5540                        	.line	1034
  5541 00:1876: E2 20        	sep	#$20
  5542                        	longa	off
  5543 00:1878: E6 2C        	inc	<L203+dcolor_1
  5544 00:187A: C2 20        	rep	#$20
  5545                        	longa	on
  5546                        ;				if(dcolor > 0x0F)
  5547                        	.line	1035
  5548                        ;					dcolor = 0x01;
  5549 00:187C: E2 20        	sep	#$20
  5550                        	longa	off
  5551 00:187E: A9 0F        	lda	#$f
  5552 00:1880: C5 2C        	cmp	<L203+dcolor_1
  5553 00:1882: C2 20        	rep	#$20
  5554                        	longa	on
  5555 00:1884: 90 03        	bcc	L233
  5556 00:1886: 82 08 00     	brl	L10093
  5557                        L233:
  5558                        	.line	1036
  5559 00:1889: E2 20        	sep	#$20
  5560                        	longa	off
  5561 00:188B: A9 01        	lda	#$1
  5562 00:188D: 85 2C        	sta	<L203+dcolor_1
  5563 00:188F: C2 20        	rep	#$20
  5564                        	longa	on
  5565                        ;				
  5566                        ;				//k_put_font(' ',0,1,dco
                    lor);
  5567                        ;				//k_draw_font(32,0,1,dco
                    lor,14,0xFF);
  5568                        ;				k_draw_font(32,34,1,dcol
                    or,14,0xFF);
  5569                        L10093:
  5570                        	.line	1040
  5571 00:1891: F4 FF 00     	pea	#<$ff
  5572 00:1894: F4 0E 00     	pea	#<$e
  5573 00:1897: D4 2C        	pei	<L203+dcolor_1
  5574 00:1899: F4 01 00     	pea	#<$1
  5575 00:189C: F4 22 00     	pea	#<$22
  5576 00:189F: F4 20 00     	pea	#<$20
  5577 00:18A2: 22 xx xx xx  	jsl	~~k_draw_font
  5578                        ;				
  5579                        ;				mb = 0;
  5580                        	.line	1042
  5581 00:18A6: 64 15        	stz	<L203+mb_1
  5582                        ;				//asm cli;
  5583                        ;			}
  5584                        	.line	1044
  5585                        ;			else if(mb == 4)
  5586 00:18A8: 82 9E 00     	brl	L10094
  5587                        L10092:
  5588                        	.line	1045
  5589                        ;			{
  Wed Aug 14 2019 13:34                                                Page 102


  5590 00:18AB: A5 15        	lda	<L203+mb_1
  5591 00:18AD: C9 04 00     	cmp	#<$4
  5592 00:18B0: F0 03        	beq	L234
  5593 00:18B2: 82 50 00     	brl	L10095
  5594                        L234:
  5595                        	.line	1046
  5596                        ;				//asm sei;
  5597                        ;				k_put_draw_text(2,1,"C25
                    6/FOENIX-DRAW L=DRAW R=COLOR[ ] M=CLEAR",15,bcolor);
  5598                        	.line	1048
  5599 00:18B5: D4 2F        	pei	<L203+bcolor_1
  5600 00:18B7: F4 0F 00     	pea	#<$f
  5601 00:18BA: F4 xx xx     	pea	#^L201+125
  5602 00:18BD: F4 xx xx     	pea	#<L201+125
  5603 00:18C0: F4 01 00     	pea	#<$1
  5604 00:18C3: F4 02 00     	pea	#<$2
  5605 00:18C6: 22 xx xx xx  	jsl	~~k_put_draw_text
  5606                        ;				k_draw_font(32,34,1,dcol
                    or,14,0xFF);
  5607                        	.line	1049
  5608 00:18CA: F4 FF 00     	pea	#<$ff
  5609 00:18CD: F4 0E 00     	pea	#<$e
  5610 00:18D0: D4 2C        	pei	<L203+dcolor_1
  5611 00:18D2: F4 01 00     	pea	#<$1
  5612 00:18D5: F4 22 00     	pea	#<$22
  5613 00:18D8: F4 20 00     	pea	#<$20
  5614 00:18DB: 22 xx xx xx  	jsl	~~k_draw_font
  5615                        ;				for(i=0;i<480;i++)
  5616                        	.line	1050
  5617 00:18DF: 64 25        	stz	<L203+i_1
  5618                        L10098:
  5619                        ;				{
  5620                        	.line	1051
  5621                        ;					k_fill_line(0,i,
                    639,14);
  5622                        	.line	1052
  5623 00:18E1: F4 0E 00     	pea	#<$e
  5624 00:18E4: F4 7F 02     	pea	#<$27f
  5625 00:18E7: D4 25        	pei	<L203+i_1
  5626 00:18E9: F4 00 00     	pea	#<$0
  5627 00:18EC: 22 xx xx xx  	jsl	~~k_fill_line
  5628                        ;				}			
                    	
  5629                        	.line	1053
  5630                        L10096:
  5631 00:18F0: E6 25        	inc	<L203+i_1
  5632 00:18F2: 38           	sec
  5633 00:18F3: A5 25        	lda	<L203+i_1
  5634 00:18F5: E9 E0 01     	sbc	#<$1e0
  5635 00:18F8: 70 03        	bvs	L235
  5636 00:18FA: 49 00 80     	eor	#$8000
  5637                        L235:
  5638 00:18FD: 30 03        	bmi	L236
  5639 00:18FF: 82 DF FF     	brl	L10098
  5640                        L236:
  5641                        L10097:
  5642                        ;				//asm cli;
  5643                        ;			}
  Wed Aug 14 2019 13:34                                                Page 103


  5644                        	.line	1055
  5645                        ;			else if(mb == 8)
  5646 00:1902: 82 44 00     	brl	L10099
  5647                        L10095:
  5648                        	.line	1056
  5649                        ;			{
  5650 00:1905: A5 15        	lda	<L203+mb_1
  5651 00:1907: C9 08 00     	cmp	#<$8
  5652 00:190A: F0 03        	beq	L237
  5653 00:190C: 82 3A 00     	brl	L10100
  5654                        L237:
  5655                        	.line	1057
  5656                        ;				if(tx > -1 && ty > -1)
  5657                        	.line	1058
  5658                        ;				{
  5659 00:190F: 38           	sec
  5660 00:1910: A9 FF FF     	lda	#$ffff
  5661 00:1913: E5 21        	sbc	<L203+tx_1
  5662 00:1915: 70 03        	bvs	L238
  5663 00:1917: 49 00 80     	eor	#$8000
  5664                        L238:
  5665 00:191A: 10 03        	bpl	L239
  5666 00:191C: 82 2A 00     	brl	L10101
  5667                        L239:
  5668 00:191F: 38           	sec
  5669 00:1920: A9 FF FF     	lda	#$ffff
  5670 00:1923: E5 23        	sbc	<L203+ty_1
  5671 00:1925: 70 03        	bvs	L240
  5672 00:1927: 49 00 80     	eor	#$8000
  5673                        L240:
  5674 00:192A: 10 03        	bpl	L241
  5675 00:192C: 82 1A 00     	brl	L10101
  5676                        L241:
  5677                        	.line	1059
  5678                        ;					k_draw_font_at_p
                    oint(lk,tx,ty,dcolor,14,0x00);	
  5679                        	.line	1060
  5680 00:192F: F4 00 00     	pea	#<$0
  5681 00:1932: F4 0E 00     	pea	#<$e
  5682 00:1935: D4 2C        	pei	<L203+dcolor_1
  5683 00:1937: D4 23        	pei	<L203+ty_1
  5684 00:1939: D4 21        	pei	<L203+tx_1
  5685 00:193B: D4 1F        	pei	<L203+lk_1
  5686 00:193D: 22 xx xx xx  	jsl	~~k_draw_font_at_point
  5687                        ;					tx+=(FONTW);
  5688                        	.line	1061
  5689 00:1941: 18           	clc
  5690 00:1942: A9 08 00     	lda	#$8
  5691 00:1945: 65 21        	adc	<L203+tx_1
  5692 00:1947: 85 21        	sta	<L203+tx_1
  5693                        ;					//lk = -1;
  5694                        ;				}
  5695                        	.line	1063
  5696                        ;			}
  5697                        L10101:
  5698                        	.line	1064
  5699                        ;			asm cli;
  5700                        L10100:
  Wed Aug 14 2019 13:34                                                Page 104


  5701                        L10099:
  5702                        L10094:
  5703                        L10091:
  5704                        	.line	1065
  5705                        	asmstart
  5706 00:1949: 58           	cli
  5707                        	asmend
  5708                        ;		}
  5709                        	.line	1066
  5710                        ;		//asm cli;
  5711                        ;		
  5712                        ;		
  5713                        ;	}
  5714                        L10085:
  5715                        	.line	1070
  5716 00:194A: 82 71 FD     	brl	L10082
  5717                        L10083:
  5718                        ;	
  5719                        ;	return;
  5720                        	.line	1072
  5721                        L242:
  5722 00:194D: 2B           	pld
  5723 00:194E: 3B           	tsc
  5724 00:194F: 18           	clc
  5725 00:1950: 69 62 00     	adc	#L202
  5726 00:1953: 1B           	tcs
  5727 00:1954: 6B           	rtl
  5728                        ;}
  5729                        	.line	1073
  5730                        	.endblock	1073
  5731             00000062   L202	equ	98
  5732             00000009   L203	equ	9
  5733                        	ends
  5734                        	efunc
  5735                        	.endfunc	1073,9,98
  5736                        	.line	1073
  5737                        	data
  5738                        L201:
  5739 00:0161: 20 20 20 20  	db	$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,
                    $20,$20,$20,$20,$20
       00:0165: 20 20 20 20 
       00:0169: 20 20 20 20 
       00:016D: 20 20 20 
  5740 00:0170: 20 00 59 3A  	db	$20,$00,$59,$3A,$00,$42,$3A,$00,$4B,$3A,
                    $00,$4A,$3A,$00,$4D
       00:0174: 00 42 3A 00 
       00:0178: 4B 3A 00 4A 
       00:017C: 3A 00 4D 
  5741 00:017F: 3A 00 6B 5F  	db	$3A,$00,$6B,$5F,$74,$65,$73,$74,$5F,$62,
                    $69,$74,$6D,$61,$70
       00:0183: 74 65 73 74 
       00:0187: 5F 62 69 74 
       00:018B: 6D 61 70 
  5742 00:018E: 5F 64 72 61  	db	$5F,$64,$72,$61,$77,$69,$6E,$67,$00,$43,
                    $4F,$4E,$53,$4F,$4C
       00:0192: 77 69 6E 67 
       00:0196: 00 43 4F 4E 
       00:019A: 53 4F 4C 
  Wed Aug 14 2019 13:34                                                Page 105


  5743 00:019D: 45 20 57 49  	db	$45,$20,$57,$49,$4E,$44,$4F,$57,$00,$43,
                    $32,$35,$36,$2F,$46
       00:01A1: 4E 44 4F 57 
       00:01A5: 00 43 32 35 
       00:01A9: 36 2F 46 
  5744 00:01AC: 4F 45 4E 49  	db	$4F,$45,$4E,$49,$58,$2D,$44,$52,$41,$57,
                    $20,$4C,$3D,$44,$52
       00:01B0: 58 2D 44 52 
       00:01B4: 41 57 20 4C 
       00:01B8: 3D 44 52 
  5745 00:01BB: 41 57 20 52  	db	$41,$57,$20,$52,$3D,$43,$4F,$4C,$4F,$52,
                    $5B,$20,$5D,$20,$4D
       00:01BF: 3D 43 4F 4C 
       00:01C3: 4F 52 5B 20 
       00:01C7: 5D 20 4D 
  5746 00:01CA: 3D 43 4C 45  	db	$3D,$43,$4C,$45,$41,$52,$00,$20,$20,$20,
                    $20,$20,$00,$20,$20
       00:01CE: 41 52 00 20 
       00:01D2: 20 20 20 20 
       00:01D6: 00 20 20 
  5747 00:01D9: 20 20 20 20  	db	$20,$20,$20,$20,$00,$43,$32,$35,$36,$2F,
                    $46,$4F,$45,$4E,$49
       00:01DD: 00 43 32 35 
       00:01E1: 36 2F 46 4F 
       00:01E5: 45 4E 49 
  5748 00:01E8: 58 2D 44 52  	db	$58,$2D,$44,$52,$41,$57,$20,$4C,$3D,$44,
                    $52,$41,$57,$20,$52
       00:01EC: 41 57 20 4C 
       00:01F0: 3D 44 52 41 
       00:01F4: 57 20 52 
  5749 00:01F7: 3D 43 4F 4C  	db	$3D,$43,$4F,$4C,$4F,$52,$5B,$20,$5D,$20,
                    $4D,$3D,$43,$4C,$45
       00:01FB: 4F 52 5B 20 
       00:01FF: 5D 20 4D 3D 
       00:0203: 43 4C 45 
  5750 00:0206: 41 52 00     	db	$41,$52,$00
  5751 00:0209:              	ends
  5752                        ;
  5753                        ;
  5754                        ;
  5755                        	.line	1075
  5756                        	.file	"G:\devprojects\c256Foenix\FXOSWorkspace
                    \FXOSv1\src\basicdrawing.c",803
  5757                        	xref	~~k_window_draw
  5758                        	xref	~~init_sd_card
  5759                        	xref	~~k_get_mouse_pos_Y
  5760                        	xref	~~k_get_mouse_pos_X
  5761                        	xref	~~k_vdma_fill_rect
  5762                        	xref	~~k_put_wingadget_point
  5763                        	xref	~~k_get_font_metrics
  5764                        	xref	~~k_put_draw_text
  5765                        	xref	~~k_draw_text_point
  5766                        	xref	~~k_fill_line
  5767                        	xref	~~k_draw_pixel
  5768                        	xref	~~setColors
  5769                        	xref	~~k_set_border_color
  5770                        	xref	~~k_disable_border
  5771                        	xref	~~k_put_string
  Wed Aug 14 2019 13:34                                                Page 106


  5772                        	xref	~~k_print
  5773                        	xref	~~k_vdraw_ui_menu
  5774                        	xref	~~k_itoa
  5775                        	xref	~~k_debug_string
  5776                        	xref	~~strupr
  5777                        	xref	~~strcpy
  5778                        	xref	~~memset
  5779                        	xref	~~malloc
  5780                        	xref	~~free
  5781                        	udata
  5782                        	xdef	~~hitList
  5783                        ~~hitList
  5784 00:0000:              	ds	24
  5785 00:0018:              	ends
  5786                        	udata
  5787                        	xdef	~~clickList
  5788                        ~~clickList
  5789 00:0018:              	ds	60
  5790 00:0054:              	ends
  5791                        	xref	~~_k_window_index
  5792                        	xref	~~fontImg
  5793                        	xref	~~fontSpace
  5794                        	xref	~~characterROMMapping
  5795                        	xref	~~_k_window_list
  5796                        	.sym	~~k_test_bitmap_drawing_sd,~~k_test_bitm
                    ap_drawing_sd,65,2,0
  5797                        	.sym	~~k_point_in_list,~~k_point_in_list,69,2
                    ,0
  5798                        	.sym	~~k_create_menu,~~k_create_menu,1098,2,3
                    2,12
  5799                        	.sym	~~k_is_menu_hit,~~k_is_menu_hit,69,2,0
  5800                        	.sym	~~k_window_draw,~~k_window_draw,69,18,0
  5801                        	.sym	~~k_create_text_window,~~k_create_text_w
                    indow,65,2,0
  5802                        	.sym	~~k_sleep,~~k_sleep,65,2,0
  5803                        	.sym	~~hitList,~~hitList,1130,2,32,11,6
  5804                        	.sym	~~clickList,~~clickList,106,2,0,11,6
  5805                        	.sym	~~_k_window_index,~~_k_window_index,5,18
                    ,16
  5806                        	.sym	~~fontImg,~~fontImg,878,18,0,0,64
  5807                        	.sym	~~fontSpace,~~fontSpace,110,18,0,0
  5808                        	.sym	~~characterROMMapping,~~characterROMMapp
                    ing,101,18,0,0
  5809                        	.sym	~~k_sd_dir,~~k_sd_dir,65,2,0
  5810                        	.sym	~~k_sd_present,~~k_sd_present,65,2,0
  5811                        	.sym	~~k_sd_init,~~k_sd_init,65,2,0
  5812                        	.sym	~~k_point_in_list_depth,~~k_point_in_lis
                    t_depth,69,2,0
  5813                        	.sym	~~k_free_context_menu,~~k_free_context_m
                    enu,65,2,0
  5814                        	.sym	~~k_create_context_menu,~~k_create_conte
                    xt_menu,1098,2,32,12
  5815                        	.sym	~~k_test_bitmap_drawing_org,~~k_test_bit
                    map_drawing_org,65,2,0
  5816                        	.sym	~~k_draw_font_at_point,~~k_draw_font_at_
                    point,65,2,0
  5817                        	.sym	~~k_draw_font,~~k_draw_font,65,2,0
  5818                        	.sym	~~k_test_bitmap_drawing,~~k_test_bitmap_
  Wed Aug 14 2019 13:34                                                Page 107


                    drawing,65,2,0
  5819                        	.sym	~~_k_window_list,~~_k_window_list,106,18
                    ,0,8,0
  5820                        	.sym	~~init_sd_card,~~init_sd_card,65,18,0
  5821                        	.sym	~~k_get_mouse_pos_Y,~~k_get_mouse_pos_Y,
                    69,18,0
  5822                        	.sym	~~k_get_mouse_pos_X,~~k_get_mouse_pos_X,
                    69,18,0
  5823                        	.sym	~~k_vdma_fill_rect,~~k_vdma_fill_rect,65
                    ,18,0
  5824                        	.sym	~~k_put_wingadget_point,~~k_put_wingadge
                    t_point,69,18,0
  5825                        	.sym	~~k_get_font_metrics,~~k_get_font_metric
                    s,69,18,0
  5826                        	.sym	~~k_put_draw_text,~~k_put_draw_text,69,1
                    8,0
  5827                        	.sym	~~k_draw_text_point,~~k_draw_text_point,
                    69,18,0
  5828                        	.sym	~~k_fill_line,~~k_fill_line,65,18,0
  5829                        	.sym	~~k_draw_pixel,~~k_draw_pixel,65,18,0
  5830                        	.sym	~~setColors,~~setColors,65,18,0
  5831                        	.sym	~~k_set_border_color,~~k_set_border_colo
                    r,65,18,0
  5832                        	.sym	~~k_disable_border,~~k_disable_border,65
                    ,18,0
  5833                        	.sym	~~k_put_string,~~k_put_string,69,18,0
  5834                        	.sym	~~k_print,~~k_print,65,18,0
  5835                        	.sym	~~k_vdraw_ui_menu,~~k_vdraw_ui_menu,1098
                    ,18,32,12
  5836                        	.sym	~~k_itoa,~~k_itoa,1102,18,32
  5837                        	.sym	task_type,0,641,14,32
  5838                        	.sym	C256Task,0,641,14,32
  5839                        	.sym	PINT_REGS,0,138,14,32,18
  5840                        	.sym	INT_REGS,0,10,14,104,18
  5841                        	.sym	TASK_STACK,0,10,14,32,17
  5842                        	.sym	TASK,0,10,14,48,16
  5843                        	.sym	PIRQDATA,0,138,14,32,15
  5844                        	.sym	IRQDATA,0,10,14,48,15
  5845                        	.sym	PSUBMENULIST,0,138,14,32,14
  5846                        	.sym	SUBMENULIST,0,10,14,40,14
  5847                        	.sym	HSUBMENU,0,7,14,32
  5848                        	.sym	PSUBMENU,0,138,14,32,13
  5849                        	.sym	SUBMENU,0,10,14,64,13
  5850                        	.sym	MenuAction,0,641,14,32
  5851                        	.sym	HMENU,0,7,14,32
  5852                        	.sym	PMENU,0,138,14,32,12
  5853                        	.sym	MENU,0,10,14,168,12
  5854                        	.sym	HCLICKABLE,0,7,14,32
  5855                        	.sym	PCLICKABLE,0,138,14,32,11
  5856                        	.sym	CLICKABLE,0,10,14,80,11
  5857                        	.sym	HTEXTBOX,0,7,14,32
  5858                        	.sym	PTEXTBOX,0,138,14,32,10
  5859                        	.sym	TEXTBOX,0,10,14,112,10
  5860                        	.sym	FONTMETRIC,0,10,14,32,9
  5861                        	.sym	TITLE,0,142,14,32
  5862                        	.sym	PHANDLE,0,133,14,32
  5863                        	.sym	HANDLE,0,5,14,16
  5864                        	.sym	Window,0,10,14,160,8
  Wed Aug 14 2019 13:34                                                Page 108


  5865                        	.sym	PRECT,0,138,14,32,7
  5866                        	.sym	RECT,0,10,14,64,7
  5867                        	.sym	~~k_debug_string,~~k_debug_string,65,18,
                    0
  5868                        	.sym	PFXENVIRONMENT,0,138,14,32,6
  5869                        	.sym	FXENVIRONMENT,0,10,14,96,6
  5870                        	.sym	PFXZERPOPAGE,0,138,14,32,5
  5871                        	.sym	FXZERPOPAGE,0,10,14,112,5
  5872                        	.sym	BOOL,0,14,14,8
  5873                        	.sym	ULONG,0,18,14,32
  5874                        	.sym	LONG,0,7,14,32
  5875                        	.sym	WORD,0,5,14,16
  5876                        	.sym	UCHAR,0,14,14,8
  5877                        	.sym	CHAR,0,14,14,8
  5878                        	.sym	BYTE,0,14,14,8
  5879                        	.sym	~~strupr,~~strupr,1102,18,32
  5880                        	.sym	~~strcpy,~~strcpy,1102,18,32
  5881                        	.sym	~~memset,~~memset,1089,18,32
  5882                        	.sym	Boolean_T,0,5,14,16
  5883                        	.sym	~~malloc,~~malloc,1089,18,32
  5884                        	.sym	~~free,~~free,65,18,0
  5885                        	.sym	ldiv_t,0,10,14,64,2
  5886                        	.sym	div_t,0,10,14,32,1
  5887                        	.sym	wctype_t,0,16,14,16
  5888                        	.sym	wint_t,0,16,14,16
  5889                        	.sym	wchar_t,0,14,14,8
  5890                        	.sym	ptrdiff_t,0,7,14,32
  5891                        	.sym	size_t,0,16,14,16
  5892                        	end


      Lines assembled: 5892
      Errors: 0
